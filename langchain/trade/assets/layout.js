const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/loadCognitoIdentity.js","assets/index2.js","assets/loadSts.js","assets/index.js"])))=>i.map(i=>d[i]);
var yW=Object.defineProperty;var vW=(r,e,t)=>e in r?yW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ee=(r,e,t)=>vW(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();const LV="1jQTlXWom-pXvyP9zuTcbdluyvpb43hu2h7anxhF5qlQ",FV="A2:J",kV="AIzaSyC211F_ub1nAGr2Xv-wJGeulMg4nPzG1yE",T1=`
  You are an expert assistant answering questions related to the data pulled from a GitHub repository.
  Use the following context to answer the query:

  Context:
  {context}

  Query:
  {query}

  Provide a detailed, accurate response based on the context provided.
  If you're unsure about something, please say so.
  If the question is unrelated to the context, please say that the question is unrelated or something
  along the lines of that
  
  Answer:
`,wW=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Kd(r){return typeof r=="string"&&wW.test(r)}function SW(r){if(!Kd(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var kt=[];for(var Lb=0;Lb<256;++Lb)kt.push((Lb+256).toString(16).slice(1));function VV(r,e=0){return(kt[r[e+0]]+kt[r[e+1]]+kt[r[e+2]]+kt[r[e+3]]+"-"+kt[r[e+4]]+kt[r[e+5]]+"-"+kt[r[e+6]]+kt[r[e+7]]+"-"+kt[r[e+8]]+kt[r[e+9]]+"-"+kt[r[e+10]]+kt[r[e+11]]+kt[r[e+12]]+kt[r[e+13]]+kt[r[e+14]]+kt[r[e+15]]).toLowerCase()}var Vm,OW=new Uint8Array(16);function EW(){if(!Vm&&(Vm=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Vm))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Vm(OW)}function RW(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var CW="6ba7b810-9dad-11d1-80b4-00c04fd430c8",PW="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function jW(r,e,t){function n(i,a,o,s){var u;if(typeof i=="string"&&(i=RW(i)),typeof a=="string"&&(a=SW(a)),((u=a)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(a),l.set(i,a.length),l=t(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){s=s||0;for(var c=0;c<16;++c)o[s+c]=l[c];return o}return VV(l)}try{n.name=r}catch{}return n.DNS=CW,n.URL=PW,n}var TW=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const A1={randomUUID:TW};function Zt(r,e,t){if(A1.randomUUID&&!r)return A1.randomUUID();r=r||{};var n=r.random||(r.rng||EW)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,VV(n)}function AW(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function Fb(r,e){return r<<e|r>>>32-e}function MW(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var a=r.length/4+2,o=Math.ceil(a/16),s=new Array(o),u=0;u<o;++u){for(var l=new Uint32Array(16),c=0;c<16;++c)l[c]=r[u*64+c*4]<<24|r[u*64+c*4+1]<<16|r[u*64+c*4+2]<<8|r[u*64+c*4+3];s[u]=l}s[o-1][14]=(r.length-1)*8/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=(r.length-1)*8&4294967295;for(var d=0;d<o;++d){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=s[d][f];for(var m=16;m<80;++m)h[m]=Fb(h[m-3]^h[m-8]^h[m-14]^h[m-16],1);for(var p=t[0],g=t[1],b=t[2],_=t[3],y=t[4],v=0;v<80;++v){var w=Math.floor(v/20),S=Fb(p,5)+AW(w,g,b,_)+y+e[w]+h[v]>>>0;y=_,_=b,b=Fb(g,30)>>>0,g=p,p=S}t[0]=t[0]+p>>>0,t[1]=t[1]+g>>>0,t[2]=t[2]+b>>>0,t[3]=t[3]+_>>>0,t[4]=t[4]+y>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var M1=jW("v5",80,MW),ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pm(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function pd(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var kb,I1;function IW(){return I1||(I1=1,kb=function(r,e){if(typeof r!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,r.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}),kb}var xW=IW();const DW=pm(xW);var Hm={exports:{}},x1;function $W(){if(x1)return Hm.exports;x1=1;const r=/[\p{Lu}]/u,e=/[\p{Ll}]/u,t=/^[\p{Lu}](?![\p{Lu}])/gu,n=/([\p{Alpha}\p{N}_]|$)/u,i=/[_.\- ]+/,a=new RegExp("^"+i.source),o=new RegExp(i.source+n.source,"gu"),s=new RegExp("\\d+"+n.source,"gu"),u=(h,f,m)=>{let p=!1,g=!1,b=!1;for(let _=0;_<h.length;_++){const y=h[_];p&&r.test(y)?(h=h.slice(0,_)+"-"+h.slice(_),p=!1,b=g,g=!0,_++):g&&b&&e.test(y)?(h=h.slice(0,_-1)+"-"+h.slice(_-1),b=g,g=!1,p=!0):(p=f(y)===y&&m(y)!==y,b=g,g=m(y)===y&&f(y)!==y)}return h},l=(h,f)=>(t.lastIndex=0,h.replace(t,m=>f(m))),c=(h,f)=>(o.lastIndex=0,s.lastIndex=0,h.replace(o,(m,p)=>f(p)).replace(s,m=>f(m))),d=(h,f)=>{if(!(typeof h=="string"||Array.isArray(h)))throw new TypeError("Expected the input to be `string | string[]`");if(f={pascalCase:!1,preserveConsecutiveUppercase:!1,...f},Array.isArray(h)?h=h.map(b=>b.trim()).filter(b=>b.length).join("-"):h=h.trim(),h.length===0)return"";const m=f.locale===!1?b=>b.toLowerCase():b=>b.toLocaleLowerCase(f.locale),p=f.locale===!1?b=>b.toUpperCase():b=>b.toLocaleUpperCase(f.locale);return h.length===1?f.pascalCase?p(h):m(h):(h!==m(h)&&(h=u(h,m,p)),h=h.replace(a,""),f.preserveConsecutiveUppercase?h=l(h,m):h=m(h),f.pascalCase&&(h=p(h.charAt(0))+h.slice(1)),c(h,p))};return Hm.exports=d,Hm.exports.default=d,Hm.exports}$W();function NW(r,e){return(e==null?void 0:e[r])||DW(r)}function qW(r,e,t){const n={};for(const i in r)Object.hasOwn(r,i)&&(n[e(i,t)]=r[i]);return n}function D1(r){return Array.isArray(r)?[...r]:{...r}}function BW(r,e){const t=D1(r);for(const[n,i]of Object.entries(e)){const[a,...o]=n.split(".").reverse();let s=t;for(const u of o.reverse()){if(s[u]===void 0)break;s[u]=D1(s[u]),s=s[u]}s[a]!==void 0&&(s[a]={lc:1,type:"secret",id:[i]})}return t}function HV(r){const e=Object.getPrototypeOf(r);return typeof r.lc_name=="function"&&(typeof e.lc_name!="function"||r.lc_name()!==e.lc_name())?r.lc_name():r.name}class jl{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,HV(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...t){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([n])=>{var i;return(i=this.lc_serializable_keys)==null?void 0:i.includes(n)})):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof jl||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},n=Object.keys(this.lc_kwargs).reduce((i,a)=>(i[a]=a in this?this[a]:this.lc_kwargs[a],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(t,Reflect.get(i,"lc_secrets",this)),Object.assign(n,Reflect.get(i,"lc_attributes",this));return Object.keys(t).forEach(i=>{let a=this,o=n;const[s,...u]=i.split(".").reverse();for(const l of u.reverse()){if(!(l in a)||a[l]===void 0)return;(!(l in o)||o[l]===void 0)&&(typeof a[l]=="object"&&a[l]!=null?o[l]={}:Array.isArray(a[l])&&(o[l]=[])),a=a[l],o=o[l]}s in a&&a[s]!==void 0&&(o[s]=o[s]||a[s])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:qW(Object.keys(t).length?BW(n,t):n,NW,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}var Vb={};const UW=()=>typeof window<"u"&&typeof window.document<"u",zW=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",LW=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),RC=()=>typeof Deno<"u",FW=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!RC(),kW=()=>{let r;return UW()?r="browser":FW()?r="node":zW()?r="webworker":LW()?r="jsdom":RC()?r="deno":r="other",r};let Hb;function VW(){return Hb===void 0&&(Hb={library:"langchain-js",runtime:kW()}),Hb}function ot(r){try{return typeof process<"u"?Vb==null?void 0:Vb[r]:RC()?Deno==null?void 0:Deno.env.get(r):void 0}catch{return}}class HW{}function KV(r){return"lc_prefer_streaming"in r&&r.lc_prefer_streaming}class hm extends HW{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,HV(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:ot("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return jl.prototype.toJSON.call(this)}toJSONNotImplemented(){return jl.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class t extends hm{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Zt()}),Object.assign(this,e)}}return new t}}const KW=r=>{const e=r;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"};var qg={exports:{}};qg.exports;var $1;function WW(){return $1||($1=1,function(r){const t=(a=0)=>o=>`\x1B[${38+a};5;${o}m`,n=(a=0)=>(o,s,u)=>`\x1B[${38+a};2;${o};${s};${u}m`;function i(){const a=new Map,o={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};o.color.gray=o.color.blackBright,o.bgColor.bgGray=o.bgColor.bgBlackBright,o.color.grey=o.color.blackBright,o.bgColor.bgGrey=o.bgColor.bgBlackBright;for(const[s,u]of Object.entries(o)){for(const[l,c]of Object.entries(u))o[l]={open:`\x1B[${c[0]}m`,close:`\x1B[${c[1]}m`},u[l]=o[l],a.set(c[0],c[1]);Object.defineProperty(o,s,{value:u,enumerable:!1})}return Object.defineProperty(o,"codes",{value:a,enumerable:!1}),o.color.close="\x1B[39m",o.bgColor.close="\x1B[49m",o.color.ansi256=t(),o.color.ansi16m=n(),o.bgColor.ansi256=t(10),o.bgColor.ansi16m=n(10),Object.defineProperties(o,{rgbToAnsi256:{value:(s,u,l)=>s===u&&u===l?s<8?16:s>248?231:Math.round((s-8)/247*24)+232:16+36*Math.round(s/255*5)+6*Math.round(u/255*5)+Math.round(l/255*5),enumerable:!1},hexToRgb:{value:s=>{const u=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(s.toString(16));if(!u)return[0,0,0];let{colorString:l}=u.groups;l.length===3&&(l=l.split("").map(d=>d+d).join(""));const c=Number.parseInt(l,16);return[c>>16&255,c>>8&255,c&255]},enumerable:!1},hexToAnsi256:{value:s=>o.rgbToAnsi256(...o.hexToRgb(s)),enumerable:!1}}),o}Object.defineProperty(r,"exports",{enumerable:!0,get:i})}(qg)),qg.exports}var GW=WW();const WV=pm(GW);var Tf={exports:{}},Kb={},Wb,N1;function JW(){if(N1)return Wb;N1=1;function r(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return Wb=r,r.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},n),this._options.unref&&this._timer.unref(),!0},r.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},r.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},r.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,n=0,i=0;i<this._errors.length;i++){var a=this._errors[i],o=a.message,s=(e[o]||0)+1;e[o]=s,s>=n&&(t=a,n=s)}return t},Wb}var q1;function XW(){return q1||(q1=1,function(r){var e=JW();r.operation=function(t){var n=r.timeouts(t);return new e(n,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},r.timeouts=function(t){if(t instanceof Array)return[].concat(t);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in t)n[i]=t[i];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],o=0;o<n.retries;o++)a.push(this.createTimeout(o,n));return t&&t.forever&&!a.length&&a.push(this.createTimeout(o,n)),a.sort(function(s,u){return s-u}),a},r.createTimeout=function(t,n){var i=n.randomize?Math.random()+1:1,a=Math.round(i*Math.max(n.minTimeout,1)*Math.pow(n.factor,t));return a=Math.min(a,n.maxTimeout),a},r.wrap=function(t,n,i){if(n instanceof Array&&(i=n,n=null),!i){i=[];for(var a in t)typeof t[a]=="function"&&i.push(a)}for(var o=0;o<i.length;o++){var s=i[o],u=t[s];t[s]=(function(c){var d=r.operation(n),h=Array.prototype.slice.call(arguments,1),f=h.pop();h.push(function(m){d.retry(m)||(m&&(arguments[0]=d.mainError()),f.apply(this,arguments))}),d.attempt(function(){c.apply(t,h)})}).bind(t,u),t[s].options=n}}}(Kb)),Kb}var Gb,B1;function ZW(){return B1||(B1=1,Gb=XW()),Gb}var U1;function QW(){if(U1)return Tf.exports;U1=1;const r=ZW(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class t extends Error{constructor(s){super(),s instanceof Error?(this.originalError=s,{message:s}=s):(this.originalError=new Error(s),this.originalError.stack=this.stack),this.name="AbortError",this.message=s}}const n=(o,s,u)=>{const l=u.retries-(s-1);return o.attemptNumber=s,o.retriesLeft=l,o},i=o=>e.includes(o),a=(o,s)=>new Promise((u,l)=>{s={onFailedAttempt:()=>{},retries:10,...s};const c=r.operation(s);c.attempt(async d=>{try{u(await o(d))}catch(h){if(!(h instanceof Error)){l(new TypeError(`Non-error was thrown: "${h}". You should only throw errors.`));return}if(h instanceof t)c.stop(),l(h.originalError);else if(h instanceof TypeError&&!i(h.message))c.stop(),l(h);else{n(h,d,s);try{await s.onFailedAttempt(h)}catch(f){l(f);return}c.retry(h)||l(c.mainError())}}})});return Tf.exports=a,Tf.exports.default=a,Tf.exports.AbortError=t,Tf.exports}var YW=QW();const n_=pm(YW);var Km={},Jb={exports:{}},z1;function eG(){return z1||(z1=1,function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function a(u,l,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new i(c,d||u,h),m=t?t+l:l;return u._events[m]?u._events[m].fn?u._events[m]=[u._events[m],f]:u._events[m].push(f):(u._events[m]=f,u._eventsCount++),u}function o(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],c,d;if(this._eventsCount===0)return l;for(d in c=this._events)e.call(c,d)&&l.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},s.prototype.listeners=function(l){var c=t?t+l:l,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,m=new Array(f);h<f;h++)m[h]=d[h].fn;return m},s.prototype.listenerCount=function(l){var c=t?t+l:l,d=this._events[c];return d?d.fn?1:d.length:0},s.prototype.emit=function(l,c,d,h,f,m){var p=t?t+l:l;if(!this._events[p])return!1;var g=this._events[p],b=arguments.length,_,y;if(g.fn){switch(g.once&&this.removeListener(l,g.fn,void 0,!0),b){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,d),!0;case 4:return g.fn.call(g.context,c,d,h),!0;case 5:return g.fn.call(g.context,c,d,h,f),!0;case 6:return g.fn.call(g.context,c,d,h,f,m),!0}for(y=1,_=new Array(b-1);y<b;y++)_[y-1]=arguments[y];g.fn.apply(g.context,_)}else{var v=g.length,w;for(y=0;y<v;y++)switch(g[y].once&&this.removeListener(l,g[y].fn,void 0,!0),b){case 1:g[y].fn.call(g[y].context);break;case 2:g[y].fn.call(g[y].context,c);break;case 3:g[y].fn.call(g[y].context,c,d);break;case 4:g[y].fn.call(g[y].context,c,d,h);break;default:if(!_)for(w=1,_=new Array(b-1);w<b;w++)_[w-1]=arguments[w];g[y].fn.apply(g[y].context,_)}}return!0},s.prototype.on=function(l,c,d){return a(this,l,c,d,!1)},s.prototype.once=function(l,c,d){return a(this,l,c,d,!0)},s.prototype.removeListener=function(l,c,d,h){var f=t?t+l:l;if(!this._events[f])return this;if(!c)return o(this,f),this;var m=this._events[f];if(m.fn)m.fn===c&&(!h||m.once)&&(!d||m.context===d)&&o(this,f);else{for(var p=0,g=[],b=m.length;p<b;p++)(m[p].fn!==c||h&&!m[p].once||d&&m[p].context!==d)&&g.push(m[p]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},s.prototype.removeAllListeners=function(l){var c;return l?(c=t?t+l:l,this._events[c]&&o(this,c)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=t,s.EventEmitter=s,r.exports=s}(Jb)),Jb.exports}var Af={exports:{}},Xb,L1;function tG(){return L1||(L1=1,Xb=(r,e)=>(e=e||(()=>{}),r.then(t=>new Promise(n=>{n(e())}).then(()=>t),t=>new Promise(n=>{n(e())}).then(()=>{throw t})))),Xb}var F1;function rG(){if(F1)return Af.exports;F1=1;const r=tG();class e extends Error{constructor(i){super(i),this.name="TimeoutError"}}const t=(n,i,a)=>new Promise((o,s)=>{if(typeof i!="number"||i<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(i===1/0){o(n);return}const u=setTimeout(()=>{if(typeof a=="function"){try{o(a())}catch(d){s(d)}return}const l=typeof a=="string"?a:`Promise timed out after ${i} milliseconds`,c=a instanceof Error?a:new e(l);typeof n.cancel=="function"&&n.cancel(),s(c)},i);r(n.then(o,s),()=>{clearTimeout(u)})});return Af.exports=t,Af.exports.default=t,Af.exports.TimeoutError=e,Af.exports}var Wm={},Gm={},k1;function nG(){if(k1)return Gm;k1=1,Object.defineProperty(Gm,"__esModule",{value:!0});function r(e,t,n){let i=0,a=e.length;for(;a>0;){const o=a/2|0;let s=i+o;n(e[s],t)<=0?(i=++s,a-=o+1):a=o}return i}return Gm.default=r,Gm}var V1;function iG(){if(V1)return Wm;V1=1,Object.defineProperty(Wm,"__esModule",{value:!0});const r=nG();class e{constructor(){this._queue=[]}enqueue(n,i){i=Object.assign({priority:0},i);const a={priority:i.priority,run:n};if(this.size&&this._queue[this.size-1].priority>=i.priority){this._queue.push(a);return}const o=r.default(this._queue,a,(s,u)=>u.priority-s.priority);this._queue.splice(o,0,a)}dequeue(){const n=this._queue.shift();return n==null?void 0:n.run}filter(n){return this._queue.filter(i=>i.priority===n.priority).map(i=>i.run)}get size(){return this._queue.length}}return Wm.default=e,Wm}var H1;function aG(){if(H1)return Km;H1=1,Object.defineProperty(Km,"__esModule",{value:!0});const r=eG(),e=rG(),t=iG(),n=()=>{},i=new e.TimeoutError;class a extends r{constructor(s){var u,l,c,d;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=n,this._resolveIdle=n,s=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:t.default},s),!(typeof s.intervalCap=="number"&&s.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(l=(u=s.intervalCap)===null||u===void 0?void 0:u.toString())!==null&&l!==void 0?l:""}\` (${typeof s.intervalCap})`);if(s.interval===void 0||!(Number.isFinite(s.interval)&&s.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(d=(c=s.interval)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""}\` (${typeof s.interval})`);this._carryoverConcurrencyCount=s.carryoverConcurrencyCount,this._isIntervalIgnored=s.intervalCap===1/0||s.interval===0,this._intervalCap=s.intervalCap,this._interval=s.interval,this._queue=new s.queueClass,this._queueClass=s.queueClass,this.concurrency=s.concurrency,this._timeout=s.timeout,this._throwOnTimeout=s.throwOnTimeout===!0,this._isPaused=s.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=n,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=n,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const s=Date.now();if(this._intervalId===void 0){const u=this._intervalEnd-s;if(u<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},u)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const s=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const u=this._queue.dequeue();return u?(this.emit("active"),u(),s&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(s){if(!(typeof s=="number"&&s>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${s}\` (${typeof s})`);this._concurrency=s,this._processQueue()}async add(s,u={}){return new Promise((l,c)=>{const d=async()=>{this._pendingCount++,this._intervalCount++;try{const h=this._timeout===void 0&&u.timeout===void 0?s():e.default(Promise.resolve(s()),u.timeout===void 0?this._timeout:u.timeout,()=>{(u.throwOnTimeout===void 0?this._throwOnTimeout:u.throwOnTimeout)&&c(i)});l(await h)}catch(h){c(h)}this._next()};this._queue.enqueue(d,u),this._tryToStartAnother(),this.emit("add")})}async addAll(s,u){return Promise.all(s.map(async l=>this.add(l,u)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(s=>{const u=this._resolveEmpty;this._resolveEmpty=()=>{u(),s()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(s=>{const u=this._resolveIdle;this._resolveIdle=()=>{u(),s()}})}get size(){return this._queue.size}sizeBy(s){return this._queue.filter(s).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(s){this._timeout=s}}return Km.default=a,Km}var oG=aG();const Yu=pm(oG),GV=()=>Mu("PROJECT")??Tl("LANGCHAIN_SESSION")??"default",JV="0.3.33";var Nh={};let zu;const sG=()=>typeof window<"u"&&typeof window.document<"u",uG=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",lG=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),XV=()=>typeof Deno<"u",cG=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!XV(),dG=()=>zu||(sG()?zu="browser":cG()?zu="node":uG()?zu="webworker":lG()?zu="jsdom":XV()?zu="deno":zu="other",zu);let Zb;function ZV(){if(Zb===void 0){const r=dG(),e=hG();Zb={library:"langsmith",runtime:r,sdk:"langsmith-js",sdk_version:JV,...e}}return Zb}function fG(){const r=pG()||{},e={},t=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[n,i]of Object.entries(r))(n.startsWith("LANGCHAIN_")||n.startsWith("LANGSMITH_"))&&typeof i=="string"&&!t.includes(n)&&!n.toLowerCase().includes("key")&&!n.toLowerCase().includes("secret")&&!n.toLowerCase().includes("token")&&(n==="LANGCHAIN_REVISION_ID"?e.revision_id=i:e[n]=i);return e}function pG(){try{return typeof process<"u"&&Nh?Object.entries(Nh).reduce((r,[e,t])=>(r[e]=String(t),r),{}):void 0}catch{return}}function Tl(r){try{return typeof process<"u"?Nh==null?void 0:Nh[r]:void 0}catch{return}}function Mu(r){return Tl(`LANGSMITH_${r}`)||Tl(`LANGCHAIN_${r}`)}let Qb;function hG(){if(Qb!==void 0)return Qb;const r=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const t of r){const n=Tl(t);n!==void 0&&(e[t]=n)}return Qb=e,e}const mG=(...r)=>fetch(...r),QV=Symbol.for("ls:fetch_implementation"),gG=()=>{const r=globalThis[QV];return r?typeof r=="function"&&"Headers"in r&&"Request"in r&&"Response"in r:!1},Ae=r=>async(...e)=>{if(r||Mu("DEBUG")==="true"){const[n,i]=e;console.log(`→ ${(i==null?void 0:i.method)||"GET"} ${n}`)}const t=await(globalThis[QV]??mG)(...e);return(r||Mu("DEBUG")==="true")&&console.log(`← ${t.status} ${t.statusText} ${t.url}`),t},_G=[400,401,403,404,405,406,407,408],bG=[409];let K1=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.debug=e.debug,"default"in Yu?this.queue=new Yu.default({concurrency:this.maxConcurrency}):this.queue=new Yu({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...t){const n=this.onFailedResponseHook;return this.queue.add(()=>n_(()=>e(...t).catch(i=>{throw i instanceof Error?i:new Error(i)}),{async onFailedAttempt(i){if(i.message.startsWith("Cancel")||i.message.startsWith("TimeoutError")||i.message.startsWith("AbortError")||(i==null?void 0:i.code)==="ECONNABORTED")throw i;const a=i==null?void 0:i.response,o=a==null?void 0:a.status;if(o){if(_G.includes(+o))throw i;if(bG.includes(+o))return;n&&await n(a)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...n){return e.signal?Promise.race([this.call(t,...n),new Promise((i,a)=>{var o;(o=e.signal)==null||o.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(t,...n)}fetch(...e){return this.call(()=>Ae(this.debug)(...e).then(t=>t.ok?t:Promise.reject(t)))}};function W1(r){return typeof(r==null?void 0:r._getType)=="function"}function G1(r){const e={type:r._getType(),data:{content:r.content}};return r!=null&&r.additional_kwargs&&Object.keys(r.additional_kwargs).length>0&&(e.data.additional_kwargs={...r.additional_kwargs}),e}function ke(r,e){if(!Kd(r)){const t=e!==void 0?`Invalid UUID for ${e}: ${r}`:`Invalid UUID: ${r}`;throw new Error(t)}return r}const J1={};function YV(r){J1[r]||(console.warn(r),J1[r]=!0)}var Jm={exports:{}},Yb,X1;function L_(){if(X1)return Yb;X1=1;const r="2.0.0",e=256,t=Number.MAX_SAFE_INTEGER||9007199254740991,n=16,i=e-6;return Yb={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:r,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Yb}var ey,Z1;function F_(){if(Z1)return ey;Z1=1;var r={};return ey=typeof process=="object"&&r&&r.NODE_DEBUG&&/\bsemver\b/i.test(r.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{},ey}var Q1;function mm(){return Q1||(Q1=1,function(r,e){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=L_(),a=F_();e=r.exports={};const o=e.re=[],s=e.safeRe=[],u=e.src=[],l=e.safeSrc=[],c=e.t={};let d=0;const h="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[h,n]],m=g=>{for(const[b,_]of f)g=g.split(`${b}*`).join(`${b}{0,${_}}`).split(`${b}+`).join(`${b}{1,${_}}`);return g},p=(g,b,_)=>{const y=m(b),v=d++;a(g,v,b),c[g]=v,u[v]=b,l[v]=y,o[v]=new RegExp(b,_?"g":void 0),s[v]=new RegExp(y,_?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),p("MAINVERSION",`(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[c.NONNUMERICIDENTIFIER]}|${u[c.NUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[c.NONNUMERICIDENTIFIER]}|${u[c.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASE",`(?:-(${u[c.PRERELEASEIDENTIFIER]}(?:\\.${u[c.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[c.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${h}+`),p("BUILD",`(?:\\+(${u[c.BUILDIDENTIFIER]}(?:\\.${u[c.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[c.MAINVERSION]}${u[c.PRERELEASE]}?${u[c.BUILD]}?`),p("FULL",`^${u[c.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[c.MAINVERSIONLOOSE]}${u[c.PRERELEASELOOSE]}?${u[c.BUILD]}?`),p("LOOSE",`^${u[c.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[c.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:${u[c.PRERELEASE]})?${u[c.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:${u[c.PRERELEASELOOSE]})?${u[c.BUILD]}?)?)?`),p("XRANGE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?`),p("COERCE",`${u[c.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[c.COERCEPLAIN]+`(?:${u[c.PRERELEASE]})?(?:${u[c.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[c.COERCE],!0),p("COERCERTLFULL",u[c.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[c.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",p("TILDE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[c.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",p("CARET",`^${u[c.LONECARET]}${u[c.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[c.LONECARET]}${u[c.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[c.GTLT]}\\s*(${u[c.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]}|${u[c.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[c.XRANGEPLAIN]})\\s+-\\s+(${u[c.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[c.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Jm,Jm.exports)),Jm.exports}var ty,Y1;function CC(){if(Y1)return ty;Y1=1;const r=Object.freeze({loose:!0}),e=Object.freeze({});return ty=n=>n?typeof n!="object"?r:n:e,ty}var ry,ej;function e3(){if(ej)return ry;ej=1;const r=/^[0-9]+$/,e=(n,i)=>{const a=r.test(n),o=r.test(i);return a&&o&&(n=+n,i=+i),n===i?0:a&&!o?-1:o&&!a?1:n<i?-1:1};return ry={compareIdentifiers:e,rcompareIdentifiers:(n,i)=>e(i,n)},ry}var ny,tj;function pr(){if(tj)return ny;tj=1;const r=F_(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:t}=L_(),{safeRe:n,t:i}=mm(),a=CC(),{compareIdentifiers:o}=e3();class s{constructor(l,c){if(c=a(c),l instanceof s){if(l.loose===!!c.loose&&l.includePrerelease===!!c.includePrerelease)return l;l=l.version}else if(typeof l!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof l}".`);if(l.length>e)throw new TypeError(`version is longer than ${e} characters`);r("SemVer",l,c),this.options=c,this.loose=!!c.loose,this.includePrerelease=!!c.includePrerelease;const d=l.trim().match(c.loose?n[i.LOOSE]:n[i.FULL]);if(!d)throw new TypeError(`Invalid Version: ${l}`);if(this.raw=l,this.major=+d[1],this.minor=+d[2],this.patch=+d[3],this.major>t||this.major<0)throw new TypeError("Invalid major version");if(this.minor>t||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>t||this.patch<0)throw new TypeError("Invalid patch version");d[4]?this.prerelease=d[4].split(".").map(h=>{if(/^[0-9]+$/.test(h)){const f=+h;if(f>=0&&f<t)return f}return h}):this.prerelease=[],this.build=d[5]?d[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(l){if(r("SemVer.compare",this.version,this.options,l),!(l instanceof s)){if(typeof l=="string"&&l===this.version)return 0;l=new s(l,this.options)}return l.version===this.version?0:this.compareMain(l)||this.comparePre(l)}compareMain(l){return l instanceof s||(l=new s(l,this.options)),o(this.major,l.major)||o(this.minor,l.minor)||o(this.patch,l.patch)}comparePre(l){if(l instanceof s||(l=new s(l,this.options)),this.prerelease.length&&!l.prerelease.length)return-1;if(!this.prerelease.length&&l.prerelease.length)return 1;if(!this.prerelease.length&&!l.prerelease.length)return 0;let c=0;do{const d=this.prerelease[c],h=l.prerelease[c];if(r("prerelease compare",c,d,h),d===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(d===void 0)return-1;if(d===h)continue;return o(d,h)}while(++c)}compareBuild(l){l instanceof s||(l=new s(l,this.options));let c=0;do{const d=this.build[c],h=l.build[c];if(r("build compare",c,d,h),d===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(d===void 0)return-1;if(d===h)continue;return o(d,h)}while(++c)}inc(l,c,d){if(l.startsWith("pre")){if(!c&&d===!1)throw new Error("invalid increment argument: identifier is empty");if(c){const h=`-${c}`.match(this.options.loose?n[i.PRERELEASELOOSE]:n[i.PRERELEASE]);if(!h||h[1]!==c)throw new Error(`invalid identifier: ${c}`)}}switch(l){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",c,d);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",c,d);break;case"prepatch":this.prerelease.length=0,this.inc("patch",c,d),this.inc("pre",c,d);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",c,d),this.inc("pre",c,d);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const h=Number(d)?1:0;if(this.prerelease.length===0)this.prerelease=[h];else{let f=this.prerelease.length;for(;--f>=0;)typeof this.prerelease[f]=="number"&&(this.prerelease[f]++,f=-2);if(f===-1){if(c===this.prerelease.join(".")&&d===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(h)}}if(c){let f=[c,h];d===!1&&(f=[c]),o(this.prerelease[0],c)===0?isNaN(this.prerelease[1])&&(this.prerelease=f):this.prerelease=f}break}default:throw new Error(`invalid increment argument: ${l}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return ny=s,ny}var iy,rj;function ff(){if(rj)return iy;rj=1;const r=pr();return iy=(t,n,i=!1)=>{if(t instanceof r)return t;try{return new r(t,n)}catch(a){if(!i)return null;throw a}},iy}var ay,nj;function yG(){if(nj)return ay;nj=1;const r=ff();return ay=(t,n)=>{const i=r(t,n);return i?i.version:null},ay}var oy,ij;function vG(){if(ij)return oy;ij=1;const r=ff();return oy=(t,n)=>{const i=r(t.trim().replace(/^[=v]+/,""),n);return i?i.version:null},oy}var sy,aj;function wG(){if(aj)return sy;aj=1;const r=pr();return sy=(t,n,i,a,o)=>{typeof i=="string"&&(o=a,a=i,i=void 0);try{return new r(t instanceof r?t.version:t,i).inc(n,a,o).version}catch{return null}},sy}var uy,oj;function SG(){if(oj)return uy;oj=1;const r=ff();return uy=(t,n)=>{const i=r(t,null,!0),a=r(n,null,!0),o=i.compare(a);if(o===0)return null;const s=o>0,u=s?i:a,l=s?a:i,c=!!u.prerelease.length;if(!!l.prerelease.length&&!c){if(!l.patch&&!l.minor)return"major";if(l.compareMain(u)===0)return l.minor&&!l.patch?"minor":"patch"}const h=c?"pre":"";return i.major!==a.major?h+"major":i.minor!==a.minor?h+"minor":i.patch!==a.patch?h+"patch":"prerelease"},uy}var ly,sj;function OG(){if(sj)return ly;sj=1;const r=pr();return ly=(t,n)=>new r(t,n).major,ly}var cy,uj;function EG(){if(uj)return cy;uj=1;const r=pr();return cy=(t,n)=>new r(t,n).minor,cy}var dy,lj;function RG(){if(lj)return dy;lj=1;const r=pr();return dy=(t,n)=>new r(t,n).patch,dy}var fy,cj;function CG(){if(cj)return fy;cj=1;const r=ff();return fy=(t,n)=>{const i=r(t,n);return i&&i.prerelease.length?i.prerelease:null},fy}var py,dj;function Eu(){if(dj)return py;dj=1;const r=pr();return py=(t,n,i)=>new r(t,i).compare(new r(n,i)),py}var hy,fj;function PG(){if(fj)return hy;fj=1;const r=Eu();return hy=(t,n,i)=>r(n,t,i),hy}var my,pj;function jG(){if(pj)return my;pj=1;const r=Eu();return my=(t,n)=>r(t,n,!0),my}var gy,hj;function PC(){if(hj)return gy;hj=1;const r=pr();return gy=(t,n,i)=>{const a=new r(t,i),o=new r(n,i);return a.compare(o)||a.compareBuild(o)},gy}var _y,mj;function TG(){if(mj)return _y;mj=1;const r=PC();return _y=(t,n)=>t.sort((i,a)=>r(i,a,n)),_y}var by,gj;function AG(){if(gj)return by;gj=1;const r=PC();return by=(t,n)=>t.sort((i,a)=>r(a,i,n)),by}var yy,_j;function k_(){if(_j)return yy;_j=1;const r=Eu();return yy=(t,n,i)=>r(t,n,i)>0,yy}var vy,bj;function jC(){if(bj)return vy;bj=1;const r=Eu();return vy=(t,n,i)=>r(t,n,i)<0,vy}var wy,yj;function t3(){if(yj)return wy;yj=1;const r=Eu();return wy=(t,n,i)=>r(t,n,i)===0,wy}var Sy,vj;function r3(){if(vj)return Sy;vj=1;const r=Eu();return Sy=(t,n,i)=>r(t,n,i)!==0,Sy}var Oy,wj;function TC(){if(wj)return Oy;wj=1;const r=Eu();return Oy=(t,n,i)=>r(t,n,i)>=0,Oy}var Ey,Sj;function AC(){if(Sj)return Ey;Sj=1;const r=Eu();return Ey=(t,n,i)=>r(t,n,i)<=0,Ey}var Ry,Oj;function n3(){if(Oj)return Ry;Oj=1;const r=t3(),e=r3(),t=k_(),n=TC(),i=jC(),a=AC();return Ry=(s,u,l,c)=>{switch(u){case"===":return typeof s=="object"&&(s=s.version),typeof l=="object"&&(l=l.version),s===l;case"!==":return typeof s=="object"&&(s=s.version),typeof l=="object"&&(l=l.version),s!==l;case"":case"=":case"==":return r(s,l,c);case"!=":return e(s,l,c);case">":return t(s,l,c);case">=":return n(s,l,c);case"<":return i(s,l,c);case"<=":return a(s,l,c);default:throw new TypeError(`Invalid operator: ${u}`)}},Ry}var Cy,Ej;function MG(){if(Ej)return Cy;Ej=1;const r=pr(),e=ff(),{safeRe:t,t:n}=mm();return Cy=(a,o)=>{if(a instanceof r)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;o=o||{};let s=null;if(!o.rtl)s=a.match(o.includePrerelease?t[n.COERCEFULL]:t[n.COERCE]);else{const f=o.includePrerelease?t[n.COERCERTLFULL]:t[n.COERCERTL];let m;for(;(m=f.exec(a))&&(!s||s.index+s[0].length!==a.length);)(!s||m.index+m[0].length!==s.index+s[0].length)&&(s=m),f.lastIndex=m.index+m[1].length+m[2].length;f.lastIndex=-1}if(s===null)return null;const u=s[2],l=s[3]||"0",c=s[4]||"0",d=o.includePrerelease&&s[5]?`-${s[5]}`:"",h=o.includePrerelease&&s[6]?`+${s[6]}`:"";return e(`${u}.${l}.${c}${d}${h}`,o)},Cy}var Py,Rj;function IG(){if(Rj)return Py;Rj=1;class r{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(t,n)}return this}}return Py=r,Py}var jy,Cj;function Ru(){if(Cj)return jy;Cj=1;const r=/\s+/g;class e{constructor(W,Y){if(Y=i(Y),W instanceof e)return W.loose===!!Y.loose&&W.includePrerelease===!!Y.includePrerelease?W:new e(W.raw,Y);if(W instanceof a)return this.raw=W.value,this.set=[[W]],this.formatted=void 0,this;if(this.options=Y,this.loose=!!Y.loose,this.includePrerelease=!!Y.includePrerelease,this.raw=W.trim().replace(r," "),this.set=this.raw.split("||").map(oe=>this.parseRange(oe.trim())).filter(oe=>oe.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const oe=this.set[0];if(this.set=this.set.filter(I=>!p(I[0])),this.set.length===0)this.set=[oe];else if(this.set.length>1){for(const I of this.set)if(I.length===1&&g(I[0])){this.set=[I];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let W=0;W<this.set.length;W++){W>0&&(this.formatted+="||");const Y=this.set[W];for(let oe=0;oe<Y.length;oe++)oe>0&&(this.formatted+=" "),this.formatted+=Y[oe].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(W){const oe=((this.options.includePrerelease&&f)|(this.options.loose&&m))+":"+W,I=n.get(oe);if(I)return I;const q=this.options.loose,T=q?u[l.HYPHENRANGELOOSE]:u[l.HYPHENRANGE];W=W.replace(T,G(this.options.includePrerelease)),o("hyphen replace",W),W=W.replace(u[l.COMPARATORTRIM],c),o("comparator trim",W),W=W.replace(u[l.TILDETRIM],d),o("tilde trim",W),W=W.replace(u[l.CARETTRIM],h),o("caret trim",W);let V=W.split(" ").map(_e=>_(_e,this.options)).join(" ").split(/\s+/).map(_e=>M(_e,this.options));q&&(V=V.filter(_e=>(o("loose invalid filter",_e,this.options),!!_e.match(u[l.COMPARATORLOOSE])))),o("range list",V);const re=new Map,Z=V.map(_e=>new a(_e,this.options));for(const _e of Z){if(p(_e))return[_e];re.set(_e.value,_e)}re.size>1&&re.has("")&&re.delete("");const fe=[...re.values()];return n.set(oe,fe),fe}intersects(W,Y){if(!(W instanceof e))throw new TypeError("a Range is required");return this.set.some(oe=>b(oe,Y)&&W.set.some(I=>b(I,Y)&&oe.every(q=>I.every(T=>q.intersects(T,Y)))))}test(W){if(!W)return!1;if(typeof W=="string")try{W=new s(W,this.options)}catch{return!1}for(let Y=0;Y<this.set.length;Y++)if(U(this.set[Y],W,this.options))return!0;return!1}}jy=e;const t=IG(),n=new t,i=CC(),a=V_(),o=F_(),s=pr(),{safeRe:u,t:l,comparatorTrimReplace:c,tildeTrimReplace:d,caretTrimReplace:h}=mm(),{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:m}=L_(),p=z=>z.value==="<0.0.0-0",g=z=>z.value==="",b=(z,W)=>{let Y=!0;const oe=z.slice();let I=oe.pop();for(;Y&&oe.length;)Y=oe.every(q=>I.intersects(q,W)),I=oe.pop();return Y},_=(z,W)=>(o("comp",z,W),z=S(z,W),o("caret",z),z=v(z,W),o("tildes",z),z=P(z,W),o("xrange",z),z=A(z,W),o("stars",z),z),y=z=>!z||z.toLowerCase()==="x"||z==="*",v=(z,W)=>z.trim().split(/\s+/).map(Y=>w(Y,W)).join(" "),w=(z,W)=>{const Y=W.loose?u[l.TILDELOOSE]:u[l.TILDE];return z.replace(Y,(oe,I,q,T,V)=>{o("tilde",z,oe,I,q,T,V);let re;return y(I)?re="":y(q)?re=`>=${I}.0.0 <${+I+1}.0.0-0`:y(T)?re=`>=${I}.${q}.0 <${I}.${+q+1}.0-0`:V?(o("replaceTilde pr",V),re=`>=${I}.${q}.${T}-${V} <${I}.${+q+1}.0-0`):re=`>=${I}.${q}.${T} <${I}.${+q+1}.0-0`,o("tilde return",re),re})},S=(z,W)=>z.trim().split(/\s+/).map(Y=>R(Y,W)).join(" "),R=(z,W)=>{o("caret",z,W);const Y=W.loose?u[l.CARETLOOSE]:u[l.CARET],oe=W.includePrerelease?"-0":"";return z.replace(Y,(I,q,T,V,re)=>{o("caret",z,I,q,T,V,re);let Z;return y(q)?Z="":y(T)?Z=`>=${q}.0.0${oe} <${+q+1}.0.0-0`:y(V)?q==="0"?Z=`>=${q}.${T}.0${oe} <${q}.${+T+1}.0-0`:Z=`>=${q}.${T}.0${oe} <${+q+1}.0.0-0`:re?(o("replaceCaret pr",re),q==="0"?T==="0"?Z=`>=${q}.${T}.${V}-${re} <${q}.${T}.${+V+1}-0`:Z=`>=${q}.${T}.${V}-${re} <${q}.${+T+1}.0-0`:Z=`>=${q}.${T}.${V}-${re} <${+q+1}.0.0-0`):(o("no pr"),q==="0"?T==="0"?Z=`>=${q}.${T}.${V}${oe} <${q}.${T}.${+V+1}-0`:Z=`>=${q}.${T}.${V}${oe} <${q}.${+T+1}.0-0`:Z=`>=${q}.${T}.${V} <${+q+1}.0.0-0`),o("caret return",Z),Z})},P=(z,W)=>(o("replaceXRanges",z,W),z.split(/\s+/).map(Y=>C(Y,W)).join(" ")),C=(z,W)=>{z=z.trim();const Y=W.loose?u[l.XRANGELOOSE]:u[l.XRANGE];return z.replace(Y,(oe,I,q,T,V,re)=>{o("xRange",z,oe,I,q,T,V,re);const Z=y(q),fe=Z||y(T),_e=fe||y(V),Se=_e;return I==="="&&Se&&(I=""),re=W.includePrerelease?"-0":"",Z?I===">"||I==="<"?oe="<0.0.0-0":oe="*":I&&Se?(fe&&(T=0),V=0,I===">"?(I=">=",fe?(q=+q+1,T=0,V=0):(T=+T+1,V=0)):I==="<="&&(I="<",fe?q=+q+1:T=+T+1),I==="<"&&(re="-0"),oe=`${I+q}.${T}.${V}${re}`):fe?oe=`>=${q}.0.0${re} <${+q+1}.0.0-0`:_e&&(oe=`>=${q}.${T}.0${re} <${q}.${+T+1}.0-0`),o("xRange return",oe),oe})},A=(z,W)=>(o("replaceStars",z,W),z.trim().replace(u[l.STAR],"")),M=(z,W)=>(o("replaceGTE0",z,W),z.trim().replace(u[W.includePrerelease?l.GTE0PRE:l.GTE0],"")),G=z=>(W,Y,oe,I,q,T,V,re,Z,fe,_e,Se)=>(y(oe)?Y="":y(I)?Y=`>=${oe}.0.0${z?"-0":""}`:y(q)?Y=`>=${oe}.${I}.0${z?"-0":""}`:T?Y=`>=${Y}`:Y=`>=${Y}${z?"-0":""}`,y(Z)?re="":y(fe)?re=`<${+Z+1}.0.0-0`:y(_e)?re=`<${Z}.${+fe+1}.0-0`:Se?re=`<=${Z}.${fe}.${_e}-${Se}`:z?re=`<${Z}.${fe}.${+_e+1}-0`:re=`<=${re}`,`${Y} ${re}`.trim()),U=(z,W,Y)=>{for(let oe=0;oe<z.length;oe++)if(!z[oe].test(W))return!1;if(W.prerelease.length&&!Y.includePrerelease){for(let oe=0;oe<z.length;oe++)if(o(z[oe].semver),z[oe].semver!==a.ANY&&z[oe].semver.prerelease.length>0){const I=z[oe].semver;if(I.major===W.major&&I.minor===W.minor&&I.patch===W.patch)return!0}return!1}return!0};return jy}var Ty,Pj;function V_(){if(Pj)return Ty;Pj=1;const r=Symbol("SemVer ANY");class e{static get ANY(){return r}constructor(c,d){if(d=t(d),c instanceof e){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===r?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const d=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],h=c.match(d);if(!h)throw new TypeError(`Invalid comparator: ${c}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new s(h[2],this.options.loose):this.semver=r}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===r||c===r)return!0;if(typeof c=="string")try{c=new s(c,this.options)}catch{return!1}return a(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,d).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,d).test(c.semver):(d=t(d),d.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||a(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||a(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Ty=e;const t=CC(),{safeRe:n,t:i}=mm(),a=n3(),o=F_(),s=pr(),u=Ru();return Ty}var Ay,jj;function H_(){if(jj)return Ay;jj=1;const r=Ru();return Ay=(t,n,i)=>{try{n=new r(n,i)}catch{return!1}return n.test(t)},Ay}var My,Tj;function xG(){if(Tj)return My;Tj=1;const r=Ru();return My=(t,n)=>new r(t,n).set.map(i=>i.map(a=>a.value).join(" ").trim().split(" ")),My}var Iy,Aj;function DG(){if(Aj)return Iy;Aj=1;const r=pr(),e=Ru();return Iy=(n,i,a)=>{let o=null,s=null,u=null;try{u=new e(i,a)}catch{return null}return n.forEach(l=>{u.test(l)&&(!o||s.compare(l)===-1)&&(o=l,s=new r(o,a))}),o},Iy}var xy,Mj;function $G(){if(Mj)return xy;Mj=1;const r=pr(),e=Ru();return xy=(n,i,a)=>{let o=null,s=null,u=null;try{u=new e(i,a)}catch{return null}return n.forEach(l=>{u.test(l)&&(!o||s.compare(l)===1)&&(o=l,s=new r(o,a))}),o},xy}var Dy,Ij;function NG(){if(Ij)return Dy;Ij=1;const r=pr(),e=Ru(),t=k_();return Dy=(i,a)=>{i=new e(i,a);let o=new r("0.0.0");if(i.test(o)||(o=new r("0.0.0-0"),i.test(o)))return o;o=null;for(let s=0;s<i.set.length;++s){const u=i.set[s];let l=null;u.forEach(c=>{const d=new r(c.semver.version);switch(c.operator){case">":d.prerelease.length===0?d.patch++:d.prerelease.push(0),d.raw=d.format();case"":case">=":(!l||t(d,l))&&(l=d);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${c.operator}`)}}),l&&(!o||t(o,l))&&(o=l)}return o&&i.test(o)?o:null},Dy}var $y,xj;function qG(){if(xj)return $y;xj=1;const r=Ru();return $y=(t,n)=>{try{return new r(t,n).range||"*"}catch{return null}},$y}var Ny,Dj;function MC(){if(Dj)return Ny;Dj=1;const r=pr(),e=V_(),{ANY:t}=e,n=Ru(),i=H_(),a=k_(),o=jC(),s=AC(),u=TC();return Ny=(c,d,h,f)=>{c=new r(c,f),d=new n(d,f);let m,p,g,b,_;switch(h){case">":m=a,p=s,g=o,b=">",_=">=";break;case"<":m=o,p=u,g=a,b="<",_="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(c,d,f))return!1;for(let y=0;y<d.set.length;++y){const v=d.set[y];let w=null,S=null;if(v.forEach(R=>{R.semver===t&&(R=new e(">=0.0.0")),w=w||R,S=S||R,m(R.semver,w.semver,f)?w=R:g(R.semver,S.semver,f)&&(S=R)}),w.operator===b||w.operator===_||(!S.operator||S.operator===b)&&p(c,S.semver))return!1;if(S.operator===_&&g(c,S.semver))return!1}return!0},Ny}var qy,$j;function BG(){if($j)return qy;$j=1;const r=MC();return qy=(t,n,i)=>r(t,n,">",i),qy}var By,Nj;function UG(){if(Nj)return By;Nj=1;const r=MC();return By=(t,n,i)=>r(t,n,"<",i),By}var Uy,qj;function zG(){if(qj)return Uy;qj=1;const r=Ru();return Uy=(t,n,i)=>(t=new r(t,i),n=new r(n,i),t.intersects(n,i)),Uy}var zy,Bj;function LG(){if(Bj)return zy;Bj=1;const r=H_(),e=Eu();return zy=(t,n,i)=>{const a=[];let o=null,s=null;const u=t.sort((h,f)=>e(h,f,i));for(const h of u)r(h,n,i)?(s=h,o||(o=h)):(s&&a.push([o,s]),s=null,o=null);o&&a.push([o,null]);const l=[];for(const[h,f]of a)h===f?l.push(h):!f&&h===u[0]?l.push("*"):f?h===u[0]?l.push(`<=${f}`):l.push(`${h} - ${f}`):l.push(`>=${h}`);const c=l.join(" || "),d=typeof n.raw=="string"?n.raw:String(n);return c.length<d.length?c:n},zy}var Ly,Uj;function FG(){if(Uj)return Ly;Uj=1;const r=Ru(),e=V_(),{ANY:t}=e,n=H_(),i=Eu(),a=(d,h,f={})=>{if(d===h)return!0;d=new r(d,f),h=new r(h,f);let m=!1;e:for(const p of d.set){for(const g of h.set){const b=u(p,g,f);if(m=m||b!==null,b)continue e}if(m)return!1}return!0},o=[new e(">=0.0.0-0")],s=[new e(">=0.0.0")],u=(d,h,f)=>{if(d===h)return!0;if(d.length===1&&d[0].semver===t){if(h.length===1&&h[0].semver===t)return!0;f.includePrerelease?d=o:d=s}if(h.length===1&&h[0].semver===t){if(f.includePrerelease)return!0;h=s}const m=new Set;let p,g;for(const P of d)P.operator===">"||P.operator===">="?p=l(p,P,f):P.operator==="<"||P.operator==="<="?g=c(g,P,f):m.add(P.semver);if(m.size>1)return null;let b;if(p&&g){if(b=i(p.semver,g.semver,f),b>0)return null;if(b===0&&(p.operator!==">="||g.operator!=="<="))return null}for(const P of m){if(p&&!n(P,String(p),f)||g&&!n(P,String(g),f))return null;for(const C of h)if(!n(P,String(C),f))return!1;return!0}let _,y,v,w,S=g&&!f.includePrerelease&&g.semver.prerelease.length?g.semver:!1,R=p&&!f.includePrerelease&&p.semver.prerelease.length?p.semver:!1;S&&S.prerelease.length===1&&g.operator==="<"&&S.prerelease[0]===0&&(S=!1);for(const P of h){if(w=w||P.operator===">"||P.operator===">=",v=v||P.operator==="<"||P.operator==="<=",p){if(R&&P.semver.prerelease&&P.semver.prerelease.length&&P.semver.major===R.major&&P.semver.minor===R.minor&&P.semver.patch===R.patch&&(R=!1),P.operator===">"||P.operator===">="){if(_=l(p,P,f),_===P&&_!==p)return!1}else if(p.operator===">="&&!n(p.semver,String(P),f))return!1}if(g){if(S&&P.semver.prerelease&&P.semver.prerelease.length&&P.semver.major===S.major&&P.semver.minor===S.minor&&P.semver.patch===S.patch&&(S=!1),P.operator==="<"||P.operator==="<="){if(y=c(g,P,f),y===P&&y!==g)return!1}else if(g.operator==="<="&&!n(g.semver,String(P),f))return!1}if(!P.operator&&(g||p)&&b!==0)return!1}return!(p&&v&&!g&&b!==0||g&&w&&!p&&b!==0||R||S)},l=(d,h,f)=>{if(!d)return h;const m=i(d.semver,h.semver,f);return m>0?d:m<0||h.operator===">"&&d.operator===">="?h:d},c=(d,h,f)=>{if(!d)return h;const m=i(d.semver,h.semver,f);return m<0?d:m>0||h.operator==="<"&&d.operator==="<="?h:d};return Ly=a,Ly}var Fy,zj;function kG(){if(zj)return Fy;zj=1;const r=mm(),e=L_(),t=pr(),n=e3(),i=ff(),a=yG(),o=vG(),s=wG(),u=SG(),l=OG(),c=EG(),d=RG(),h=CG(),f=Eu(),m=PG(),p=jG(),g=PC(),b=TG(),_=AG(),y=k_(),v=jC(),w=t3(),S=r3(),R=TC(),P=AC(),C=n3(),A=MG(),M=V_(),G=Ru(),U=H_(),z=xG(),W=DG(),Y=$G(),oe=NG(),I=qG(),q=MC(),T=BG(),V=UG(),re=zG(),Z=LG(),fe=FG();return Fy={parse:i,valid:a,clean:o,inc:s,diff:u,major:l,minor:c,patch:d,prerelease:h,compare:f,rcompare:m,compareLoose:p,compareBuild:g,sort:b,rsort:_,gt:y,lt:v,eq:w,neq:S,gte:R,lte:P,cmp:C,coerce:A,Comparator:M,Range:G,satisfies:U,toComparators:z,maxSatisfying:W,minSatisfying:Y,minVersion:oe,validRange:I,outside:q,gtr:T,ltr:V,intersects:re,simplifyRange:Z,subset:fe,SemVer:t,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers},Fy}kG();function ul(r){if(!r||r.split("/").length>2||r.startsWith("/")||r.endsWith("/")||r.split(":").length>2)throw new Error(`Invalid identifier format: ${r}`);const[e,t]=r.split(":"),n=t||"latest";if(e.includes("/")){const[i,a]=e.split("/",2);if(!i||!a)throw new Error(`Invalid identifier format: ${r}`);return[i,a,n]}else{if(!e)throw new Error(`Invalid identifier format: ${r}`);return["-",e,n]}}class VG extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function Ve(r,e,t){let n;if(r.ok){t&&(n=await r.text());return}n=await r.text();const i=`Failed to ${e}. Received status [${r.status}]: ${r.statusText}. Server response: ${n}`;if(r.status===409)throw new VG(i);const a=new Error(i);throw a.status=r.status,a}var Lj="[...]",HG={result:"[Circular]"},i_=[],Ud=[];const KG=new TextEncoder;function WG(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Xm(r){return KG.encode(r)}function Mr(r,e,t,n,i){var a;try{const o=JSON.stringify(r,t,n);return Xm(o)}catch(o){if(!((a=o.message)!=null&&a.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),Xm("[Unserializable]");console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof i>"u"&&(i=WG()),fR(r,"",0,[],void 0,0,i);let s;try{Ud.length===0?s=JSON.stringify(r,t,n):s=JSON.stringify(r,GG(t),n)}catch{return Xm("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;i_.length!==0;){const u=i_.pop();u.length===4?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}}return Xm(s)}}function ky(r,e,t,n){var i=Object.getOwnPropertyDescriptor(n,t);i.get!==void 0?i.configurable?(Object.defineProperty(n,t,{value:r}),i_.push([n,t,e,i])):Ud.push([e,t,r]):(n[t]=r,i_.push([n,t,e]))}function fR(r,e,t,n,i,a,o){a+=1;var s;if(typeof r=="object"&&r!==null){for(s=0;s<n.length;s++)if(n[s]===r){ky(HG,r,e,i);return}if(typeof o.depthLimit<"u"&&a>o.depthLimit){ky(Lj,r,e,i);return}if(typeof o.edgesLimit<"u"&&t+1>o.edgesLimit){ky(Lj,r,e,i);return}if(n.push(r),Array.isArray(r))for(s=0;s<r.length;s++)fR(r[s],s,s,n,r,a,o);else{var u=Object.keys(r);for(s=0;s<u.length;s++){var l=u[s];fR(r[l],l,s,n,r,a,o)}}n.pop()}}function GG(r){return r=typeof r<"u"?r:function(e,t){return t},function(e,t){if(Ud.length>0)for(var n=0;n<Ud.length;n++){var i=Ud[n];if(i[1]===e&&i[0]===t){t=i[2],Ud.splice(n,1);break}}return r.call(this,e,t)}}function Fj(r){const e=ZV(),t=fG(),n=r.extra??{},i=n.metadata;return r.extra={...n,runtime:{...e,...n==null?void 0:n.runtime},metadata:{...t,...t.revision_id||r.revision_id?{revision_id:r.revision_id??t.revision_id}:{},...i}},r}const JG=r=>{const e=(r==null?void 0:r.toString())??Mu("TRACING_SAMPLING_RATE");if(e===void 0)return;const t=parseFloat(e);if(t<0||t>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${t}`);return t},XG=r=>{const t=r.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return t==="localhost"||t==="127.0.0.1"||t==="::1"};async function ZG(r){const e=[];for await(const t of r)e.push(t);return e}function Vy(r){if(r!==void 0)return r.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const QG=async r=>{if((r==null?void 0:r.status)===429){const e=parseInt(r.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(t=>setTimeout(t,e)),!0}return!1};function kj(r){return typeof r=="number"?Number(r.toFixed(4)):r}class YG{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let t;const n=new Promise(a=>{t=a}),i=Mr(e.item,`Serializing run with id: ${e.item.id}`).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:t,itemPromise:n,size:i}),this.sizeBytes+=i,n}pop(e){var i;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const t=[];let n=0;for(;n+(((i=this.peek())==null?void 0:i.size)??0)<e&&this.items.length>0;){const a=this.items.shift();a&&(t.push(a),n+=a.size,this.sizeBytes-=a.size)}if(t.length===0&&this.items.length>0){const a=this.items.shift();t.push(a),n+=a.size,this.sizeBytes-=a.size}return[t.map(a=>({action:a.action,item:a.payload})),()=>t.forEach(a=>a.itemPromiseResolve())]}}const e7=20971520,t7=2500;let i3=class pR{constructor(e={}){var n;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new YG}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:Tl("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:Tl("LANGSMITH_DEBUG")==="true"});const t=pR.getDefaultClientConfig();if(this.tracingSampleRate=JG(e.tracingSamplingRate),this.apiUrl=Vy(e.apiUrl??t.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=Vy(e.apiKey??t.apiKey),this.webUrl=Vy(e.webUrl??t.webUrl),(n=this.webUrl)!=null&&n.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new K1({...e.callerOptions??{},debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.batchIngestCaller=new K1({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:QG,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??t.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??t.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){const e=Mu("API_KEY"),t=Mu("ENDPOINT")??"https://api.smith.langchain.com",n=Mu("HIDE_INPUTS")==="true",i=Mu("HIDE_OUTPUTS")==="true";return{apiUrl:t,apiKey:e,webUrl:void 0,hideInputs:n,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:XG(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${JV}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const t={...e};return t.inputs!==void 0&&(t.inputs=await this.processInputs(t.inputs)),t.outputs!==void 0&&(t.outputs=await this.processOutputs(t.outputs)),t}async _getResponse(e,t){const n=(t==null?void 0:t.toString())??"",i=`${this.apiUrl}${e}?${n}`,a=await this.caller.call(Ae(this.debug),i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(a,`Failed to fetch ${e}`),a}async _get(e,t){return(await this._getResponse(e,t)).json()}async*_getPaginated(e,t=new URLSearchParams,n){let i=Number(t.get("offset"))||0;const a=Number(t.get("limit"))||100;for(;;){t.set("offset",String(i)),t.set("limit",String(a));const o=`${this.apiUrl}${e}?${t}`,s=await this.caller.call(Ae(this.debug),o,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(s,`Failed to fetch ${e}`);const u=n?n(await s.json()):await s.json();if(u.length===0||(yield u,u.length<a))break;i+=u.length}}async*_getCursorPaginatedList(e,t=null,n="POST",i="runs"){const a=t?{...t}:{};for(;;){const s=await(await this.caller.call(Ae(this.debug),`${this.apiUrl}${e}`,{method:n,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(a)})).json();if(!s||!s[i])break;yield s[i];const u=s.cursors;if(!u||!u.next)break;a.cursor=u.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,t=!1){if(this.tracingSampleRate===void 0)return e;if(t){const n=[];for(const i of e)this.filteredPostUuids.has(i.id)?this.filteredPostUuids.delete(i.id):n.push(i);return n}else{const n=[];for(const i of e){const a=i.trace_id??i.id;this.filteredPostUuids.has(a)||(i.id===a?this._shouldSample()?n.push(i):this.filteredPostUuids.add(a):n.push(i))}return n}}async _getBatchSizeLimitBytes(){var t;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((t=e.batch_ingest_config)==null?void 0:t.size_limit_bytes)??e7}async _getMultiPartSupport(){var t;return((t=(await this._ensureServerInfo()).instance_flags)==null?void 0:t.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue(e){const t=[];for(;this.autoBatchQueue.items.length>0;){const[n,i]=this.autoBatchQueue.pop(e);if(!n.length){i();break}const a=this._processBatch(n,i).catch(console.error);t.push(a)}return Promise.all(t)}async _processBatch(e,t){var n;if(!e.length){t();return}try{const i={runCreates:e.filter(o=>o.action==="create").map(o=>o.item),runUpdates:e.filter(o=>o.action==="update").map(o=>o.item)},a=await this._ensureServerInfo();(n=a==null?void 0:a.batch_ingest_config)!=null&&n.use_multipart_endpoint?await this.multipartIngestRuns(i):await this.batchIngestRuns(i)}finally{t()}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.action==="create"&&(e.item=Fj(e.item));const t=this.autoBatchQueue.push(e);if(this.manualFlushMode)return t;const n=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>n&&this.drainAutoBatchQueue(n),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(n)},this.autoBatchAggregationDelayMs)),t}async _getServerInfo(){const e=await this.caller.call(Ae(this.debug),`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(t7),...this.fetchOptions});await Ve(e,"get server info");const t=await e.json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(t,null,2)+`
`),t}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[WARNING]: LangSmith failed to fetch info on supported operations with status code ${e.status}. Falling back to batch operations and default limits.`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}async createRun(e){if(!this._filterForSampling([e]).length)return;const t={...this.headers,"Content-Type":"application/json"},n=e.project_name;delete e.project_name;const i=await this.prepareRunCreateOrUpdateInputs({session_name:n,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){this.processRunOperation({action:"create",item:i}).catch(console.error);return}const a=Fj(i),o=await this.caller.call(Ae(this.debug),`${this.apiUrl}/runs`,{method:"POST",headers:t,body:Mr(a,`Creating run with id: ${a.id}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(o,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:t}){if(e===void 0&&t===void 0)return;let n=await Promise.all((e==null?void 0:e.map(s=>this.prepareRunCreateOrUpdateInputs(s)))??[]),i=await Promise.all((t==null?void 0:t.map(s=>this.prepareRunCreateOrUpdateInputs(s)))??[]);if(n.length>0&&i.length>0){const s=n.reduce((l,c)=>(c.id&&(l[c.id]=c),l),{}),u=[];for(const l of i)l.id!==void 0&&s[l.id]?s[l.id]={...s[l.id],...l}:u.push(l);n=Object.values(s),i=u}const a={post:n,patch:i};if(!a.post.length&&!a.patch.length)return;const o={post:[],patch:[]};for(const s of["post","patch"]){const u=s,l=a[u].reverse();let c=l.pop();for(;c!==void 0;)o[u].push(c),c=l.pop()}if(o.post.length>0||o.patch.length>0){const s=o.post.map(u=>u.id).concat(o.patch.map(u=>u.id)).join(",");await this._postBatchIngestRuns(Mr(o,`Ingesting runs with ids: ${s}`))}}async _postBatchIngestRuns(e){const t={...this.headers,"Content-Type":"application/json",Accept:"application/json"},n=await this.batchIngestCaller.call(Ae(this.debug),`${this.apiUrl}/runs/batch`,{method:"POST",headers:t,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(n,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:t}){if(e===void 0&&t===void 0)return;const n={};let i=[];for(const c of e??[]){const d=await this.prepareRunCreateOrUpdateInputs(c);d.id!==void 0&&d.attachments!==void 0&&(n[d.id]=d.attachments),delete d.attachments,i.push(d)}let a=[];for(const c of t??[])a.push(await this.prepareRunCreateOrUpdateInputs(c));if(i.find(c=>c.trace_id===void 0||c.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(a.find(c=>c.trace_id===void 0||c.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(i.length>0&&a.length>0){const c=i.reduce((h,f)=>(f.id&&(h[f.id]=f),h),{}),d=[];for(const h of a)h.id!==void 0&&c[h.id]?c[h.id]={...c[h.id],...h}:d.push(h);i=Object.values(c),a=d}if(i.length===0&&a.length===0)return;const u=[],l=[];for(const[c,d]of[["post",i],["patch",a]])for(const h of d){const{inputs:f,outputs:m,events:p,attachments:g,...b}=h,_={inputs:f,outputs:m,events:p},y=Mr(b,`Serializing for multipart ingestion of run with id: ${b.id}`);l.push({name:`${c}.${b.id}`,payload:new Blob([y],{type:`application/json; length=${y.length}`})});for(const[v,w]of Object.entries(_)){if(w===void 0)continue;const S=Mr(w,`Serializing ${v} for multipart ingestion of run with id: ${b.id}`);l.push({name:`${c}.${b.id}.${v}`,payload:new Blob([S],{type:`application/json; length=${S.length}`})})}if(b.id!==void 0){const v=n[b.id];if(v){delete n[b.id];for(const[w,S]of Object.entries(v)){let R,P;if(Array.isArray(S)?[R,P]=S:(R=S.mimeType,P=S.data),w.includes(".")){console.warn(`Skipping attachment '${w}' for run ${b.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}l.push({name:`attachment.${b.id}.${w}`,payload:new Blob([P],{type:`${R}; length=${P.byteLength}`})})}}}u.push(`trace=${b.trace_id},id=${b.id}`)}await this._sendMultipartRequest(l,u.join("; "))}async _createNodeFetchBody(e,t){const n=[];for(const o of e)n.push(new Blob([`--${t}\r
`])),n.push(new Blob([`Content-Disposition: form-data; name="${o.name}"\r
`,`Content-Type: ${o.payload.type}\r
\r
`])),n.push(o.payload),n.push(new Blob([`\r
`]));return n.push(new Blob([`--${t}--\r
`])),await new Blob(n).arrayBuffer()}async _createMultipartStream(e,t){const n=new TextEncoder;return new ReadableStream({async start(a){const o=async s=>{typeof s=="string"?a.enqueue(n.encode(s)):a.enqueue(s)};for(const s of e){await o(`--${t}\r
`),await o(`Content-Disposition: form-data; name="${s.name}"\r
`),await o(`Content-Type: ${s.payload.type}\r
\r
`);const l=s.payload.stream().getReader();try{let c;for(;!(c=await l.read()).done;)a.enqueue(c.value)}finally{l.releaseLock()}await o(`\r
`)}await o(`--${t}--\r
`),a.close()}})}async _sendMultipartRequest(e,t){try{const n="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),i=await(gG()?this._createNodeFetchBody(e,n):this._createMultipartStream(e,n)),a=await this.batchIngestCaller.call(Ae(this.debug),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${n}`},body:i,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(a,"ingest multipart runs",!0)}catch(n){console.warn(`${n.message.trim()}

Context: ${t}`)}}async updateRun(e,t){ke(e),t.inputs&&(t.inputs=await this.processInputs(t.inputs)),t.outputs&&(t.outputs=await this.processOutputs(t.outputs));const n={...t,id:e};if(!this._filterForSampling([n],!0).length)return;if(this.autoBatchTracing&&n.trace_id!==void 0&&n.dotted_order!==void 0){if(t.end_time!==void 0&&n.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:n}).catch(console.error);return}else this.processRunOperation({action:"update",item:n}).catch(console.error);return}const i={...this.headers,"Content-Type":"application/json"},a=await this.caller.call(Ae(this.debug),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:i,body:Mr(t,`Serializing payload to update run with id: ${e}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(a,"update run",!0)}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){ke(e);let n=await this._get(`/runs/${e}`);return t&&(n=await this._loadChildRuns(n)),n}async getRunUrl({runId:e,run:t,projectOpts:n}){if(t!==void 0){let i;t.session_id?i=t.session_id:n!=null&&n.projectName?i=(await this.readProject({projectName:n==null?void 0:n.projectName})).id:n!=null&&n.projectId?i=n==null?void 0:n.projectId:i=(await this.readProject({projectName:Mu("PROJECT")||"default"})).id;const a=await this._getTenantId();return`${this.getHostUrl()}/o/${a}/projects/p/${i}/r/${t.id}?poll=true`}else if(e!==void 0){const i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){var a;const t=await ZG(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),n={},i={};t.sort((o,s)=>((o==null?void 0:o.dotted_order)??"").localeCompare((s==null?void 0:s.dotted_order)??""));for(const o of t){if(o.parent_run_id===null||o.parent_run_id===void 0)throw new Error(`Child run ${o.id} has no parent`);(a=o.dotted_order)!=null&&a.startsWith(e.dotted_order??"")&&o.id!==e.id&&(o.parent_run_id in n||(n[o.parent_run_id]=[]),n[o.parent_run_id].push(o),i[o.id]=o)}e.child_runs=n[e.id]||[];for(const o in n)o!==e.id&&(i[o].child_runs=n[o]);return e}async*listRuns(e){const{projectId:t,projectName:n,parentRunId:i,traceId:a,referenceExampleId:o,startTime:s,executionOrder:u,isRoot:l,runType:c,error:d,id:h,query:f,filter:m,traceFilter:p,treeFilter:g,limit:b,select:_,order:y}=e;let v=[];if(t&&(v=Array.isArray(t)?t:[t]),n){const P=Array.isArray(n)?n:[n],C=await Promise.all(P.map(A=>this.readProject({projectName:A}).then(M=>M.id)));v.push(...C)}const w=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],S={session:v.length?v:null,run_type:c,reference_example:o,query:f,filter:m,trace_filter:p,tree_filter:g,execution_order:u,parent_run:i,start_time:s?s.toISOString():null,error:d,id:h,limit:b,trace:a,select:_||w,is_root:l,order:y};let R=0;for await(const P of this._getCursorPaginatedList("/runs/query",S))if(b){if(R>=b)break;if(P.length+R>b){yield*P.slice(0,b-R);break}R+=P.length,yield*P}else yield*P}async*listGroupRuns(e){const{projectId:t,projectName:n,groupBy:i,filter:a,startTime:o,endTime:s,limit:u,offset:l}=e,d={session_id:t||(await this.readProject({projectName:n})).id,group_by:i,filter:a,start_time:o?o.toISOString():null,end_time:s?s.toISOString():null,limit:Number(u)||100};let h=Number(l)||0;const f="/runs/group",m=`${this.apiUrl}${f}`;for(;;){const p={...d,offset:h},g=Object.fromEntries(Object.entries(p).filter(([w,S])=>S!==void 0)),b=await this.caller.call(Ae(),m,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(g),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(b,`Failed to fetch ${f}`);const _=await b.json(),{groups:y,total:v}=_;if(y.length===0)break;for(const w of y)yield w;if(h+=y.length,h>=v)break}}async getRunStats({id:e,trace:t,parentRun:n,runType:i,projectNames:a,projectIds:o,referenceExampleIds:s,startTime:u,endTime:l,error:c,query:d,filter:h,traceFilter:f,treeFilter:m,isRoot:p,dataSourceType:g}){let b=o||[];a&&(b=[...o||[],...await Promise.all(a.map(S=>this.readProject({projectName:S}).then(R=>R.id)))]);const y=Object.fromEntries(Object.entries({id:e,trace:t,parent_run:n,run_type:i,session:b,reference_example:s,start_time:u,end_time:l,error:c,query:d,filter:h,trace_filter:f,tree_filter:m,is_root:p,data_source_type:g}).filter(([S,R])=>R!==void 0));return await(await this.caller.call(Ae(this.debug),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(y),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:t}={}){const n={run_id:e,share_token:t||Zt()};ke(e);const a=await(await this.caller.call(Ae(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(a===null||!("share_token"in a))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${a.share_token}/r`}async unshareRun(e){ke(e);const t=await this.caller.call(Ae(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(t,"unshare run",!0)}async readRunSharedLink(e){ke(e);const n=await(await this.caller.call(Ae(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(n===null||!("share_token"in n)))return`${this.getHostUrl()}/public/${n.share_token}/r`}async listSharedRuns(e,{runIds:t}={}){const n=new URLSearchParams({share_token:e});if(t!==void 0)for(const o of t)n.append("id",o);return ke(e),await(await this.caller.call(Ae(this.debug),`${this.apiUrl}/public/${e}/runs${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id),ke(e);const i=await(await this.caller.call(Ae(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id);const n={dataset_id:e};ke(e);const a=await(await this.caller.call(Ae(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return a.url=`${this.getHostUrl()}/public/${a.share_token}/d`,a}async unshareDataset(e){ke(e);const t=await this.caller.call(Ae(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(t,"unshare dataset",!0)}async readSharedDataset(e){return ke(e),await(await this.caller.call(Ae(this.debug),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,t){const n={};t!=null&&t.exampleIds&&(n.id=t.exampleIds);const i=new URLSearchParams;Object.entries(n).forEach(([s,u])=>{Array.isArray(u)?u.forEach(l=>i.append(s,l)):i.append(s,u)});const a=await this.caller.call(Ae(this.debug),`${this.apiUrl}/public/${e}/examples?${i.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),o=await a.json();if(!a.ok)throw"detail"in o?new Error(`Failed to list shared examples.
Status: ${a.status}
Message: ${Array.isArray(o.detail)?o.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${a.status} ${a.statusText}`);return o.map(s=>({...s,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:t=null,metadata:n=null,upsert:i=!1,projectExtra:a=null,referenceDatasetId:o=null}){const s=i?"?upsert=true":"",u=`${this.apiUrl}/sessions${s}`,l=a||{};n&&(l.metadata=n);const c={name:e,extra:l,description:t};o!==null&&(c.reference_dataset_id=o);const d=await this.caller.call(Ae(this.debug),u,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(d,"create project"),await d.json()}async updateProject(e,{name:t=null,description:n=null,metadata:i=null,projectExtra:a=null,endTime:o=null}){const s=`${this.apiUrl}/sessions/${e}`;let u=a;i&&(u={...u||{},metadata:i});const l={name:t,extra:u,description:n,end_time:o?new Date(o).toISOString():null},c=await this.caller.call(Ae(this.debug),s,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(c,"update project"),await c.json()}async hasProject({projectId:e,projectName:t}){let n="/sessions";const i=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)ke(e),n+=`/${e}`;else if(t!==void 0)i.append("name",t);else throw new Error("Must provide projectName or projectId");const a=await this.caller.call(Ae(this.debug),`${this.apiUrl}${n}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const o=await a.json();return a.ok?Array.isArray(o)?o.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:t,includeStats:n}){let i="/sessions";const a=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)ke(e),i+=`/${e}`;else if(t!==void 0)a.append("name",t);else throw new Error("Must provide projectName or projectId");n!==void 0&&a.append("include_stats",n.toString());const o=await this._get(i,a);let s;if(Array.isArray(o)){if(o.length===0)throw new Error(`Project[id=${e}, name=${t}] not found`);s=o[0]}else s=o;return s}async getProjectUrl({projectId:e,projectName:t}){if(e===void 0&&t===void 0)throw new Error("Must provide either projectName or projectId");const n=await this.readProject({projectId:e,projectName:t}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${n.id}`}async getDatasetUrl({datasetId:e,datasetName:t}){if(e===void 0&&t===void 0)throw new Error("Must provide either datasetName or datasetId");const n=await this.readDataset({datasetId:e,datasetName:t}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${n.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:t,nameContains:n,referenceDatasetId:i,referenceDatasetName:a,referenceFree:o,metadata:s}={}){const u=new URLSearchParams;if(e!==void 0)for(const l of e)u.append("id",l);if(t!==void 0&&u.append("name",t),n!==void 0&&u.append("name_contains",n),i!==void 0)u.append("reference_dataset",i);else if(a!==void 0){const l=await this.readDataset({datasetName:a});u.append("reference_dataset",l.id)}o!==void 0&&u.append("reference_free",o.toString()),s!==void 0&&u.append("metadata",JSON.stringify(s));for await(const l of this._getPaginated("/sessions",u))yield*l}async deleteProject({projectId:e,projectName:t}){let n;if(e===void 0&&t===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?n=(await this.readProject({projectName:t})).id:n=e,ke(n);const i=await this.caller.call(Ae(this.debug),`${this.apiUrl}/sessions/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(i,`delete session ${n} (${t})`,!0)}async uploadCsv({csvFile:e,fileName:t,inputKeys:n,outputKeys:i,description:a,dataType:o,name:s}){const u=`${this.apiUrl}/datasets/upload`,l=new FormData;l.append("file",e,t),n.forEach(h=>{l.append("input_keys",h)}),i.forEach(h=>{l.append("output_keys",h)}),a&&l.append("description",a),o&&l.append("data_type",o),s&&l.append("name",s);const c=await this.caller.call(Ae(this.debug),u,{method:"POST",headers:this.headers,body:l,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(c,"upload CSV"),await c.json()}async createDataset(e,{description:t,dataType:n,inputsSchema:i,outputsSchema:a,metadata:o}={}){const s={name:e,description:t,extra:o?{metadata:o}:void 0};n&&(s.data_type=n),i&&(s.inputs_schema_definition=i),a&&(s.outputs_schema_definition=a);const u=await this.caller.call(Ae(this.debug),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(u,"create dataset"),await u.json()}async readDataset({datasetId:e,datasetName:t}){let n="/datasets";const i=new URLSearchParams({limit:"1"});if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)ke(e),n+=`/${e}`;else if(t!==void 0)i.append("name",t);else throw new Error("Must provide datasetName or datasetId");const a=await this._get(n,i);let o;if(Array.isArray(a)){if(a.length===0)throw new Error(`Dataset[id=${e}, name=${t}] not found`);o=a[0]}else o=a;return o}async hasDataset({datasetId:e,datasetName:t}){try{return await this.readDataset({datasetId:e,datasetName:t}),!0}catch(n){if(n instanceof Error&&n.message.toLocaleLowerCase().includes("not found"))return!1;throw n}}async diffDatasetVersions({datasetId:e,datasetName:t,fromVersion:n,toVersion:i}){let a=e;if(a===void 0&&t===void 0)throw new Error("Must provide either datasetName or datasetId");if(a!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");a===void 0&&(a=(await this.readDataset({datasetName:t})).id);const o=new URLSearchParams({from_version:typeof n=="string"?n:n.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return await this._get(`/datasets/${a}/versions/diff`,o)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:t}){const n="/datasets";if(e===void 0)if(t!==void 0)e=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${n}/${e}/openai_ft`)).text()).trim().split(`
`).map(s=>JSON.parse(s))}async*listDatasets({limit:e=100,offset:t=0,datasetIds:n,datasetName:i,datasetNameContains:a,metadata:o}={}){const s="/datasets",u=new URLSearchParams({limit:e.toString(),offset:t.toString()});if(n!==void 0)for(const l of n)u.append("id",l);i!==void 0&&u.append("name",i),a!==void 0&&u.append("name_contains",a),o!==void 0&&u.append("metadata",JSON.stringify(o));for await(const l of this._getPaginated(s,u))yield*l}async updateDataset(e){const{datasetId:t,datasetName:n,...i}=e;if(!t&&!n)throw new Error("Must provide either datasetName or datasetId");const a=t??(await this.readDataset({datasetName:n})).id;ke(a);const o=await this.caller.call(Ae(this.debug),`${this.apiUrl}/datasets/${a}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(o,"update dataset"),await o.json()}async updateDatasetTag(e){const{datasetId:t,datasetName:n,asOf:i,tag:a}=e;if(!t&&!n)throw new Error("Must provide either datasetName or datasetId");const o=t??(await this.readDataset({datasetName:n})).id;ke(o);const s=await this.caller.call(Ae(this.debug),`${this.apiUrl}/datasets/${o}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof i=="string"?i:i.toISOString(),tag:a}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(s,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:t}){let n="/datasets",i=e;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0&&(i=(await this.readDataset({datasetName:t})).id),i!==void 0)ke(i),n+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");const a=await this.caller.call(Ae(this.debug),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(a,`delete ${n}`),await a.json()}async indexDataset({datasetId:e,datasetName:t,tag:n}){let i=e;if(!i&&!t)throw new Error("Must provide either datasetName or datasetId");if(i&&t)throw new Error("Must provide either datasetName or datasetId, not both");i||(i=(await this.readDataset({datasetName:t})).id),ke(i);const a={tag:n},o=await this.caller.call(Ae(this.debug),`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(o,"index dataset"),await o.json()}async similarExamples(e,t,n,{filter:i}={}){const a={limit:n,inputs:e};i!==void 0&&(a.filter=i),ke(t);const o=await this.caller.call(Ae(this.debug),`${this.apiUrl}/datasets/${t}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(o,"fetch similar examples"),(await o.json()).examples}async createExample(e,t,n){var c;if(Vj(e)&&(t!==void 0||n!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let i=t?n==null?void 0:n.datasetId:e.dataset_id;const a=t?n==null?void 0:n.datasetName:e.dataset_name;if(i===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:a})).id);const o=(t?n==null?void 0:n.createdAt:e.created_at)||new Date;let s;Vj(e)?s=e:s={inputs:e,outputs:t,created_at:o==null?void 0:o.toISOString(),id:n==null?void 0:n.exampleId,metadata:n==null?void 0:n.metadata,split:n==null?void 0:n.split,source_run_id:n==null?void 0:n.sourceRunId,use_source_run_io:n==null?void 0:n.useSourceRunIO,use_source_run_attachments:n==null?void 0:n.useSourceRunAttachments,attachments:n==null?void 0:n.attachments};const u=await this._uploadExamplesMultipart(i,[s]);return await this.readExample(((c=u.example_ids)==null?void 0:c[0])??Zt())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const _=e;let y=_[0].dataset_id;const v=_[0].dataset_name;if(y===void 0&&v===void 0)throw new Error("Must provide either datasetName or datasetId");if(y!==void 0&&v!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");y===void 0&&(y=(await this.readDataset({datasetName:v})).id);const w=await this._uploadExamplesMultipart(y,_);return await Promise.all(w.example_ids.map(R=>this.readExample(R)))}const{inputs:t,outputs:n,metadata:i,splits:a,sourceRunIds:o,useSourceRunIOs:s,useSourceRunAttachments:u,attachments:l,exampleIds:c,datasetId:d,datasetName:h}=e;if(t===void 0)throw new Error("Must provide inputs when using legacy parameters");let f=d;const m=h;if(f===void 0&&m===void 0)throw new Error("Must provide either datasetName or datasetId");if(f!==void 0&&m!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");f===void 0&&(f=(await this.readDataset({datasetName:m})).id);const p=t.map((_,y)=>({dataset_id:f,inputs:_,outputs:n==null?void 0:n[y],metadata:i==null?void 0:i[y],split:a==null?void 0:a[y],id:c==null?void 0:c[y],attachments:l==null?void 0:l[y],source_run_id:o==null?void 0:o[y],use_source_run_io:s==null?void 0:s[y],use_source_run_attachments:u==null?void 0:u[y]})),g=await this._uploadExamplesMultipart(f,p);return await Promise.all(g.example_ids.map(_=>this.readExample(_)))}async createLLMExample(e,t,n){return this.createExample({input:e},{output:t},n)}async createChatExample(e,t,n){const i=e.map(o=>W1(o)?G1(o):o),a=W1(t)?G1(t):t;return this.createExample({input:i},{output:a},n)}async readExample(e){ke(e);const t=`/examples/${e}`,n=await this._get(t),{attachment_urls:i,...a}=n,o=a;return i&&(o.attachments=Object.entries(i).reduce((s,[u,l])=>(s[u.slice(11)]={presigned_url:l.presigned_url,mime_type:l.mime_type},s),{})),o}async*listExamples({datasetId:e,datasetName:t,exampleIds:n,asOf:i,splits:a,inlineS3Urls:o,metadata:s,limit:u,offset:l,filter:c,includeAttachments:d}={}){let h;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)h=e;else if(t!==void 0)h=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide a datasetName or datasetId");const f=new URLSearchParams({dataset:h}),m=i?typeof i=="string"?i:i==null?void 0:i.toISOString():void 0;m&&f.append("as_of",m);const p=o??!0;if(f.append("inline_s3_urls",p.toString()),n!==void 0)for(const b of n)f.append("id",b);if(a!==void 0)for(const b of a)f.append("splits",b);if(s!==void 0){const b=JSON.stringify(s);f.append("metadata",b)}u!==void 0&&f.append("limit",u.toString()),l!==void 0&&f.append("offset",l.toString()),c!==void 0&&f.append("filter",c),d===!0&&["attachment_urls","outputs","metadata"].forEach(b=>f.append("select",b));let g=0;for await(const b of this._getPaginated("/examples",f)){for(const _ of b){const{attachment_urls:y,...v}=_,w=v;y&&(w.attachments=Object.entries(y).reduce((S,[R,P])=>(S[R.slice(11)]={presigned_url:P.presigned_url,mime_type:P.mime_type||void 0},S),{})),yield w,g++}if(u!==void 0&&g>=u)break}}async deleteExample(e){ke(e);const t=`/examples/${e}`,n=await this.caller.call(Ae(this.debug),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(n,`delete ${t}`),await n.json()}async updateExample(e,t){let n;t?n=e:n=e.id,ke(n);let i;t?i={id:n,...t}:i=e;let a;return i.dataset_id!==void 0?a=i.dataset_id:a=(await this.readExample(n)).dataset_id,this._updateExamplesMultipart(a,[i])}async updateExamples(e){let t;return e[0].dataset_id===void 0?t=(await this.readExample(e[0].id)).dataset_id:t=e[0].dataset_id,this._updateExamplesMultipart(t,e)}async readDatasetVersion({datasetId:e,datasetName:t,asOf:n,tag:i}){let a;if(e?a=e:a=(await this.readDataset({datasetName:t})).id,ke(a),n&&i||!n&&!i)throw new Error("Exactly one of asOf and tag must be specified.");const o=new URLSearchParams;n!==void 0&&o.append("as_of",typeof n=="string"?n:n.toISOString()),i!==void 0&&o.append("tag",i);const s=await this.caller.call(Ae(this.debug),`${this.apiUrl}/datasets/${a}/version?${o.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(s,"read dataset version"),await s.json()}async listDatasetSplits({datasetId:e,datasetName:t,asOf:n}){let i;if(e===void 0&&t===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?i=(await this.readDataset({datasetName:t})).id:i=e,ke(i);const a=new URLSearchParams,o=n?typeof n=="string"?n:n==null?void 0:n.toISOString():void 0;return o&&a.append("as_of",o),await this._get(`/datasets/${i}/splits`,a)}async updateDatasetSplits({datasetId:e,datasetName:t,splitName:n,exampleIds:i,remove:a=!1}){let o;if(e===void 0&&t===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?o=(await this.readDataset({datasetName:t})).id:o=e,ke(o);const s={split_name:n,examples:i.map(l=>(ke(l),l)),remove:a},u=await this.caller.call(Ae(this.debug),`${this.apiUrl}/datasets/${o}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(u,"update dataset splits",!0)}async evaluateRun(e,t,{sourceInfo:n,loadChildRuns:i,referenceExample:a}={loadChildRuns:!1}){YV("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let o;if(typeof e=="string")o=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)o=e;else throw new Error(`Invalid run type: ${typeof e}`);o.reference_example_id!==null&&o.reference_example_id!==void 0&&(a=await this.readExample(o.reference_example_id));const s=await t.evaluateRun(o,a),[u,l]=await this._logEvaluationFeedback(s,o,n);return l[0]}async createFeedback(e,t,{score:n,value:i,correction:a,comment:o,sourceInfo:s,feedbackSourceType:u="api",sourceRunId:l,feedbackId:c,feedbackConfig:d,projectId:h,comparativeExperimentId:f}){var _;if(!e&&!h)throw new Error("One of runId or projectId must be provided");if(e&&h)throw new Error("Only one of runId or projectId can be provided");const m={type:u??"api",metadata:s??{}};l!==void 0&&(m==null?void 0:m.metadata)!==void 0&&!m.metadata.__run&&(m.metadata.__run={run_id:l}),(m==null?void 0:m.metadata)!==void 0&&((_=m.metadata.__run)==null?void 0:_.run_id)!==void 0&&ke(m.metadata.__run.run_id);const p={id:c??Zt(),run_id:e,key:t,score:kj(n),value:i,correction:a,comment:o,feedback_source:m,comparative_experiment_id:f,feedbackConfig:d,session_id:h},g=`${this.apiUrl}/feedback`,b=await this.caller.call(Ae(this.debug),g,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(b,"create feedback",!0),p}async updateFeedback(e,{score:t,value:n,correction:i,comment:a}){const o={};t!=null&&(o.score=kj(t)),n!=null&&(o.value=n),i!=null&&(o.correction=i),a!=null&&(o.comment=a),ke(e);const s=await this.caller.call(Ae(this.debug),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(s,"update feedback",!0)}async readFeedback(e){ke(e);const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){ke(e);const t=`/feedback/${e}`,n=await this.caller.call(Ae(this.debug),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(n,`delete ${t}`),await n.json()}async*listFeedback({runIds:e,feedbackKeys:t,feedbackSourceTypes:n}={}){const i=new URLSearchParams;if(e&&i.append("run",e.join(",")),t)for(const a of t)i.append("key",a);if(n)for(const a of n)i.append("source",a);for await(const a of this._getPaginated("/feedback",i))yield*a}async createPresignedFeedbackToken(e,t,{expiration:n,feedbackConfig:i}={}){const a={run_id:e,feedback_key:t,feedback_config:i};return n?typeof n=="string"?a.expires_at=n:(n!=null&&n.hours||n!=null&&n.minutes||n!=null&&n.days)&&(a.expires_in=n):a.expires_in={hours:3},await(await this.caller.call(Ae(this.debug),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:t,referenceDatasetId:n,createdAt:i,description:a,metadata:o,id:s}){var c;if(t.length===0)throw new Error("At least one experiment is required");if(n||(n=(await this.readProject({projectId:t[0]})).reference_dataset_id),!n==null)throw new Error("A reference dataset is required");const u={id:s,name:e,experiment_ids:t,reference_dataset_id:n,description:a,created_at:(c=i??new Date)==null?void 0:c.toISOString(),extra:{}};return o&&(u.extra.metadata=o),await(await this.caller.call(Ae(this.debug),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){ke(e);const t=new URLSearchParams({run_id:e});for await(const n of this._getPaginated("/feedback/tokens",t))yield*n}_selectEvalResults(e){let t;return"results"in e?t=e.results:Array.isArray(e)?t=e:t=[e],t}async _logEvaluationFeedback(e,t,n){const i=this._selectEvalResults(e),a=[];for(const o of i){let s=n||{};o.evaluatorInfo&&(s={...o.evaluatorInfo,...s});let u=null;o.targetRunId?u=o.targetRunId:t&&(u=t.id),a.push(await this.createFeedback(u,o.key,{score:o.score,value:o.value,comment:o.comment,correction:o.correction,sourceInfo:s,sourceRunId:o.sourceRunId,feedbackConfig:o.feedbackConfig,feedbackSourceType:"model"}))}return[i,a]}async logEvaluationFeedback(e,t,n){const[i]=await this._logEvaluationFeedback(e,t,n);return i}async*listAnnotationQueues(e={}){const{queueIds:t,name:n,nameContains:i,limit:a}=e,o=new URLSearchParams;t&&t.forEach((u,l)=>{ke(u,`queueIds[${l}]`),o.append("ids",u)}),n&&o.append("name",n),i&&o.append("name_contains",i),o.append("limit",(a!==void 0?Math.min(a,100):100).toString());let s=0;for await(const u of this._getPaginated("/annotation-queues",o))if(yield*u,s++,a!==void 0&&s>=a)break}async createAnnotationQueue(e){const{name:t,description:n,queueId:i,rubricInstructions:a}=e,o={name:t,description:n,id:i||Zt(),rubric_instructions:a},s=await this.caller.call(Ae(this.debug),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(o).filter(([l,c])=>c!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(s,"create annotation queue"),await s.json()}async readAnnotationQueue(e){const t=await this.caller.call(Ae(this.debug),`${this.apiUrl}/annotation-queues/${ke(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(t,"read annotation queue"),await t.json()}async updateAnnotationQueue(e,t){const{name:n,description:i,rubricInstructions:a}=t,o=await this.caller.call(Ae(this.debug),`${this.apiUrl}/annotation-queues/${ke(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:n,description:i,rubric_instructions:a}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(o,"update annotation queue")}async deleteAnnotationQueue(e){const t=await this.caller.call(Ae(this.debug),`${this.apiUrl}/annotation-queues/${ke(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(t,"delete annotation queue")}async addRunsToAnnotationQueue(e,t){const n=await this.caller.call(Ae(this.debug),`${this.apiUrl}/annotation-queues/${ke(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t.map((i,a)=>ke(i,`runIds[${a}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(n,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,t){const n=`/annotation-queues/${ke(e,"queueId")}/run`,i=await this.caller.call(Ae(this.debug),`${this.apiUrl}${n}/${t}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(i,"get run from annotation queue"),await i.json()}async deleteRunFromAnnotationQueue(e,t){const n=await this.caller.call(Ae(this.debug),`${this.apiUrl}/annotation-queues/${ke(e,"queueId")}/runs/${ke(t,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(n,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){const t=await this.caller.call(Ae(this.debug),`${this.apiUrl}/annotation-queues/${ke(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(t,"get size from annotation queue"),await t.json()}async _currentTenantIsOwner(e){const t=await this._getSettings();return e=="-"||t.tenant_handle===e}async _ownerConflictError(e,t){const n=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${n.tenant_handle}

      Requested tenant: ${t}`)}async _getLatestCommitHash(e){const t=await this.caller.call(Ae(this.debug),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),n=await t.json();if(!t.ok){const i=typeof n.detail=="string"?n.detail:JSON.stringify(n.detail),a=new Error(`Error ${t.status}: ${t.statusText}
${i}`);throw a.statusCode=t.status,a}if(n.commits.length!==0)return n.commits[0].commit_hash}async _likeOrUnlikePrompt(e,t){const[n,i,a]=ul(e),o=await this.caller.call(Ae(this.debug),`${this.apiUrl}/likes/${n}/${i}`,{method:"POST",body:JSON.stringify({like:t}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(o,`${t?"like":"unlike"} prompt`),await o.json()}async _getPromptUrl(e){const[t,n,i]=ul(e);if(await this._currentTenantIsOwner(t)){const a=await this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${n}/${i.substring(0,8)}?organizationId=${a.id}`:`${this.getHostUrl()}/prompts/${n}?organizationId=${a.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${t}/${n}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${t}/${n}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const t of this._getPaginated(`/commits/${e}/`,new URLSearchParams,n=>n.commits))yield*t}async*listPrompts(e){const t=new URLSearchParams;t.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),t.append("sort_direction","desc"),t.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&t.append("is_public",e.isPublic.toString()),e!=null&&e.query&&t.append("query",e.query);for await(const n of this._getPaginated("/repos",t,i=>i.repos))yield*n}async getPrompt(e){const[t,n,i]=ul(e),a=await this.caller.call(Ae(this.debug),`${this.apiUrl}/repos/${t}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(a.status===404)return null;await Ve(a,"get prompt");const o=await a.json();return o.repo?o.repo:null}async createPrompt(e,t){const n=await this._getSettings();if(t!=null&&t.isPublic&&!n.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[i,a,o]=ul(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("create a prompt",i);const s={repo_handle:a,...(t==null?void 0:t.description)&&{description:t.description},...(t==null?void 0:t.readme)&&{readme:t.readme},...(t==null?void 0:t.tags)&&{tags:t.tags},is_public:!!(t!=null&&t.isPublic)},u=await this.caller.call(Ae(this.debug),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(u,"create prompt");const{repo:l}=await u.json();return l}async createCommit(e,t,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[i,a,o]=ul(e),s=(n==null?void 0:n.parentCommitHash)==="latest"||!(n!=null&&n.parentCommitHash)?await this._getLatestCommitHash(`${i}/${a}`):n==null?void 0:n.parentCommitHash,u={manifest:JSON.parse(JSON.stringify(t)),parent_commit:s},l=await this.caller.call(Ae(this.debug),`${this.apiUrl}/commits/${i}/${a}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(l,"create commit");const c=await l.json();return this._getPromptUrl(`${i}/${a}${c.commit_hash?`:${c.commit_hash}`:""}`)}async updateExamplesMultipart(e,t=[]){return this._updateExamplesMultipart(e,t)}async _updateExamplesMultipart(e,t=[]){var s;if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const n=new FormData;for(const u of t){const l=u.id,c={...u.metadata&&{metadata:u.metadata},...u.split&&{split:u.split}},d=Mr(c,`Serializing body for example with id: ${l}`),h=new Blob([d],{type:"application/json"});if(n.append(l,h),u.inputs){const f=Mr(u.inputs,`Serializing inputs for example with id: ${l}`),m=new Blob([f],{type:"application/json"});n.append(`${l}.inputs`,m)}if(u.outputs){const f=Mr(u.outputs,`Serializing outputs whle updating example with id: ${l}`),m=new Blob([f],{type:"application/json"});n.append(`${l}.outputs`,m)}if(u.attachments)for(const[f,m]of Object.entries(u.attachments)){let p,g;Array.isArray(m)?[p,g]=m:(p=m.mimeType,g=m.data);const b=new Blob([g],{type:`${p}; length=${g.byteLength}`});n.append(`${l}.attachment.${f}`,b)}if(u.attachments_operations){const f=Mr(u.attachments_operations,`Serializing attachments while updating example with id: ${l}`),m=new Blob([f],{type:"application/json"});n.append(`${l}.attachments_operations`,m)}}const i=e??((s=t[0])==null?void 0:s.dataset_id);return await(await this.caller.call(Ae(this.debug),`${this.apiUrl}/v1/platform/datasets/${i}/examples`,{method:"PATCH",headers:this.headers,body:n})).json()}async uploadExamplesMultipart(e,t=[]){return this._uploadExamplesMultipart(e,t)}async _uploadExamplesMultipart(e,t=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const n=new FormData;for(const o of t){const s=(o.id??Zt()).toString(),u={created_at:o.created_at,...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split},...o.source_run_id&&{source_run_id:o.source_run_id},...o.use_source_run_io&&{use_source_run_io:o.use_source_run_io},...o.use_source_run_attachments&&{use_source_run_attachments:o.use_source_run_attachments}},l=Mr(u,`Serializing body for uploaded example with id: ${s}`),c=new Blob([l],{type:"application/json"});if(n.append(s,c),o.inputs){const d=Mr(o.inputs,`Serializing inputs for uploaded example with id: ${s}`),h=new Blob([d],{type:"application/json"});n.append(`${s}.inputs`,h)}if(o.outputs){const d=Mr(o.outputs,`Serializing outputs for uploaded example with id: ${s}`),h=new Blob([d],{type:"application/json"});n.append(`${s}.outputs`,h)}if(o.attachments)for(const[d,h]of Object.entries(o.attachments)){let f,m;Array.isArray(h)?[f,m]=h:(f=h.mimeType,m=h.data);const p=new Blob([m],{type:`${f}; length=${m.byteLength}`});n.append(`${s}.attachment.${d}`,p)}}const i=await this.caller.call(Ae(this.debug),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:n});return await Ve(i,"upload examples"),await i.json()}async updatePrompt(e,t){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,i]=ul(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("update a prompt",n);const a={};if((t==null?void 0:t.description)!==void 0&&(a.description=t.description),(t==null?void 0:t.readme)!==void 0&&(a.readme=t.readme),(t==null?void 0:t.tags)!==void 0&&(a.tags=t.tags),(t==null?void 0:t.isPublic)!==void 0&&(a.is_public=t.isPublic),(t==null?void 0:t.isArchived)!==void 0&&(a.is_archived=t.isArchived),Object.keys(a).length===0)throw new Error("No valid update options provided");const o=await this.caller.call(Ae(this.debug),`${this.apiUrl}/repos/${n}/${i}`,{method:"PATCH",body:JSON.stringify(a),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ve(o,"update prompt"),o.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[t,n,i]=ul(e);if(!await this._currentTenantIsOwner(t))throw await this._ownerConflictError("delete a prompt",t);return await(await this.caller.call(Ae(this.debug),`${this.apiUrl}/repos/${t}/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,t){const[n,i,a]=ul(e),o=await this.caller.call(Ae(this.debug),`${this.apiUrl}/commits/${n}/${i}/${a}${t!=null&&t.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ve(o,"pull prompt commit");const s=await o.json();return{owner:n,repo:i,commit_hash:s.commit_hash,manifest:s.manifest,examples:s.examples}}async _pullPrompt(e,t){const n=await this.pullPromptCommit(e,{includeModel:t==null?void 0:t.includeModel});return JSON.stringify(n.manifest)}async pushPrompt(e,t){return await this.promptExists(e)?t&&Object.keys(t).some(i=>i!=="object")&&await this.updatePrompt(e,{description:t==null?void 0:t.description,readme:t==null?void 0:t.readme,tags:t==null?void 0:t.tags,isPublic:t==null?void 0:t.isPublic}):await this.createPrompt(e,{description:t==null?void 0:t.description,readme:t==null?void 0:t.readme,tags:t==null?void 0:t.tags,isPublic:t==null?void 0:t.isPublic}),t!=null&&t.object?await this.createCommit(e,t==null?void 0:t.object,{parentCommitHash:t==null?void 0:t.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,t={}){const{sourceApiUrl:n=this.apiUrl,datasetName:i}=t,[a,o]=this.parseTokenOrUrl(e,n),s=new pR({apiUrl:a,apiKey:"placeholder"}),u=await s.readSharedDataset(o),l=i||u.name;try{if(await this.hasDataset({datasetId:l})){console.log(`Dataset ${l} already exists in your tenant. Skipping.`);return}}catch{}const c=await s.listSharedExamples(o),d=await this.createDataset(l,{description:u.description,dataType:u.data_type||"kv",inputsSchema:u.inputs_schema_definition??void 0,outputsSchema:u.outputs_schema_definition??void 0});try{await this.createExamples({inputs:c.map(h=>h.inputs),outputs:c.flatMap(h=>h.outputs?[h.outputs]:[]),datasetId:d.id})}catch(h){throw console.error(`An error occurred while creating dataset ${l}. You should delete it manually.`),h}}parseTokenOrUrl(e,t,n=2,i="dataset"){try{return ke(e),[t,e]}catch{}try{const o=new URL(e).pathname.split("/").filter(s=>s!=="");if(o.length>=n){const s=o[o.length-n];return[t,s]}else throw new Error(`Invalid public ${i} URL: ${e}`)}catch{throw new Error(`Invalid public ${i} URL or token: ${e}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()])}};function Vj(r){return"dataset_id"in r||"dataset_name"in r}const r7=r=>!!["TRACING_V2","TRACING"].find(t=>Mu(t)==="true"),Hy=Symbol.for("lc:context_variables");function n7(r){return r.replace(/[-:.]/g,"")}function i7(r,e,t=1){const n=t.toFixed(0).slice(0,3).padStart(3,"0");return n7(`${new Date(r).toISOString().slice(0,-1)}${n}Z`)+e}class a_{constructor(e,t,n,i){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=t,this.project_name=n,this.replicas=i}static fromHeader(e){const t=e.split(",");let n={},i=[],a,o;for(const s of t){const[u,l]=s.split("="),c=decodeURIComponent(l);u==="langsmith-metadata"?n=JSON.parse(c):u==="langsmith-tags"?i=c.split(","):u==="langsmith-project"?a=c:u==="langsmith-replicas"&&(o=JSON.parse(c))}return new a_(n,i,a,o)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class vr{constructor(e){var s;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a3(e)){Object.assign(this,{...e});return}const t=vr.getDefaultConfig(),{metadata:n,...i}=e,a=i.client??vr.getSharedClient(),o={...n,...(s=i==null?void 0:i.extra)==null?void 0:s.metadata};if(i.extra={...i.extra,metadata:o},Object.assign(this,{...t,...i,client:a}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const u=i7(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+u:this.dotted_order=u}}set metadata(e){var t;this.extra={...this.extra,metadata:{...(t=this.extra)==null?void 0:t.metadata,...e}}}get metadata(){var e;return(e=this.extra)==null?void 0:e.metadata}static getDefaultConfig(){return{id:Zt(),run_type:"chain",project_name:GV(),child_runs:[],api_url:Tl("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:Tl("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return vr.sharedClient||(vr.sharedClient=new i3),vr.sharedClient}createChild(e){var u,l,c,d,h,f;const t=this.child_execution_order+1,n=new vr({...e,parent_run:this,project_name:this.project_name,replicas:this.replicas,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:t,child_execution_order:t});Hy in this&&(n[Hy]=this[Hy]);const i=Symbol.for("lc:child_config"),a=((u=e.extra)==null?void 0:u[i])??this.extra[i];if(o7(a)){const m={...a},p=a7(m.callbacks)?(c=(l=m.callbacks).copy)==null?void 0:c.call(l):void 0;p&&(Object.assign(p,{_parentRunId:n.id}),(f=(h=(d=p.handlers)==null?void 0:d.find(o3))==null?void 0:h.updateFromRunTree)==null||f.call(h,n),m.callbacks=p),n.extra[i]=m}const o=new Set;let s=this;for(;s!=null&&!o.has(s.id);)o.add(s.id),s.child_execution_order=Math.max(s.child_execution_order,t),s=s.parent_run;return this.child_runs.push(n),n}async end(e,t,n=Date.now(),i){this.outputs=this.outputs??e,this.error=this.error??t,this.end_time=this.end_time??n,i&&Object.keys(i).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...i}}:{metadata:i})}_convertToCreate(e,t,n=!0){var s,u;const i=e.extra??{};if(((s=i==null?void 0:i.runtime)==null?void 0:s.library)===void 0&&(i.runtime||(i.runtime={}),t))for(const[l,c]of Object.entries(t))i.runtime[l]||(i.runtime[l]=c);let a,o;return n?(o=(u=e.parent_run)==null?void 0:u.id,a=[]):(a=e.child_runs.map(l=>this._convertToCreate(l,t,n)),o=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:i,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:a,parent_run_id:o,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_remapForProject(e,t,n=!0){const i=this._convertToCreate(this,t,n);if(e===this.project_name)return i;const a=d=>M1(`${d}:${e}`,M1.DNS),o=a(i.id),s=i.trace_id?a(i.trace_id):void 0,u=i.parent_run_id?a(i.parent_run_id):void 0;let l;if(i.dotted_order){const d=s7(i.dotted_order),h=[];for(let m=0;m<d.length-1;m++){const[p,g]=d[m],b=a(g);h.push(p.toISOString().replace(/[-:]/g,"").replace(".","")+b)}const[f]=d[d.length-1];h.push(f.toISOString().replace(/[-:]/g,"").replace(".","")+o),l=h.join(".")}else l=void 0;return{...i,id:o,trace_id:s,parent_run_id:u,dotted_order:l,session_name:e}}async postRun(e=!0){try{const t=ZV();if(this.replicas&&this.replicas.length>0)for(const[n]of this.replicas){const i=this._remapForProject(n,t,!0);await this.client.createRun(i)}else{const n=this._convertToCreate(this,t,e);await this.client.createRun(n)}if(!e){YV("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const n of this.child_runs)await n.postRun(!1)}}catch(t){console.error(`Error in postRun for run ${this.id}:`,t)}}async patchRun(){var e;if(this.replicas&&this.replicas.length>0)for(const[t,n]of this.replicas){const i=this._remapForProject(t);await this.client.updateRun(i.id,{inputs:i.inputs,outputs:i.outputs,error:i.error,parent_run_id:i.parent_run_id,session_name:i.session_name,reference_example_id:i.reference_example_id,end_time:i.end_time,dotted_order:i.dotted_order,trace_id:i.trace_id,events:i.events,tags:i.tags,extra:i.extra,attachments:this.attachments,...n})}else try{const t={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(e=this.parent_run)==null?void 0:e.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};await this.client.updateRun(this.id,t)}catch(t){console.error(`Error in patchRun for run ${this.id}`,t)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,t){var l,c,d,h;const n=e==null?void 0:e.callbacks;let i,a,o,s=r7();if(n){const f=((l=n==null?void 0:n.getParentRunId)==null?void 0:l.call(n))??"",m=(c=n==null?void 0:n.handlers)==null?void 0:c.find(p=>(p==null?void 0:p.name)=="langchain_tracer");i=(d=m==null?void 0:m.getRun)==null?void 0:d.call(m,f),a=m==null?void 0:m.projectName,o=m==null?void 0:m.client,s=s||!!m}return i?new vr({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:o,tracingEnabled:s,project_name:a,tags:[...new Set(((i==null?void 0:i.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(h=i==null?void 0:i.extra)==null?void 0:h.metadata,...e==null?void 0:e.metadata}}}).createChild(t):new vr({...t,client:o,tracingEnabled:s,project_name:a})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,t){var l;const n="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,i=n["langsmith-trace"];if(!i||typeof i!="string")return;const a=i.trim(),o=a.split(".").map(c=>{const[d,h]=c.split("Z");return{strTime:d,time:Date.parse(d+"Z"),uuid:h}}),s=o[0].uuid,u={...t,name:(t==null?void 0:t.name)??"parent",run_type:(t==null?void 0:t.run_type)??"chain",start_time:(t==null?void 0:t.start_time)??Date.now(),id:(l=o.at(-1))==null?void 0:l.uuid,trace_id:s,dotted_order:a};if(n.baggage&&typeof n.baggage=="string"){const c=a_.fromHeader(n.baggage);u.metadata=c.metadata,u.tags=c.tags,u.project_name=c.project_name,u.replicas=c.replicas}return new vr(u)}toHeaders(e){var n;const t={"langsmith-trace":this.dotted_order,baggage:new a_((n=this.extra)==null?void 0:n.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(const[i,a]of Object.entries(t))e.set(i,a);return t}}Object.defineProperty(vr,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function a3(r){return r!==void 0&&typeof r.createChild=="function"&&typeof r.postRun=="function"}function o3(r){return typeof r=="object"&&r!=null&&typeof r.name=="string"&&r.name==="langchain_tracer"}function Hj(r){return Array.isArray(r)&&r.some(e=>o3(e))}function a7(r){return typeof r=="object"&&r!=null&&Array.isArray(r.handlers)}function o7(r){var e;return r!==void 0&&typeof r.callbacks=="object"&&(Hj((e=r.callbacks)==null?void 0:e.handlers)||Hj(r.callbacks))}function s7(r){return r.split(".").map(t=>{const n=t.slice(0,-36),i=t.slice(-36),a=parseInt(n.slice(0,4)),o=parseInt(n.slice(4,6))-1,s=parseInt(n.slice(6,8)),u=parseInt(n.slice(9,11)),l=parseInt(n.slice(11,13)),c=parseInt(n.slice(13,15)),d=parseInt(n.slice(15,21));return[new Date(a,o,s,u,l,c,d/1e3),i]})}const u7=r=>{if(r)return r.events=r.events??[],r.child_runs=r.child_runs??[],r};function hR(r,e){if(r)return new vr({...r,parent_run:hR(e),child_runs:r.child_runs.map(t=>hR(t)).filter(t=>t!==void 0),extra:{...r.extra,runtime:VW()},tracingEnabled:!1})}function Ky(r,e){return r&&!Array.isArray(r)&&typeof r=="object"?r:{[e]:r}}function l7(r){return r.replace(/[-:.]/g,"")}function c7(r,e,t){const n=t.toFixed(0).slice(0,3).padStart(3,"0");return l7(`${new Date(r).toISOString().slice(0,-1)}${n}Z`)+e}function Mf(r){return typeof r._addRunToRunMap=="function"}class gm extends hm{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"runTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!1})}copy(){return this}getRunById(e){if(e!==void 0)return this.usesRunTreeMap?u7(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}_addRunToRunMap(e){const t=c7(e.start_time,e.id,e.execution_order),n={...e},i=this.getRunById(n.parent_run_id);if(n.parent_run_id!==void 0?i&&(this._addChildRun(i,n),i.child_execution_order=Math.max(i.child_execution_order,n.child_execution_order),n.trace_id=i.trace_id,i.dotted_order!==void 0&&(n.dotted_order=[i.dotted_order,t].join("."))):(n.trace_id=n.id,n.dotted_order=t),this.usesRunTreeMap){const a=hR(n,i);a!==void 0&&this.runTreeMap.set(n.id,a)}else this.runMap.set(n.id,n);return n}async _endTrace(e){var n;const t=e.parent_run_id!==void 0&&this.getRunById(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),await((n=this.onRunUpdate)==null?void 0:n.call(this,e)),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){const t=e!==void 0&&this.getRunById(e);return t?t.child_execution_order+1:1}_createRunForLLMStart(e,t,n,i,a,o,s,u){const l=this._getExecutionOrder(i),c=Date.now(),d=s?{...a,metadata:s}:a,h={id:n,name:u??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:d??{},tags:o||[]};return this._addRunToRunMap(h)}async handleLLMStart(e,t,n,i,a,o,s,u){var c,d;const l=this.getRunById(n)??this._createRunForLLMStart(e,t,n,i,a,o,s,u);return await((c=this.onRunCreate)==null?void 0:c.call(this,l)),await((d=this.onLLMStart)==null?void 0:d.call(this,l)),l}_createRunForChatModelStart(e,t,n,i,a,o,s,u){const l=this._getExecutionOrder(i),c=Date.now(),d=s?{...a,metadata:s}:a,h={id:n,name:u??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:d??{},tags:o||[]};return this._addRunToRunMap(h)}async handleChatModelStart(e,t,n,i,a,o,s,u){var c,d;const l=this.getRunById(n)??this._createRunForChatModelStart(e,t,n,i,a,o,s,u);return await((c=this.onRunCreate)==null?void 0:c.call(this,l)),await((d=this.onLLMStart)==null?void 0:d.call(this,l)),l}async handleLLMEnd(e,t,n,i,a){var s;const o=this.getRunById(t);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error("No LLM run to end.");return o.end_time=Date.now(),o.outputs=e,o.events.push({name:"end",time:new Date(o.end_time).toISOString()}),o.extra={...o.extra,...a},await((s=this.onLLMEnd)==null?void 0:s.call(this,o)),await this._endTrace(o),o}async handleLLMError(e,t,n,i,a){var s;const o=this.getRunById(t);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error("No LLM run to end.");return o.end_time=Date.now(),o.error=this.stringifyError(e),o.events.push({name:"error",time:new Date(o.end_time).toISOString()}),o.extra={...o.extra,...a},await((s=this.onLLMError)==null?void 0:s.call(this,o)),await this._endTrace(o),o}_createRunForChainStart(e,t,n,i,a,o,s,u){const l=this._getExecutionOrder(i),c=Date.now(),d={id:n,name:u??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:t,execution_order:l,child_execution_order:l,run_type:s??"chain",child_runs:[],extra:o?{metadata:o}:{},tags:a||[]};return this._addRunToRunMap(d)}async handleChainStart(e,t,n,i,a,o,s,u){var c,d;const l=this.getRunById(n)??this._createRunForChainStart(e,t,n,i,a,o,s,u);return await((c=this.onRunCreate)==null?void 0:c.call(this,l)),await((d=this.onChainStart)==null?void 0:d.call(this,l)),l}async handleChainEnd(e,t,n,i,a){var s;const o=this.getRunById(t);if(!o)throw new Error("No chain run to end.");return o.end_time=Date.now(),o.outputs=Ky(e,"output"),o.events.push({name:"end",time:new Date(o.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(o.inputs=Ky(a.inputs,"input")),await((s=this.onChainEnd)==null?void 0:s.call(this,o)),await this._endTrace(o),o}async handleChainError(e,t,n,i,a){var s;const o=this.getRunById(t);if(!o)throw new Error("No chain run to end.");return o.end_time=Date.now(),o.error=this.stringifyError(e),o.events.push({name:"error",time:new Date(o.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(o.inputs=Ky(a.inputs,"input")),await((s=this.onChainError)==null?void 0:s.call(this,o)),await this._endTrace(o),o}_createRunForToolStart(e,t,n,i,a,o,s){const u=this._getExecutionOrder(i),l=Date.now(),c={id:n,name:s??e.id[e.id.length-1],parent_run_id:i,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{input:t},execution_order:u,child_execution_order:u,run_type:"tool",child_runs:[],extra:o?{metadata:o}:{},tags:a||[]};return this._addRunToRunMap(c)}async handleToolStart(e,t,n,i,a,o,s){var l,c;const u=this.getRunById(n)??this._createRunForToolStart(e,t,n,i,a,o,s);return await((l=this.onRunCreate)==null?void 0:l.call(this,u)),await((c=this.onToolStart)==null?void 0:c.call(this,u)),u}async handleToolEnd(e,t){var i;const n=this.getRunById(t);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleToolError(e,t){var i;const n=this.getRunById(t);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleAgentAction(e,t){var a;const n=this.getRunById(t);if(!n||(n==null?void 0:n.run_type)!=="chain")return;const i=n;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((a=this.onAgentAction)==null?void 0:a.call(this,n))}async handleAgentEnd(e,t){var i;const n=this.getRunById(t);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,n)))}_createRunForRetrieverStart(e,t,n,i,a,o,s){const u=this._getExecutionOrder(i),l=Date.now(),c={id:n,name:s??e.id[e.id.length-1],parent_run_id:i,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{query:t},execution_order:u,child_execution_order:u,run_type:"retriever",child_runs:[],extra:o?{metadata:o}:{},tags:a||[]};return this._addRunToRunMap(c)}async handleRetrieverStart(e,t,n,i,a,o,s){var l,c;const u=this.getRunById(n)??this._createRunForRetrieverStart(e,t,n,i,a,o,s);return await((l=this.onRunCreate)==null?void 0:l.call(this,u)),await((c=this.onRetrieverStart)==null?void 0:c.call(this,u)),u}async handleRetrieverEnd(e,t){var i;const n=this.getRunById(t);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.outputs={documents:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleRetrieverError(e,t){var i;const n=this.getRunById(t);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleText(e,t){var i;const n=this.getRunById(t);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,n)))}async handleLLMNewToken(e,t,n,i,a,o){var u;const s=this.getRunById(n);if(!s||(s==null?void 0:s.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return s.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:t,chunk:o==null?void 0:o.chunk}}),await((u=this.onLLMNewToken)==null?void 0:u.call(this,s,e,{chunk:o==null?void 0:o.chunk})),s}}function rr(r,e){return`${r.open}${e}${r.close}`}function Xr(r,e){try{return JSON.stringify(r,null,2)}catch{return e}}function Kj(r){return typeof r=="string"?r.trim():r==null?r:Xr(r,r.toString())}function ll(r){if(!r.end_time)return"";const e=r.end_time-r.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:gr}=WV;class Wj extends gm{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let n=e;for(;n.parent_run_id;){const i=this.runMap.get(n.parent_run_id);if(i)t.push(i),n=i;else break}return t}getBreadcrumbs(e){const n=[...this.getParents(e).reverse(),e].map((i,a,o)=>{const s=`${i.execution_order}:${i.run_type}:${i.name}`;return a===o.length-1?rr(WV.bold,s):s}).join(" > ");return rr(gr.grey,n)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${rr(gr.green,"[chain/start]")} [${t}] Entering Chain run with input: ${Xr(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${rr(gr.cyan,"[chain/end]")} [${t}] [${ll(e)}] Exiting Chain run with output: ${Xr(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${rr(gr.red,"[chain/error]")} [${t}] [${ll(e)}] Chain run errored with error: ${Xr(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${rr(gr.green,"[llm/start]")} [${t}] Entering LLM run with input: ${Xr(n,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${rr(gr.cyan,"[llm/end]")} [${t}] [${ll(e)}] Exiting LLM run with output: ${Xr(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${rr(gr.red,"[llm/error]")} [${t}] [${ll(e)}] LLM run errored with error: ${Xr(e.error,"[error]")}`)}onToolStart(e){const t=this.getBreadcrumbs(e);console.log(`${rr(gr.green,"[tool/start]")} [${t}] Entering Tool run with input: "${Kj(e.inputs.input)}"`)}onToolEnd(e){var n;const t=this.getBreadcrumbs(e);console.log(`${rr(gr.cyan,"[tool/end]")} [${t}] [${ll(e)}] Exiting Tool run with output: "${Kj((n=e.outputs)==null?void 0:n.output)}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${rr(gr.red,"[tool/error]")} [${t}] [${ll(e)}] Tool run errored with error: ${Xr(e.error,"[error]")}`)}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log(`${rr(gr.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${Xr(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log(`${rr(gr.cyan,"[retriever/end]")} [${t}] [${ll(e)}] Exiting Retriever run with output: ${Xr(e.outputs,"[outputs]")}`)}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log(`${rr(gr.red,"[retriever/error]")} [${t}] [${ll(e)}] Retriever run errored with error: ${Xr(e.error,"[error]")}`)}onAgentAction(e){const t=e,n=this.getBreadcrumbs(e);console.log(`${rr(gr.blue,"[agent/action]")} [${n}] Agent selected action: ${Xr(t.actions[t.actions.length-1],"[action]")}`)}}function K_(r,e){return r.lc_error_code=e,r.message=`${r.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,r}function s3(r){return!!(r&&typeof r=="object"&&"type"in r&&r.type==="tool_call")}class d7 extends Error{constructor(e,t){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=t}}function Gj(r,e=IC){r=r.trim();const t=r.indexOf("```");if(t===-1)return e(r);let n=r.substring(t+3);n.startsWith(`json
`)?n=n.substring(5):n.startsWith("json")?n=n.substring(4):n.startsWith(`
`)&&(n=n.substring(1));const i=n.indexOf("```");let a=n;return i!==-1&&(a=n.substring(0,i)),e(a.trim())}function IC(r){if(typeof r>"u")return null;try{return JSON.parse(r)}catch{}let e="";const t=[];let n=!1,i=!1;for(let a of r){if(n)a==='"'&&!i?n=!1:a===`
`&&!i?a="\\n":a==="\\"?i=!i:i=!1;else if(a==='"')n=!0,i=!1;else if(a==="{")t.push("}");else if(a==="[")t.push("]");else if(a==="}"||a==="]")if(t&&t[t.length-1]===a)t.pop();else return null;e+=a}n&&(e+='"');for(let a=t.length-1;a>=0;a-=1)e+=t[a];try{return JSON.parse(e)}catch{return null}}function tf(r){return typeof r=="object"&&r!==null&&"type"in r&&typeof r.type=="string"&&"source_type"in r&&(r.source_type==="url"||r.source_type==="base64"||r.source_type==="text"||r.source_type==="id")}function f7(r){return tf(r)&&r.source_type==="url"&&"url"in r&&typeof r.url=="string"}function p7(r){return tf(r)&&r.source_type==="base64"&&"data"in r&&typeof r.data=="string"}function h7(r){if(tf(r)){if(r.source_type==="url")return{type:"image_url",image_url:{url:r.url}};if(r.source_type==="base64"){if(!r.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${r.mime_type};base64,${r.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function u3({dataUrl:r,asTypedArray:e=!1}){const t=r.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let n;if(t){n=t[1].toLowerCase();const i=e?Uint8Array.from(atob(t[2]),a=>a.charCodeAt(0)):t[2];return{mime_type:n,data:i}}}function m7(r,e){if(r.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(r)}if(r.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(r)}if(r.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(r)}if(r.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(r)}throw new Error(`Unable to convert content block type '${r.type}' to provider-specific format: not recognized.`)}function pf(r,e){return typeof r=="string"?r===""?e:typeof e=="string"?r+e:Array.isArray(e)&&e.some(t=>tf(t))?[{type:"text",source_type:"text",text:r},...e]:[{type:"text",text:r},...e]:Array.isArray(e)?W_(r,e)??[...r,...e]:e===""?r:Array.isArray(r)&&r.some(t=>tf(t))?[...r,{type:"file",source_type:"text",text:e}]:[...r,{type:"text",text:e}]}function g7(r,e){return r==="error"||e==="error"?"error":"success"}function _7(r,e){function t(n,i){if(typeof n!="object"||n===null||n===void 0)return n;if(i>=e)return Array.isArray(n)?"[Array]":"[Object]";if(Array.isArray(n))return n.map(o=>t(o,i+1));const a={};for(const o of Object.keys(n))a[o]=t(n[o],i+1);return a}return JSON.stringify(t(r,0),null,2)}class el extends jl{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,t){typeof e=="string"&&(e={content:e,additional_kwargs:t,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const t=_7(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${t}`}}function fr(r,e){const t={...r};for(const[n,i]of Object.entries(e))if(t[n]==null)t[n]=i;else{if(i==null)continue;if(typeof t[n]!=typeof i||Array.isArray(t[n])!==Array.isArray(i))throw new Error(`field[${n}] already exists in the message chunk, but with a different type.`);if(typeof t[n]=="string"){if(n==="type")continue;t[n]+=i}else if(typeof t[n]=="object"&&!Array.isArray(t[n]))t[n]=fr(t[n],i);else if(Array.isArray(t[n]))t[n]=W_(t[n],i);else{if(t[n]===i)continue;console.warn(`field[${n}] already exists in this message chunk and value has unsupported type.`)}}return t}function W_(r,e){if(!(r===void 0&&e===void 0)){if(r===void 0||e===void 0)return r||e;{const t=[...r];for(const n of e)if(typeof n=="object"&&"index"in n&&typeof n.index=="number"){const i=t.findIndex(a=>a.index===n.index);i!==-1?t[i]=fr(t[i],n):t.push(n)}else{if(typeof n=="object"&&"text"in n&&n.text==="")continue;t.push(n)}return t}}}function b7(r,e){if(!r&&!e)throw new Error("Cannot merge two undefined objects.");if(!r||!e)return r||e;if(typeof r!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof r}
Right ${typeof e}`);if(typeof r=="string"&&typeof e=="string")return r+e;if(Array.isArray(r)&&Array.isArray(e))return W_(r,e);if(typeof r=="object"&&typeof e=="object")return fr(r,e);if(r===e)return r;throw new Error(`Can not merge objects of different types.
Left ${r}
Right ${e}`)}class hf extends el{}function y7(r){return typeof r.role=="string"}function mf(r){return typeof(r==null?void 0:r._getType)=="function"}function v7(r){return mf(r)&&typeof r.concat=="function"}let w7=class extends el{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,t,n){typeof e=="string"&&(e={content:e,name:n,tool_call_id:t}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};class xC extends hf{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new xC({content:pf(this.content,e.content),additional_kwargs:fr(this.additional_kwargs,e.additional_kwargs),response_metadata:fr(this.response_metadata,e.response_metadata),artifact:b7(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:g7(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function S7(r){const e=[],t=[];for(const n of r)if(n.function){const i=n.function.name;try{const a=JSON.parse(n.function.arguments),o={name:i||"",args:a||{},id:n.id};e.push(o)}catch{t.push({name:i,args:n.function.arguments,id:n.id,error:"Malformed args."})}}else continue;return[e,t]}class Su extends el{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,t){var i;let n;if(typeof e=="string")n={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:t??{}};else{n=e;const a=(i=n.additional_kwargs)==null?void 0:i.tool_calls,o=n.tool_calls;a!=null&&a.length>0&&(o===void 0||o.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(a!=null&&o===void 0){const[s,u]=S7(a);n.tool_calls=s??[],n.invalid_tool_calls=u??[]}else n.tool_calls=n.tool_calls??[],n.invalid_tool_calls=n.invalid_tool_calls??[]}catch{n.tool_calls=[],n.invalid_tool_calls=[]}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof n!="string"&&(this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=n.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}function xu(r){return r._getType()==="ai"}function Jj(r){return r._getType()==="ai"}class ft extends hf{constructor(e){let t;if(typeof e=="string")t={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)t={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const n=[],i=[];for(const a of e.tool_call_chunks){let o={};try{if(o=IC(a.args||"{}"),o===null||typeof o!="object"||Array.isArray(o))throw new Error("Malformed tool call chunk args.");n.push({name:a.name??"",args:o,id:a.id,type:"tool_call"})}catch{i.push({name:a.name,args:a.args,id:a.id,error:"Malformed args.",type:"invalid_tool_call"})}}t={...e,tool_calls:n,invalid_tool_calls:i,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(t),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=t.tool_call_chunks??this.tool_call_chunks,this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=t.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var n,i,a,o,s,u,l,c,d,h,f,m,p,g,b,_,y,v,w,S,R,P,C,A,M,G,U,z,W,Y,oe,I,q,T,V,re,Z,fe,_e,Se;const t={content:pf(this.content,e.content),additional_kwargs:fr(this.additional_kwargs,e.additional_kwargs),response_metadata:fr(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const J=W_(this.tool_call_chunks,e.tool_call_chunks);J!==void 0&&J.length>0&&(t.tool_call_chunks=J)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const J={...(((i=(n=this.usage_metadata)==null?void 0:n.input_token_details)==null?void 0:i.audio)!==void 0||((o=(a=e.usage_metadata)==null?void 0:a.input_token_details)==null?void 0:o.audio)!==void 0)&&{audio:(((u=(s=this.usage_metadata)==null?void 0:s.input_token_details)==null?void 0:u.audio)??0)+(((c=(l=e.usage_metadata)==null?void 0:l.input_token_details)==null?void 0:c.audio)??0)},...(((h=(d=this.usage_metadata)==null?void 0:d.input_token_details)==null?void 0:h.cache_read)!==void 0||((m=(f=e.usage_metadata)==null?void 0:f.input_token_details)==null?void 0:m.cache_read)!==void 0)&&{cache_read:(((g=(p=this.usage_metadata)==null?void 0:p.input_token_details)==null?void 0:g.cache_read)??0)+(((_=(b=e.usage_metadata)==null?void 0:b.input_token_details)==null?void 0:_.cache_read)??0)},...(((v=(y=this.usage_metadata)==null?void 0:y.input_token_details)==null?void 0:v.cache_creation)!==void 0||((S=(w=e.usage_metadata)==null?void 0:w.input_token_details)==null?void 0:S.cache_creation)!==void 0)&&{cache_creation:(((P=(R=this.usage_metadata)==null?void 0:R.input_token_details)==null?void 0:P.cache_creation)??0)+(((A=(C=e.usage_metadata)==null?void 0:C.input_token_details)==null?void 0:A.cache_creation)??0)}},F={...(((G=(M=this.usage_metadata)==null?void 0:M.output_token_details)==null?void 0:G.audio)!==void 0||((z=(U=e.usage_metadata)==null?void 0:U.output_token_details)==null?void 0:z.audio)!==void 0)&&{audio:(((Y=(W=this.usage_metadata)==null?void 0:W.output_token_details)==null?void 0:Y.audio)??0)+(((I=(oe=e.usage_metadata)==null?void 0:oe.output_token_details)==null?void 0:I.audio)??0)},...(((T=(q=this.usage_metadata)==null?void 0:q.output_token_details)==null?void 0:T.reasoning)!==void 0||((re=(V=e.usage_metadata)==null?void 0:V.output_token_details)==null?void 0:re.reasoning)!==void 0)&&{reasoning:(((fe=(Z=this.usage_metadata)==null?void 0:Z.output_token_details)==null?void 0:fe.reasoning)??0)+(((Se=(_e=e.usage_metadata)==null?void 0:_e.output_token_details)==null?void 0:Se.reasoning)??0)}},ee=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},L=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},te={input_tokens:ee.input_tokens+L.input_tokens,output_tokens:ee.output_tokens+L.output_tokens,total_tokens:ee.total_tokens+L.total_tokens,...Object.keys(J).length>0&&{input_token_details:J},...Object.keys(F).length>0&&{output_token_details:F}};t.usage_metadata=te}return new ft(t)}}let hd=class l3 extends el{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return l3}constructor(e,t){typeof e=="string"&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}};class _m extends hf{static lc_name(){return"ChatMessageChunk"}constructor(e,t){typeof e=="string"&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new _m({content:pf(this.content,e.content),additional_kwargs:fr(this.additional_kwargs,e.additional_kwargs),response_metadata:fr(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class G_ extends hf{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new G_({content:pf(this.content,e.content),additional_kwargs:fr(this.additional_kwargs,e.additional_kwargs),response_metadata:fr(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}class Al extends el{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,t){super(e,t)}}class bm extends hf{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,t){super(e,t)}concat(e){return new bm({content:pf(this.content,e.content),additional_kwargs:fr(this.additional_kwargs,e.additional_kwargs),response_metadata:fr(this.response_metadata,e.response_metadata),id:this.id??e.id})}}let mR=class extends el{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,t){super(e,t)}};class rf extends hf{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,t){super(e,t)}concat(e){return new rf({content:pf(this.content,e.content),additional_kwargs:fr(this.additional_kwargs,e.additional_kwargs),response_metadata:fr(this.response_metadata,e.response_metadata),id:this.id??e.id})}}function O7(r){return s3(r)?r:typeof r.id=="string"&&r.type==="function"&&typeof r.function=="object"&&r.function!==null&&"arguments"in r.function&&typeof r.function.arguments=="string"&&"name"in r.function&&typeof r.function.name=="string"?{id:r.id,args:JSON.parse(r.function.arguments),name:r.function.name,type:"tool_call"}:r}function E7(r){return typeof r=="object"&&r!=null&&r.lc===1&&Array.isArray(r.id)&&r.kwargs!=null&&typeof r.kwargs=="object"}function Wy(r){let e,t;if(E7(r)){const n=r.id.at(-1);n==="HumanMessage"||n==="HumanMessageChunk"?e="user":n==="AIMessage"||n==="AIMessageChunk"?e="assistant":n==="SystemMessage"||n==="SystemMessageChunk"?e="system":n==="FunctionMessage"||n==="FunctionMessageChunk"?e="function":n==="ToolMessage"||n==="ToolMessageChunk"?e="tool":e="unknown",t=r.kwargs}else{const{type:n,...i}=r;e=n,t=i}if(e==="human"||e==="user")return new Al(t);if(e==="ai"||e==="assistant"){const{tool_calls:n,...i}=t;if(!Array.isArray(n))return new Su(t);const a=n.map(O7);return new Su({...i,tool_calls:a})}else{if(e==="system")return new mR(t);if(e==="developer")return new mR({...t,additional_kwargs:{...t.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in t)return new w7({...t,content:t.content,tool_call_id:t.tool_call_id,name:t.name});throw K_(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(r,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function yl(r){if(typeof r=="string")return new Al(r);if(mf(r))return r;if(Array.isArray(r)){const[e,t]=r;return Wy({type:e,content:t})}else if(y7(r)){const{role:e,...t}=r;return Wy({...t,type:e})}else return Wy(r)}function DC(r,e="Human",t="AI"){const n=[];for(const i of r){let a;if(i._getType()==="human")a=e;else if(i._getType()==="ai")a=t;else if(i._getType()==="system")a="System";else if(i._getType()==="function")a="Function";else if(i._getType()==="tool")a="Tool";else if(i._getType()==="generic")a=i.role;else throw new Error(`Got unsupported message type: ${i._getType()}`);const o=i.name?`${i.name}, `:"",s=typeof i.content=="string"?i.content:JSON.stringify(i.content,null,2);n.push(`${a}: ${o}${s}`)}return n.join(`
`)}function R7(r){var t;const e=r._getType();if(e==="human")return new bm({...r});if(e==="ai"){let n={...r};return"tool_calls"in n&&(n={...n,tool_call_chunks:(t=n.tool_calls)==null?void 0:t.map(i=>({...i,type:"tool_call_chunk",index:void 0,args:JSON.stringify(i.args)}))}),new ft({...n})}else{if(e==="system")return new rf({...r});if(e==="function")return new G_({...r});if(hd.isInstance(r))return new _m({...r});throw new Error("Unknown message type.")}}let C7=class{getStore(){}run(e,t){return t()}};const Gy=Symbol.for("ls:tracing_async_local_storage"),P7=new C7;let j7=class{getInstance(){return globalThis[Gy]??P7}initializeGlobalInstance(e){globalThis[Gy]===void 0&&(globalThis[Gy]=e)}};const T7=new j7;function A7(r=!1){const e=T7.getInstance().getStore();if(!r&&!a3(e))throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function $C(r){return typeof r=="function"&&"langsmith:traceable"in r}let Jy;const M7=()=>{if(Jy===void 0){const r=ot("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};Jy=new i3(r)}return Jy};class qh extends gm{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!0});const{exampleId:t,projectName:n,client:i,replicas:a}=e;this.projectName=n??GV(),this.replicas=a,this.exampleId=t,this.client=i??M7();const o=qh.getTraceableRunTree();o&&this.updateFromRunTree(o)}async persistRun(e){}async onRunCreate(e){const t=this.getRunTreeWithTracingConfig(e.id);await(t==null?void 0:t.postRun())}async onRunUpdate(e){const t=this.getRunTreeWithTracingConfig(e.id);await(t==null?void 0:t.patchRun())}getRun(e){return this.runTreeMap.get(e)}updateFromRunTree(e){let t=e;const n=new Set;for(;t.parent_run&&!(n.has(t.id)||(n.add(t.id),!t.parent_run));)t=t.parent_run;n.clear();const i=[t];for(;i.length>0;){const a=i.shift();!a||n.has(a.id)||(n.add(a.id),this.runTreeMap.set(a.id,a),a.child_runs&&i.push(...a.child_runs))}this.client=e.client??this.client,this.replicas=e.replicas??this.replicas,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(e){const t=this.runTreeMap.get(e);if(t)return new vr({...t,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return A7(!0)}catch{return}}}const c3=Symbol.for("ls:tracing_async_local_storage"),Bg=Symbol.for("lc:context_variables"),I7=r=>{globalThis[c3]=r},Zh=()=>globalThis[c3];let Bh;function x7(){const r="default"in Yu?Yu.default:Yu;return new r({autoStart:!0,concurrency:1})}function D7(){return typeof Bh>"u"&&(Bh=x7()),Bh}async function xt(r,e){if(e===!0){const t=Zh();t!==void 0?await t.run(void 0,async()=>r()):await r()}else Bh=D7(),Bh.add(async()=>{const t=Zh();t!==void 0?await t.run(void 0,async()=>r()):await r()})}const $7=r=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(t=>ot(t)==="true");function d3(r){var n;const e=Zh();if(e===void 0)return;const t=e.getStore();return(n=t==null?void 0:t[Bg])==null?void 0:n[r]}const N7=Symbol("lc:configure_hooks"),q7=()=>d3(N7)||[];function B7(r){return r?Array.isArray(r)||"name"in r?{callbacks:r}:r:{}}class U7{setHandler(e){return this.setHandlers([e])}}class J_{constructor(e,t,n,i,a,o,s,u){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:u})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(t=>xt(async()=>{var n;try{await((n=t.handleText)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}async handleCustomEvent(e,t,n,i,a){await Promise.all(this.handlers.map(o=>xt(async()=>{var s;try{await((s=o.handleCustomEvent)==null?void 0:s.call(o,e,t,this.runId,this.tags,this.metadata))}catch(u){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${u}`),o.raiseError)throw u}},o.awaitHandlers)))}}class z7 extends J_{getChild(e){const t=new zt(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(t=>xt(async()=>{var n;if(!t.ignoreRetriever)try{await((n=t.handleRetrieverEnd)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw i}},t.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(t=>xt(async()=>{var n;if(!t.ignoreRetriever)try{await((n=t.handleRetrieverError)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${i}`),t.raiseError)throw e}},t.awaitHandlers)))}}class Xj extends J_{async handleLLMNewToken(e,t,n,i,a,o){await Promise.all(this.handlers.map(s=>xt(async()=>{var u;if(!s.ignoreLLM)try{await((u=s.handleLLMNewToken)==null?void 0:u.call(s,e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,o))}catch(l){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleLLMNewToken: ${l}`),s.raiseError)throw l}},s.awaitHandlers)))}async handleLLMError(e,t,n,i,a){await Promise.all(this.handlers.map(o=>xt(async()=>{var s;if(!o.ignoreLLM)try{await((s=o.handleLLMError)==null?void 0:s.call(o,e,this.runId,this._parentRunId,this.tags,a))}catch(u){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMError: ${u}`),o.raiseError)throw u}},o.awaitHandlers)))}async handleLLMEnd(e,t,n,i,a){await Promise.all(this.handlers.map(o=>xt(async()=>{var s;if(!o.ignoreLLM)try{await((s=o.handleLLMEnd)==null?void 0:s.call(o,e,this.runId,this._parentRunId,this.tags,a))}catch(u){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMEnd: ${u}`),o.raiseError)throw u}},o.awaitHandlers)))}}class L7 extends J_{getChild(e){const t=new zt(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,n,i,a){await Promise.all(this.handlers.map(o=>xt(async()=>{var s;if(!o.ignoreChain)try{await((s=o.handleChainError)==null?void 0:s.call(o,e,this.runId,this._parentRunId,this.tags,a))}catch(u){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainError: ${u}`),o.raiseError)throw u}},o.awaitHandlers)))}async handleChainEnd(e,t,n,i,a){await Promise.all(this.handlers.map(o=>xt(async()=>{var s;if(!o.ignoreChain)try{await((s=o.handleChainEnd)==null?void 0:s.call(o,e,this.runId,this._parentRunId,this.tags,a))}catch(u){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainEnd: ${u}`),o.raiseError)throw u}},o.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>xt(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleAgentAction)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>xt(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleAgentEnd)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}}class F7 extends J_{getChild(e){const t=new zt(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>xt(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleToolError)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>xt(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleToolEnd)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}}class zt extends U7{constructor(e,t){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(t==null?void 0:t.handlers)??this.handlers,this.inheritableHandlers=(t==null?void 0:t.inheritableHandlers)??this.inheritableHandlers,this.tags=(t==null?void 0:t.tags)??this.tags,this.inheritableTags=(t==null?void 0:t.inheritableTags)??this.inheritableTags,this.metadata=(t==null?void 0:t.metadata)??this.metadata,this.inheritableMetadata=(t==null?void 0:t.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,t,n=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0){return Promise.all(t.map(async(l,c)=>{const d=c===0&&n?n:Zt();return await Promise.all(this.handlers.map(h=>{if(!h.ignoreLLM)return Mf(h)&&h._createRunForLLMStart(e,[l],d,this._parentRunId,a,this.tags,this.metadata,u),xt(async()=>{var f;try{await((f=h.handleLLMStart)==null?void 0:f.call(h,e,[l],d,this._parentRunId,a,this.tags,this.metadata,u))}catch(m){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleLLMStart: ${m}`),h.raiseError)throw m}},h.awaitHandlers)})),new Xj(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,n=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0){return Promise.all(t.map(async(l,c)=>{const d=c===0&&n?n:Zt();return await Promise.all(this.handlers.map(h=>{if(!h.ignoreLLM)return Mf(h)&&h._createRunForChatModelStart(e,[l],d,this._parentRunId,a,this.tags,this.metadata,u),xt(async()=>{var f,m;try{if(h.handleChatModelStart)await((f=h.handleChatModelStart)==null?void 0:f.call(h,e,[l],d,this._parentRunId,a,this.tags,this.metadata,u));else if(h.handleLLMStart){const p=DC(l);await((m=h.handleLLMStart)==null?void 0:m.call(h,e,[p],d,this._parentRunId,a,this.tags,this.metadata,u))}}catch(p){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleLLMStart: ${p}`),h.raiseError)throw p}},h.awaitHandlers)})),new Xj(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,n=Zt(),i=void 0,a=void 0,o=void 0,s=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreChain)return Mf(u)&&u._createRunForChainStart(e,t,n,this._parentRunId,this.tags,this.metadata,i,s),xt(async()=>{var l;try{await((l=u.handleChainStart)==null?void 0:l.call(u,e,t,n,this._parentRunId,this.tags,this.metadata,i,s))}catch(c){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleChainStart: ${c}`),u.raiseError)throw c}},u.awaitHandlers)})),new L7(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,n=Zt(),i=void 0,a=void 0,o=void 0,s=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreAgent)return Mf(u)&&u._createRunForToolStart(e,t,n,this._parentRunId,this.tags,this.metadata,s),xt(async()=>{var l;try{await((l=u.handleToolStart)==null?void 0:l.call(u,e,t,n,this._parentRunId,this.tags,this.metadata,s))}catch(c){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleToolStart: ${c}`),u.raiseError)throw c}},u.awaitHandlers)})),new F7(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t,n=Zt(),i=void 0,a=void 0,o=void 0,s=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreRetriever)return Mf(u)&&u._createRunForRetrieverStart(e,t,n,this._parentRunId,this.tags,this.metadata,s),xt(async()=>{var l;try{await((l=u.handleRetrieverStart)==null?void 0:l.call(u,e,t,n,this._parentRunId,this.tags,this.metadata,s))}catch(c){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleRetrieverStart: ${c}`),u.raiseError)throw c}},u.awaitHandlers)})),new z7(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,t,n,i,a){await Promise.all(this.handlers.map(o=>xt(async()=>{var s;if(!o.ignoreCustomEvent)try{await((s=o.handleCustomEvent)==null?void 0:s.call(o,e,t,n,this.tags,this.metadata))}catch(u){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${u}`),o.raiseError)throw u}},o.awaitHandlers)))}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(const n of e)this.addHandler(n,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){const n=new zt(this._parentRunId);for(const i of this.handlers){const a=this.inheritableHandlers.includes(i);n.addHandler(i,a)}for(const i of this.tags){const a=this.inheritableTags.includes(i);n.addTags([i],a)}for(const i of Object.keys(this.metadata)){const a=Object.keys(this.inheritableMetadata).includes(i);n.addMetadata({[i]:this.metadata[i]},a)}for(const i of e)n.handlers.filter(a=>a.name==="console_callback_handler").some(a=>a.name===i.name)||n.addHandler(i,t);return n}static fromHandlers(e){class t extends hm{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Zt()}),Object.assign(this,e)}}const n=new this;return n.addHandler(new t),n}static configure(e,t,n,i,a,o,s){return this._configureSync(e,t,n,i,a,o,s)}static _configureSync(e,t,n,i,a,o,s){var h,f;let u;(e||t)&&(Array.isArray(e)||!e?(u=new zt,u.setHandlers((e==null?void 0:e.map(o_))??[],!0)):u=e,u=u.copy(Array.isArray(t)?t.map(o_):t==null?void 0:t.handlers,!1));const l=ot("LANGCHAIN_VERBOSE")==="true"||(s==null?void 0:s.verbose),c=((h=qh.getTraceableRunTree())==null?void 0:h.tracingEnabled)||$7(),d=c||(ot("LANGCHAIN_TRACING")??!1);if(l||d){if(u||(u=new zt),l&&!u.handlers.some(m=>m.name===Wj.prototype.name)){const m=new Wj;u.addHandler(m,!0)}if(d&&!u.handlers.some(m=>m.name==="langchain_tracer")&&c){const m=new qh;u.addHandler(m,!0),u._parentRunId=((f=qh.getTraceableRunTree())==null?void 0:f.id)??u._parentRunId}}for(const{contextVar:m,inheritable:p=!0,handlerClass:g,envVar:b}of q7()){const _=b&&ot(b)==="true"&&g;let y;const v=m!==void 0?d3(m):void 0;v&&KW(v)?y=v:_&&(y=new g({})),y!==void 0&&(u||(u=new zt),u.handlers.some(w=>w.name===y.name)||u.addHandler(y,p))}return(n||i)&&u&&(u.addTags(n??[]),u.addTags(i??[],!1)),(a||o)&&u&&(u.addMetadata(a??{}),u.addMetadata(o??{},!1)),u}}function o_(r){return"name"in r?r:hm.fromMethods(r)}var et;(function(r){r.assertEqual=i=>{};function e(i){}r.assertIs=e;function t(i){throw new Error}r.assertNever=t,r.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},r.getValidEnumValues=i=>{const a=r.objectKeys(i).filter(s=>typeof i[i[s]]!="number"),o={};for(const s of a)o[s]=i[s];return r.objectValues(o)},r.objectValues=i=>r.objectKeys(i).map(function(a){return i[a]}),r.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},r.find=(i,a)=>{for(const o of i)if(a(o))return o},r.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}r.joinValues=n,r.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(et||(et={}));var Zj;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Zj||(Zj={}));const Pe=et.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),gl=r=>{switch(typeof r){case"undefined":return Pe.undefined;case"string":return Pe.string;case"number":return Number.isNaN(r)?Pe.nan:Pe.number;case"boolean":return Pe.boolean;case"function":return Pe.function;case"bigint":return Pe.bigint;case"symbol":return Pe.symbol;case"object":return Array.isArray(r)?Pe.array:r===null?Pe.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?Pe.promise:typeof Map<"u"&&r instanceof Map?Pe.map:typeof Set<"u"&&r instanceof Set?Pe.set:typeof Date<"u"&&r instanceof Date?Pe.date:Pe.object;default:return Pe.unknown}},ye=et.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class rl extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},n={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(t(o));else{let s=n,u=0;for(;u<o.path.length;){const l=o.path[u];u===o.path.length-1?(s[l]=s[l]||{_errors:[]},s[l]._errors.push(t(o))):s[l]=s[l]||{_errors:[]},s=s[l],u++}}};return i(this),n}static assert(e){if(!(e instanceof rl))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,et.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}rl.create=r=>new rl(r);const gR=(r,e)=>{let t;switch(r.code){case ye.invalid_type:r.received===Pe.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case ye.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,et.jsonStringifyReplacer)}`;break;case ye.unrecognized_keys:t=`Unrecognized key(s) in object: ${et.joinValues(r.keys,", ")}`;break;case ye.invalid_union:t="Invalid input";break;case ye.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${et.joinValues(r.options)}`;break;case ye.invalid_enum_value:t=`Invalid enum value. Expected ${et.joinValues(r.options)}, received '${r.received}'`;break;case ye.invalid_arguments:t="Invalid function arguments";break;case ye.invalid_return_type:t="Invalid function return type";break;case ye.invalid_date:t="Invalid date";break;case ye.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:et.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case ye.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case ye.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case ye.custom:t="Invalid input";break;case ye.invalid_intersection_types:t="Intersection results could not be merged";break;case ye.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case ye.not_finite:t="Number must be finite";break;default:t=e.defaultError,et.assertNever(r)}return{message:t}};let k7=gR;function V7(){return k7}const H7=r=>{const{data:e,path:t,errorMaps:n,issueData:i}=r,a=[...t,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let s="";const u=n.filter(l=>!!l).slice().reverse();for(const l of u)s=l(o,{data:e,defaultError:s}).message;return{...i,path:a,message:s}};function Oe(r,e){const t=V7(),n=H7({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===gR?void 0:gR].filter(i=>!!i)});r.common.issues.push(n)}class Ur{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const i of t){if(i.status==="aborted")return Ue;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const i of t){const a=await i.key,o=await i.value;n.push({key:a,value:o})}return Ur.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const i of t){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return Ue;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[a.value]=o.value)}return{status:e.value,value:n}}}const Ue=Object.freeze({status:"aborted"}),Oh=r=>({status:"dirty",value:r}),rn=r=>({status:"valid",value:r}),Qj=r=>r.status==="aborted",Yj=r=>r.status==="dirty",nf=r=>r.status==="valid",s_=r=>typeof Promise<"u"&&r instanceof Promise;var je;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(je||(je={}));class Ml{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const eT=(r,e)=>{if(nf(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new rl(r.common.issues);return this._error=t,this._error}}};function Je(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:i}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,s)=>{const{message:u}=r;return o.code==="invalid_enum_value"?{message:u??s.defaultError}:typeof s.data>"u"?{message:u??n??s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:u??t??s.defaultError}},description:i}}class Qe{get description(){return this._def.description}_getType(e){return gl(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:gl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ur,ctx:{common:e.parent.common,data:e.data,parsedType:gl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(s_(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gl(e)},i=this._parseSync({data:e,path:n.path,parent:n});return eT(n,i)}"~validate"(e){var n,i;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gl(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:t});return nf(a)?{value:a.value}:{issues:t.common.issues}}catch(a){(i=(n=a==null?void 0:a.message)==null?void 0:n.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(a=>nf(a)?{value:a.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gl(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(s_(i)?i:Promise.resolve(i));return eT(n,a)}refine(e,t){const n=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,a)=>{const o=e(i),s=()=>a.addIssue({code:ye.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(e,t){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof t=="function"?t(n,i):t),!1))}_refinement(e){return new of({schema:this,typeName:ue.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return tl.create(this,this._def)}nullable(){return sf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Du.create(this)}promise(){return d_.create(this,this._def)}or(e){return l_.create([this,e],this._def)}and(e){return c_.create(this,e,this._def)}transform(e){return new of({...Je(this._def),schema:this,typeName:ue.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new yR({...Je(this._def),innerType:this,defaultValue:t,typeName:ue.ZodDefault})}brand(){return new hJ({typeName:ue.ZodBranded,type:this,...Je(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new vR({...Je(this._def),innerType:this,catchValue:t,typeName:ue.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return NC.create(this,e)}readonly(){return wR.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const K7=/^c[^\s-]{8,}$/i,W7=/^[0-9a-z]+$/,G7=/^[0-9A-HJKMNP-TV-Z]{26}$/i,J7=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,X7=/^[a-z0-9_-]{21}$/i,Z7=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Q7=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Y7=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,eJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Xy;const tJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,nJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,iJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,aJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,oJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,f3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",sJ=new RegExp(`^${f3}$`);function p3(r){let e="[0-5]\\d";r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`);const t=r.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function uJ(r){return new RegExp(`^${p3(r)}$`)}function lJ(r){let e=`${f3}T${p3(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function cJ(r,e){return!!((e==="v4"||!e)&&tJ.test(r)||(e==="v6"||!e)&&nJ.test(r))}function dJ(r,e){if(!Z7.test(r))return!1;try{const[t]=r.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function fJ(r,e){return!!((e==="v4"||!e)&&rJ.test(r)||(e==="v6"||!e)&&iJ.test(r))}class vl extends Qe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Pe.string){const a=this._getOrReturnCtx(e);return Oe(a,{code:ye.invalid_type,expected:Pe.string,received:a.parsedType}),Ue}const n=new Ur;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,s=e.data.length<a.value;(o||s)&&(i=this._getOrReturnCtx(e,i),o?Oe(i,{code:ye.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):s&&Oe(i,{code:ye.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Y7.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"email",code:ye.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Xy||(Xy=new RegExp(eJ,"u")),Xy.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"emoji",code:ye.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")J7.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"uuid",code:ye.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")X7.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"nanoid",code:ye.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")K7.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"cuid",code:ye.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")W7.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"cuid2",code:ye.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")G7.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"ulid",code:ye.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Oe(i,{validation:"url",code:ye.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"regex",code:ye.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?lJ(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?sJ.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?uJ(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?Q7.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"duration",code:ye.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?cJ(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"ip",code:ye.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?dJ(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"jwt",code:ye.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?fJ(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"cidr",code:ye.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?aJ.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"base64",code:ye.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?oJ.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"base64url",code:ye.invalid_string,message:a.message}),n.dirty()):et.assertNever(a);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(i=>e.test(i),{validation:t,code:ye.invalid_string,...je.errToObj(n)})}_addCheck(e){return new vl({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...je.errToObj(e)})}url(e){return this._addCheck({kind:"url",...je.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...je.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...je.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...je.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...je.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...je.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...je.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...je.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...je.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...je.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...je.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...je.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...je.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...je.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...je.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...je.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...je.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...je.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...je.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...je.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...je.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...je.errToObj(t)})}nonempty(e){return this.min(1,je.errToObj(e))}trim(){return new vl({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new vl({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new vl({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}vl.create=r=>new vl({checks:[],typeName:ue.ZodString,coerce:(r==null?void 0:r.coerce)??!1,...Je(r)});function pJ(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=t>n?t:n,a=Number.parseInt(r.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return a%o/10**i}class Qh extends Qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Pe.number){const a=this._getOrReturnCtx(e);return Oe(a,{code:ye.invalid_type,expected:Pe.number,received:a.parsedType}),Ue}let n;const i=new Ur;for(const a of this._def.checks)a.kind==="int"?et.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{code:ye.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:ye.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:ye.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?pJ(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:ye.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{code:ye.not_finite,message:a.message}),i.dirty()):et.assertNever(a);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,je.toString(t))}gt(e,t){return this.setLimit("min",e,!1,je.toString(t))}lte(e,t){return this.setLimit("max",e,!0,je.toString(t))}lt(e,t){return this.setLimit("max",e,!1,je.toString(t))}setLimit(e,t,n,i){return new Qh({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:je.toString(i)}]})}_addCheck(e){return new Qh({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:je.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:je.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:je.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:je.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:je.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:je.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:je.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:je.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:je.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&et.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Qh.create=r=>new Qh({checks:[],typeName:ue.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...Je(r)});class Yh extends Qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Pe.bigint)return this._getInvalidInput(e);let n;const i=new Ur;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:ye.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:ye.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:ye.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):et.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Oe(t,{code:ye.invalid_type,expected:Pe.bigint,received:t.parsedType}),Ue}gte(e,t){return this.setLimit("min",e,!0,je.toString(t))}gt(e,t){return this.setLimit("min",e,!1,je.toString(t))}lte(e,t){return this.setLimit("max",e,!0,je.toString(t))}lt(e,t){return this.setLimit("max",e,!1,je.toString(t))}setLimit(e,t,n,i){return new Yh({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:je.toString(i)}]})}_addCheck(e){return new Yh({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:je.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:je.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:je.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:je.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:je.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Yh.create=r=>new Yh({checks:[],typeName:ue.ZodBigInt,coerce:(r==null?void 0:r.coerce)??!1,...Je(r)});class tT extends Qe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Pe.boolean){const n=this._getOrReturnCtx(e);return Oe(n,{code:ye.invalid_type,expected:Pe.boolean,received:n.parsedType}),Ue}return rn(e.data)}}tT.create=r=>new tT({typeName:ue.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...Je(r)});class u_ extends Qe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Pe.date){const a=this._getOrReturnCtx(e);return Oe(a,{code:ye.invalid_type,expected:Pe.date,received:a.parsedType}),Ue}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Oe(a,{code:ye.invalid_date}),Ue}const n=new Ur;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),Oe(i,{code:ye.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):et.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new u_({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:je.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:je.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}u_.create=r=>new u_({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:ue.ZodDate,...Je(r)});class rT extends Qe{_parse(e){if(this._getType(e)!==Pe.symbol){const n=this._getOrReturnCtx(e);return Oe(n,{code:ye.invalid_type,expected:Pe.symbol,received:n.parsedType}),Ue}return rn(e.data)}}rT.create=r=>new rT({typeName:ue.ZodSymbol,...Je(r)});class nT extends Qe{_parse(e){if(this._getType(e)!==Pe.undefined){const n=this._getOrReturnCtx(e);return Oe(n,{code:ye.invalid_type,expected:Pe.undefined,received:n.parsedType}),Ue}return rn(e.data)}}nT.create=r=>new nT({typeName:ue.ZodUndefined,...Je(r)});class iT extends Qe{_parse(e){if(this._getType(e)!==Pe.null){const n=this._getOrReturnCtx(e);return Oe(n,{code:ye.invalid_type,expected:Pe.null,received:n.parsedType}),Ue}return rn(e.data)}}iT.create=r=>new iT({typeName:ue.ZodNull,...Je(r)});class _R extends Qe{constructor(){super(...arguments),this._any=!0}_parse(e){return rn(e.data)}}_R.create=r=>new _R({typeName:ue.ZodAny,...Je(r)});class aT extends Qe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return rn(e.data)}}aT.create=r=>new aT({typeName:ue.ZodUnknown,...Je(r)});class Il extends Qe{_parse(e){const t=this._getOrReturnCtx(e);return Oe(t,{code:ye.invalid_type,expected:Pe.never,received:t.parsedType}),Ue}}Il.create=r=>new Il({typeName:ue.ZodNever,...Je(r)});class oT extends Qe{_parse(e){if(this._getType(e)!==Pe.undefined){const n=this._getOrReturnCtx(e);return Oe(n,{code:ye.invalid_type,expected:Pe.void,received:n.parsedType}),Ue}return rn(e.data)}}oT.create=r=>new oT({typeName:ue.ZodVoid,...Je(r)});class Du extends Qe{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==Pe.array)return Oe(t,{code:ye.invalid_type,expected:Pe.array,received:t.parsedType}),Ue;if(i.exactLength!==null){const o=t.data.length>i.exactLength.value,s=t.data.length<i.exactLength.value;(o||s)&&(Oe(t,{code:o?ye.too_big:ye.too_small,minimum:s?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(Oe(t,{code:ye.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(Oe(t,{code:ye.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((o,s)=>i.type._parseAsync(new Ml(t,o,t.path,s)))).then(o=>Ur.mergeArray(n,o));const a=[...t.data].map((o,s)=>i.type._parseSync(new Ml(t,o,t.path,s)));return Ur.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new Du({...this._def,minLength:{value:e,message:je.toString(t)}})}max(e,t){return new Du({...this._def,maxLength:{value:e,message:je.toString(t)}})}length(e,t){return new Du({...this._def,exactLength:{value:e,message:je.toString(t)}})}nonempty(e){return this.min(1,e)}}Du.create=(r,e)=>new Du({type:r,minLength:null,maxLength:null,exactLength:null,typeName:ue.ZodArray,...Je(e)});function xd(r){if(r instanceof Et){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=tl.create(xd(n))}return new Et({...r._def,shape:()=>e})}else return r instanceof Du?new Du({...r._def,type:xd(r.element)}):r instanceof tl?tl.create(xd(r.unwrap())):r instanceof sf?sf.create(xd(r.unwrap())):r instanceof ld?ld.create(r.items.map(e=>xd(e))):r}class Et extends Qe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=et.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==Pe.object){const l=this._getOrReturnCtx(e);return Oe(l,{code:ye.invalid_type,expected:Pe.object,received:l.parsedType}),Ue}const{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),s=[];if(!(this._def.catchall instanceof Il&&this._def.unknownKeys==="strip"))for(const l in i.data)o.includes(l)||s.push(l);const u=[];for(const l of o){const c=a[l],d=i.data[l];u.push({key:{status:"valid",value:l},value:c._parse(new Ml(i,d,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof Il){const l=this._def.unknownKeys;if(l==="passthrough")for(const c of s)u.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(l==="strict")s.length>0&&(Oe(i,{code:ye.unrecognized_keys,keys:s}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const c of s){const d=i.data[c];u.push({key:{status:"valid",value:c},value:l._parse(new Ml(i,d,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const c of u){const d=await c.key,h=await c.value;l.push({key:d,value:h,alwaysSet:c.alwaysSet})}return l}).then(l=>Ur.mergeObjectSync(n,l)):Ur.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return je.errToObj,new Et({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,t,n).message)??n.defaultError;return t.code==="unrecognized_keys"?{message:je.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Et({...this._def,unknownKeys:"strip"})}passthrough(){return new Et({...this._def,unknownKeys:"passthrough"})}extend(e){return new Et({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Et({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ue.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Et({...this._def,catchall:e})}pick(e){const t={};for(const n of et.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new Et({...this._def,shape:()=>t})}omit(e){const t={};for(const n of et.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new Et({...this._def,shape:()=>t})}deepPartial(){return xd(this)}partial(e){const t={};for(const n of et.objectKeys(this.shape)){const i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()}return new Et({...this._def,shape:()=>t})}required(e){const t={};for(const n of et.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof tl;)a=a._def.innerType;t[n]=a}return new Et({...this._def,shape:()=>t})}keyof(){return h3(et.objectKeys(this.shape))}}Et.create=(r,e)=>new Et({shape:()=>r,unknownKeys:"strip",catchall:Il.create(),typeName:ue.ZodObject,...Je(e)});Et.strictCreate=(r,e)=>new Et({shape:()=>r,unknownKeys:"strict",catchall:Il.create(),typeName:ue.ZodObject,...Je(e)});Et.lazycreate=(r,e)=>new Et({shape:r,unknownKeys:"strip",catchall:Il.create(),typeName:ue.ZodObject,...Je(e)});class l_ extends Qe{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function i(a){for(const s of a)if(s.result.status==="valid")return s.result;for(const s of a)if(s.result.status==="dirty")return t.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(s=>new rl(s.ctx.common.issues));return Oe(t,{code:ye.invalid_union,unionErrors:o}),Ue}if(t.common.async)return Promise.all(n.map(async a=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const u of n){const l={...t,common:{...t.common,issues:[]},parent:null},c=u._parseSync({data:t.data,path:t.path,parent:l});if(c.status==="valid")return c;c.status==="dirty"&&!a&&(a={result:c,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const s=o.map(u=>new rl(u));return Oe(t,{code:ye.invalid_union,unionErrors:s}),Ue}}get options(){return this._def.options}}l_.create=(r,e)=>new l_({options:r,typeName:ue.ZodUnion,...Je(e)});function bR(r,e){const t=gl(r),n=gl(e);if(r===e)return{valid:!0,data:r};if(t===Pe.object&&n===Pe.object){const i=et.objectKeys(e),a=et.objectKeys(r).filter(s=>i.indexOf(s)!==-1),o={...r,...e};for(const s of a){const u=bR(r[s],e[s]);if(!u.valid)return{valid:!1};o[s]=u.data}return{valid:!0,data:o}}else if(t===Pe.array&&n===Pe.array){if(r.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<r.length;a++){const o=r[a],s=e[a],u=bR(o,s);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return t===Pe.date&&n===Pe.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class c_ extends Qe{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=(a,o)=>{if(Qj(a)||Qj(o))return Ue;const s=bR(a.value,o.value);return s.valid?((Yj(a)||Yj(o))&&t.dirty(),{status:t.value,value:s.data}):(Oe(n,{code:ye.invalid_intersection_types}),Ue)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}c_.create=(r,e,t)=>new c_({left:r,right:e,typeName:ue.ZodIntersection,...Je(t)});class ld extends Qe{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Pe.array)return Oe(n,{code:ye.invalid_type,expected:Pe.array,received:n.parsedType}),Ue;if(n.data.length<this._def.items.length)return Oe(n,{code:ye.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ue;!this._def.rest&&n.data.length>this._def.items.length&&(Oe(n,{code:ye.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((o,s)=>{const u=this._def.items[s]||this._def.rest;return u?u._parse(new Ml(n,o,n.path,s)):null}).filter(o=>!!o);return n.common.async?Promise.all(a).then(o=>Ur.mergeArray(t,o)):Ur.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new ld({...this._def,rest:e})}}ld.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ld({items:r,typeName:ue.ZodTuple,rest:null,...Je(e)})};class sT extends Qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Pe.map)return Oe(n,{code:ye.invalid_type,expected:Pe.map,received:n.parsedType}),Ue;const i=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([s,u],l)=>({key:i._parse(new Ml(n,s,n.path,[l,"key"])),value:a._parse(new Ml(n,u,n.path,[l,"value"]))}));if(n.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const u of o){const l=await u.key,c=await u.value;if(l.status==="aborted"||c.status==="aborted")return Ue;(l.status==="dirty"||c.status==="dirty")&&t.dirty(),s.set(l.value,c.value)}return{status:t.value,value:s}})}else{const s=new Map;for(const u of o){const l=u.key,c=u.value;if(l.status==="aborted"||c.status==="aborted")return Ue;(l.status==="dirty"||c.status==="dirty")&&t.dirty(),s.set(l.value,c.value)}return{status:t.value,value:s}}}}sT.create=(r,e,t)=>new sT({valueType:e,keyType:r,typeName:ue.ZodMap,...Je(t)});class em extends Qe{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Pe.set)return Oe(n,{code:ye.invalid_type,expected:Pe.set,received:n.parsedType}),Ue;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Oe(n,{code:ye.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Oe(n,{code:ye.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const a=this._def.valueType;function o(u){const l=new Set;for(const c of u){if(c.status==="aborted")return Ue;c.status==="dirty"&&t.dirty(),l.add(c.value)}return{status:t.value,value:l}}const s=[...n.data.values()].map((u,l)=>a._parse(new Ml(n,u,n.path,l)));return n.common.async?Promise.all(s).then(u=>o(u)):o(s)}min(e,t){return new em({...this._def,minSize:{value:e,message:je.toString(t)}})}max(e,t){return new em({...this._def,maxSize:{value:e,message:je.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}em.create=(r,e)=>new em({valueType:r,minSize:null,maxSize:null,typeName:ue.ZodSet,...Je(e)});class uT extends Qe{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}uT.create=(r,e)=>new uT({getter:r,typeName:ue.ZodLazy,...Je(e)});class lT extends Qe{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Oe(t,{received:t.data,code:ye.invalid_literal,expected:this._def.value}),Ue}return{status:"valid",value:e.data}}get value(){return this._def.value}}lT.create=(r,e)=>new lT({value:r,typeName:ue.ZodLiteral,...Je(e)});function h3(r,e){return new af({values:r,typeName:ue.ZodEnum,...Je(e)})}class af extends Qe{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return Oe(t,{expected:et.joinValues(n),received:t.parsedType,code:ye.invalid_type}),Ue}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return Oe(t,{received:t.data,code:ye.invalid_enum_value,options:n}),Ue}return rn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return af.create(e,{...this._def,...t})}exclude(e,t=this._def){return af.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}af.create=h3;class cT extends Qe{_parse(e){const t=et.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Pe.string&&n.parsedType!==Pe.number){const i=et.objectValues(t);return Oe(n,{expected:et.joinValues(i),received:n.parsedType,code:ye.invalid_type}),Ue}if(this._cache||(this._cache=new Set(et.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=et.objectValues(t);return Oe(n,{received:n.data,code:ye.invalid_enum_value,options:i}),Ue}return rn(e.data)}get enum(){return this._def.values}}cT.create=(r,e)=>new cT({values:r,typeName:ue.ZodNativeEnum,...Je(e)});class d_ extends Qe{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Pe.promise&&t.common.async===!1)return Oe(t,{code:ye.invalid_type,expected:Pe.promise,received:t.parsedType}),Ue;const n=t.parsedType===Pe.promise?t.data:Promise.resolve(t.data);return rn(n.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}d_.create=(r,e)=>new d_({type:r,typeName:ue.ZodPromise,...Je(e)});class of extends Qe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ue.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{Oe(n,o),o.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(n.data,a);if(n.common.async)return Promise.resolve(o).then(async s=>{if(t.value==="aborted")return Ue;const u=await this._def.schema._parseAsync({data:s,path:n.path,parent:n});return u.status==="aborted"?Ue:u.status==="dirty"||t.value==="dirty"?Oh(u.value):u});{if(t.value==="aborted")return Ue;const s=this._def.schema._parseSync({data:o,path:n.path,parent:n});return s.status==="aborted"?Ue:s.status==="dirty"||t.value==="dirty"?Oh(s.value):s}}if(i.type==="refinement"){const o=s=>{const u=i.refinement(s,a);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(n.common.async===!1){const s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Ue:(s.status==="dirty"&&t.dirty(),o(s.value),{status:t.value,value:s.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>s.status==="aborted"?Ue:(s.status==="dirty"&&t.dirty(),o(s.value).then(()=>({status:t.value,value:s.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!nf(o))return Ue;const s=i.transform(o.value,a);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>nf(o)?Promise.resolve(i.transform(o.value,a)).then(s=>({status:t.value,value:s})):Ue);et.assertNever(i)}}of.create=(r,e,t)=>new of({schema:r,typeName:ue.ZodEffects,effect:e,...Je(t)});of.createWithPreprocess=(r,e,t)=>new of({schema:e,effect:{type:"preprocess",transform:r},typeName:ue.ZodEffects,...Je(t)});class tl extends Qe{_parse(e){return this._getType(e)===Pe.undefined?rn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tl.create=(r,e)=>new tl({innerType:r,typeName:ue.ZodOptional,...Je(e)});class sf extends Qe{_parse(e){return this._getType(e)===Pe.null?rn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}sf.create=(r,e)=>new sf({innerType:r,typeName:ue.ZodNullable,...Je(e)});class yR extends Qe{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===Pe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}yR.create=(r,e)=>new yR({innerType:r,typeName:ue.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Je(e)});class vR extends Qe{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return s_(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new rl(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new rl(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}vR.create=(r,e)=>new vR({innerType:r,typeName:ue.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Je(e)});class dT extends Qe{_parse(e){if(this._getType(e)!==Pe.nan){const n=this._getOrReturnCtx(e);return Oe(n,{code:ye.invalid_type,expected:Pe.nan,received:n.parsedType}),Ue}return{status:"valid",value:e.data}}}dT.create=r=>new dT({typeName:ue.ZodNaN,...Je(r)});class hJ extends Qe{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class NC extends Qe{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Ue:a.status==="dirty"?(t.dirty(),Oh(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Ue:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,t){return new NC({in:e,out:t,typeName:ue.ZodPipeline})}}class wR extends Qe{_parse(e){const t=this._def.innerType._parse(e),n=i=>(nf(i)&&(i.value=Object.freeze(i.value)),i);return s_(t)?t.then(i=>n(i)):n(t)}unwrap(){return this._def.innerType}}wR.create=(r,e)=>new wR({innerType:r,typeName:ue.ZodReadonly,...Je(e)});var ue;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(ue||(ue={}));const m3=vl.create,fT=_R.create;Il.create;Du.create;const g3=Et.create;l_.create;c_.create;ld.create;af.create;d_.create;tl.create;sf.create;/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const mJ=Object.prototype.hasOwnProperty;function SR(r,e){return mJ.call(r,e)}function OR(r){if(Array.isArray(r)){const t=new Array(r.length);for(let n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(r);let e=[];for(let t in r)SR(r,t)&&e.push(t);return e}function Iu(r){switch(typeof r){case"object":return JSON.parse(JSON.stringify(r));case"undefined":return null;default:return r}}function ER(r){let e=0;const t=r.length;let n;for(;e<t;){if(n=r.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function Ed(r){return r.indexOf("/")===-1&&r.indexOf("~")===-1?r:r.replace(/~/g,"~0").replace(/\//g,"~1")}function gJ(r){return r.replace(/~1/g,"/").replace(/~0/g,"~")}function RR(r){if(r===void 0)return!0;if(r){if(Array.isArray(r)){for(let t=0,n=r.length;t<n;t++)if(RR(r[t]))return!0}else if(typeof r=="object"){const t=OR(r),n=t.length;for(var e=0;e<n;e++)if(RR(r[t[e]]))return!0}}return!1}function pT(r,e){const t=[r];for(const n in e){const i=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof i<"u"&&t.push(`${n}: ${i}`)}return t.join(`
`)}class _J extends Error{constructor(e,t,n,i,a){super(pT(e,{name:t,index:n,operation:i,tree:a})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.setPrototypeOf(this,new.target.prototype),this.message=pT(e,{name:t,index:n,operation:i,tree:a})}}const Rt=_J,zd={add:function(r,e,t){return r[e]=this.value,{newDocument:t}},remove:function(r,e,t){var n=r[e];return delete r[e],{newDocument:t,removed:n}},replace:function(r,e,t){var n=r[e];return r[e]=this.value,{newDocument:t,removed:n}},move:function(r,e,t){let n=CR(t,this.path);n&&(n=Iu(n));const i=Uh(t,{op:"remove",path:this.from}).removed;return Uh(t,{op:"add",path:this.path,value:i}),{newDocument:t,removed:n}},copy:function(r,e,t){const n=CR(t,this.from);return Uh(t,{op:"add",path:this.path,value:Iu(n)}),{newDocument:t}},test:function(r,e,t){return{newDocument:t,test:p_(r[e],this.value)}},_get:function(r,e,t){return this.value=r[e],{newDocument:t}}};var bJ={add:function(r,e,t){return ER(e)?r.splice(e,0,this.value):r[e]=this.value,{newDocument:t,index:e}},remove:function(r,e,t){var n=r.splice(e,1);return{newDocument:t,removed:n[0]}},replace:function(r,e,t){var n=r[e];return r[e]=this.value,{newDocument:t,removed:n}},move:zd.move,copy:zd.copy,test:zd.test,_get:zd._get};function CR(r,e){if(e=="")return r;var t={op:"_get",path:e};return Uh(r,t),t.value}function Uh(r,e,t=!1,n=!0,i=!0,a=0){if(t&&(typeof t=="function"?t(e,0,r,e.path):PR(e,0)),e.path===""){let o={newDocument:r};if(e.op==="add")return o.newDocument=e.value,o;if(e.op==="replace")return o.newDocument=e.value,o.removed=r,o;if(e.op==="move"||e.op==="copy")return o.newDocument=CR(r,e.from),e.op==="move"&&(o.removed=r),o;if(e.op==="test"){if(o.test=p_(r,e.value),o.test===!1)throw new Rt("Test operation failed","TEST_OPERATION_FAILED",a,e,r);return o.newDocument=r,o}else{if(e.op==="remove")return o.removed=r,o.newDocument=null,o;if(e.op==="_get")return e.value=r,o;if(t)throw new Rt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,e,r);return o}}else{n||(r=Iu(r));const s=(e.path||"").split("/");let u=r,l=1,c=s.length,d,h,f;for(typeof t=="function"?f=t:f=PR;;){if(h=s[l],h&&h.indexOf("~")!=-1&&(h=gJ(h)),i&&(h=="__proto__"||h=="prototype"&&l>0&&s[l-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(t&&d===void 0&&(u[h]===void 0?d=s.slice(0,l).join("/"):l==c-1&&(d=e.path),d!==void 0&&f(e,0,r,d)),l++,Array.isArray(u)){if(h==="-")h=u.length;else{if(t&&!ER(h))throw new Rt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,e,r);ER(h)&&(h=~~h)}if(l>=c){if(t&&e.op==="add"&&h>u.length)throw new Rt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,e,r);const m=bJ[e.op].call(e,u,h,r);if(m.test===!1)throw new Rt("Test operation failed","TEST_OPERATION_FAILED",a,e,r);return m}}else if(l>=c){const m=zd[e.op].call(e,u,h,r);if(m.test===!1)throw new Rt("Test operation failed","TEST_OPERATION_FAILED",a,e,r);return m}if(u=u[h],t&&l<c&&(!u||typeof u!="object"))throw new Rt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,e,r)}}}function f_(r,e,t,n=!0,i=!0){if(t&&!Array.isArray(e))throw new Rt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(r=Iu(r));const a=new Array(e.length);for(let o=0,s=e.length;o<s;o++)a[o]=Uh(r,e[o],t,!0,i,o),r=a[o].newDocument;return a.newDocument=r,a}function PR(r,e,t,n){if(typeof r!="object"||r===null||Array.isArray(r))throw new Rt("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,r,t);if(zd[r.op]){if(typeof r.path!="string")throw new Rt("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,r,t);if(r.path.indexOf("/")!==0&&r.path.length>0)throw new Rt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,r,t);if((r.op==="move"||r.op==="copy")&&typeof r.from!="string")throw new Rt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,r,t);if((r.op==="add"||r.op==="replace"||r.op==="test")&&r.value===void 0)throw new Rt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,r,t);if((r.op==="add"||r.op==="replace"||r.op==="test")&&RR(r.value))throw new Rt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,r,t);if(t){if(r.op=="add"){var i=r.path.split("/").length,a=n.split("/").length;if(i!==a+1&&i!==a)throw new Rt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,r,t)}else if(r.op==="replace"||r.op==="remove"||r.op==="_get"){if(r.path!==n)throw new Rt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,r,t)}else if(r.op==="move"||r.op==="copy"){var o={op:"_get",path:r.from,value:void 0},s=yJ([o],t);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new Rt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,r,t)}}}else throw new Rt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,r,t)}function yJ(r,e,t){try{if(!Array.isArray(r))throw new Rt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)f_(Iu(e),Iu(r),t||!0);else{t=t||PR;for(var n=0;n<r.length;n++)t(r[n],n,e,void 0)}}catch(i){if(i instanceof Rt)return i;throw i}}function p_(r,e){if(r===e)return!0;if(r&&e&&typeof r=="object"&&typeof e=="object"){var t=Array.isArray(r),n=Array.isArray(e),i,a,o;if(t&&n){if(a=r.length,a!=e.length)return!1;for(i=a;i--!==0;)if(!p_(r[i],e[i]))return!1;return!0}if(t!=n)return!1;var s=Object.keys(r);if(a=s.length,a!==Object.keys(e).length)return!1;for(i=a;i--!==0;)if(!e.hasOwnProperty(s[i]))return!1;for(i=a;i--!==0;)if(o=s[i],!p_(r[o],e[o]))return!1;return!0}return r!==r&&e!==e}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */function _3(r,e,t,n,i){if(e!==r){typeof e.toJSON=="function"&&(e=e.toJSON());for(var a=OR(e),o=OR(r),s=!1,u=o.length-1;u>=0;u--){var l=o[u],c=r[l];if(SR(e,l)&&!(e[l]===void 0&&c!==void 0&&Array.isArray(e)===!1)){var d=e[l];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?_3(c,d,t,n+"/"+Ed(l),i):c!==d&&(i&&t.push({op:"test",path:n+"/"+Ed(l),value:Iu(c)}),t.push({op:"replace",path:n+"/"+Ed(l),value:Iu(d)}))}else Array.isArray(r)===Array.isArray(e)?(i&&t.push({op:"test",path:n+"/"+Ed(l),value:Iu(c)}),t.push({op:"remove",path:n+"/"+Ed(l)}),s=!0):(i&&t.push({op:"test",path:n,value:r}),t.push({op:"replace",path:n,value:e}))}if(!(!s&&a.length==o.length))for(var u=0;u<a.length;u++){var l=a[u];!SR(r,l)&&e[l]!==void 0&&t.push({op:"add",path:n+"/"+Ed(l),value:Iu(e[l])})}}}function vJ(r,e,t=!1){var n=[];return _3(r,e,n,"",t),n}class wJ{getStore(){}run(e,t){return t()}enterWith(e){}}const SJ=new wJ,hT=Symbol.for("lc:child_config");class OJ{getInstance(){return Zh()??SJ}getRunnableConfig(){var t,n;return(n=(t=this.getInstance().getStore())==null?void 0:t.extra)==null?void 0:n[hT]}runWithConfig(e,t,n){var c;const i=zt._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),a=this.getInstance(),o=a.getStore(),s=i==null?void 0:i.getParentRunId(),u=(c=i==null?void 0:i.handlers)==null?void 0:c.find(d=>(d==null?void 0:d.name)==="langchain_tracer");let l;return u&&s?l=u.getRunTreeWithTracingConfig(s):n||(l=new vr({name:"<runnable_lambda>",tracingEnabled:!1})),l&&(l.extra={...l.extra,[hT]:e}),o!==void 0&&o[Bg]!==void 0&&(l===void 0&&(l={}),l[Bg]=o[Bg]),a.run(l,t)}initializeGlobalInstance(e){Zh()===void 0&&I7(e)}}const xl=new OJ,Zy=25;async function bu(r){return zt._configureSync(r==null?void 0:r.callbacks,void 0,r==null?void 0:r.tags,void 0,r==null?void 0:r.metadata)}function mT(...r){const e={};for(const t of r.filter(n=>!!n))for(const n of Object.keys(t))if(n==="metadata")e[n]={...e[n],...t[n]};else if(n==="tags"){const i=e[n]??[];e[n]=[...new Set(i.concat(t[n]??[]))]}else if(n==="configurable")e[n]={...e[n],...t[n]};else if(n==="timeout")e.timeout===void 0?e.timeout=t.timeout:t.timeout!==void 0&&(e.timeout=Math.min(e.timeout,t.timeout));else if(n==="signal")e.signal===void 0?e.signal=t.signal:t.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,t.signal]):e.signal=t.signal);else if(n==="callbacks"){const i=e.callbacks,a=t.callbacks;if(Array.isArray(a))if(!i)e.callbacks=a;else if(Array.isArray(i))e.callbacks=i.concat(a);else{const o=i.copy();for(const s of a)o.addHandler(o_(s),!0);e.callbacks=o}else if(a)if(!i)e.callbacks=a;else if(Array.isArray(i)){const o=a.copy();for(const s of i)o.addHandler(o_(s),!0);e.callbacks=o}else e.callbacks=new zt(a._parentRunId,{handlers:i.handlers.concat(a.handlers),inheritableHandlers:i.inheritableHandlers.concat(a.inheritableHandlers),tags:Array.from(new Set(i.tags.concat(a.tags))),inheritableTags:Array.from(new Set(i.inheritableTags.concat(a.inheritableTags))),metadata:{...i.metadata,...a.metadata}})}else{const i=n;e[i]=t[i]??e[i]}return e}const EJ=new Set(["string","number","boolean"]);function Ye(r){var n;const e=xl.getRunnableConfig();let t={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:i,runName:a,...o}=e;t=Object.entries(o).reduce((s,[u,l])=>(l!==void 0&&(s[u]=l),s),t)}if(r&&(t=Object.entries(r).reduce((i,[a,o])=>(o!==void 0&&(i[a]=o),i),t)),t!=null&&t.configurable)for(const i of Object.keys(t.configurable))EJ.has(typeof t.configurable[i])&&!((n=t.metadata)!=null&&n[i])&&(t.metadata||(t.metadata={}),t.metadata[i]=t.configurable[i]);if(t.timeout!==void 0){if(t.timeout<=0)throw new Error("Timeout must be a positive number");const i=AbortSignal.timeout(t.timeout);t.signal!==void 0?"any"in AbortSignal&&(t.signal=AbortSignal.any([t.signal,i])):t.signal=i,delete t.timeout}return t}function Qt(r={},{callbacks:e,maxConcurrency:t,recursionLimit:n,runName:i,configurable:a,runId:o}={}){const s=Ye(r);return e!==void 0&&(delete s.runName,s.callbacks=e),n!==void 0&&(s.recursionLimit=n),t!==void 0&&(s.maxConcurrency=t),i!==void 0&&(s.runName=i),a!==void 0&&(s.configurable={...s.configurable,...a}),o!==void 0&&delete s.runId,s}function uf(r){return r?{configurable:r.configurable,recursionLimit:r.recursionLimit,callbacks:r.callbacks,tags:r.tags,metadata:r.metadata,maxConcurrency:r.maxConcurrency,timeout:r.timeout,signal:r.signal}:void 0}async function Dl(r,e){if(e===void 0)return r;let t;return Promise.race([r.catch(n=>{if(!(e!=null&&e.aborted))throw n}),new Promise((n,i)=>{t=()=>{i(new Error("Aborted"))},e.addEventListener("abort",t),e.aborted&&i(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",t))}class Or extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const t=this.reader.cancel();this.reader.releaseLock(),await t}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const t=e.getReader();return new Or({start(n){return i();function i(){return t.read().then(({done:a,value:o})=>{if(a){n.close();return}return n.enqueue(o),i()})}},cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new Or({async pull(t){const{value:n,done:i}=await e.next();i&&t.close(),t.enqueue(n)},async cancel(t){await e.return(t)}})}}function b3(r,e=2){const t=Array.from({length:e},()=>[]);return t.map(async function*(i){for(;;)if(i.length===0){const a=await r.next();for(const o of t)o.push(a)}else{if(i[0].done)return;yield i.shift().value}})}function tn(r,e){if(Array.isArray(r)&&Array.isArray(e))return r.concat(e);if(typeof r=="string"&&typeof e=="string")return r+e;if(typeof r=="number"&&typeof e=="number")return r+e;if("concat"in r&&typeof r.concat=="function")return r.concat(e);if(typeof r=="object"&&typeof e=="object"){const t={...r};for(const[n,i]of Object.entries(e))n in t&&!Array.isArray(t[n])?t[n]=tn(t[n],i):t[n]=i;return t}else throw new Error(`Cannot concat ${typeof r} and ${typeof e}`)}class gf{constructor(e){var t;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((t=this.config)==null?void 0:t.signal),this.setup=new Promise((n,i)=>{xl.runWithConfig(uf(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(n,i):this.firstResult.then(a=>n(void 0),i)},!0)})}async next(...e){var t;return(t=this.signal)==null||t.throwIfAborted(),this.firstResultUsed?xl.runWithConfig(uf(this.config),this.signal?async()=>Dl(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function RJ(r,e,t,n,...i){const a=new gf({generator:e,startSetup:t,signal:n}),o=await a.setup;return{output:r(a,o,...i),setup:o}}class _l{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const t=this.ops.concat(e.ops),n=f_({},t);return new tm({ops:t,state:n[n.length-1].newDocument})}}class tm extends _l{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const t=this.ops.concat(e.ops),n=f_(this.state,e.ops);return new tm({ops:t,state:n[n.length-1].newDocument})}static fromRunLogPatch(e){const t=f_({},e.ops);return new tm({ops:e.ops,state:t[t.length-1].newDocument})}}const CJ=r=>r.name==="log_stream_tracer";async function gT(r,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:t}=r;if(["retriever","llm","prompt"].includes(r.run_type))return t;if(!(Object.keys(t).length===1&&(t==null?void 0:t.input)===""))return t.input}async function _T(r,e){const{outputs:t}=r;return e==="original"||["retriever","llm","prompt"].includes(r.run_type)?t:t!==void 0&&Object.keys(t).length===1&&(t==null?void 0:t.output)!==void 0?t.output:t}function PJ(r){return r!==void 0&&r.message!==void 0}class bT extends gm{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Or.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const t=e.tags??[];let n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(n=n||t.find(i=>{var a;return(a=this.includeTags)==null?void 0:a.includes(i)})!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(n=n&&t.every(i=>{var a;return!((a=this.excludeTags)!=null&&a.includes(i))})),n}async*tapOutputIterable(e,t){for await(const n of t){if(e!==this.rootId){const i=this.keyMapByRunId[e];i&&await this.writer.write(new _l({ops:[{op:"add",path:`/logs/${i}/streamed_output/-`,value:n}]}))}yield n}}async onRunCreate(e){var i;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new _l({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=t===1?e.name:`${e.name}:${t}`;const n={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(n.inputs=await gT(e,this._schemaFormat)),await this.writer.write(new _l({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:n}]}))}async onRunUpdate(e){try{const t=this.keyMapByRunId[e.id];if(t===void 0)return;const n=[];this._schemaFormat==="streaming_events"&&n.push({op:"replace",path:`/logs/${t}/inputs`,value:await gT(e,this._schemaFormat)}),n.push({op:"add",path:`/logs/${t}/final_output`,value:await _T(e,this._schemaFormat)}),e.end_time!==void 0&&n.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});const i=new _l({ops:n});await this.writer.write(i)}finally{if(e.id===this.rootId){const t=new _l({ops:[{op:"replace",path:"/final_output",value:await _T(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,n){const i=this.keyMapByRunId[e.id];if(i===void 0)return;const a=e.inputs.messages!==void 0;let o;a?PJ(n==null?void 0:n.chunk)?o=n==null?void 0:n.chunk:o=new ft({id:`run-${e.id}`,content:t}):o=t;const s=new _l({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${i}/streamed_output/-`,value:o}]});await this.writer.write(s)}}const h_="__run";class nl{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new nl({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class wr extends nl{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new wr({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}function Zm({name:r,serialized:e}){return r!==void 0?r:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const jJ=r=>r.name==="event_stream_tracer";class TJ extends gm{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Or.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const t=e.tags??[];let n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(n=n||t.find(i=>{var a;return(a=this.includeTags)==null?void 0:a.includes(i)})!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(n=n&&t.every(i=>{var a;return!((a=this.excludeTags)!=null&&a.includes(i))})),n}async*tapOutputIterable(e,t){const n=await t.next();if(n.done)return;const i=this.runInfoMap.get(e);if(i===void 0){yield n.value;return}function a(s,u){return s==="llm"&&typeof u=="string"?new nl({text:u}):u}let o=this.tappedPromises.get(e);if(o===void 0){let s;o=new Promise(u=>{s=u}),this.tappedPromises.set(e,o);try{const u={event:`on_${i.runType}_stream`,run_id:e,name:i.name,tags:i.tags,metadata:i.metadata,data:{}};await this.send({...u,data:{chunk:a(i.runType,n.value)}},i),yield n.value;for await(const l of t)i.runType!=="tool"&&i.runType!=="retriever"&&await this.send({...u,data:{chunk:a(i.runType,l)}},i),yield l}finally{s()}}else{yield n.value;for await(const s of t)yield s}}async send(e,t){this._includeRun(t)&&await this.writer.write(e)}async sendEndEvent(e,t){const n=this.tappedPromises.get(e.run_id);n!==void 0?n.then(()=>{this.send(e,t)}):await this.send(e,t)}async onLLMStart(e){var o,s;const t=Zm(e),n=e.inputs.messages!==void 0?"chat_model":"llm",i={tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{},name:t,runType:n,inputs:e.inputs};this.runInfoMap.set(e.id,i);const a=`on_${n}_start`;await this.send({event:a,data:{input:e.inputs},name:t,tags:e.tags??[],run_id:e.id,metadata:((s=e.extra)==null?void 0:s.metadata)??{}},i)}async onLLMNewToken(e,t,n){const i=this.runInfoMap.get(e.id);let a,o;if(i===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(i.runType==="chat_model")o="on_chat_model_stream",(n==null?void 0:n.chunk)===void 0?a=new ft({content:t,id:`run-${e.id}`}):a=n.chunk.message;else if(i.runType==="llm")o="on_llm_stream",(n==null?void 0:n.chunk)===void 0?a=new nl({text:t}):a=n.chunk;else throw new Error(`Unexpected run type ${i.runType}`);await this.send({event:o,data:{chunk:a},run_id:e.id,name:i.name,tags:i.tags,metadata:i.metadata},i)}}async onLLMEnd(e){var o,s,u;const t=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let n;if(t===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const i=(o=e.outputs)==null?void 0:o.generations;let a;if(t.runType==="chat_model"){for(const l of i??[]){if(a!==void 0)break;a=(s=l[0])==null?void 0:s.message}n="on_chat_model_end"}else if(t.runType==="llm")a={generations:i==null?void 0:i.map(l=>l.map(c=>({text:c.text,generationInfo:c.generationInfo}))),llmOutput:((u=e.outputs)==null?void 0:u.llmOutput)??{}},n="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${t.runType}`);await this.sendEndEvent({event:n,data:{output:a,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onChainStart(e){var o,s;const t=Zm(e),n=e.run_type??"chain",i={tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{},name:t,runType:e.run_type};let a={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(a={},i.inputs={}):e.inputs.input!==void 0?(a.input=e.inputs.input,i.inputs=e.inputs.input):(a.input=e.inputs,i.inputs=e.inputs),this.runInfoMap.set(e.id,i),await this.send({event:`on_${n}_start`,data:a,name:t,tags:e.tags??[],run_id:e.id,metadata:((s=e.extra)==null?void 0:s.metadata)??{}},i)}async onChainEnd(e){var s;const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const n=`on_${e.run_type}_end`,i=e.inputs??t.inputs??{},o={output:((s=e.outputs)==null?void 0:s.output)??e.outputs,input:i};i.input&&Object.keys(i).length===1&&(o.input=i.input,t.inputs=i.input),await this.sendEndEvent({event:n,data:o,run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata??{}},t)}async onToolStart(e){var i,a;const t=Zm(e),n={tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},name:t,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,n),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:t,run_id:e.id,tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{}},n)}async onToolEnd(e){var i;const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(t.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const n=((i=e.outputs)==null?void 0:i.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:n,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onRetrieverStart(e){var a,o;const t=Zm(e),i={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:t,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,i),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:t,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},i)}async onRetrieverEnd(e){var n;const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((n=e.outputs)==null?void 0:n.documents)??e.outputs,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async handleCustomEvent(e,t,n){const i=this.runInfoMap.get(n);if(i===void 0)throw new Error(`handleCustomEvent: Run ID ${n} not found in run map.`);await this.send({event:"on_custom_event",run_id:n,name:e,tags:i.tags,metadata:i.metadata,data:t},i)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const AJ=[400,401,402,403,404,405,406,407,409],MJ=r=>{var t,n;if(r.message.startsWith("Cancel")||r.message.startsWith("AbortError")||r.name==="AbortError"||(r==null?void 0:r.code)==="ECONNABORTED")throw r;const e=((t=r==null?void 0:r.response)==null?void 0:t.status)??(r==null?void 0:r.status);if(e&&AJ.includes(+e))throw r;if(((n=r==null?void 0:r.error)==null?void 0:n.code)==="insufficient_quota"){const i=new Error(r==null?void 0:r.message);throw i.name="InsufficientQuotaError",i}};class ym{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??MJ;const t="default"in Yu?Yu.default:Yu;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>n_(()=>e(...t).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...n){return e.signal?Promise.race([this.call(t,...n),new Promise((i,a)=>{var o;(o=e.signal)==null||o.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(t,...n)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}}class y3 extends gm{constructor({config:e,onStart:t,onEnd:n,onError:i}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=t,this.argOnEnd=n,this.argOnError=i}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function qC(r){return r?r.lc_runnable:!1}class IJ{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let n=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const i=e.tags??[];return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(t)),this.includeTags!==void 0&&(n=n||i.some(a=>{var o;return(o=this.includeTags)==null?void 0:o.includes(a)})),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(t)),this.excludeTags!==void 0&&(n=n&&i.every(a=>{var o;return!((o=this.excludeTags)!=null&&o.includes(a))})),n}}function Qy(r){return r.replace(/[^a-zA-Z-_0-9]/g,"_")}const xJ=["*","_","`"];function DJ(r){let e="";for(const[t,n]of Object.entries(r))e+=`	classDef ${t} ${n};
`;return e}function $J(r,e,t){const{firstNode:n,lastNode:i,nodeColors:a,withStyles:o=!0,curveStyle:s="linear",wrapLabelNWords:u=9}=t??{};let l=o?`%%{init: {'flowchart': {'curve': '${s}'}}}%%
graph TD;
`:`graph TD;
`;if(o){const f="default",m={[f]:"{0}({1})"};n!==void 0&&(m[n]="{0}([{1}]):::first"),i!==void 0&&(m[i]="{0}([{1}]):::last");for(const[p,g]of Object.entries(r)){const b=g.name.split(":").pop()??"";let y=xJ.some(w=>b.startsWith(w)&&b.endsWith(w))?`<p>${b}</p>`:b;Object.keys(g.metadata??{}).length&&(y+=`<hr/><small><em>${Object.entries(g.metadata??{}).map(([w,S])=>`${w} = ${S}`).join(`
`)}</em></small>`);const v=(m[p]??m[f]).replace("{0}",Qy(p)).replace("{1}",y);l+=`	${v}
`}}const c={};for(const f of e){const m=f.source.split(":"),p=f.target.split(":"),g=m.filter((b,_)=>b===p[_]).join(":");c[g]||(c[g]=[]),c[g].push(f)}const d=new Set;function h(f,m){const p=f.length===1&&f[0].source===f[0].target;if(m&&!p){const g=m.split(":").pop();if(d.has(g))throw new Error(`Found duplicate subgraph '${g}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);d.add(g),l+=`	subgraph ${g}
`}for(const g of f){const{source:b,target:_,data:y,conditional:v}=g;let w="";if(y!==void 0){let S=y;const R=S.split(" ");R.length>u&&(S=Array.from({length:Math.ceil(R.length/u)},(P,C)=>R.slice(C*u,(C+1)*u).join(" ")).join("&nbsp;<br>&nbsp;")),w=v?` -. &nbsp;${S}&nbsp; .-> `:` -- &nbsp;${S}&nbsp; --> `}else w=v?" -.-> ":" --> ";l+=`	${Qy(b)}${w}${Qy(_)};
`}for(const g in c)g.startsWith(`${m}:`)&&g!==m&&h(c[g],g);m&&!p&&(l+=`	end
`)}h(c[""]??[],"");for(const f in c)!f.includes(":")&&f!==""&&h(c[f],f);return o&&(l+=DJ(a??{})),l}async function NJ(r,e){let{backgroundColor:t="white"}=e??{};const n=btoa(r);t!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(t)||(t=`!${t}`));const i=`https://mermaid.ink/img/${n}?bgColor=${t}`,a=await fetch(i);if(!a.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${a.status}`,`Status text: ${a.statusText}`].join(`
`));return await a.blob()}function X_(r,e,t){function n(s,u){var l;Object.defineProperty(s,"_zod",{value:s._zod??{},enumerable:!1}),(l=s._zod).traits??(l.traits=new Set),s._zod.traits.add(r),e(s,u);for(const c in o.prototype)c in s||Object.defineProperty(s,c,{value:o.prototype[c].bind(s)});s._zod.constr=o,s._zod.def=u}const i=(t==null?void 0:t.Parent)??Object;class a extends i{}Object.defineProperty(a,"name",{value:r});function o(s){var u;const l=t!=null&&t.Parent?new a:this;n(l,s),(u=l._zod).deferred??(u.deferred=[]);for(const c of l._zod.deferred)c();return l}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:s=>{var u,l;return t!=null&&t.Parent&&s instanceof t.Parent?!0:(l=(u=s==null?void 0:s._zod)==null?void 0:u.traits)==null?void 0:l.has(r)}}),Object.defineProperty(o,"name",{value:r}),o}class m_ extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const qJ={};function Z_(r){return qJ}function BJ(r){const e=Object.values(r).filter(n=>typeof n=="number");return Object.entries(r).filter(([n,i])=>e.indexOf(+n)===-1).map(([n,i])=>i)}function UJ(r,e){return typeof e=="bigint"?e.toString():e}function zJ(r,e,t){Object.defineProperty(r,e,{get(){{const n=t();return r[e]=n,n}},set(n){Object.defineProperty(r,e,{value:n})},configurable:!0})}function LJ(r=10){const e="abcdefghijklmnopqrstuvwxyz";let t="";for(let n=0;n<r;n++)t+=e[Math.floor(Math.random()*e.length)];return t}const v3=Error.captureStackTrace?Error.captureStackTrace:(...r)=>{};function g_(r,e,t){const n=new r._zod.constr(e??r._zod.def);return(!e||t!=null&&t.parent)&&(n._zod.parent=r),n}function FJ(r){return{}}function Yy(r,e=0){for(let t=e;t<r.issues.length;t++)if(r.issues[t].continue!==!0)return!0;return!1}function Qm(r){return typeof r=="string"?r:r==null?void 0:r.message}function Q_(r,e,t){var i,a,o,s,u,l;const n={...r,path:r.path??[]};if(!r.message){const c=Qm((o=(a=(i=r.inst)==null?void 0:i._zod.def)==null?void 0:a.error)==null?void 0:o.call(a,r))??Qm((s=e==null?void 0:e.error)==null?void 0:s.call(e,r))??Qm((u=t.customError)==null?void 0:u.call(t,r))??Qm((l=t.localeError)==null?void 0:l.call(t,r))??"Invalid input";n.message=c}return delete n.inst,delete n.continue,e!=null&&e.reportInput||delete n.input,n}const w3=(r,e)=>{r.name="$ZodError",Object.defineProperty(r,"_zod",{value:r._zod,enumerable:!1}),Object.defineProperty(r,"issues",{value:e,enumerable:!1}),Object.defineProperty(r,"message",{get(){return JSON.stringify(e,UJ,2)},enumerable:!0})},kJ=X_("$ZodError",w3),Y_=X_("$ZodError",w3,{Parent:Error}),VJ=r=>(e,t,n,i)=>{const a=n?Object.assign(n,{async:!1}):{async:!1},o=e._zod.run({value:t,issues:[]},a);if(o instanceof Promise)throw new m_;if(o.issues.length){const s=new((i==null?void 0:i.Err)??r)(o.issues.map(u=>Q_(u,a,Z_())));throw v3(s,i==null?void 0:i.callee),s}return o.value},HJ=VJ(Y_),KJ=r=>async(e,t,n,i)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let o=e._zod.run({value:t,issues:[]},a);if(o instanceof Promise&&(o=await o),o.issues.length){const s=new((i==null?void 0:i.Err)??r)(o.issues.map(u=>Q_(u,a,Z_())));throw v3(s,i==null?void 0:i.callee),s}return o.value},WJ=KJ(Y_),GJ=r=>(e,t,n)=>{const i=n?{...n,async:!1}:{async:!1},a=e._zod.run({value:t,issues:[]},i);if(a instanceof Promise)throw new m_;return a.issues.length?{success:!1,error:new(r??kJ)(a.issues.map(o=>Q_(o,i,Z_())))}:{success:!0,data:a.value}},JJ=GJ(Y_),XJ=r=>async(e,t,n)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let a=e._zod.run({value:t,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new r(a.issues.map(o=>Q_(o,i,Z_())))}:{success:!0,data:a.value}},ZJ=XJ(Y_),QJ={major:4,minor:0,patch:0},YJ=X_("$ZodType",(r,e)=>{var i;var t;r??(r={}),zJ(r._zod,"id",()=>e.type+"_"+LJ(10)),r._zod.def=e,r._zod.bag=r._zod.bag||{},r._zod.version=QJ;const n=[...r._zod.def.checks??[]];r._zod.traits.has("$ZodCheck")&&n.unshift(r);for(const a of n)for(const o of a._zod.onattach)o(r);if(n.length===0)(t=r._zod).deferred??(t.deferred=[]),(i=r._zod.deferred)==null||i.push(()=>{r._zod.run=r._zod.parse});else{const a=(o,s,u)=>{let l=Yy(o),c;for(const d of s){if(d._zod.when){if(!d._zod.when(o))continue}else if(l)continue;const h=o.issues.length,f=d._zod.check(o);if(f instanceof Promise&&(u==null?void 0:u.async)===!1)throw new m_;if(c||f instanceof Promise)c=(c??Promise.resolve()).then(async()=>{await f,o.issues.length!==h&&(l||(l=Yy(o,h)))});else{if(o.issues.length===h)continue;l||(l=Yy(o,h))}}return c?c.then(()=>o):o};r._zod.run=(o,s)=>{const u=r._zod.parse(o,s);if(u instanceof Promise){if(s.async===!1)throw new m_;return u.then(l=>a(l,n,s))}return a(u,n,s)}}r["~standard"]={validate:a=>{var o;try{const s=JJ(r,a);return s.success?{value:s.data}:{issues:(o=s.error)==null?void 0:o.issues}}catch{return ZJ(r,a).then(u=>{var l;return u.success?{value:u.data}:{issues:(l=u.error)==null?void 0:l.issues}})}},vendor:"zod",version:1}}),eX=X_("$ZodNever",(r,e)=>{YJ.init(r,e),r._zod.parse=(t,n)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:r}),t)});class S3{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const n=t[0];if(this._map.set(e,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}remove(e){return this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const n={...this.get(t)??{}};return delete n.id,{...n,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function tX(){return new S3}const wl=tX();function rX(r,e){return new r({type:"never",...FJ()})}class yT{constructor(e){this.counter=0,this.metadataRegistry=(e==null?void 0:e.metadata)??wl,this.target=(e==null?void 0:e.target)??"draft-2020-12",this.unrepresentable=(e==null?void 0:e.unrepresentable)??"throw",this.override=(e==null?void 0:e.override)??(()=>{}),this.io=(e==null?void 0:e.io)??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var d,h,f;var n;const i=e._zod.def,a={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},o=this.seen.get(e);if(o)return o.count++,t.schemaPath.includes(e)&&(o.cycle=t.path),o.schema;const s={schema:{},count:1,cycle:void 0};this.seen.set(e,s);const u=(h=(d=e._zod).toJSONSchema)==null?void 0:h.call(d);if(u)s.schema=u;else{const m={...t,schemaPath:[...t.schemaPath,e],path:t.path},p=e._zod.parent;if(p)s.ref=p,this.process(p,m),this.seen.get(p).isParent=!0;else{const g=s.schema;switch(i.type){case"string":{const b=g;b.type="string";const{minimum:_,maximum:y,format:v,patterns:w,contentEncoding:S}=e._zod.bag;if(typeof _=="number"&&(b.minLength=_),typeof y=="number"&&(b.maxLength=y),v&&(b.format=a[v]??v,b.format===""&&delete b.format),S&&(b.contentEncoding=S),w&&w.size>0){const R=[...w];R.length===1?b.pattern=R[0].source:R.length>1&&(s.schema.allOf=[...R.map(P=>({...this.target==="draft-7"?{type:"string"}:{},pattern:P.source}))])}break}case"number":{const b=g,{minimum:_,maximum:y,format:v,multipleOf:w,exclusiveMaximum:S,exclusiveMinimum:R}=e._zod.bag;typeof v=="string"&&v.includes("int")?b.type="integer":b.type="number",typeof R=="number"&&(b.exclusiveMinimum=R),typeof _=="number"&&(b.minimum=_,typeof R=="number"&&(R>=_?delete b.minimum:delete b.exclusiveMinimum)),typeof S=="number"&&(b.exclusiveMaximum=S),typeof y=="number"&&(b.maximum=y,typeof S=="number"&&(S<=y?delete b.maximum:delete b.exclusiveMaximum)),typeof w=="number"&&(b.multipleOf=w);break}case"boolean":{const b=g;b.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"undefined":{const b=g;b.type="null";break}case"null":{g.type="null";break}case"any":break;case"unknown":break;case"never":{g.not={};break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const b=g,{minimum:_,maximum:y}=e._zod.bag;typeof _=="number"&&(b.minItems=_),typeof y=="number"&&(b.maxItems=y),b.type="array",b.items=this.process(i.element,{...m,path:[...m.path,"items"]});break}case"object":{const b=g;b.type="object",b.properties={};const _=i.shape;for(const w in _)b.properties[w]=this.process(_[w],{...m,path:[...m.path,"properties",w]});const y=new Set(Object.keys(_)),v=new Set([...y].filter(w=>{const S=i.shape[w]._zod;return this.io==="input"?S.optin===void 0:S.optout===void 0}));v.size>0&&(b.required=Array.from(v)),((f=i.catchall)==null?void 0:f._zod.def.type)==="never"?b.additionalProperties=!1:i.catchall?i.catchall&&(b.additionalProperties=this.process(i.catchall,{...m,path:[...m.path,"additionalProperties"]})):this.io==="output"&&(b.additionalProperties=!1);break}case"union":{const b=g;b.anyOf=i.options.map((_,y)=>this.process(_,{...m,path:[...m.path,"anyOf",y]}));break}case"intersection":{const b=g,_=this.process(i.left,{...m,path:[...m.path,"allOf",0]}),y=this.process(i.right,{...m,path:[...m.path,"allOf",1]}),v=S=>"allOf"in S&&Object.keys(S).length===1,w=[...v(_)?_.allOf:[_],...v(y)?y.allOf:[y]];b.allOf=w;break}case"tuple":{const b=g;b.type="array";const _=i.items.map((w,S)=>this.process(w,{...m,path:[...m.path,"prefixItems",S]}));if(this.target==="draft-2020-12"?b.prefixItems=_:b.items=_,i.rest){const w=this.process(i.rest,{...m,path:[...m.path,"items"]});this.target==="draft-2020-12"?b.items=w:b.additionalItems=w}i.rest&&(b.items=this.process(i.rest,{...m,path:[...m.path,"items"]}));const{minimum:y,maximum:v}=e._zod.bag;typeof y=="number"&&(b.minItems=y),typeof v=="number"&&(b.maxItems=v);break}case"record":{const b=g;b.type="object",b.propertyNames=this.process(i.keyType,{...m,path:[...m.path,"propertyNames"]}),b.additionalProperties=this.process(i.valueType,{...m,path:[...m.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const b=g,_=BJ(i.entries);_.every(y=>typeof y=="number")&&(b.type="number"),_.every(y=>typeof y=="string")&&(b.type="string"),b.enum=_;break}case"literal":{const b=g,_=[];for(const y of i.values)if(y===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof y=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");_.push(Number(y))}else _.push(y);if(_.length!==0)if(_.length===1){const y=_[0];b.type=y===null?"null":typeof y,b.const=y}else _.every(y=>typeof y=="number")&&(b.type="number"),_.every(y=>typeof y=="string")&&(b.type="string"),_.every(y=>typeof y=="boolean")&&(b.type="string"),_.every(y=>y===null)&&(b.type="null"),b.enum=_;break}case"file":{const b=g,_={type:"string",format:"binary",contentEncoding:"binary"},{minimum:y,maximum:v,mime:w}=e._zod.bag;y!==void 0&&(_.minLength=y),v!==void 0&&(_.maxLength=v),w?w.length===1?(_.contentMediaType=w[0],Object.assign(b,_)):b.anyOf=w.map(S=>({..._,contentMediaType:S})):Object.assign(b,_);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const b=this.process(i.innerType,m);g.anyOf=[b,{type:"null"}];break}case"nonoptional":{this.process(i.innerType,m),s.ref=i.innerType;break}case"success":{const b=g;b.type="boolean";break}case"default":{this.process(i.innerType,m),s.ref=i.innerType,g.default=JSON.parse(JSON.stringify(i.defaultValue));break}case"prefault":{this.process(i.innerType,m),s.ref=i.innerType,this.io==="input"&&(g._prefault=JSON.parse(JSON.stringify(i.defaultValue)));break}case"catch":{this.process(i.innerType,m),s.ref=i.innerType;let b;try{b=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}g.default=b;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const b=g,_=e._zod.pattern;if(!_)throw new Error("Pattern not found in template literal");b.type="string",b.pattern=_.source;break}case"pipe":{const b=this.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;this.process(b,m),s.ref=b;break}case"readonly":{this.process(i.innerType,m),s.ref=i.innerType,g.readOnly=!0;break}case"promise":{this.process(i.innerType,m),s.ref=i.innerType;break}case"optional":{this.process(i.innerType,m),s.ref=i.innerType;break}case"lazy":{const b=e._zod.innerType;this.process(b,m),s.ref=b;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const l=this.metadataRegistry.get(e);return l&&Object.assign(s.schema,l),this.io==="input"&&Mt(e)&&(delete s.schema.examples,delete s.schema.default),this.io==="input"&&s.schema._prefault&&((n=s.schema).default??(n.default=s.schema._prefault)),delete s.schema._prefault,this.seen.get(e).schema}emit(e,t){var c,d,h,f;const n={cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0},i=this.seen.get(e);if(!i)throw new Error("Unprocessed schema. This is a bug in Zod.");const a=m=>{var y;const p=this.target==="draft-2020-12"?"$defs":"definitions";if(n.external){const v=(y=n.external.registry.get(m[0]))==null?void 0:y.id;if(v)return{ref:n.external.uri(v)};const w=m[1].defId??m[1].schema.id??`schema${this.counter++}`;return m[1].defId=w,{defId:w,ref:`${n.external.uri("__shared")}#/${p}/${w}`}}if(m[1]===i)return{ref:"#"};const b=`#/${p}/`,_=m[1].schema.id??`__schema${this.counter++}`;return{defId:_,ref:b+_}},o=m=>{if(m[1].schema.$ref)return;const p=m[1],{ref:g,defId:b}=a(m);p.def={...p.schema},b&&(p.defId=b);const _=p.schema;for(const y in _)delete _[y];_.$ref=g};for(const m of this.seen.entries()){const p=m[1];if(e===m[0]){o(m);continue}if(n.external){const b=(c=n.external.registry.get(m[0]))==null?void 0:c.id;if(e!==m[0]&&b){o(m);continue}}if((d=this.metadataRegistry.get(m[0]))==null?void 0:d.id){o(m);continue}if(p.cycle){if(n.cycles==="throw")throw new Error(`Cycle detected: #/${(h=p.cycle)==null?void 0:h.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`);n.cycles==="ref"&&o(m);continue}if(p.count>1&&n.reused==="ref"){o(m);continue}}const s=(m,p)=>{const g=this.seen.get(m),b=g.def??g.schema,_={...b};if(g.ref===null)return;const y=g.ref;if(g.ref=null,y){s(y,p);const v=this.seen.get(y).schema;v.$ref&&p.target==="draft-7"?(b.allOf=b.allOf??[],b.allOf.push(v)):(Object.assign(b,v),Object.assign(b,_))}g.isParent||this.override({zodSchema:m,jsonSchema:b})};for(const m of[...this.seen.entries()].reverse())s(m[0],{target:this.target});const u={};this.target==="draft-2020-12"?u.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?u.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),Object.assign(u,i.def);const l=((f=n.external)==null?void 0:f.defs)??{};for(const m of this.seen.entries()){const p=m[1];p.def&&p.defId&&(l[p.defId]=p.def)}!n.external&&Object.keys(l).length>0&&(this.target==="draft-2020-12"?u.$defs=l:u.definitions=l);try{return JSON.parse(JSON.stringify(u))}catch{throw new Error("Error converting schema to JSON.")}}}function vT(r,e){if(r instanceof S3){const n=new yT(e),i={};for(const s of r._idmap.entries()){const[u,l]=s;n.process(l)}const a={},o={registry:r,uri:s=>s,defs:i};for(const s of r._idmap.entries()){const[u,l]=s;a[u]=n.emit(l,{...e,external:o})}if(Object.keys(i).length>0){const s=n.target==="draft-2020-12"?"$defs":"definitions";a.__shared={[s]:i}}return{schemas:a}}const t=new yT(e);return t.process(r),t.emit(r,e)}function Mt(r,e){const t=e??{seen:new Set};if(t.seen.has(r))return!1;t.seen.add(r);const i=r._zod.def;switch(i.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return Mt(i.element,t);case"object":{for(const a in i.shape)if(Mt(i.shape[a],t))return!0;return!1}case"union":{for(const a of i.options)if(Mt(a,t))return!0;return!1}case"intersection":return Mt(i.left,t)||Mt(i.right,t);case"tuple":{for(const a of i.items)if(Mt(a,t))return!0;return!!(i.rest&&Mt(i.rest,t))}case"record":return Mt(i.keyType,t)||Mt(i.valueType,t);case"map":return Mt(i.keyType,t)||Mt(i.valueType,t);case"set":return Mt(i.valueType,t);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return Mt(i.innerType,t);case"lazy":return Mt(i.getter(),t);case"default":return Mt(i.innerType,t);case"prefault":return Mt(i.innerType,t);case"custom":return!1;case"transform":return!0;case"pipe":return Mt(i.in,t)||Mt(i.out,t);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${i.type}`)}const nX=Symbol("Let zodToJsonSchema decide on which parser to use"),iX={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},aX=r=>({...iX,...r}),oX=r=>{const e=aX(r),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function O3(r,e,t,n){n!=null&&n.errorMessages&&t&&(r.errorMessage={...r.errorMessage,[e]:t})}function st(r,e,t,n,i){r[e]=t,O3(r,e,n,i)}function sX(){return{}}function uX(r,e){var n,i,a;const t={type:"array"};return(n=r.type)!=null&&n._def&&((a=(i=r.type)==null?void 0:i._def)==null?void 0:a.typeName)!==ue.ZodAny&&(t.items=nt(r.type._def,{...e,currentPath:[...e.currentPath,"items"]})),r.minLength&&st(t,"minItems",r.minLength.value,r.minLength.message,e),r.maxLength&&st(t,"maxItems",r.maxLength.value,r.maxLength.message,e),r.exactLength&&(st(t,"minItems",r.exactLength.value,r.exactLength.message,e),st(t,"maxItems",r.exactLength.value,r.exactLength.message,e)),t}function lX(r,e){const t={type:"integer",format:"int64"};if(!r.checks)return t;for(const n of r.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?st(t,"minimum",n.value,n.message,e):st(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),st(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?st(t,"maximum",n.value,n.message,e):st(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),st(t,"maximum",n.value,n.message,e));break;case"multipleOf":st(t,"multipleOf",n.value,n.message,e);break}return t}function cX(){return{type:"boolean"}}function E3(r,e){return nt(r.type._def,e)}const dX=(r,e)=>nt(r.innerType._def,e);function R3(r,e,t){const n=t??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((i,a)=>R3(r,e,i))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return fX(r,e)}}const fX=(r,e)=>{const t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(const n of r.checks)switch(n.kind){case"min":st(t,"minimum",n.value,n.message,e);break;case"max":st(t,"maximum",n.value,n.message,e);break}return t};function pX(r,e){return{...nt(r.innerType._def,e),default:r.defaultValue()}}function hX(r,e){return e.effectStrategy==="input"?nt(r.schema._def,e):{}}function mX(r){return{type:"string",enum:Array.from(r.values)}}const gX=r=>"type"in r&&r.type==="string"?!1:"allOf"in r;function _X(r,e){const t=[nt(r.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),nt(r.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return t.forEach(a=>{if(gX(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let o=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:s,...u}=a;o=u}else n=void 0;i.push(o)}}),i.length?{allOf:i,...n}:void 0}function bX(r,e){const t=typeof r.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(r.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[r.value]}:{type:t==="bigint"?"integer":t,const:r.value}}let ev;const sn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(ev===void 0&&(ev=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),ev),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function C3(r,e){const t={type:"string"};if(r.checks)for(const n of r.checks)switch(n.kind){case"min":st(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,n.value):n.value,n.message,e);break;case"max":st(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":un(t,"email",n.message,e);break;case"format:idn-email":un(t,"idn-email",n.message,e);break;case"pattern:zod":nr(t,sn.email,n.message,e);break}break;case"url":un(t,"uri",n.message,e);break;case"uuid":un(t,"uuid",n.message,e);break;case"regex":nr(t,n.regex,n.message,e);break;case"cuid":nr(t,sn.cuid,n.message,e);break;case"cuid2":nr(t,sn.cuid2,n.message,e);break;case"startsWith":nr(t,RegExp(`^${tv(n.value,e)}`),n.message,e);break;case"endsWith":nr(t,RegExp(`${tv(n.value,e)}$`),n.message,e);break;case"datetime":un(t,"date-time",n.message,e);break;case"date":un(t,"date",n.message,e);break;case"time":un(t,"time",n.message,e);break;case"duration":un(t,"duration",n.message,e);break;case"length":st(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,n.value):n.value,n.message,e),st(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,n.value):n.value,n.message,e);break;case"includes":{nr(t,RegExp(tv(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&un(t,"ipv4",n.message,e),n.version!=="v4"&&un(t,"ipv6",n.message,e);break}case"base64url":nr(t,sn.base64url,n.message,e);break;case"jwt":nr(t,sn.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&nr(t,sn.ipv4Cidr,n.message,e),n.version!=="v4"&&nr(t,sn.ipv6Cidr,n.message,e);break}case"emoji":nr(t,sn.emoji(),n.message,e);break;case"ulid":{nr(t,sn.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{un(t,"binary",n.message,e);break}case"contentEncoding:base64":{st(t,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{nr(t,sn.base64,n.message,e);break}}break}case"nanoid":nr(t,sn.nanoid,n.message,e)}return t}function tv(r,e){return e.patternStrategy==="escape"?vX(r):r}const yX=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function vX(r){let e="";for(let t=0;t<r.length;t++)yX.has(r[t])||(e+="\\"),e+=r[t];return e}function un(r,e,t,n){var i;r.format||(i=r.anyOf)!=null&&i.some(a=>a.format)?(r.anyOf||(r.anyOf=[]),r.format&&(r.anyOf.push({format:r.format,...r.errorMessage&&n.errorMessages&&{errorMessage:{format:r.errorMessage.format}}}),delete r.format,r.errorMessage&&(delete r.errorMessage.format,Object.keys(r.errorMessage).length===0&&delete r.errorMessage)),r.anyOf.push({format:e,...t&&n.errorMessages&&{errorMessage:{format:t}}})):st(r,"format",e,t,n)}function nr(r,e,t,n){var i;r.pattern||(i=r.allOf)!=null&&i.some(a=>a.pattern)?(r.allOf||(r.allOf=[]),r.pattern&&(r.allOf.push({pattern:r.pattern,...r.errorMessage&&n.errorMessages&&{errorMessage:{pattern:r.errorMessage.pattern}}}),delete r.pattern,r.errorMessage&&(delete r.errorMessage.pattern,Object.keys(r.errorMessage).length===0&&delete r.errorMessage)),r.allOf.push({pattern:wT(e,n),...t&&n.errorMessages&&{errorMessage:{pattern:t}}})):st(r,"pattern",wT(e,n),t,n)}function wT(r,e){var u;if(!e.applyRegexFlags||!r.flags)return r.source;const t={i:r.flags.includes("i"),m:r.flags.includes("m"),s:r.flags.includes("s")},n=t.i?r.source.toLowerCase():r.source;let i="",a=!1,o=!1,s=!1;for(let l=0;l<n.length;l++){if(a){i+=n[l],a=!1;continue}if(t.i){if(o){if(n[l].match(/[a-z]/)){s?(i+=n[l],i+=`${n[l-2]}-${n[l]}`.toUpperCase(),s=!1):n[l+1]==="-"&&((u=n[l+2])!=null&&u.match(/[a-z]/))?(i+=n[l],s=!0):i+=`${n[l]}${n[l].toUpperCase()}`;continue}}else if(n[l].match(/[a-z]/)){i+=`[${n[l]}${n[l].toUpperCase()}]`;continue}}if(t.m){if(n[l]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[l]==="$"){i+=`($|(?=[\r
]))`;continue}}if(t.s&&n[l]==="."){i+=o?`${n[l]}\r
`:`[${n[l]}\r
]`;continue}i+=n[l],n[l]==="\\"?a=!0:o&&n[l]==="]"?o=!1:!o&&n[l]==="["&&(o=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),r.source}return i}function P3(r,e){var n,i,a,o,s,u;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((n=r.keyType)==null?void 0:n._def.typeName)===ue.ZodEnum)return{type:"object",required:r.keyType._def.values,properties:r.keyType._def.values.reduce((l,c)=>({...l,[c]:nt(r.valueType._def,{...e,currentPath:[...e.currentPath,"properties",c]})??{}}),{}),additionalProperties:e.rejectedAdditionalProperties};const t={type:"object",additionalProperties:nt(r.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return t;if(((i=r.keyType)==null?void 0:i._def.typeName)===ue.ZodString&&((a=r.keyType._def.checks)!=null&&a.length)){const{type:l,...c}=C3(r.keyType._def,e);return{...t,propertyNames:c}}else{if(((o=r.keyType)==null?void 0:o._def.typeName)===ue.ZodEnum)return{...t,propertyNames:{enum:r.keyType._def.values}};if(((s=r.keyType)==null?void 0:s._def.typeName)===ue.ZodBranded&&r.keyType._def.type._def.typeName===ue.ZodString&&((u=r.keyType._def.type._def.checks)!=null&&u.length)){const{type:l,...c}=E3(r.keyType._def,e);return{...t,propertyNames:c}}}return t}function wX(r,e){if(e.mapStrategy==="record")return P3(r,e);const t=nt(r.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=nt(r.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,n],minItems:2,maxItems:2}}}function SX(r){const e=r.values,n=Object.keys(r.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(n.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}function OX(){return{not:{}}}function EX(r){return r.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const __={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function RX(r,e){if(e.target==="openApi3")return ST(r,e);const t=r.options instanceof Map?Array.from(r.options.values()):r.options;if(t.every(n=>n._def.typeName in __&&(!n._def.checks||!n._def.checks.length))){const n=t.reduce((i,a)=>{const o=__[a._def.typeName];return o&&!i.includes(o)?[...i,o]:i},[]);return{type:n.length>1?n:n[0]}}else if(t.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=t.reduce((i,a)=>{const o=typeof a._def.value;switch(o){case"string":case"number":case"boolean":return[...i,o];case"bigint":return[...i,"integer"];case"object":if(a._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===t.length){const i=n.filter((a,o,s)=>s.indexOf(a)===o);return{type:i.length>1?i:i[0],enum:t.reduce((a,o)=>a.includes(o._def.value)?a:[...a,o._def.value],[])}}}else if(t.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((n,i)=>[...n,...i._def.values.filter(a=>!n.includes(a))],[])};return ST(r,e)}const ST=(r,e)=>{const t=(r.options instanceof Map?Array.from(r.options.values()):r.options).map((n,i)=>nt(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return t.length?{anyOf:t}:void 0};function CX(r,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(r.innerType._def.typeName)&&(!r.innerType._def.checks||!r.innerType._def.checks.length))return e.target==="openApi3"?{type:__[r.innerType._def.typeName],nullable:!0}:{type:[__[r.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const n=nt(r.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const t=nt(r.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function PX(r,e){const t={type:"number"};if(!r.checks)return t;for(const n of r.checks)switch(n.kind){case"int":t.type="integer",O3(t,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?st(t,"minimum",n.value,n.message,e):st(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),st(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?st(t,"maximum",n.value,n.message,e):st(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),st(t,"maximum",n.value,n.message,e));break;case"multipleOf":st(t,"multipleOf",n.value,n.message,e);break}return t}function jX(r,e){const t=e.target==="openAi",n={type:"object",properties:{}},i=[],a=r.shape();for(const s in a){let u=a[s];if(u===void 0||u._def===void 0)continue;let l=AX(u);l&&t&&(u instanceof tl&&(u=u._def.innerType),u.isNullable()||(u=u.nullable()),l=!1);const c=nt(u._def,{...e,currentPath:[...e.currentPath,"properties",s],propertyPath:[...e.currentPath,"properties",s]});c!==void 0&&(n.properties[s]=c,l||i.push(s))}i.length&&(n.required=i);const o=TX(r,e);return o!==void 0&&(n.additionalProperties=o),n}function TX(r,e){if(r.catchall._def.typeName!=="ZodNever")return nt(r.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(r.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function AX(r){try{return r.isOptional()}catch{return!0}}const MX=(r,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return nt(r.innerType._def,e);const t=nt(r.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}},IX=(r,e)=>{if(e.pipeStrategy==="input")return nt(r.in._def,e);if(e.pipeStrategy==="output")return nt(r.out._def,e);const t=nt(r.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=nt(r.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,n].filter(i=>i!==void 0)}};function xX(r,e){return nt(r.type._def,e)}function DX(r,e){const n={type:"array",uniqueItems:!0,items:nt(r.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return r.minSize&&st(n,"minItems",r.minSize.value,r.minSize.message,e),r.maxSize&&st(n,"maxItems",r.maxSize.value,r.maxSize.message,e),n}function $X(r,e){return r.rest?{type:"array",minItems:r.items.length,items:r.items.map((t,n)=>nt(t._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((t,n)=>n===void 0?t:[...t,n],[]),additionalItems:nt(r.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:r.items.length,maxItems:r.items.length,items:r.items.map((t,n)=>nt(t._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((t,n)=>n===void 0?t:[...t,n],[])}}function NX(){return{not:{}}}function qX(){return{}}const BX=(r,e)=>nt(r.innerType._def,e),UX=(r,e,t)=>{switch(e){case ue.ZodString:return C3(r,t);case ue.ZodNumber:return PX(r,t);case ue.ZodObject:return jX(r,t);case ue.ZodBigInt:return lX(r,t);case ue.ZodBoolean:return cX();case ue.ZodDate:return R3(r,t);case ue.ZodUndefined:return NX();case ue.ZodNull:return EX(t);case ue.ZodArray:return uX(r,t);case ue.ZodUnion:case ue.ZodDiscriminatedUnion:return RX(r,t);case ue.ZodIntersection:return _X(r,t);case ue.ZodTuple:return $X(r,t);case ue.ZodRecord:return P3(r,t);case ue.ZodLiteral:return bX(r,t);case ue.ZodEnum:return mX(r);case ue.ZodNativeEnum:return SX(r);case ue.ZodNullable:return CX(r,t);case ue.ZodOptional:return MX(r,t);case ue.ZodMap:return wX(r,t);case ue.ZodSet:return DX(r,t);case ue.ZodLazy:return()=>r.getter()._def;case ue.ZodPromise:return xX(r,t);case ue.ZodNaN:case ue.ZodNever:return OX();case ue.ZodEffects:return hX(r,t);case ue.ZodAny:return sX();case ue.ZodUnknown:return qX();case ue.ZodDefault:return pX(r,t);case ue.ZodBranded:return E3(r,t);case ue.ZodReadonly:return BX(r,t);case ue.ZodCatch:return dX(r,t);case ue.ZodPipeline:return IX(r,t);case ue.ZodFunction:case ue.ZodVoid:case ue.ZodSymbol:return;default:return(n=>{})()}};function nt(r,e,t=!1){var s;const n=e.seen.get(r);if(e.override){const u=(s=e.override)==null?void 0:s.call(e,r,e,n,t);if(u!==nX)return u}if(n&&!t){const u=zX(n,e);if(u!==void 0)return u}const i={def:r,path:e.currentPath,jsonSchema:void 0};e.seen.set(r,i);const a=UX(r,r.typeName,e),o=typeof a=="function"?nt(a(),e):a;if(o&&FX(r,e,o),e.postProcess){const u=e.postProcess(o,r,e);return i.jsonSchema=o,u}return i.jsonSchema=o,o}const zX=(r,e)=>{switch(e.$refStrategy){case"root":return{$ref:r.path.join("/")};case"relative":return{$ref:LX(e.currentPath,r.path)};case"none":case"seen":return r.path.length<e.currentPath.length&&r.path.every((t,n)=>e.currentPath[n]===t)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},LX=(r,e)=>{let t=0;for(;t<r.length&&t<e.length&&r[t]===e[t];t++);return[(r.length-t).toString(),...e.slice(t)].join("/")},FX=(r,e,t)=>(r.description&&(t.description=r.description,e.markdownDescription&&(t.markdownDescription=r.description)),t),eb=(r,e)=>{const t=oX(e),n=void 0,i=e==null?void 0:e.name,a=nt(r._def,t,!1)??{},o=i===void 0?n?{...a,[t.definitionPath]:n}:a:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,i].join("/"),[t.definitionPath]:{...n,[i]:a}};return t.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(t.target==="jsonSchema2019-09"||t.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),t.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};function jR(r,e){const t=typeof r;if(t!==typeof e)return!1;if(Array.isArray(r)){if(!Array.isArray(e))return!1;const n=r.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(!jR(r[i],e[i]))return!1;return!0}if(t==="object"){if(!r||!e)return r===e;const n=Object.keys(r),i=Object.keys(e);if(n.length!==i.length)return!1;for(const o of n)if(!jR(r[o],e[o]))return!1;return!0}return r===e}function Cu(r){if(typeof r!="object"||r===null)return!1;const e=r;if(!("_zod"in e))return!1;const t=e._zod;return typeof t=="object"&&t!==null&&"def"in t}function Nu(r){if(typeof r!="object"||r===null)return!1;const e=r;if(!("_def"in e)||"_zod"in e)return!1;const t=e._def;return typeof t=="object"&&t!=null&&"typeName"in t}function TR(r){return Cu(r)&&console.warn("[WARNING] Attempting to use Zod 4 schema in a context where Zod 3 schema is expected. This may cause unexpected behavior."),Nu(r)}function lf(r){return!r||typeof r!="object"||Array.isArray(r)?!1:!!(Cu(r)||Nu(r))}async function j3(r,e){if(Cu(r))try{return{success:!0,data:await WJ(r,e)}}catch(t){return{success:!1,error:t}}if(Nu(r))return r.safeParse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function T3(r,e){if(Cu(r))return HJ(r,e);if(Nu(r))return r.parse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function A3(r){var e;if(Cu(r))return(e=wl.get(r))==null?void 0:e.description;if(Nu(r)||"description"in r&&typeof r.description=="string")return r.description}function kX(r){return lf(r)?Nu(r)?r._def.typeName==="ZodString":Cu(r)?r._zod.def.type==="string":!1:!1}function zh(r){return Cu(r)?typeof r=="object"&&r!==null&&"_zod"in r&&typeof r._zod=="object"&&r._zod!==null&&"def"in r._zod&&typeof r._zod.def=="object"&&r._zod.def!==null&&"type"in r._zod.def&&r._zod.def.type==="object":!1}function M3(r){return Cu(r)?typeof r=="object"&&r!==null&&"_zod"in r&&typeof r._zod=="object"&&r._zod!==null&&"def"in r._zod&&typeof r._zod.def=="object"&&r._zod.def!==null&&"type"in r._zod.def&&r._zod.def.type==="array":!1}function AR(r,e=!1){if(Nu(r))return r.strict();if(zh(r)){const t=r._zod.def.shape;if(e)for(const[a,o]of Object.entries(r._zod.def.shape)){if(zh(o)){const u=AR(o,e);t[a]=u}else if(M3(o)){let u=o._zod.def.element;zh(u)&&(u=AR(u,e)),t[a]=g_(o,{...o._zod.def,element:u})}else t[a]=o;const s=wl.get(o);s&&wl.add(t[a],s)}const n=g_(r,{...r._zod.def,shape:t,catchall:rX(eX)}),i=wl.get(r);return i&&wl.add(n,i),n}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function VX(r){return Nu(r)&&"typeName"in r._def&&r._def.typeName==="ZodEffects"}function HX(r){return Cu(r)&&r._zod.def.type==="pipe"}function Eh(r,e=!1){if(Nu(r))return VX(r)?Eh(r._def.schema,e):r;if(Cu(r)){let t=r;if(HX(r)&&(t=Eh(r._zod.def.in,e)),e){if(zh(t)){const i=t._zod.def.shape;for(const[a,o]of Object.entries(t._zod.def.shape))i[a]=Eh(o,e);t=g_(t,{...t._zod.def,shape:i})}else if(M3(t)){const i=Eh(t._zod.def.element,e);t=g_(t,{...t._zod.def,element:i})}}const n=wl.get(r);return n&&wl.add(t,n),t}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function Zu(r){if(Cu(r)){const e=Eh(r,!0);if(zh(e)){const t=AR(e,!0);return vT(t)}else return vT(r)}return Nu(r)?eb(r):r}function KX(r,e){if(r!==void 0&&!Kd(r))return r;if(qC(e))try{let t=e.getName();return t=t.startsWith("Runnable")?t.slice(8):t,t}catch{return e.getName()}else return e.name??"UnknownSchema"}function WX(r){return qC(r.data)?{type:"runnable",data:{id:r.data.lc_id,name:r.data.getName()}}:{type:"schema",data:{...Zu(r.data.schema),title:r.data.name}}}class tb{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((t,n)=>{e[t.id]=Kd(t.id)?n:t.id}),{nodes:Object.values(this.nodes).map(t=>({id:e[t.id],...WX(t)})),edges:this.edges.map(t=>{const n={source:e[t.source],target:e[t.target]};return typeof t.data<"u"&&(n.data=t.data),typeof t.conditional<"u"&&(n.conditional=t.conditional),n})}}addNode(e,t,n){if(t!==void 0&&this.nodes[t]!==void 0)throw new Error(`Node with id ${t} already exists`);const i=t??Zt(),a={id:i,data:e,name:KX(t,e),metadata:n};return this.nodes[i]=a,a}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(t=>t.source!==e.id&&t.target!==e.id)}addEdge(e,t,n,i){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[t.id]===void 0)throw new Error(`Target node ${t.id} not in graph`);const a={source:e.id,target:t.id,data:n,conditional:i};return this.edges.push(a),a}firstNode(){return OT(this)}lastNode(){return ET(this)}extend(e,t=""){let n=t;Object.values(e.nodes).map(l=>l.id).every(Kd)&&(n="");const a=l=>n?`${n}:${l}`:l;Object.entries(e.nodes).forEach(([l,c])=>{this.nodes[a(l)]={...c,id:a(l)}});const o=e.edges.map(l=>({...l,source:a(l.source),target:a(l.target)}));this.edges=[...this.edges,...o];const s=e.firstNode(),u=e.lastNode();return[s?{id:a(s.id),data:s.data}:void 0,u?{id:a(u.id),data:u.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&OT(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&ET(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(i=>[i.id,i.name])),t=new Map;Object.values(e).forEach(i=>{t.set(i,(t.get(i)||0)+1)});const n=i=>{const a=e[i];return Kd(i)&&t.get(a)===1?a:i};return new tb({nodes:Object.fromEntries(Object.entries(this.nodes).map(([i,a])=>[n(i),{...a,id:n(i)}])),edges:this.edges.map(i=>({...i,source:n(i.source),target:n(i.target)}))})}drawMermaid(e){const{withStyles:t,curveStyle:n,nodeColors:i={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:a}=e??{},o=this.reid(),s=o.firstNode(),u=o.lastNode();return $J(o.nodes,o.edges,{firstNode:s==null?void 0:s.id,lastNode:u==null?void 0:u.id,withStyles:t,curveStyle:n,nodeColors:i,wrapLabelNWords:a})}async drawMermaidPng(e){const t=this.drawMermaid(e);return NJ(t,{backgroundColor:e==null?void 0:e.backgroundColor})}}function OT(r,e=[]){const t=new Set(r.edges.filter(i=>!e.includes(i.source)).map(i=>i.target)),n=[];for(const i of Object.values(r.nodes))!e.includes(i.id)&&!t.has(i.id)&&n.push(i);return n.length===1?n[0]:void 0}function ET(r,e=[]){const t=new Set(r.edges.filter(i=>!e.includes(i.target)).map(i=>i.source)),n=[];for(const i of Object.values(r.nodes))!e.includes(i.id)&&!t.has(i.id)&&n.push(i);return n.length===1?n[0]:void 0}function GX(r){const e=new TextEncoder,t=new ReadableStream({async start(n){for await(const i of r)n.enqueue(e.encode(`event: data
data: ${JSON.stringify(i)}

`));n.enqueue(e.encode(`event: end

`)),n.close()}});return Or.fromReadableStream(t)}function RT(r){return typeof r=="object"&&r!==null&&typeof r[Symbol.iterator]=="function"&&typeof r.next=="function"}const JX=r=>r!=null&&typeof r=="object"&&"next"in r&&typeof r.next=="function";function MR(r){return typeof r=="object"&&r!==null&&typeof r[Symbol.asyncIterator]=="function"}function*CT(r,e){for(;;){const{value:t,done:n}=xl.runWithConfig(uf(r),e.next.bind(e),!0);if(n)break;yield t}}async function*IR(r,e){const t=e[Symbol.asyncIterator]();for(;;){const{value:n,done:i}=await xl.runWithConfig(uf(r),t.next.bind(e),!0);if(i)break;yield n}}function Ut(r,e){return r&&!Array.isArray(r)&&!(r instanceof Date)&&typeof r=="object"?r:{[e]:r}}class gt extends jl{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}bind(e){return new sd({bound:this,kwargs:e,config:{}})}map(){return new b_({bound:this})}withRetry(e){return new I3({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new sd({bound:this,config:e,kwargs:{}})}withFallbacks(e){const t=Array.isArray(e)?e:e.fallbacks;return new ZX({runnable:this,fallbacks:t})}_getOptionsList(e,t=0){if(Array.isArray(e)&&e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);if(Array.isArray(e))return e.map(Ye);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const n=Object.fromEntries(Object.entries(e).filter(([i])=>i!=="runId"));return Array.from({length:t},(i,a)=>Ye(a===0?e:n))}return Array.from({length:t},()=>Ye(e))}async batch(e,t,n){var u;const i=this._getOptionsList(t??{},e.length),a=((u=i[0])==null?void 0:u.maxConcurrency)??(n==null?void 0:n.maxConcurrency),o=new ym({maxConcurrency:a,onFailedAttempt:l=>{throw l}}),s=e.map((l,c)=>o.call(async()=>{try{return await this.invoke(l,i[c])}catch(d){if(n!=null&&n.returnExceptions)return d;throw d}}));return Promise.all(s)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){const n=Ye(t),i=new gf({generator:this._streamIterator(e,n),config:n});return await i.setup,Or.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(e){let t;e===void 0?t=Ye(e):t=Ye({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const n={...e};return delete n.callbacks,delete n.tags,delete n.metadata,delete n.runName,delete n.configurable,delete n.recursionLimit,delete n.maxConcurrency,delete n.runId,delete n.timeout,delete n.signal,[t,n]}async _callWithConfig(e,t,n){const i=Ye(n),a=await bu(i),o=await(a==null?void 0:a.handleChainStart(this.toJSON(),Ut(t,"input"),i.runId,i==null?void 0:i.runType,void 0,void 0,(i==null?void 0:i.runName)??this.getName()));delete i.runId;let s;try{const u=e.call(this,t,i,o);s=await Dl(u,n==null?void 0:n.signal)}catch(u){throw await(o==null?void 0:o.handleChainError(u)),u}return await(o==null?void 0:o.handleChainEnd(Ut(s,"output"))),s}async _batchWithConfig(e,t,n,i){var l;const a=this._getOptionsList(n??{},t.length),o=await Promise.all(a.map(bu)),s=await Promise.all(o.map(async(c,d)=>{const h=await(c==null?void 0:c.handleChainStart(this.toJSON(),Ut(t[d],"input"),a[d].runId,a[d].runType,void 0,void 0,a[d].runName??this.getName()));return delete a[d].runId,h}));let u;try{const c=e.call(this,t,a,s,i);u=await Dl(c,(l=a==null?void 0:a[0])==null?void 0:l.signal)}catch(c){throw await Promise.all(s.map(d=>d==null?void 0:d.handleChainError(c))),c}return await Promise.all(s.map(c=>c==null?void 0:c.handleChainEnd(Ut(u,"output")))),u}async*_transformStreamWithConfig(e,t,n){let i,a=!0,o,s=!0;const u=Ye(n),l=await bu(u);async function*c(){for await(const h of e){if(a)if(i===void 0)i=h;else try{i=tn(i,h)}catch{i=void 0,a=!1}yield h}}let d;try{const h=await RJ(t.bind(this),c(),async()=>l==null?void 0:l.handleChainStart(this.toJSON(),{input:""},u.runId,u.runType,void 0,void 0,u.runName??this.getName()),n==null?void 0:n.signal,u);delete u.runId,d=h.setup;const f=d==null?void 0:d.handlers.find(jJ);let m=h.output;f!==void 0&&d!==void 0&&(m=f.tapOutputIterable(d.runId,m));const p=d==null?void 0:d.handlers.find(CJ);p!==void 0&&d!==void 0&&(m=p.tapOutputIterable(d.runId,m));for await(const g of m)if(yield g,s)if(o===void 0)o=g;else try{o=tn(o,g)}catch{o=void 0,s=!1}}catch(h){throw await(d==null?void 0:d.handleChainError(h,void 0,void 0,void 0,{inputs:Ut(i,"input")})),h}await(d==null?void 0:d.handleChainEnd(o??{},void 0,void 0,void 0,{inputs:Ut(i,"input")}))}getGraph(e){const t=new tb,n=t.addNode({name:`${this.getName()}Input`,schema:fT()}),i=t.addNode(this),a=t.addNode({name:`${this.getName()}Output`,schema:fT()});return t.addEdge(n,i),t.addEdge(i,a),t}pipe(e){return new Nr({first:this,last:id(e)})}pick(e){return this.pipe(new QX(e))}assign(e){return this.pipe(new x3(new _f({steps:e})))}async*transform(e,t){let n;for await(const i of e)n===void 0?n=i:n=tn(n,i);yield*this._streamIterator(n,Ye(t))}async*streamLog(e,t,n){const i=new bT({...n,autoClose:!1,_schemaFormat:"original"}),a=Ye(t);yield*this._streamLog(e,i,a)}async*_streamLog(e,t,n){const{callbacks:i}=n;if(i===void 0)n.callbacks=[t];else if(Array.isArray(i))n.callbacks=i.concat([t]);else{const u=i.copy();u.addHandler(t,!0),n.callbacks=u}const a=this.stream(e,n);async function o(){try{const u=await a;for await(const l of u){const c=new _l({ops:[{op:"add",path:"/streamed_output/-",value:l}]});await t.writer.write(c)}}finally{await t.writer.close()}}const s=o();try{for await(const u of t)yield u}finally{await s}}streamEvents(e,t,n){let i;if(t.version==="v1")i=this._streamEventsV1(e,t,n);else if(t.version==="v2")i=this._streamEventsV2(e,t,n);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return t.encoding==="text/event-stream"?GX(i):Or.fromAsyncGenerator(i)}async*_streamEventsV2(e,t,n){var m;const i=new TJ({...n,autoClose:!1}),a=Ye(t),o=a.runId??Zt();a.runId=o;const s=a.callbacks;if(s===void 0)a.callbacks=[i];else if(Array.isArray(s))a.callbacks=s.concat(i);else{const p=s.copy();p.addHandler(i,!0),a.callbacks=p}const u=new AbortController,l=this;async function c(){try{let p;t!=null&&t.signal?"any"in AbortSignal?p=AbortSignal.any([u.signal,t.signal]):(p=t.signal,t.signal.addEventListener("abort",()=>{u.abort()},{once:!0})):p=u.signal;const g=await l.stream(e,{...a,signal:p}),b=i.tapOutputIterable(o,g);for await(const _ of b)if(u.signal.aborted)break}finally{await i.finish()}}const d=c();let h=!1,f;try{for await(const p of i){if(!h){p.data.input=e,h=!0,f=p.run_id,yield p;continue}p.run_id===f&&p.event.endsWith("_end")&&(m=p.data)!=null&&m.input&&delete p.data.input,yield p}}finally{u.abort(),await d}}async*_streamEventsV1(e,t,n){let i,a=!1;const o=Ye(t),s=o.tags??[],u=o.metadata??{},l=o.runName??this.getName(),c=new bT({...n,autoClose:!1,_schemaFormat:"streaming_events"}),d=new IJ({...n}),h=this._streamLog(e,c,o);for await(const m of h){if(i?i=i.concat(m):i=tm.fromRunLogPatch(m),i.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!a){a=!0;const _={...i.state},y={run_id:_.id,event:`on_${_.type}_start`,name:l,tags:s,metadata:u,data:{input:e}};d.includeEvent(y,_.type)&&(yield y)}const p=m.ops.filter(_=>_.path.startsWith("/logs/")).map(_=>_.path.split("/")[2]),g=[...new Set(p)];for(const _ of g){let y,v={};const w=i.state.logs[_];if(w.end_time===void 0?w.streamed_output.length>0?y="stream":y="start":y="end",y==="start")w.inputs!==void 0&&(v.input=w.inputs);else if(y==="end")w.inputs!==void 0&&(v.input=w.inputs),v.output=w.final_output;else if(y==="stream"){const S=w.streamed_output.length;if(S!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${S} instead. Encountered in: "${w.name}"`);v={chunk:w.streamed_output[0]},w.streamed_output=[]}yield{event:`on_${w.type}_${y}`,name:w.name,run_id:w.id,tags:w.tags,metadata:w.metadata,data:v}}const{state:b}=i;if(b.streamed_output.length>0){const _=b.streamed_output.length;if(_!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${_} instead. Encountered in: "${b.name}"`);const y={chunk:b.streamed_output[0]};b.streamed_output=[];const v={event:`on_${b.type}_stream`,run_id:b.id,tags:s,metadata:u,name:l,data:y};d.includeEvent(v,b.type)&&(yield v)}}const f=i==null?void 0:i.state;if(f!==void 0){const m={event:`on_${f.type}_end`,name:l,run_id:f.id,tags:s,metadata:u,data:{output:f.final_output}};d.includeEvent(m,f.type)&&(yield m)}}static isRunnable(e){return qC(e)}withListeners({onStart:e,onEnd:t,onError:n}){return new sd({bound:this,config:{},configFactories:[i=>({callbacks:[new y3({config:i,onStart:e,onEnd:t,onError:n})]})]})}asTool(e){return YX(this,e)}}class sd extends gt{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const t=mT(this.config,...e);return mT(t,...this.configFactories?await Promise.all(this.configFactories.map(async n=>await n(t))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new I3({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig(Ye(t),this.kwargs))}async batch(e,t,n){const i=Array.isArray(t)?await Promise.all(t.map(async a=>this._mergeConfig(Ye(a),this.kwargs))):await this._mergeConfig(Ye(t),this.kwargs);return this.bound.batch(e,i,n)}async*_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig(Ye(t),this.kwargs))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig(Ye(t),this.kwargs))}async*transform(e,t){yield*this.bound.transform(e,await this._mergeConfig(Ye(t),this.kwargs))}streamEvents(e,t,n){const i=this,a=async function*(){yield*i.bound.streamEvents(e,{...await i._mergeConfig(Ye(t),i.kwargs),version:t.version},n)};return Or.fromAsyncGenerator(a())}static isRunnableBinding(e){return e.bound&&gt.isRunnable(e.bound)}withListeners({onStart:e,onEnd:t,onError:n}){return new sd({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[i=>({callbacks:[new y3({config:i,onStart:e,onEnd:t,onError:n})]})]})}}class b_ extends gt{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new b_({bound:this.bound.bind(e)})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _invoke(e,t,n){return this.bound.batch(e,Qt(t,{callbacks:n==null?void 0:n.getChild()}))}withListeners({onStart:e,onEnd:t,onError:n}){return new b_({bound:this.bound.withListeners({onStart:e,onEnd:t,onError:n})})}}class I3 extends sd{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,n){const i=e>1?`retry:attempt:${e}`:void 0;return Qt(t,{callbacks:n==null?void 0:n.getChild(i)})}async _invoke(e,t,n){return n_(i=>super.invoke(e,this._patchConfigForRetry(i,t,n)),{onFailedAttempt:i=>this.onFailedAttempt(i,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _batch(e,t,n,i){const a={};try{await n_(async o=>{const s=e.map((h,f)=>f).filter(h=>a[h.toString()]===void 0||a[h.toString()]instanceof Error),u=s.map(h=>e[h]),l=s.map(h=>this._patchConfigForRetry(o,t==null?void 0:t[h],n==null?void 0:n[h])),c=await super.batch(u,l,{...i,returnExceptions:!0});let d;for(let h=0;h<c.length;h+=1){const f=c[h],m=s[h];f instanceof Error&&d===void 0&&(d=f,d.input=u[h]),a[m.toString()]=f}if(d)throw d;return c},{onFailedAttempt:o=>this.onFailedAttempt(o,o.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(o){if((i==null?void 0:i.returnExceptions)!==!0)throw o}return Object.keys(a).sort((o,s)=>parseInt(o,10)-parseInt(s,10)).map(o=>a[parseInt(o,10)])}async batch(e,t,n){return this._batchWithConfig(this._batch.bind(this),e,t,n)}}class Nr extends gt{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){var u;const n=Ye(t),i=await bu(n),a=await(i==null?void 0:i.handleChainStart(this.toJSON(),Ut(e,"input"),n.runId,void 0,void 0,void 0,n==null?void 0:n.runName));delete n.runId;let o=e,s;try{const l=[this.first,...this.middle];for(let c=0;c<l.length;c+=1){const h=l[c].invoke(o,Qt(n,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${c+1}`)}));o=await Dl(h,t==null?void 0:t.signal)}if((u=t==null?void 0:t.signal)!=null&&u.aborted)throw new Error("Aborted");s=await this.last.invoke(o,Qt(n,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(l){throw await(a==null?void 0:a.handleChainError(l)),l}return await(a==null?void 0:a.handleChainEnd(Ut(s,"output"))),s}async batch(e,t,n){var u;const i=this._getOptionsList(t??{},e.length),a=await Promise.all(i.map(bu)),o=await Promise.all(a.map(async(l,c)=>{const d=await(l==null?void 0:l.handleChainStart(this.toJSON(),Ut(e[c],"input"),i[c].runId,void 0,void 0,void 0,i[c].runName));return delete i[c].runId,d}));let s=e;try{for(let l=0;l<this.steps.length;l+=1){const d=this.steps[l].batch(s,o.map((h,f)=>{const m=h==null?void 0:h.getChild(this.omitSequenceTags?void 0:`seq:step:${l+1}`);return Qt(i[f],{callbacks:m})}),n);s=await Dl(d,(u=i[0])==null?void 0:u.signal)}}catch(l){throw await Promise.all(o.map(c=>c==null?void 0:c.handleChainError(l))),l}return await Promise.all(o.map(l=>l==null?void 0:l.handleChainEnd(Ut(s,"output")))),s}async*_streamIterator(e,t){var d;const n=await bu(t),{runId:i,...a}=t??{},o=await(n==null?void 0:n.handleChainStart(this.toJSON(),Ut(e,"input"),i,void 0,void 0,void 0,a==null?void 0:a.runName)),s=[this.first,...this.middle,this.last];let u=!0,l;async function*c(){yield e}try{let h=s[0].transform(c(),Qt(a,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let f=1;f<s.length;f+=1)h=await s[f].transform(h,Qt(a,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${f+1}`)}));for await(const f of h)if((d=t==null?void 0:t.signal)==null||d.throwIfAborted(),yield f,u)if(l===void 0)l=f;else try{l=tn(l,f)}catch{l=void 0,u=!1}}catch(h){throw await(o==null?void 0:o.handleChainError(h)),h}await(o==null?void 0:o.handleChainEnd(Ut(l,"output")))}getGraph(e){const t=new tb;let n=null;return this.steps.forEach((i,a)=>{const o=i.getGraph(e);a!==0&&o.trimFirstNode(),a!==this.steps.length-1&&o.trimLastNode(),t.extend(o);const s=o.firstNode();if(!s)throw new Error(`Runnable ${i} has no first node`);n&&t.addEdge(n,s),n=o.lastNode()}),t}pipe(e){return Nr.isRunnableSequence(e)?new Nr({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new Nr({first:this.first,middle:[...this.middle,this.last],last:id(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&gt.isRunnable(e)}static from([e,...t],n){let i={};return typeof n=="string"?i.name=n:n!==void 0&&(i=n),new Nr({...i,first:id(e),middle:t.slice(0,-1).map(id),last:id(t[t.length-1])})}}class _f extends gt{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[t,n]of Object.entries(e.steps))this.steps[t]=id(n)}static from(e){return new _f({steps:e})}async invoke(e,t){const n=Ye(t),i=await bu(n),a=await(i==null?void 0:i.handleChainStart(this.toJSON(),{input:e},n.runId,void 0,void 0,void 0,n==null?void 0:n.runName));delete n.runId;const o={};try{const s=Object.entries(this.steps).map(async([u,l])=>{o[u]=await l.invoke(e,Qt(n,{callbacks:a==null?void 0:a.getChild(`map:key:${u}`)}))});await Dl(Promise.all(s),t==null?void 0:t.signal)}catch(s){throw await(a==null?void 0:a.handleChainError(s)),s}return await(a==null?void 0:a.handleChainEnd(o)),o}async*_transform(e,t,n){const i={...this.steps},a=b3(e,Object.keys(i).length),o=new Map(Object.entries(i).map(([s,u],l)=>{const c=u.transform(a[l],Qt(n,{callbacks:t==null?void 0:t.getChild(`map:key:${s}`)}));return[s,c.next().then(d=>({key:s,gen:c,result:d}))]}));for(;o.size;){const s=Promise.race(o.values()),{key:u,result:l,gen:c}=await Dl(s,n==null?void 0:n.signal);o.delete(u),l.done||(yield{[u]:l.value},o.set(u,c.next().then(d=>({key:u,gen:c,result:d}))))}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*n(){yield e}const i=Ye(t),a=new gf({generator:this.transform(n(),i),config:i});return await a.setup,Or.fromAsyncGenerator(a)}}class BC extends gt{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!$C(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,t){const[n]=this._getOptionsList(t??{},1),i=await bu(n),a=this.func(Qt(n,{callbacks:i}),e);return Dl(a,n==null?void 0:n.signal)}async*_streamIterator(e,t){var a,o;const[n]=this._getOptionsList(t??{},1),i=await this.invoke(e,t);if(MR(i)){for await(const s of i)(a=n==null?void 0:n.signal)==null||a.throwIfAborted(),yield s;return}if(JX(i)){for(;;){(o=n==null?void 0:n.signal)==null||o.throwIfAborted();const s=i.next();if(s.done)break;yield s.value}return}yield i}static from(e){return new BC({func:e})}}function XX(r){if($C(r))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class vm extends gt{static lc_name(){return"RunnableLambda"}constructor(e){if($C(e.func))return BC.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),XX(e.func),this.func=e.func}static from(e){return new vm({func:e})}async _invoke(e,t,n){return new Promise((i,a)=>{const o=Qt(t,{callbacks:n==null?void 0:n.getChild(),recursionLimit:((t==null?void 0:t.recursionLimit)??Zy)-1});xl.runWithConfig(uf(o),async()=>{var s,u;try{let l=await this.func(e,{...o});if(l&&gt.isRunnable(l)){if((t==null?void 0:t.recursionLimit)===0)throw new Error("Recursion limit reached.");l=await l.invoke(e,{...o,recursionLimit:(o.recursionLimit??Zy)-1})}else if(MR(l)){let c;for await(const d of IR(o,l))if((s=t==null?void 0:t.signal)==null||s.throwIfAborted(),c===void 0)c=d;else try{c=tn(c,d)}catch{c=d}l=c}else if(RT(l)){let c;for(const d of CT(o,l))if((u=t==null?void 0:t.signal)==null||u.throwIfAborted(),c===void 0)c=d;else try{c=tn(c,d)}catch{c=d}l=c}i(l)}catch(l){a(l)}})})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async*_transform(e,t,n){var s,u;let i;for await(const l of e)if(i===void 0)i=l;else try{i=tn(i,l)}catch{i=l}const a=Qt(n,{callbacks:t==null?void 0:t.getChild(),recursionLimit:((n==null?void 0:n.recursionLimit)??Zy)-1}),o=await new Promise((l,c)=>{xl.runWithConfig(uf(a),async()=>{try{const d=await this.func(i,{...a,config:a});l(d)}catch(d){c(d)}})});if(o&&gt.isRunnable(o)){if((n==null?void 0:n.recursionLimit)===0)throw new Error("Recursion limit reached.");const l=await o.stream(i,a);for await(const c of l)yield c}else if(MR(o))for await(const l of IR(a,o))(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),yield l;else if(RT(o))for(const l of CT(a,o))(u=n==null?void 0:n.signal)==null||u.throwIfAborted(),yield l;else yield o}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*n(){yield e}const i=Ye(t),a=new gf({generator:this.transform(n(),i),config:i});return await a.setup,Or.fromAsyncGenerator(a)}}class ZX extends gt{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,t){const n=Ye(t),i=await bu(n),{runId:a,...o}=n,s=await(i==null?void 0:i.handleChainStart(this.toJSON(),Ut(e,"input"),a,void 0,void 0,void 0,o==null?void 0:o.runName)),u=Qt(o,{callbacks:s==null?void 0:s.getChild()});return await xl.runWithConfig(u,async()=>{var d;let c;for(const h of this.runnables()){(d=n==null?void 0:n.signal)==null||d.throwIfAborted();try{const f=await h.invoke(e,u);return await(s==null?void 0:s.handleChainEnd(Ut(f,"output"))),f}catch(f){c===void 0&&(c=f)}}throw c===void 0?new Error("No error stored at end of fallback."):(await(s==null?void 0:s.handleChainError(c)),c)})}async*_streamIterator(e,t){var d;const n=Ye(t),i=await bu(n),{runId:a,...o}=n,s=await(i==null?void 0:i.handleChainStart(this.toJSON(),Ut(e,"input"),a,void 0,void 0,void 0,o==null?void 0:o.runName));let u,l;for(const h of this.runnables()){(d=n==null?void 0:n.signal)==null||d.throwIfAborted();const f=Qt(o,{callbacks:s==null?void 0:s.getChild()});try{const m=await h.stream(e,f);l=IR(f,m);break}catch(m){u===void 0&&(u=m)}}if(l===void 0){const h=u??new Error("No error stored at end of fallback.");throw await(s==null?void 0:s.handleChainError(h)),h}let c;try{for await(const h of l){yield h;try{c=c===void 0?c:tn(c,h)}catch{c=void 0}}}catch(h){throw await(s==null?void 0:s.handleChainError(h)),h}await(s==null?void 0:s.handleChainEnd(Ut(c,"output")))}async batch(e,t,n){var u;if(n!=null&&n.returnExceptions)throw new Error("Not implemented.");const i=this._getOptionsList(t??{},e.length),a=await Promise.all(i.map(l=>bu(l))),o=await Promise.all(a.map(async(l,c)=>{const d=await(l==null?void 0:l.handleChainStart(this.toJSON(),Ut(e[c],"input"),i[c].runId,void 0,void 0,void 0,i[c].runName));return delete i[c].runId,d}));let s;for(const l of this.runnables()){(u=i[0].signal)==null||u.throwIfAborted();try{const c=await l.batch(e,o.map((d,h)=>Qt(i[h],{callbacks:d==null?void 0:d.getChild()})),n);return await Promise.all(o.map((d,h)=>d==null?void 0:d.handleChainEnd(Ut(c[h],"output")))),c}catch(c){s===void 0&&(s=c)}}throw s?(await Promise.all(o.map(l=>l==null?void 0:l.handleChainError(s))),s):new Error("No error stored at end of fallbacks.")}}function id(r){if(typeof r=="function")return new vm({func:r});if(gt.isRunnable(r))return r;if(!Array.isArray(r)&&typeof r=="object"){const e={};for(const[t,n]of Object.entries(r))e[t]=id(n);return new _f({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class x3 extends gt{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof _f&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,t){const n=await this.mapper.invoke(e,t);return{...e,...n}}async*_transform(e,t,n){const i=this.mapper.getStepsKeys(),[a,o]=b3(e),s=this.mapper.transform(o,Qt(n,{callbacks:t==null?void 0:t.getChild()})),u=s.next();for await(const l of a){if(typeof l!="object"||Array.isArray(l))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof l}`);const c=Object.fromEntries(Object.entries(l).filter(([d])=>!i.includes(d)));Object.keys(c).length>0&&(yield c)}yield(await u).value;for await(const l of s)yield l}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*n(){yield e}const i=Ye(t),a=new gf({generator:this.transform(n(),i),config:i});return await a.setup,Or.fromAsyncGenerator(a)}}class QX extends gt{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const t=this.keys.map(n=>[n,e[n]]).filter(n=>n[1]!==void 0);return t.length===0?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(const t of e){const n=await this._pick(t);n!==void 0&&(yield n)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*n(){yield e}const i=Ye(t),a=new gf({generator:this.transform(n(),i),config:i});return await a.setup,Or.fromAsyncGenerator(a)}}class PT extends sd{constructor(e){const t=Nr.from([vm.from(async n=>{let i;if(s3(n))try{i=await T3(this.schema,n.args)}catch{throw new d7("Received tool input did not match expected schema",JSON.stringify(n.args))}else i=n;return i}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:t,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function YX(r,e){const t=e.name??r.getName(),n=e.description??A3(e.schema);return kX(e.schema)?new PT({name:t,description:n,schema:g3({input:m3()}).transform(i=>i.input),bound:r}):new PT({name:t,description:n,schema:e.schema,bound:r})}class eZ extends gt{constructor(e){super(e),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callbacks=e==null?void 0:e.callbacks,this.tags=(e==null?void 0:e.tags)??[],this.metadata=(e==null?void 0:e.metadata)??{},this.verbose=(e==null?void 0:e.verbose)??!1}_getRelevantDocuments(e,t){throw new Error("Not implemented!")}async invoke(e,t){return this.getRelevantDocuments(e,Ye(t))}async getRelevantDocuments(e,t){const n=Ye(B7(t)),i=await zt.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),a=await(i==null?void 0:i.handleRetrieverStart(this.toJSON(),e,n.runId,void 0,void 0,void 0,n.runName));try{const o=await this._getRelevantDocuments(e,a);return await(a==null?void 0:a.handleRetrieverEnd(o)),o}catch(o){throw await(a==null?void 0:a.handleRetrieverError(o)),o}}}class rv extends eZ{static lc_name(){return"VectorStoreRetriever"}get lc_namespace(){return["langchain_core","vectorstores"]}_vectorstoreType(){return this.vectorStore._vectorstoreType()}constructor(e){super(e),Object.defineProperty(this,"vectorStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"searchType",{enumerable:!0,configurable:!0,writable:!0,value:"similarity"}),Object.defineProperty(this,"searchKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.vectorStore=e.vectorStore,this.k=e.k??this.k,this.searchType=e.searchType??this.searchType,this.filter=e.filter,e.searchType==="mmr"&&(this.searchKwargs=e.searchKwargs)}async _getRelevantDocuments(e,t){if(this.searchType==="mmr"){if(typeof this.vectorStore.maxMarginalRelevanceSearch!="function")throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);return this.vectorStore.maxMarginalRelevanceSearch(e,{k:this.k,filter:this.filter,...this.searchKwargs},t==null?void 0:t.getChild("vectorstore"))}return this.vectorStore.similaritySearch(e,this.k,this.filter,t==null?void 0:t.getChild("vectorstore"))}async addDocuments(e,t){return this.vectorStore.addDocuments(e,t)}}class tZ extends jl{constructor(e,t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","vectorstores",this._vectorstoreType()]}),Object.defineProperty(this,"embeddings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.embeddings=e}async delete(e){throw new Error("Not implemented.")}async similaritySearch(e,t=4,n=void 0,i=void 0){return(await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),t,n)).map(o=>o[0])}async similaritySearchWithScore(e,t=4,n=void 0,i=void 0){return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),t,n)}static fromTexts(e,t,n,i){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,t,n){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,t,n,i,a,o){if(typeof e=="number")return new rv({vectorStore:this,k:e,filter:t,tags:[...i??[],this._vectorstoreType()],metadata:a,verbose:o,callbacks:n});{const s={vectorStore:this,k:e==null?void 0:e.k,filter:e==null?void 0:e.filter,tags:[...(e==null?void 0:e.tags)??[],this._vectorstoreType()],metadata:e==null?void 0:e.metadata,verbose:e==null?void 0:e.verbose,callbacks:e==null?void 0:e.callbacks,searchType:e==null?void 0:e.searchType};return(e==null?void 0:e.searchType)==="mmr"?new rv({...s,searchKwargs:e.searchKwargs}):new rv({...s})}}}let Sl=class{constructor(e){Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=e.pageContent!==void 0?e.pageContent.toString():"",this.metadata=e.metadata??{},this.id=e.id}};class rZ extends gt{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","documents","transformers"]})}invoke(e,t){return this.transformDocuments(e)}}function nZ(r,e){let t=0,n=0,i=0;for(let a=0;a<r.length;a++)t+=r[a]*e[a],n+=r[a]*r[a],i+=e[a]*e[a];return t/(Math.sqrt(n)*Math.sqrt(i))}function iZ(r,e){let t=0,n=0,i=0;for(let a=0;a<r.length;a++)t+=r[a]*e[a],n+=r[a]*r[a],i+=e[a]*e[a];return t/(Math.sqrt(n)*Math.sqrt(i))}function aZ(r,e,t){if(r.length===0||r[0].length===0||e.length===0||e[0].length===0)return[[]];if(r[0].length!==e[0].length)throw new Error(`Number of columns in X and Y must be the same. X has shape ${[r.length,r[0].length]} and Y has shape ${[e.length,e[0].length]}.`);return r.map(n=>e.map(i=>t(n,i)).map(i=>Number.isNaN(i)?0:i))}function jT(r,e){return aZ(r,e,iZ)}function oZ(r,e,t=.5,n=4){if(Math.min(n,e.length)<=0)return[];const i=Array.isArray(r[0])?r:[r],a=jT(i,e)[0],o=sZ(a).maxIndex,s=[e[o]],u=[o];for(;u.length<Math.min(n,e.length);){let l=-1/0,c=-1;const d=jT(e,s);a.forEach((h,f)=>{if(u.includes(f))return;const m=Math.max(...d[f]),p=t*h-(1-t)*m;p>l&&(l=p,c=f)}),s.push(e[c]),u.push(c)}return u}function sZ(r){if(r.length===0)return{maxIndex:-1,maxValue:NaN};let e=r[0],t=0;for(let n=1;n<r.length;n+=1)r[n]>e&&(t=n,e=r[n]);return{maxIndex:t,maxValue:e}}class UC extends tZ{_vectorstoreType(){return"memory"}constructor(e,{similarity:t,...n}={}){super(e,n),Object.defineProperty(this,"memoryVectors",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"similarity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.similarity=t??nZ}async addDocuments(e){const t=e.map(({pageContent:n})=>n);return this.addVectors(await this.embeddings.embedDocuments(t),e)}async addVectors(e,t){const n=e.map((i,a)=>({content:t[a].pageContent,embedding:i,metadata:t[a].metadata,id:t[a].id}));this.memoryVectors=this.memoryVectors.concat(n)}async _queryVectors(e,t,n){const i=o=>{if(!n)return!0;const s=new Sl({metadata:o.metadata,pageContent:o.content,id:o.id});return n(s)};return this.memoryVectors.filter(i).map((o,s)=>({similarity:this.similarity(e,o.embedding),index:s,metadata:o.metadata,content:o.content,embedding:o.embedding,id:o.id})).sort((o,s)=>o.similarity>s.similarity?-1:0).slice(0,t)}async similaritySearchVectorWithScore(e,t,n){return(await this._queryVectors(e,t,n)).map(o=>[new Sl({metadata:o.metadata,pageContent:o.content,id:o.id}),o.similarity])}async maxMarginalRelevanceSearch(e,t){const n=await this.embeddings.embedQuery(e),i=await this._queryVectors(n,t.fetchK??20,t.filter),a=i.map(s=>s.embedding);return oZ(n,a,t.lambda,t.k).map(s=>new Sl({metadata:i[s].metadata,pageContent:i[s].content,id:i[s].id}))}static async fromTexts(e,t,n,i){const a=[];for(let o=0;o<e.length;o+=1){const s=Array.isArray(t)?t[o]:t,u=new Sl({pageContent:e[o],metadata:s});a.push(u)}return UC.fromDocuments(a,n,i)}static async fromDocuments(e,t,n){const i=new this(t,n);return await i.addDocuments(e),i}static async fromExistingIndex(e,t){return new this(e,t)}}const uZ="modulepreload",lZ=function(r){return"/planetModelEarth/"+r},TT={},Rl=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let o=function(l){return Promise.all(l.map(c=>Promise.resolve(c).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),u=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=o(t.map(l=>{if(l=lZ(l),l in TT)return;TT[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":uZ,c||(h.as="script"),h.crossOrigin="",h.href=l,u&&h.setAttribute("nonce",u),document.head.appendChild(h),c)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};class zC extends gt{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:t}=e;if(t.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){const t=this.partialVariables??{},n={};for(const[a,o]of Object.entries(t))typeof o=="string"?n[a]=o:n[a]=await o();return{...n,...e}}async invoke(e,t){const n={...this.metadata,...t==null?void 0:t.metadata},i=[...this.tags??[],...(t==null?void 0:t.tags)??[]];return this._callWithConfig(a=>this.formatPromptValue(a),e,{...t,tags:i,metadata:n,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:t}=await Rl(async()=>{const{PromptTemplate:n}=await Promise.resolve().then(()=>IT);return{PromptTemplate:n}},void 0);return t.deserialize(e)}case void 0:{const{PromptTemplate:t}=await Rl(async()=>{const{PromptTemplate:n}=await Promise.resolve().then(()=>IT);return{PromptTemplate:n}},void 0);return t.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:t}=await Rl(async()=>{const{FewShotPromptTemplate:n}=await import("./few_shot.js");return{FewShotPromptTemplate:n}},[]);return t.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class LC extends jl{}class D3 extends LC{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Al(this.value)]}}class $3 extends LC{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return DC(this.messages)}toChatMessages(){return this.messages}}class cZ extends LC{static lc_name(){return"ImagePromptValue"}constructor(e){"imageUrl"in e||(e={imageUrl:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"imageUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.imageUrl=e.imageUrl}toString(){return this.imageUrl.url}toChatMessages(){return[new Al({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}}class xR extends zC{async formatPromptValue(e){const t=await this.format(e);return new D3(t)}}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var dZ=Object.prototype.toString,bf=Array.isArray||function(e){return dZ.call(e)==="[object Array]"};function FC(r){return typeof r=="function"}function fZ(r){return bf(r)?"array":typeof r}function nv(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function AT(r,e){return r!=null&&typeof r=="object"&&e in r}function pZ(r,e){return r!=null&&typeof r!="object"&&r.hasOwnProperty&&r.hasOwnProperty(e)}var hZ=RegExp.prototype.test;function mZ(r,e){return hZ.call(r,e)}var gZ=/\S/;function _Z(r){return!mZ(gZ,r)}var bZ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function yZ(r){return String(r).replace(/[&<>"'`=\/]/g,function(t){return bZ[t]})}var vZ=/\s*/,wZ=/\s+/,MT=/\s*=/,SZ=/\s*\}/,OZ=/#|\^|\/|>|\{|&|=|!/;function EZ(r,e){if(!r)return[];var t=!1,n=[],i=[],a=[],o=!1,s=!1,u="",l=0;function c(){if(o&&!s)for(;a.length;)delete i[a.pop()];else a=[];o=!1,s=!1}var d,h,f;function m(P){if(typeof P=="string"&&(P=P.split(wZ,2)),!bf(P)||P.length!==2)throw new Error("Invalid tags: "+P);d=new RegExp(nv(P[0])+"\\s*"),h=new RegExp("\\s*"+nv(P[1])),f=new RegExp("\\s*"+nv("}"+P[1]))}m(e||Er.tags);for(var p=new wm(r),g,b,_,y,v,w;!p.eos();){if(g=p.pos,_=p.scanUntil(d),_)for(var S=0,R=_.length;S<R;++S)y=_.charAt(S),_Z(y)?(a.push(i.length),u+=y):(s=!0,t=!0,u+=" "),i.push(["text",y,g,g+1]),g+=1,y===`
`&&(c(),u="",l=0,t=!1);if(!p.scan(d))break;if(o=!0,b=p.scan(OZ)||"name",p.scan(vZ),b==="="?(_=p.scanUntil(MT),p.scan(MT),p.scanUntil(h)):b==="{"?(_=p.scanUntil(f),p.scan(SZ),p.scanUntil(h),b="&"):_=p.scanUntil(h),!p.scan(h))throw new Error("Unclosed tag at "+p.pos);if(b==">"?v=[b,_,g,p.pos,u,l,t]:v=[b,_,g,p.pos],l++,i.push(v),b==="#"||b==="^")n.push(v);else if(b==="/"){if(w=n.pop(),!w)throw new Error('Unopened section "'+_+'" at '+g);if(w[1]!==_)throw new Error('Unclosed section "'+w[1]+'" at '+g)}else b==="name"||b==="{"||b==="&"?s=!0:b==="="&&m(_)}if(c(),w=n.pop(),w)throw new Error('Unclosed section "'+w[1]+'" at '+p.pos);return CZ(RZ(i))}function RZ(r){for(var e=[],t,n,i=0,a=r.length;i<a;++i)t=r[i],t&&(t[0]==="text"&&n&&n[0]==="text"?(n[1]+=t[1],n[3]=t[3]):(e.push(t),n=t));return e}function CZ(r){for(var e=[],t=e,n=[],i,a,o=0,s=r.length;o<s;++o)switch(i=r[o],i[0]){case"#":case"^":t.push(i),n.push(i),t=i[4]=[];break;case"/":a=n.pop(),a[5]=i[2],t=n.length>0?n[n.length-1][4]:e;break;default:t.push(i)}return e}function wm(r){this.string=r,this.tail=r,this.pos=0}wm.prototype.eos=function(){return this.tail===""};wm.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};wm.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function cf(r,e){this.view=r,this.cache={".":this.view},this.parent=e}cf.prototype.push=function(e){return new cf(e,this)};cf.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var i=this,a,o,s,u=!1;i;){if(e.indexOf(".")>0)for(a=i.view,o=e.split("."),s=0;a!=null&&s<o.length;)s===o.length-1&&(u=AT(a,o[s])||pZ(a,o[s])),a=a[o[s++]];else a=i.view[e],u=AT(i.view,e);if(u){n=a;break}i=i.parent}t[e]=n}return FC(n)&&(n=n.call(this.view)),n};function hr(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}hr.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};hr.prototype.parse=function(e,t){var n=this.templateCache,i=e+":"+(t||Er.tags).join(":"),a=typeof n<"u",o=a?n.get(i):void 0;return o==null&&(o=EZ(e,t),a&&n.set(i,o)),o};hr.prototype.render=function(e,t,n,i){var a=this.getConfigTags(i),o=this.parse(e,a),s=t instanceof cf?t:new cf(t,void 0);return this.renderTokens(o,s,n,e,i)};hr.prototype.renderTokens=function(e,t,n,i,a){for(var o="",s,u,l,c=0,d=e.length;c<d;++c)l=void 0,s=e[c],u=s[0],u==="#"?l=this.renderSection(s,t,n,i,a):u==="^"?l=this.renderInverted(s,t,n,i,a):u===">"?l=this.renderPartial(s,t,n,a):u==="&"?l=this.unescapedValue(s,t):u==="name"?l=this.escapedValue(s,t,a):u==="text"&&(l=this.rawValue(s)),l!==void 0&&(o+=l);return o};hr.prototype.renderSection=function(e,t,n,i,a){var o=this,s="",u=t.lookup(e[1]);function l(h){return o.render(h,t,n,a)}if(u){if(bf(u))for(var c=0,d=u.length;c<d;++c)s+=this.renderTokens(e[4],t.push(u[c]),n,i,a);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")s+=this.renderTokens(e[4],t.push(u),n,i,a);else if(FC(u)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(t.view,i.slice(e[3],e[5]),l),u!=null&&(s+=u)}else s+=this.renderTokens(e[4],t,n,i,a);return s}};hr.prototype.renderInverted=function(e,t,n,i,a){var o=t.lookup(e[1]);if(!o||bf(o)&&o.length===0)return this.renderTokens(e[4],t,n,i,a)};hr.prototype.indentPartial=function(e,t,n){for(var i=t.replace(/[^ \t]/g,""),a=e.split(`
`),o=0;o<a.length;o++)a[o].length&&(o>0||!n)&&(a[o]=i+a[o]);return a.join(`
`)};hr.prototype.renderPartial=function(e,t,n,i){if(n){var a=this.getConfigTags(i),o=FC(n)?n(e[1]):n[e[1]];if(o!=null){var s=e[6],u=e[5],l=e[4],c=o;u==0&&l&&(c=this.indentPartial(o,l,s));var d=this.parse(c,a);return this.renderTokens(d,t,n,c,i)}}};hr.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n};hr.prototype.escapedValue=function(e,t,n){var i=this.getConfigEscape(n)||Er.escape,a=t.lookup(e[1]);if(a!=null)return typeof a=="number"&&i===Er.escape?String(a):i(a)};hr.prototype.rawValue=function(e){return e[1]};hr.prototype.getConfigTags=function(e){return bf(e)?e:e&&typeof e=="object"?e.tags:void 0};hr.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!bf(e))return e.escape};var Er={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(r){rm.templateCache=r},get templateCache(){return rm.templateCache}},rm=new hr;Er.clearCache=function(){return rm.clearCache()};Er.parse=function(e,t){return rm.parse(e,t)};Er.render=function(e,t,n,i){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+fZ(e)+'" was given as the first argument for mustache#render(template, view, partials)');return rm.render(e,t,n,i)};Er.escape=yZ;Er.Scanner=wm;Er.Context=cf;Er.Writer=hr;function N3(){Er.escape=r=>r}const y_=r=>{const e=r.split(""),t=[],n=(a,o)=>{for(let s=o;s<e.length;s+=1)if(a.includes(e[s]))return s;return-1};let i=0;for(;i<e.length;)if(e[i]==="{"&&i+1<e.length&&e[i+1]==="{")t.push({type:"literal",text:"{"}),i+=2;else if(e[i]==="}"&&i+1<e.length&&e[i+1]==="}")t.push({type:"literal",text:"}"}),i+=2;else if(e[i]==="{"){const a=n("}",i);if(a<0)throw new Error("Unclosed '{' in template.");t.push({type:"variable",name:e.slice(i+1,a).join("")}),i=a+1}else{if(e[i]==="}")throw new Error("Single '}' in template.");{const a=n("{}",i),o=(a<0?e.slice(i):e.slice(i,a)).join("");t.push({type:"literal",text:o}),i=a<0?e.length:a}}return t},PZ=r=>r.map(e=>e[0]==="name"?{type:"variable",name:e[1].includes(".")?e[1].split(".")[0]:e[1]}:["#","&","^",">"].includes(e[0])?{type:"variable",name:e[1]}:{type:"literal",text:e[1]}),DR=r=>{N3();const e=Er.parse(r);return PZ(e)},jZ=(r,e)=>y_(r).reduce((t,n)=>{if(n.type==="variable"){if(n.name in e){const i=typeof e[n.name]=="string"?e[n.name]:JSON.stringify(e[n.name]);return t+i}throw new Error(`(f-string) Missing value for input ${n.name}`)}return t+n.text},""),TZ=(r,e)=>(N3(),Er.render(r,e)),$R={"f-string":jZ,mustache:TZ},AZ={"f-string":y_,mustache:DR},Ol=(r,e,t)=>{try{return $R[e](r,t)}catch(n){throw K_(n,"INVALID_PROMPT_INPUT")}},NR=(r,e)=>AZ[e](r),q3=(r,e,t)=>{if(!(e in $R)){const n=Object.keys($R);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${n}`)}try{const n=t.reduce((i,a)=>(i[a]="foo",i),{});Array.isArray(r)?r.forEach(i=>{if(i.type==="text")Ol(i.text,e,n);else if(i.type==="image_url")if(typeof i.image_url=="string")Ol(i.image_url,e,n);else{const a=i.image_url.url;Ol(a,e,n)}else throw new Error(`Invalid message template received. ${JSON.stringify(i,null,2)}`)}):Ol(r,e,n)}catch(n){throw new Error(`Invalid prompt schema: ${n.message}`)}};class en extends xR{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),q3(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return Ol(this.template,this.templateFormat,t)}static fromExamples(e,t,n,i=`

`,a=""){const o=[a,...e,t].join(i);return new en({inputVariables:n,template:o})}static fromTemplate(e,t){const{templateFormat:n="f-string",...i}=t??{},a=new Set;return NR(e,n).forEach(o=>{o.type==="variable"&&a.add(o.name)}),new en({inputVariables:[...a],templateFormat:n,template:e,...i})}async partial(e){const t=this.inputVariables.filter(a=>!(a in e)),n={...this.partialVariables??{},...e},i={...this,inputVariables:t,partialVariables:n};return new en(i)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new en({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}const IT=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:en},Symbol.toStringTag,{value:"Module"}));class Lh extends zC{static lc_name(){return"ImagePromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","image"]}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e.template,this.templateFormat=e.templateFormat??this.templateFormat,this.validateTemplate=e.validateTemplate??this.validateTemplate,this.additionalContentFields=e.additionalContentFields,this.validateTemplate){let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),q3([{type:"image_url",image_url:this.template}],this.templateFormat,t)}}_getPromptType(){return"prompt"}async partial(e){const t=this.inputVariables.filter(a=>!(a in e)),n={...this.partialVariables??{},...e},i={...this,inputVariables:t,partialVariables:n};return new Lh(i)}async format(e){const t={};for(const[o,s]of Object.entries(this.template))typeof s=="string"?t[o]=Ol(s,this.templateFormat,e):t[o]=s;const n=e.url||t.url,i=e.detail||t.detail;if(!n)throw new Error("Must provide either an image URL.");if(typeof n!="string")throw new Error("url must be a string.");const a={url:n};return i&&(a.detail=i),a}async formatPromptValue(e){const t=await this.format(e);return new cZ(t)}}class xT extends gt{static lc_name(){return"DictPromptTemplate"}constructor(e){const t=e.templateFormat??"f-string",n=qR(e.template,t);super({inputVariables:n,...e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","dict"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e.template,this.templateFormat=t,this.inputVariables=n}async format(e){return BR(this.template,e,this.templateFormat)}async invoke(e){return await this._callWithConfig(this.format.bind(this),e,{runType:"prompt"})}}function qR(r,e){const t=[];for(const n of Object.values(r))if(typeof n=="string")NR(n,e).forEach(i=>{i.type==="variable"&&t.push(i.name)});else if(Array.isArray(n))for(const i of n)typeof i=="string"?NR(i,e).forEach(a=>{a.type==="variable"&&t.push(a.name)}):typeof i=="object"&&t.push(...qR(i,e));else typeof n=="object"&&n!==null&&t.push(...qR(n,e));return Array.from(new Set(t))}function BR(r,e,t){const n={};for(const[i,a]of Object.entries(r))if(typeof a=="string")n[i]=Ol(a,t,e);else if(Array.isArray(a)){const o=[];for(const s of a)typeof s=="string"?o.push(Ol(s,t,e)):typeof s=="object"&&o.push(BR(s,e,t));n[i]=o}else typeof a=="object"&&a!==null?n[i]=BR(a,e,t):n[i]=a;return n}class kC extends gt{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}async invoke(e,t){return this._callWithConfig(n=>this.formatMessages(n),e,{...t,runType:"prompt"})}}class DT extends kC{static lc_name(){return"MessagesPlaceholder"}constructor(e){typeof e=="string"&&(e={variableName:e}),super(e),Object.defineProperty(this,"variableName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"optional",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.variableName=e.variableName,this.optional=e.optional??!1}get inputVariables(){return[this.variableName]}async formatMessages(e){const t=e[this.variableName];if(this.optional&&!t)return[];if(!t){const i=new Error(`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined`);throw i.name="InputFormatError",i}let n;try{Array.isArray(t)?n=t.map(yl):n=[yl(t)]}catch(i){const a=typeof t=="string"?t:JSON.stringify(t,null,2),o=new Error([`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages or coerceable values as input.`,`Received value: ${a}`,`Additional message: ${i.message}`].join(`

`));throw o.name="InputFormatError",o.lc_error_code=i.lc_error_code,o}return n}}class MZ extends kC{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}}class IZ extends zC{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){const t=await this.formatMessages(e);return new $3(t)}}class xZ extends MZ{static lc_name(){return"ChatMessagePromptTemplate"}constructor(e,t){"prompt"in e||(e={prompt:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}async format(e){return new hd(await this.prompt.format(e),this.role)}static fromTemplate(e,t,n){return new this(en.fromTemplate(e,{templateFormat:n==null?void 0:n.templateFormat}),t)}}function DZ(r){return r===null||typeof r!="object"||Array.isArray(r)?!1:Object.keys(r).length===1&&"text"in r&&typeof r.text=="string"}function $Z(r){return r===null||typeof r!="object"||Array.isArray(r)?!1:"image_url"in r&&(typeof r.image_url=="string"||typeof r.image_url=="object"&&r.image_url!==null&&"url"in r.image_url&&typeof r.image_url.url=="string")}class VC extends kC{static _messageClass(){throw new Error("Can not invoke _messageClass from inside _StringImageMessagePromptTemplate")}constructor(e,t){if("prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"additionalOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"messageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chatMessageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,Array.isArray(this.prompt)){let n=[];this.prompt.forEach(i=>{"inputVariables"in i&&(n=n.concat(i.inputVariables))}),this.inputVariables=n}else this.inputVariables=this.prompt.inputVariables;this.additionalOptions=t??this.additionalOptions}createMessage(e){const t=this.constructor;if(t._messageClass()){const n=t._messageClass();return new n({content:e})}else if(t.chatMessageClass){const n=t.chatMessageClass();return new n({content:e,role:this.getRoleFromMessageClass(n.lc_name())})}else throw new Error("No message class defined")}getRoleFromMessageClass(e){switch(e){case"HumanMessage":return"human";case"AIMessage":return"ai";case"SystemMessage":return"system";case"ChatMessage":return"chat";default:throw new Error("Invalid message class name")}}static fromTemplate(e,t){if(typeof e=="string")return new this(en.fromTemplate(e,t));const n=[];for(const i of e)if(typeof i=="string")n.push(en.fromTemplate(i,t));else if(i!==null)if(DZ(i)){let a="";typeof i.text=="string"&&(a=i.text??"");const o={...t,additionalContentFields:i};n.push(en.fromTemplate(a,o))}else if($Z(i)){let a=i.image_url??"",o,s=[];if(typeof a=="string"){let u;(t==null?void 0:t.templateFormat)==="mustache"?u=DR(a):u=y_(a);const l=u.flatMap(c=>c.type==="variable"?[c.name]:[]);if(((l==null?void 0:l.length)??0)>0){if(l.length>1)throw new Error(`Only one format variable allowed per image template.
Got: ${l}
From: ${a}`);s=[l[0]]}else s=[];a={url:a},o=new Lh({template:a,inputVariables:s,templateFormat:t==null?void 0:t.templateFormat,additionalContentFields:i})}else if(typeof a=="object"){if("url"in a){let u;(t==null?void 0:t.templateFormat)==="mustache"?u=DR(a.url):u=y_(a.url),s=u.flatMap(l=>l.type==="variable"?[l.name]:[])}else s=[];o=new Lh({template:a,inputVariables:s,templateFormat:t==null?void 0:t.templateFormat,additionalContentFields:i})}else throw new Error("Invalid image template");n.push(o)}else typeof i=="object"&&n.push(new xT({template:i,templateFormat:t==null?void 0:t.templateFormat}));return new this({prompt:n,additionalOptions:t})}async format(e){if(this.prompt instanceof xR){const t=await this.prompt.format(e);return this.createMessage(t)}else{const t=[];for(const n of this.prompt){let i={};if(!("inputVariables"in n))throw new Error(`Prompt ${n} does not have inputVariables defined.`);for(const a of n.inputVariables)i||(i={[a]:e[a]}),i={...i,[a]:e[a]};if(n instanceof xR){const a=await n.format(i);let o;"additionalContentFields"in n&&(o=n.additionalContentFields),t.push({...o,type:"text",text:a})}else if(n instanceof Lh){const a=await n.format(i);let o;"additionalContentFields"in n&&(o=n.additionalContentFields),t.push({...o,type:"image_url",image_url:a})}else if(n instanceof xT){const a=await n.format(i);let o;"additionalContentFields"in n&&(o=n.additionalContentFields),t.push({...o,...a})}}return this.createMessage(t)}}async formatMessages(e){return[await this.format(e)]}}class B3 extends VC{static _messageClass(){return Al}static lc_name(){return"HumanMessagePromptTemplate"}}class NZ extends VC{static _messageClass(){return Su}static lc_name(){return"AIMessagePromptTemplate"}}class qZ extends VC{static _messageClass(){return mR}static lc_name(){return"SystemMessagePromptTemplate"}}function BZ(r){return typeof r.formatMessages=="function"}function UZ(r,e){if(BZ(r)||mf(r))return r;if(Array.isArray(r)&&r[0]==="placeholder"){const i=r[1];if((e==null?void 0:e.templateFormat)==="mustache"&&typeof i=="string"&&i.slice(0,2)==="{{"&&i.slice(-2)==="}}"){const a=i.slice(2,-2);return new DT({variableName:a,optional:!0})}else if(typeof i=="string"&&i[0]==="{"&&i[i.length-1]==="}"){const a=i.slice(1,-1);return new DT({variableName:a,optional:!0})}throw new Error(`Invalid placeholder template for format ${(e==null?void 0:e.templateFormat)??'"f-string"'}: "${r[1]}". Expected a variable name surrounded by ${(e==null?void 0:e.templateFormat)==="mustache"?"double":"single"} curly braces.`)}const t=yl(r);let n;if(typeof t.content=="string"?n=t.content:n=t.content.map(i=>"text"in i?{...i,text:i.text}:"image_url"in i?{...i,image_url:i.image_url}:i),t._getType()==="human")return B3.fromTemplate(n,e);if(t._getType()==="ai")return NZ.fromTemplate(n,e);if(t._getType()==="system")return qZ.fromTemplate(n,e);if(hd.isInstance(t))return xZ.fromTemplate(t.content,t.role,e);throw new Error(`Could not coerce message prompt template from input. Received message type: "${t._getType()}".`)}function zZ(r){return r.constructor.lc_name()==="MessagesPlaceholder"}class Fh extends IZ{static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){const t=new Set;for(const s of this.promptMessages)if(!(s instanceof el))for(const u of s.inputVariables)t.add(u);const n=this.inputVariables,i=new Set(this.partialVariables?n.concat(Object.keys(this.partialVariables)):n),a=new Set([...i].filter(s=>!t.has(s)));if(a.size>0)throw new Error(`Input variables \`${[...a]}\` are not used in any of the prompt messages.`);const o=new Set([...t].filter(s=>!i.has(s)));if(o.size>0)throw new Error(`Input variables \`${[...o]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async _parseImagePrompts(e,t){if(typeof e.content=="string")return e;const n=await Promise.all(e.content.map(async i=>{if(i.type!=="image_url")return i;let a="";typeof i.image_url=="string"?a=i.image_url:a=i.image_url.url;const s=await en.fromTemplate(a,{templateFormat:this.templateFormat}).format(t);return typeof i.image_url!="string"&&"url"in i.image_url?i.image_url.url=s:i.image_url=s,i}));return e.content=n,e}async formatMessages(e){const t=await this.mergePartialAndUserVariables(e);let n=[];for(const i of this.promptMessages)if(i instanceof el)n.push(await this._parseImagePrompts(i,t));else{const a=i.inputVariables.reduce((s,u)=>{if(!(u in t)&&!(zZ(i)&&i.optional))throw K_(new Error(`Missing value for input variable \`${u.toString()}\``),"INVALID_PROMPT_INPUT");return s[u]=t[u],s},{}),o=await i.formatMessages(a);n=n.concat(o)}return n}async partial(e){const t=this.inputVariables.filter(a=>!(a in e)),n={...this.partialVariables??{},...e},i={...this,inputVariables:t,partialVariables:n};return new Fh(i)}static fromTemplate(e,t){const n=en.fromTemplate(e,t),i=new B3({prompt:n});return this.fromMessages([i])}static fromMessages(e,t){const n=e.reduce((o,s)=>o.concat(s instanceof Fh?s.promptMessages:[UZ(s,t)]),[]),i=e.reduce((o,s)=>s instanceof Fh?Object.assign(o,s.partialVariables):o,Object.create(null)),a=new Set;for(const o of n)if(!(o instanceof el))for(const s of o.inputVariables)s in i||a.add(s);return new this({...t,inputVariables:[...a],promptMessages:n,partialVariables:i,templateFormat:t==null?void 0:t.templateFormat})}static fromPromptMessages(e){return this.fromMessages(e)}}class $u extends gt{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,t){const n=Ye(t);return this.func&&await this.func(e,n),this._callWithConfig(i=>Promise.resolve(i),e,n)}async*transform(e,t){const n=Ye(t);let i,a=!0;for await(const o of this._transformStreamWithConfig(e,s=>s,n))if(yield o,a)if(i===void 0)i=o;else try{i=tn(i,o)}catch{i=void 0,a=!1}this.func&&i!==void 0&&await this.func(i,n)}static assign(e){return new x3(new _f({steps:e}))}}var If={},$T;function U3(){if($T)return If;$T=1,If.byteLength=s,If.toByteArray=l,If.fromByteArray=h;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=n.length;i<a;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function o(f){var m=f.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=f.indexOf("=");p===-1&&(p=m);var g=p===m?0:4-p%4;return[p,g]}function s(f){var m=o(f),p=m[0],g=m[1];return(p+g)*3/4-g}function u(f,m,p){return(m+p)*3/4-p}function l(f){var m,p=o(f),g=p[0],b=p[1],_=new t(u(f,g,b)),y=0,v=b>0?g-4:g,w;for(w=0;w<v;w+=4)m=e[f.charCodeAt(w)]<<18|e[f.charCodeAt(w+1)]<<12|e[f.charCodeAt(w+2)]<<6|e[f.charCodeAt(w+3)],_[y++]=m>>16&255,_[y++]=m>>8&255,_[y++]=m&255;return b===2&&(m=e[f.charCodeAt(w)]<<2|e[f.charCodeAt(w+1)]>>4,_[y++]=m&255),b===1&&(m=e[f.charCodeAt(w)]<<10|e[f.charCodeAt(w+1)]<<4|e[f.charCodeAt(w+2)]>>2,_[y++]=m>>8&255,_[y++]=m&255),_}function c(f){return r[f>>18&63]+r[f>>12&63]+r[f>>6&63]+r[f&63]}function d(f,m,p){for(var g,b=[],_=m;_<p;_+=3)g=(f[_]<<16&16711680)+(f[_+1]<<8&65280)+(f[_+2]&255),b.push(c(g));return b.join("")}function h(f){for(var m,p=f.length,g=p%3,b=[],_=16383,y=0,v=p-g;y<v;y+=_)b.push(d(f,y,y+_>v?v:y+_));return g===1?(m=f[p-1],b.push(r[m>>2]+r[m<<4&63]+"==")):g===2&&(m=(f[p-2]<<8)+f[p-1],b.push(r[m>>10]+r[m>>4&63]+r[m<<2&63]+"=")),b.join("")}return If}var LZ=U3();const FZ=pm(LZ);var kZ=Object.defineProperty,VZ=(r,e,t)=>e in r?kZ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,HZ=(r,e,t)=>(VZ(r,e+"",t),t);function KZ(r,e){let t=Array.from({length:r.length},(n,i)=>({start:i,end:i+1}));for(;t.length>1;){let n=null;for(let i=0;i<t.length-1;i++){const a=r.slice(t[i].start,t[i+1].end),o=e.get(a.join(","));o!=null&&(n==null||o<n[0])&&(n=[o,i])}if(n!=null){const i=n[1];t[i]={start:t[i].start,end:t[i+1].end},t.splice(i+1,1)}else break}return t}function WZ(r,e){return r.length===1?[e.get(r.join(","))]:KZ(r,e).map(t=>e.get(r.slice(t.start,t.end).join(","))).filter(t=>t!=null)}function GZ(r){return r.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var UR=class{constructor(r,e){Ee(this,"specialTokens");Ee(this,"inverseSpecialTokens");Ee(this,"patStr");Ee(this,"textEncoder",new TextEncoder);Ee(this,"textDecoder",new TextDecoder("utf-8"));Ee(this,"rankMap",new Map);Ee(this,"textMap",new Map);this.patStr=r.pat_str;const t=r.bpe_ranks.split(`
`).filter(Boolean).reduce((n,i)=>{const[a,o,...s]=i.split(" "),u=Number.parseInt(o,10);return s.forEach((l,c)=>n[l]=u+c),n},{});for(const[n,i]of Object.entries(t)){const a=FZ.toByteArray(n);this.rankMap.set(a.join(","),i),this.textMap.set(i,a)}this.specialTokens={...r.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[i,a])=>(n[a]=this.textEncoder.encode(i),n),{})}encode(r,e=[],t="all"){const n=new RegExp(this.patStr,"ug"),i=UR.specialTokenRegex(Object.keys(this.specialTokens)),a=[],o=new Set(e==="all"?Object.keys(this.specialTokens):e),s=new Set(t==="all"?Object.keys(this.specialTokens).filter(l=>!o.has(l)):t);if(s.size>0){const l=UR.specialTokenRegex([...s]),c=r.match(l);if(c!=null)throw new Error(`The text contains a special token that is not allowed: ${c[0]}`)}let u=0;for(;;){let l=null,c=u;for(;i.lastIndex=c,l=i.exec(r),!(l==null||o.has(l[0]));)c=l.index+1;const d=(l==null?void 0:l.index)??r.length;for(const f of r.substring(u,d).matchAll(n)){const m=this.textEncoder.encode(f[0]),p=this.rankMap.get(m.join(","));if(p!=null){a.push(p);continue}a.push(...WZ(m,this.rankMap))}if(l==null)break;let h=this.specialTokens[l[0]];a.push(h),u=l.index+l[0].length}return a}decode(r){const e=[];let t=0;for(let a=0;a<r.length;++a){const o=r[a],s=this.textMap.get(o)??this.inverseSpecialTokens[o];s!=null&&(e.push(s),t+=s.length)}const n=new Uint8Array(t);let i=0;for(const a of e)n.set(a,i),i+=a.length;return this.textDecoder.decode(n)}},z3=UR;HZ(z3,"specialTokenRegex",r=>new RegExp(r.map(e=>GZ(e)).join("|"),"g"));function JZ(r){switch(r){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":return"o200k_base";default:throw new Error("Unknown model")}}const Ym={},XZ=new ym({});async function ZZ(r){return r in Ym||(Ym[r]=XZ.fetch(`https://tiktoken.pages.dev/js/${r}.json`).then(e=>e.json()).then(e=>new z3(e)).catch(e=>{throw delete Ym[r],e})),await Ym[r]}async function QZ(r){return ZZ(JZ(r))}class YZ extends rZ{constructor(e){if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers","text_splitters"]}),Object.defineProperty(this,"chunkSize",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),Object.defineProperty(this,"chunkOverlap",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object.defineProperty(this,"keepSeparator",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lengthFunction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chunkSize=(e==null?void 0:e.chunkSize)??this.chunkSize,this.chunkOverlap=(e==null?void 0:e.chunkOverlap)??this.chunkOverlap,this.keepSeparator=(e==null?void 0:e.keepSeparator)??this.keepSeparator,this.lengthFunction=(e==null?void 0:e.lengthFunction)??(t=>t.length),this.chunkOverlap>=this.chunkSize)throw new Error("Cannot have chunkOverlap >= chunkSize")}async transformDocuments(e,t={}){return this.splitDocuments(e,t)}splitOnSeparator(e,t){let n;if(t)if(this.keepSeparator){const i=t.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");n=e.split(new RegExp(`(?=${i})`))}else n=e.split(t);else n=e.split("");return n.filter(i=>i!=="")}async createDocuments(e,t=[],n={}){const i=t.length>0?t:[...Array(e.length)].map(()=>({})),{chunkHeader:a="",chunkOverlapHeader:o="(cont'd) ",appendChunkOverlapHeader:s=!1}=n,u=new Array;for(let l=0;l<e.length;l+=1){const c=e[l];let d=1,h=null,f=-1;for(const m of await this.splitText(c)){let p=a;const g=c.indexOf(m,f+1);if(h===null){const v=this.numberOfNewLines(c,0,g);d+=v}else{const v=f+await this.lengthFunction(h);if(v<g){const w=this.numberOfNewLines(c,v,g);d+=w}else if(v>g){const w=this.numberOfNewLines(c,g,v);d-=w}s&&(p+=o)}const b=this.numberOfNewLines(m),_=i[l].loc&&typeof i[l].loc=="object"?{...i[l].loc}:{};_.lines={from:d,to:d+b};const y={...i[l],loc:_};p+=m,u.push(new Sl({pageContent:p,metadata:y})),d+=b,h=m,f=g}}return u}numberOfNewLines(e,t,n){return(e.slice(t,n).match(/\n/g)||[]).length}async splitDocuments(e,t={}){const n=e.filter(o=>o.pageContent!==void 0),i=n.map(o=>o.pageContent),a=n.map(o=>o.metadata);return this.createDocuments(i,a,t)}joinDocs(e,t){const n=e.join(t).trim();return n===""?null:n}async mergeSplits(e,t){const n=[],i=[];let a=0;for(const s of e){const u=await this.lengthFunction(s);if(a+u+i.length*t.length>this.chunkSize&&(a>this.chunkSize&&console.warn(`Created a chunk of size ${a}, +
which is longer than the specified ${this.chunkSize}`),i.length>0)){const l=this.joinDocs(i,t);for(l!==null&&n.push(l);a>this.chunkOverlap||a+u+i.length*t.length>this.chunkSize&&a>0;)a-=await this.lengthFunction(i[0]),i.shift()}i.push(s),a+=u}const o=this.joinDocs(i,t);return o!==null&&n.push(o),n}}class v_ extends YZ{static lc_name(){return"RecursiveCharacterTextSplitter"}constructor(e){super(e),Object.defineProperty(this,"separators",{enumerable:!0,configurable:!0,writable:!0,value:[`

`,`
`," ",""]}),this.separators=(e==null?void 0:e.separators)??this.separators,this.keepSeparator=(e==null?void 0:e.keepSeparator)??!0}async _splitText(e,t){const n=[];let i=t[t.length-1],a;for(let l=0;l<t.length;l+=1){const c=t[l];if(c===""){i=c;break}if(e.includes(c)){i=c,a=t.slice(l+1);break}}const o=this.splitOnSeparator(e,i);let s=[];const u=this.keepSeparator?"":i;for(const l of o)if(await this.lengthFunction(l)<this.chunkSize)s.push(l);else{if(s.length){const c=await this.mergeSplits(s,u);n.push(...c),s=[]}if(!a)n.push(l);else{const c=await this._splitText(l,a);n.push(...c)}}if(s.length){const l=await this.mergeSplits(s,u);n.push(...l)}return n}async splitText(e){return this._splitText(e,this.separators)}static fromLanguage(e,t){return new v_({...t,separators:v_.getSeparatorsForLanguage(e)})}static getSeparatorsForLanguage(e){if(e==="cpp")return[`
class `,`
void `,`
int `,`
float `,`
double `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="go")return[`
func `,`
var `,`
const `,`
type `,`
if `,`
for `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="java")return[`
class `,`
public `,`
protected `,`
private `,`
static `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="js")return[`
function `,`
const `,`
let `,`
var `,`
class `,`
if `,`
for `,`
while `,`
switch `,`
case `,`
default `,`

`,`
`," ",""];if(e==="php")return[`
function `,`
class `,`
if `,`
foreach `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="proto")return[`
message `,`
service `,`
enum `,`
option `,`
import `,`
syntax `,`

`,`
`," ",""];if(e==="python")return[`
class `,`
def `,`
	def `,`

`,`
`," ",""];if(e==="rst")return[`
===
`,`
---
`,`
***
`,`
.. `,`

`,`
`," ",""];if(e==="ruby")return[`
def `,`
class `,`
if `,`
unless `,`
while `,`
for `,`
do `,`
begin `,`
rescue `,`

`,`
`," ",""];if(e==="rust")return[`
fn `,`
const `,`
let `,`
if `,`
while `,`
for `,`
loop `,`
match `,`
const `,`

`,`
`," ",""];if(e==="scala")return[`
class `,`
object `,`
def `,`
val `,`
var `,`
if `,`
for `,`
while `,`
match `,`
case `,`

`,`
`," ",""];if(e==="swift")return[`
func `,`
class `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="markdown")return[`
## `,`
### `,`
#### `,`
##### `,`
###### `,"```\n\n",`

***

`,`

---

`,`

___

`,`

`,`
`," ",""];if(e==="latex")return[`
\\chapter{`,`
\\section{`,`
\\subsection{`,`
\\subsubsection{`,`
\\begin{enumerate}`,`
\\begin{itemize}`,`
\\begin{description}`,`
\\begin{list}`,`
\\begin{quote}`,`
\\begin{quotation}`,`
\\begin{verse}`,`
\\begin{verbatim}`,`
\\begin{align}`,"$$","$",`

`,`
`," ",""];if(e==="html")return["<body>","<div>","<p>","<br>","<li>","<h1>","<h2>","<h3>","<h4>","<h5>","<h6>","<span>","<table>","<tr>","<td>","<th>","<ul>","<ol>","<header>","<footer>","<nav>","<head>","<style>","<script>","<meta>","<title>"," ",""];if(e==="sol")return[`
pragma `,`
using `,`
contract `,`
interface `,`
library `,`
constructor `,`
type `,`
function `,`
event `,`
modifier `,`
error `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do while `,`
assembly `,`

`,`
`," ",""];throw new Error(`Language ${e} is not supported.`)}}async function eQ(r,e,t){try{let n=[];if(e=="repo"){const i=r.match(/https:\/\/github\.com\/([^\/]+)\/([^\/]+)/);if(!i)throw new Error("Invalid GitHub repository URL");const a=i[1],o=i[2];n=await tQ(a,o,"main",t)}else if(e=="folder"){const i=r.match(/https:\/\/github\.com\/([^\/]+)\/([^\/]+)\/tree\/([^\/]+)\/(.+)/);if(!i)throw new Error("Invalid GitHub folder URL");const a=i[1],o=i[2],s=i[3],u=i[4];n=await HC(a,o,s,u,t)}else if(e=="single"){const i=r.match(/https:\/\/github\.com\/([^\/]+)\/([^\/]+)\/blob\/([^\/]+)\/(.+)/);if(!i)throw new Error("Invalid GitHub file URL");const a=i[1],o=i[2],s=i[3],u=i[4],l=await L3(`https://raw.githubusercontent.com/${a}/${o}/${s}/${u}`);n=[new Sl({pageContent:l,metadata:{source:u}})]}return n}catch(n){return console.error("Error fetching repository contents:",n),[]}}async function HC(r,e,t,n="",i){const a=`https://api.github.com/repos/${r}/${e}/contents/${n}?ref=${t}`,o=i?{Authorization:`Bearer ${i}`}:{};try{const s=await fetch(a,{headers:o});if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);const u=await s.json();let l=[];for(const c of u)if(c.type==="file")l.push(c);else if(c.type==="dir"){const d=await HC(r,e,t,c.path,i);l=l.concat(d)}return l}catch(s){return console.error("Error fetching repository contents:",s),[]}}async function L3(r,e=null){const t=e?{Authorization:`Bearer ${e}`}:{};try{const n=await fetch(r,{headers:t});if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);return await n.text()}catch(n){return console.error("Error fetching file content:",n),null}}async function tQ(r,e,t,n=null){const i=await HC(r,e,t,"",n),a=[];for(const o of i)if(o.url){const s=await L3(o.url,n);if(s){const u=JSON.parse(s),l=atob(u.content);a.push(new Sl({pageContent:l,metadata:{source:o.path,url:o.html_url}}))}}return a}async function rQ(r){const e=[];for(const t of r){const n=JSON.stringify(t);e.push(new Sl({pageContent:n}))}return e}const zR="RFC3986",LR={RFC1738:r=>String(r).replace(/%20/g,"+"),RFC3986:r=>String(r)},nQ="RFC1738",iQ=Array.isArray,ju=(()=>{const r=[];for(let e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r})(),iv=1024,aQ=(r,e,t,n,i)=>{if(r.length===0)return r;let a=r;if(typeof r=="symbol"?a=Symbol.prototype.toString.call(r):typeof r!="string"&&(a=String(r)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(s){return"%26%23"+parseInt(s.slice(2),16)+"%3B"});let o="";for(let s=0;s<a.length;s+=iv){const u=a.length>=iv?a.slice(s,s+iv):a,l=[];for(let c=0;c<u.length;++c){let d=u.charCodeAt(c);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===nQ&&(d===40||d===41)){l[l.length]=u.charAt(c);continue}if(d<128){l[l.length]=ju[d];continue}if(d<2048){l[l.length]=ju[192|d>>6]+ju[128|d&63];continue}if(d<55296||d>=57344){l[l.length]=ju[224|d>>12]+ju[128|d>>6&63]+ju[128|d&63];continue}c+=1,d=65536+((d&1023)<<10|u.charCodeAt(c)&1023),l[l.length]=ju[240|d>>18]+ju[128|d>>12&63]+ju[128|d>>6&63]+ju[128|d&63]}o+=l.join("")}return o};function oQ(r){return!r||typeof r!="object"?!1:!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))}function NT(r,e){if(iQ(r)){const t=[];for(let n=0;n<r.length;n+=1)t.push(e(r[n]));return t}return e(r)}const sQ=Object.prototype.hasOwnProperty,F3={brackets(r){return String(r)+"[]"},comma:"comma",indices(r,e){return String(r)+"["+e+"]"},repeat(r){return String(r)}},Tu=Array.isArray,uQ=Array.prototype.push,k3=function(r,e){uQ.apply(r,Tu(e)?e:[e])},lQ=Date.prototype.toISOString,It={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:aQ,encodeValuesOnly:!1,format:zR,formatter:LR[zR],indices:!1,serializeDate(r){return lQ.call(r)},skipNulls:!1,strictNullHandling:!1};function cQ(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"||typeof r=="symbol"||typeof r=="bigint"}const av={};function V3(r,e,t,n,i,a,o,s,u,l,c,d,h,f,m,p,g,b){let _=r,y=b,v=0,w=!1;for(;(y=y.get(av))!==void 0&&!w;){const A=y.get(r);if(v+=1,typeof A<"u"){if(A===v)throw new RangeError("Cyclic object value");w=!0}typeof y.get(av)>"u"&&(v=0)}if(typeof l=="function"?_=l(e,_):_ instanceof Date?_=h==null?void 0:h(_):t==="comma"&&Tu(_)&&(_=NT(_,function(A){return A instanceof Date?h==null?void 0:h(A):A})),_===null){if(a)return u&&!p?u(e,It.encoder,g,"key",f):e;_=""}if(cQ(_)||oQ(_)){if(u){const A=p?e:u(e,It.encoder,g,"key",f);return[(m==null?void 0:m(A))+"="+(m==null?void 0:m(u(_,It.encoder,g,"value",f)))]}return[(m==null?void 0:m(e))+"="+(m==null?void 0:m(String(_)))]}const S=[];if(typeof _>"u")return S;let R;if(t==="comma"&&Tu(_))p&&u&&(_=NT(_,u)),R=[{value:_.length>0?_.join(",")||null:void 0}];else if(Tu(l))R=l;else{const A=Object.keys(_);R=c?A.sort(c):A}const P=s?String(e).replace(/\./g,"%2E"):String(e),C=n&&Tu(_)&&_.length===1?P+"[]":P;if(i&&Tu(_)&&_.length===0)return C+"[]";for(let A=0;A<R.length;++A){const M=R[A],G=typeof M=="object"&&typeof M.value<"u"?M.value:_[M];if(o&&G===null)continue;const U=d&&s?M.replace(/\./g,"%2E"):M,z=Tu(_)?typeof t=="function"?t(C,U):C:C+(d?"."+U:"["+U+"]");b.set(r,v);const W=new WeakMap;W.set(av,b),k3(S,V3(G,z,t,n,i,a,o,s,t==="comma"&&p&&Tu(_)?null:u,l,c,d,h,f,m,p,g,W))}return S}function dQ(r=It){if(typeof r.allowEmptyArrays<"u"&&typeof r.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof r.encodeDotInKeys<"u"&&typeof r.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(r.encoder!==null&&typeof r.encoder<"u"&&typeof r.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=r.charset||It.charset;if(typeof r.charset<"u"&&r.charset!=="utf-8"&&r.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=zR;if(typeof r.format<"u"){if(!sQ.call(LR,r.format))throw new TypeError("Unknown format option provided.");t=r.format}const n=LR[t];let i=It.filter;(typeof r.filter=="function"||Tu(r.filter))&&(i=r.filter);let a;if(r.arrayFormat&&r.arrayFormat in F3?a=r.arrayFormat:"indices"in r?a=r.indices?"indices":"repeat":a=It.arrayFormat,"commaRoundTrip"in r&&typeof r.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof r.allowDots>"u"?r.encodeDotInKeys?!0:It.allowDots:!!r.allowDots;return{addQueryPrefix:typeof r.addQueryPrefix=="boolean"?r.addQueryPrefix:It.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof r.allowEmptyArrays=="boolean"?!!r.allowEmptyArrays:It.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof r.charsetSentinel=="boolean"?r.charsetSentinel:It.charsetSentinel,commaRoundTrip:!!r.commaRoundTrip,delimiter:typeof r.delimiter>"u"?It.delimiter:r.delimiter,encode:typeof r.encode=="boolean"?r.encode:It.encode,encodeDotInKeys:typeof r.encodeDotInKeys=="boolean"?r.encodeDotInKeys:It.encodeDotInKeys,encoder:typeof r.encoder=="function"?r.encoder:It.encoder,encodeValuesOnly:typeof r.encodeValuesOnly=="boolean"?r.encodeValuesOnly:It.encodeValuesOnly,filter:i,format:t,formatter:n,serializeDate:typeof r.serializeDate=="function"?r.serializeDate:It.serializeDate,skipNulls:typeof r.skipNulls=="boolean"?r.skipNulls:It.skipNulls,sort:typeof r.sort=="function"?r.sort:null,strictNullHandling:typeof r.strictNullHandling=="boolean"?r.strictNullHandling:It.strictNullHandling}}function fQ(r,e={}){let t=r;const n=dQ(e);let i,a;typeof n.filter=="function"?(a=n.filter,t=a("",t)):Tu(n.filter)&&(a=n.filter,i=a);const o=[];if(typeof t!="object"||t===null)return"";const s=F3[n.arrayFormat],u=s==="comma"&&n.commaRoundTrip;i||(i=Object.keys(t)),n.sort&&i.sort(n.sort);const l=new WeakMap;for(let h=0;h<i.length;++h){const f=i[h];n.skipNulls&&t[f]===null||k3(o,V3(t[f],f,s,u,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}const c=o.join(n.delimiter);let d=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),c.length>0?d+c:""}const Dd="4.104.0";let qT=!1,kh,H3,K3,FR,W3,G3,J3,X3,Z3;function pQ(r,e={auto:!1}){if(qT)throw new Error(`you must \`import 'openai/shims/${r.kind}'\` before importing anything else from openai`);if(kh)throw new Error(`can't \`import 'openai/shims/${r.kind}'\` after \`import 'openai/shims/${kh}'\``);qT=e.auto,kh=r.kind,H3=r.fetch,K3=r.FormData,FR=r.File,W3=r.ReadableStream,G3=r.getMultipartRequestOptions,J3=r.getDefaultAgent,X3=r.fileFromPath,Z3=r.isFsReadStream}let hQ=class{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}};function mQ({manuallyImported:r}={}){const e=r?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,n,i,a;try{t=fetch,n=Request,i=Response,a=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:t,Request:n,Response:i,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,s)=>({...s,body:new hQ(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}const Q3=()=>{kh||pQ(mQ(),{auto:!0})};Q3();class Ie extends Error{}let Rr=class kR extends Ie{constructor(e,t,n,i){super(`${kR.makeMessage(e,t,n)}`),this.status=e,this.headers=i,this.request_id=i==null?void 0:i["x-request-id"],this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,n){const i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,n,i){if(!e||!i)return new rb({message:n,cause:HR(t)});const a=t==null?void 0:t.error;return e===400?new Y3(e,a,n,i):e===401?new e2(e,a,n,i):e===403?new t2(e,a,n,i):e===404?new r2(e,a,n,i):e===409?new n2(e,a,n,i):e===422?new i2(e,a,n,i):e===429?new a2(e,a,n,i):e>=500?new o2(e,a,n,i):new kR(e,a,n,i)}},qr=class extends Rr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},rb=class extends Rr{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}},nb=class extends rb{constructor({message:e}={}){super({message:e??"Request timed out."})}},Y3=class extends Rr{},e2=class extends Rr{},t2=class extends Rr{},r2=class extends Rr{},n2=class extends Rr{},i2=class extends Rr{},a2=class extends Rr{},o2=class extends Rr{};class s2 extends Ie{constructor(){super("Could not parse response content as the length limit was reached")}}class u2 extends Ie{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var eg=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Gl=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Ir;let ib=class{constructor(){Ir.set(this,void 0),this.buffer=new Uint8Array,eg(this,Ir,null,"f")}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let n=new Uint8Array(this.buffer.length+t.length);n.set(this.buffer),n.set(t,this.buffer.length),this.buffer=n;const i=[];let a;for(;(a=gQ(this.buffer,Gl(this,Ir,"f")))!=null;){if(a.carriage&&Gl(this,Ir,"f")==null){eg(this,Ir,a.index,"f");continue}if(Gl(this,Ir,"f")!=null&&(a.index!==Gl(this,Ir,"f")+1||a.carriage)){i.push(this.decodeText(this.buffer.slice(0,Gl(this,Ir,"f")-1))),this.buffer=this.buffer.slice(Gl(this,Ir,"f")),eg(this,Ir,null,"f");continue}const o=Gl(this,Ir,"f")!==null?a.preceding-1:a.preceding,s=this.decodeText(this.buffer.slice(0,o));i.push(s),this.buffer=this.buffer.slice(a.index),eg(this,Ir,null,"f")}return i}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Ie(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Ie(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Ie("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}};Ir=new WeakMap;ib.NEWLINE_CHARS=new Set([`
`,"\r"]);ib.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function gQ(r,e){for(let i=e??0;i<r.length;i++){if(r[i]===10)return{preceding:i,index:i+1,carriage:!1};if(r[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function _Q(r){for(let n=0;n<r.length-1;n++){if(r[n]===10&&r[n+1]===10||r[n]===13&&r[n+1]===13)return n+2;if(r[n]===13&&r[n+1]===10&&n+3<r.length&&r[n+2]===13&&r[n+3]===10)return n+4}return-1}function l2(r){if(r[Symbol.asyncIterator])return r;const e=r.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}let nm=class Rh{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;async function*i(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(const o of bQ(e,t))if(!a){if(o.data.startsWith("[DONE]")){a=!0;continue}if(o.event===null||o.event.startsWith("response.")||o.event.startsWith("transcript.")){let s;try{s=JSON.parse(o.data)}catch(u){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),u}if(s&&s.error)throw new Rr(void 0,s.error,void 0,b2(e.headers));yield s}else{let s;try{s=JSON.parse(o.data)}catch(u){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),u}if(o.event=="error")throw new Rr(void 0,s.error,s.message,void 0);yield{event:o.event,data:s}}}a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||t.abort()}}return new Rh(i,t)}static fromReadableStream(e,t){let n=!1;async function*i(){const o=new ib,s=l2(e);for await(const u of s)for(const l of o.decode(u))yield l;for(const u of o.flush())yield u}async function*a(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let o=!1;try{for await(const s of i())o||s&&(yield JSON.parse(s));o=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{o||t.abort()}}return new Rh(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),i=a=>({next:()=>{if(a.length===0){const o=n.next();e.push(o),t.push(o)}return a.shift()}});return[new Rh(()=>i(e),this.controller),new Rh(()=>i(t),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new W3({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:a,done:o}=await t.next();if(o)return i.close();const s=n.encode(JSON.stringify(a)+`
`);i.enqueue(s)}catch(a){i.error(a)}},async cancel(){var i;await((i=t.return)==null?void 0:i.call(t))}})}};async function*bQ(r,e){if(!r.body)throw e.abort(),new Ie("Attempted to iterate over a response with no body");const t=new vQ,n=new ib,i=l2(r.body);for await(const a of yQ(i))for(const o of n.decode(a)){const s=t.decode(o);s&&(yield s)}for(const a of n.flush()){const o=t.decode(a);o&&(yield o)}}async function*yQ(r){let e=new Uint8Array;for await(const t of r){if(t==null)continue;const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let i=new Uint8Array(e.length+n.length);i.set(e),i.set(n,e.length),e=i;let a;for(;(a=_Q(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}let vQ=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,i]=wQ(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}};function wQ(r,e){const t=r.indexOf(e);return t!==-1?[r.substring(0,t),e,r.substring(t+e.length)]:[r,"",""]}const c2=r=>r!=null&&typeof r=="object"&&typeof r.url=="string"&&typeof r.blob=="function",d2=r=>r!=null&&typeof r=="object"&&typeof r.name=="string"&&typeof r.lastModified=="number"&&ab(r),ab=r=>r!=null&&typeof r=="object"&&typeof r.size=="number"&&typeof r.type=="string"&&typeof r.text=="function"&&typeof r.slice=="function"&&typeof r.arrayBuffer=="function",SQ=r=>d2(r)||c2(r)||Z3(r);async function f2(r,e,t){var i;if(r=await r,d2(r))return r;if(c2(r)){const a=await r.blob();e||(e=new URL(r.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=ab(a)?[await a.arrayBuffer()]:[a];return new FR(o,e,t)}const n=await OQ(r);if(e||(e=RQ(r)??"unknown_file"),!(t!=null&&t.type)){const a=(i=n[0])==null?void 0:i.type;typeof a=="string"&&(t={...t,type:a})}return new FR(n,e,t)}async function OQ(r){var t;let e=[];if(typeof r=="string"||ArrayBuffer.isView(r)||r instanceof ArrayBuffer)e.push(r);else if(ab(r))e.push(await r.arrayBuffer());else if(CQ(r))for await(const n of r)e.push(n);else throw new Error(`Unexpected data type: ${typeof r}; constructor: ${(t=r==null?void 0:r.constructor)==null?void 0:t.name}; props: ${EQ(r)}`);return e}function EQ(r){return`[${Object.getOwnPropertyNames(r).map(t=>`"${t}"`).join(", ")}]`}function RQ(r){var e;return ov(r.name)||ov(r.filename)||((e=ov(r.path))==null?void 0:e.split(/[\\/]/).pop())}const ov=r=>{if(typeof r=="string")return r;if(typeof Buffer<"u"&&r instanceof Buffer)return String(r)},CQ=r=>r!=null&&typeof r=="object"&&typeof r[Symbol.asyncIterator]=="function",BT=r=>r&&typeof r=="object"&&r.body&&r[Symbol.toStringTag]==="MultipartBody",cd=async r=>{const e=await PQ(r.body);return G3(e,r)},PQ=async r=>{const e=new K3;return await Promise.all(Object.entries(r||{}).map(([t,n])=>VR(e,t,n))),e},VR=async(r,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")r.append(e,String(t));else if(SQ(t)){const n=await f2(t);r.append(e,n)}else if(Array.isArray(t))await Promise.all(t.map(n=>VR(r,e+"[]",n)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([n,i])=>VR(r,`${e}[${n}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var Wd={},jQ=function(r,e,t,n,i){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t},TQ=function(r,e,t,n){if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},tg;Q3();async function p2(r){var o;const{response:e}=r;if(r.options.stream)return Cl("response",e.status,e.url,e.headers,e.body),r.options.__streamClass?r.options.__streamClass.fromSSEResponse(e,r.controller):nm.fromSSEResponse(e,r.controller);if(e.status===204)return null;if(r.options.__binaryResponse)return e;const t=e.headers.get("content-type"),n=(o=t==null?void 0:t.split(";")[0])==null?void 0:o.trim();if((n==null?void 0:n.includes("application/json"))||(n==null?void 0:n.endsWith("+json"))){const s=await e.json();return Cl("response",e.status,e.url,e.headers,s),h2(s,e)}const a=await e.text();return Cl("response",e.status,e.url,e.headers,a),a}function h2(r,e){return!r||typeof r!="object"||Array.isArray(r)?r:Object.defineProperty(r,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}let m2=class g2 extends Promise{constructor(e,t=p2){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new g2(this.responsePromise,async t=>h2(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}},AQ=class{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:i,fetch:a}){this.baseURL=e,this.maxRetries=sv("maxRetries",t),this.timeout=sv("timeout",n),this.httpAgent=i,this.fetch=a??H3}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...$Q(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${UQ()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async i=>{const a=i&&ab(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:e,path:t,...i,body:a}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var p;const n={...e},{method:i,path:a,query:o,headers:s={}}=n,u=ArrayBuffer.isView(n.body)||n.__binaryRequest&&typeof n.body=="string"?n.body:BT(n.body)?n.body.body:n.body?JSON.stringify(n.body,null,2):null,l=this.calculateContentLength(u),c=this.buildURL(a,o);"timeout"in n&&sv("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const d=n.httpAgent??this.httpAgent??J3(c),h=n.timeout+1e3;typeof((p=d==null?void 0:d.options)==null?void 0:p.timeout)=="number"&&h>(d.options.timeout??0)&&(d.options.timeout=h),this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const f=this.buildHeaders({options:n,headers:s,contentLength:l,retryCount:t});return{req:{method:i,...u&&{body:u},headers:f,...d&&{agent:d},signal:n.signal??null},url:c,timeout:n.timeout}}buildHeaders({options:e,headers:t,contentLength:n,retryCount:i}){const a={};n&&(a["content-length"]=n);const o=this.defaultHeaders(e);return FT(a,o),FT(a,t),BT(e.body)&&kh!=="node"&&delete a["content-type"],rg(o,"x-stainless-retry-count")===void 0&&rg(t,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(i)),rg(o,"x-stainless-timeout")===void 0&&rg(t,"x-stainless-timeout")===void 0&&e.timeout&&(a["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,n,i){return Rr.generate(e,t,n,i)}request(e,t=null){return new m2(this.makeRequest(e,t))}async makeRequest(e,t){var d,h;const n=await e,i=n.maxRetries??this.maxRetries;t==null&&(t=i),await this.prepareOptions(n);const{req:a,url:o,timeout:s}=this.buildRequest(n,{retryCount:i-t});if(await this.prepareRequest(a,{url:o,options:n}),Cl("request",o,n,a.headers),(d=n.signal)!=null&&d.aborted)throw new qr;const u=new AbortController,l=await this.fetchWithTimeout(o,a,s,u).catch(HR);if(l instanceof Error){if((h=n.signal)!=null&&h.aborted)throw new qr;if(t)return this.retryRequest(n,t);throw l.name==="AbortError"?new nb:new rb({cause:l})}const c=b2(l.headers);if(!l.ok){if(t&&this.shouldRetry(l)){const _=`retrying, ${t} attempts remaining`;return Cl(`response (error; ${_})`,l.status,o,c),this.retryRequest(n,t,c)}const f=await l.text().catch(_=>HR(_).message),m=NQ(f),p=m?void 0:f;throw Cl(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,l.status,o,c,p),this.makeStatusError(l.status,m,p,c)}return{response:l,options:n,controller:u}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new MQ(this,n,e)}buildURL(e,t){const n=BQ(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return y2(i)||(t={...i,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,n])=>typeof n<"u").map(([t,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(t)}=`;throw new Ie(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,n,i){const{signal:a,...o}=t||{};a&&a.addEventListener("abort",()=>i.abort());const s=setTimeout(()=>i.abort(),n),u={signal:i.signal,...o};return u.method&&(u.method=u.method.toUpperCase()),this.fetch.call(void 0,e,u).finally(()=>{clearTimeout(s)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,n){let i;const a=n==null?void 0:n["retry-after-ms"];if(a){const s=parseFloat(a);Number.isNaN(s)||(i=s)}const o=n==null?void 0:n["retry-after"];if(o&&!i){const s=parseFloat(o);Number.isNaN(s)?i=Date.parse(o)-Date.now():i=s*1e3}if(!(i&&0<=i&&i<60*1e3)){const s=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,s)}return await Sm(i),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,o=Math.min(.5*Math.pow(2,a),8),s=1-Math.random()*.25;return o*s*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Dd}`}},_2=class{constructor(e,t,n,i){tg.set(this,void 0),jQ(this,tg,e),this.options=i,this.response=t,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Ie("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[i,a]of n)e.url.searchParams.set(i,a);t.query=void 0,t.path=e.url.toString()}return await TQ(this,tg,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(tg=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}},MQ=class extends m2{constructor(e,t,n){super(t,async i=>new n(e,i.response,await p2(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}};const b2=r=>new Proxy(Object.fromEntries(r.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),IQ={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},bt=r=>typeof r=="object"&&r!==null&&!y2(r)&&Object.keys(r).every(e=>v2(IQ,e)),xQ=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dd,"X-Stainless-OS":zT(Deno.build.os),"X-Stainless-Arch":UT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dd,"X-Stainless-OS":zT(process.platform),"X-Stainless-Arch":UT(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const r=DQ();return r?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${r.browser}`,"X-Stainless-Runtime-Version":r.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function DQ(){if(typeof navigator>"u"||!navigator)return null;const r=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of r){const n=t.exec(navigator.userAgent);if(n){const i=n[1]||0,a=n[2]||0,o=n[3]||0;return{browser:e,version:`${i}.${a}.${o}`}}}return null}const UT=r=>r==="x32"?"x32":r==="x86_64"||r==="x64"?"x64":r==="arm"?"arm":r==="aarch64"||r==="arm64"?"arm64":r?`other:${r}`:"unknown",zT=r=>(r=r.toLowerCase(),r.includes("ios")?"iOS":r==="android"?"Android":r==="darwin"?"MacOS":r==="win32"?"Windows":r==="freebsd"?"FreeBSD":r==="openbsd"?"OpenBSD":r==="linux"?"Linux":r?`Other:${r}`:"Unknown");let LT;const $Q=()=>LT??(LT=xQ()),NQ=r=>{try{return JSON.parse(r)}catch{return}},qQ=/^[a-z][a-z0-9+.-]*:/i,BQ=r=>qQ.test(r),Sm=r=>new Promise(e=>setTimeout(e,r)),sv=(r,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ie(`${r} must be an integer`);if(e<0)throw new Ie(`${r} must be a positive integer`);return e},HR=r=>{if(r instanceof Error)return r;if(typeof r=="object"&&r!==null)try{return new Error(JSON.stringify(r))}catch{}return new Error(r)},ad=r=>{var e,t,n,i;if(typeof process<"u")return((e=Wd==null?void 0:Wd[r])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(i=(n=(t=Deno.env)==null?void 0:t.get)==null?void 0:n.call(t,r))==null?void 0:i.trim()};function y2(r){if(!r)return!0;for(const e in r)return!1;return!0}function v2(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function FT(r,e){for(const t in e){if(!v2(e,t))continue;const n=t.toLowerCase();if(!n)continue;const i=e[t];i===null?delete r[n]:i!==void 0&&(r[n]=i)}}const kT=new Set(["authorization","api-key"]);function Cl(r,...e){if(typeof process<"u"&&(Wd==null?void 0:Wd.DEBUG)==="true"){const t=e.map(n=>{if(!n)return n;if(n.headers){const a={...n,headers:{...n.headers}};for(const o in n.headers)kT.has(o.toLowerCase())&&(a.headers[o]="REDACTED");return a}let i=null;for(const a in n)kT.has(a.toLowerCase())&&(i??(i={...n}),i[a]="REDACTED");return i??n});console.log(`OpenAI:DEBUG:${r}`,...t)}}const UQ=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)}),zQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",LQ=r=>typeof(r==null?void 0:r.get)=="function",rg=(r,e)=>{var n;const t=e.toLowerCase();if(LQ(r)){const i=((n=e[0])==null?void 0:n.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(a,o,s)=>o+s.toUpperCase());for(const a of[e,t,e.toUpperCase(),i]){const o=r.get(a);if(o)return o}}for(const[i,a]of Object.entries(r))if(i.toLowerCase()===t)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a},FQ=r=>{if(typeof Buffer<"u"){const e=Buffer.from(r,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(r),t=e.length,n=new Uint8Array(t);for(let i=0;i<t;i++)n[i]=e.charCodeAt(i);return Array.from(new Float32Array(n.buffer))}};function Ug(r){return r!=null&&typeof r=="object"&&!Array.isArray(r)}let ob=class extends _2{constructor(e,t,n,i){super(e,t,n,i),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}};class Nt extends _2{constructor(e,t,n,i){super(e,t,n,i),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var n;const e=this.getPaginatedItems();if(!e.length)return null;const t=(n=e[e.length-1])==null?void 0:n.id;return t?{params:{after:t}}:null}}let De=class{constructor(e){this._client=e}},w2=class extends De{list(e,t={},n){return bt(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,kQ,{query:t,...n})}},sb=class extends De{constructor(){super(...arguments),this.messages=new w2(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(`/chat/completions/${e}`,{body:t,...n})}list(e={},t){return bt(e)?this.list({},e):this._client.getAPIList("/chat/completions",ub,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class ub extends Nt{}class kQ extends Nt{}sb.ChatCompletionsPage=ub;sb.Messages=w2;let lb=class extends De{constructor(){super(...arguments),this.completions=new sb(this._client)}};lb.Completions=sb;lb.ChatCompletionsPage=ub;class S2 extends De{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t==null?void 0:t.headers},__binaryResponse:!0})}}let O2=class extends De{create(e,t){return this._client.post("/audio/transcriptions",cd({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}},E2=class extends De{create(e,t){return this._client.post("/audio/translations",cd({body:e,...t,__metadata:{model:e.model}}))}},Om=class extends De{constructor(){super(...arguments),this.transcriptions=new O2(this._client),this.translations=new E2(this._client),this.speech=new S2(this._client)}};Om.Transcriptions=O2;Om.Translations=E2;Om.Speech=S2;let KC=class extends De{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return bt(e)?this.list({},e):this._client.getAPIList("/batches",WC,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}};class WC extends Nt{}KC.BatchesPage=WC;var hu=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},mt=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},KR,zg,Lg,Ch,Ph,Fg,jh,Ju,Th,w_,S_,$d,R2;class GC{constructor(){KR.add(this),this.controller=new AbortController,zg.set(this,void 0),Lg.set(this,()=>{}),Ch.set(this,()=>{}),Ph.set(this,void 0),Fg.set(this,()=>{}),jh.set(this,()=>{}),Ju.set(this,{}),Th.set(this,!1),w_.set(this,!1),S_.set(this,!1),$d.set(this,!1),hu(this,zg,new Promise((e,t)=>{hu(this,Lg,e,"f"),hu(this,Ch,t,"f")}),"f"),hu(this,Ph,new Promise((e,t)=>{hu(this,Fg,e,"f"),hu(this,jh,t,"f")}),"f"),mt(this,zg,"f").catch(()=>{}),mt(this,Ph,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},mt(this,KR,"m",R2).bind(this))},0)}_connected(){this.ended||(mt(this,Lg,"f").call(this),this._emit("connect"))}get ended(){return mt(this,Th,"f")}get errored(){return mt(this,w_,"f")}get aborted(){return mt(this,S_,"f")}abort(){this.controller.abort()}on(e,t){return(mt(this,Ju,"f")[e]||(mt(this,Ju,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=mt(this,Ju,"f")[e];if(!n)return this;const i=n.findIndex(a=>a.listener===t);return i>=0&&n.splice(i,1),this}once(e,t){return(mt(this,Ju,"f")[e]||(mt(this,Ju,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{hu(this,$d,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,t)})}async done(){hu(this,$d,!0,"f"),await mt(this,Ph,"f")}_emit(e,...t){if(mt(this,Th,"f"))return;e==="end"&&(hu(this,Th,!0,"f"),mt(this,Fg,"f").call(this));const n=mt(this,Ju,"f")[e];if(n&&(mt(this,Ju,"f")[e]=n.filter(i=>!i.once),n.forEach(({listener:i})=>i(...t))),e==="abort"){const i=t[0];!mt(this,$d,"f")&&!(n!=null&&n.length)&&Promise.reject(i),mt(this,Ch,"f").call(this,i),mt(this,jh,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=t[0];!mt(this,$d,"f")&&!(n!=null&&n.length)&&Promise.reject(i),mt(this,Ch,"f").call(this,i),mt(this,jh,"f").call(this,i),this._emit("end")}}_emitFinal(){}}zg=new WeakMap,Lg=new WeakMap,Ch=new WeakMap,Ph=new WeakMap,Fg=new WeakMap,jh=new WeakMap,Ju=new WeakMap,Th=new WeakMap,w_=new WeakMap,S_=new WeakMap,$d=new WeakMap,KR=new WeakSet,R2=function(e){if(hu(this,w_,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new qr),e instanceof qr)return hu(this,S_,!0,"f"),this._emit("abort",e);if(e instanceof Ie)return this._emit("error",e);if(e instanceof Error){const t=new Ie(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Ie(String(e)))};var Me=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Pr=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Ht,WR,Au,kg,mu,od,Ld,nd,O_,$r,Vg,Hg,Vh,Ah,Mh,VT,HT,KT,WT,GT,JT,XT;class gu extends GC{constructor(){super(...arguments),Ht.add(this),WR.set(this,[]),Au.set(this,{}),kg.set(this,{}),mu.set(this,void 0),od.set(this,void 0),Ld.set(this,void 0),nd.set(this,void 0),O_.set(this,void 0),$r.set(this,void 0),Vg.set(this,void 0),Hg.set(this,void 0),Vh.set(this,void 0)}[(WR=new WeakMap,Au=new WeakMap,kg=new WeakMap,mu=new WeakMap,od=new WeakMap,Ld=new WeakMap,nd=new WeakMap,O_=new WeakMap,$r=new WeakMap,Vg=new WeakMap,Hg=new WeakMap,Vh=new WeakMap,Ht=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",i=>{const a=t.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{n=!0;for(const a of t)a.reject(i);t.length=0}),this.on("error",i=>{n=!0;for(const a of t)a.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new gu;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=nm.fromReadableStream(e,this.controller);for await(const o of i)Me(this,Ht,"m",Ah).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new qr;return this._addRun(Me(this,Ht,"m",Mh).call(this))}toReadableStream(){return new nm(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,i,a){const o=new gu;return o._run(()=>o._runToolAssistantStream(e,t,n,i,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,n,i,a){var l;const o=a==null?void 0:a.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const s={...i,stream:!0},u=await e.submitToolOutputs(t,n,s,{...a,signal:this.controller.signal});this._connected();for await(const c of u)Me(this,Ht,"m",Ah).call(this,c);if((l=u.controller.signal)!=null&&l.aborted)throw new qr;return this._addRun(Me(this,Ht,"m",Mh).call(this))}static createThreadAssistantStream(e,t,n){const i=new gu;return i._run(()=>i._threadAssistantStream(e,t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,t,n,i){const a=new gu;return a._run(()=>a._runAssistantStream(e,t,n,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return Me(this,Vg,"f")}currentRun(){return Me(this,Hg,"f")}currentMessageSnapshot(){return Me(this,mu,"f")}currentRunStepSnapshot(){return Me(this,Vh,"f")}async finalRunSteps(){return await this.done(),Object.values(Me(this,Au,"f"))}async finalMessages(){return await this.done(),Object.values(Me(this,kg,"f"))}async finalRun(){if(await this.done(),!Me(this,od,"f"))throw Error("Final run was not received.");return Me(this,od,"f")}async _createThreadAssistantStream(e,t,n){var s;const i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},o=await e.createAndRun(a,{...n,signal:this.controller.signal});this._connected();for await(const u of o)Me(this,Ht,"m",Ah).call(this,u);if((s=o.controller.signal)!=null&&s.aborted)throw new qr;return this._addRun(Me(this,Ht,"m",Mh).call(this))}async _createAssistantStream(e,t,n,i){var u;const a=i==null?void 0:i.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},s=await e.create(t,o,{...i,signal:this.controller.signal});this._connected();for await(const l of s)Me(this,Ht,"m",Ah).call(this,l);if((u=s.controller.signal)!=null&&u.aborted)throw new qr;return this._addRun(Me(this,Ht,"m",Mh).call(this))}static accumulateDelta(e,t){for(const[n,i]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=i;continue}let a=e[n];if(a==null){e[n]=i;continue}if(n==="index"||n==="type"){e[n]=i;continue}if(typeof a=="string"&&typeof i=="string")a+=i;else if(typeof a=="number"&&typeof i=="number")a+=i;else if(Ug(a)&&Ug(i))a=this.accumulateDelta(a,i);else if(Array.isArray(a)&&Array.isArray(i)){if(a.every(o=>typeof o=="string"||typeof o=="number")){a.push(...i);continue}for(const o of i){if(!Ug(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const s=o.index;if(s==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof s!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${s}`);const u=a[s];u==null?a.push(o):a[s]=this.accumulateDelta(u,o)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${i}, accValue: ${a}`);e[n]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,i){return await this._createAssistantStream(t,e,n,i)}async _runToolAssistantStream(e,t,n,i,a){return await this._createToolAssistantStream(n,e,t,i,a)}}Ah=function(e){if(!this.ended)switch(Pr(this,Vg,e,"f"),Me(this,Ht,"m",KT).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Me(this,Ht,"m",XT).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Me(this,Ht,"m",HT).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Me(this,Ht,"m",VT).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Mh=function(){if(this.ended)throw new Ie("stream has ended, this shouldn't happen");if(!Me(this,od,"f"))throw Error("Final run has not been received");return Me(this,od,"f")},VT=function(e){const[t,n]=Me(this,Ht,"m",GT).call(this,e,Me(this,mu,"f"));Pr(this,mu,t,"f"),Me(this,kg,"f")[t.id]=t;for(const i of n){const a=t.content[i.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let a=i.text,o=t.content[i.index];if(o&&o.type=="text")this._emit("textDelta",a,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=Me(this,Ld,"f")){if(Me(this,nd,"f"))switch(Me(this,nd,"f").type){case"text":this._emit("textDone",Me(this,nd,"f").text,Me(this,mu,"f"));break;case"image_file":this._emit("imageFileDone",Me(this,nd,"f").image_file,Me(this,mu,"f"));break}Pr(this,Ld,i.index,"f")}Pr(this,nd,t.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(Me(this,Ld,"f")!==void 0){const i=e.data.content[Me(this,Ld,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,Me(this,mu,"f"));break;case"text":this._emit("textDone",i.text,Me(this,mu,"f"));break}}Me(this,mu,"f")&&this._emit("messageDone",e.data),Pr(this,mu,void 0,"f")}},HT=function(e){const t=Me(this,Ht,"m",WT).call(this,e);switch(Pr(this,Vh,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of n.step_details.tool_calls)a.index==Me(this,O_,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(Me(this,$r,"f")&&this._emit("toolCallDone",Me(this,$r,"f")),Pr(this,O_,a.index,"f"),Pr(this,$r,t.step_details.tool_calls[a.index],"f"),Me(this,$r,"f")&&this._emit("toolCallCreated",Me(this,$r,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Pr(this,Vh,void 0,"f"),e.data.step_details.type=="tool_calls"&&Me(this,$r,"f")&&(this._emit("toolCallDone",Me(this,$r,"f")),Pr(this,$r,void 0,"f")),this._emit("runStepDone",e.data,t);break}},KT=function(e){Me(this,WR,"f").push(e),this._emit("event",e)},WT=function(e){switch(e.event){case"thread.run.step.created":return Me(this,Au,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=Me(this,Au,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const i=gu.accumulateDelta(t,n.delta);Me(this,Au,"f")[e.data.id]=i}return Me(this,Au,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Me(this,Au,"f")[e.data.id]=e.data;break}if(Me(this,Au,"f")[e.data.id])return Me(this,Au,"f")[e.data.id];throw new Error("No snapshot available")},GT=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const a of i.delta.content)if(a.index in t.content){let o=t.content[a.index];t.content[a.index]=Me(this,Ht,"m",JT).call(this,a,o)}else t.content[a.index]=a,n.push(a);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},JT=function(e,t){return gu.accumulateDelta(t,e)},XT=function(e){switch(Pr(this,Hg,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Pr(this,od,e.data,"f"),Me(this,$r,"f")&&(this._emit("toolCallDone",Me(this,$r,"f")),Pr(this,$r,void 0,"f"));break}};class JC extends De{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},t){return bt(e)?this.list({},e):this._client.getAPIList("/assistants",XC,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class XC extends Nt{}JC.AssistantsPage=XC;function ZT(r){return typeof r.parse=="function"}const Gd=r=>(r==null?void 0:r.role)==="assistant",C2=r=>(r==null?void 0:r.role)==="function",P2=r=>(r==null?void 0:r.role)==="tool";function VQ(r,e){const t={...r};return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}function ZC(r){return(r==null?void 0:r.$brand)==="auto-parseable-response-format"}function HQ(r,{parser:e,callback:t}){const n={...r};return Object.defineProperties(n,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:e,enumerable:!1},$callback:{value:t,enumerable:!1}}),n}function Em(r){return(r==null?void 0:r.$brand)==="auto-parseable-tool"}function KQ(r,e){return!e||!j2(e)?{...r,choices:r.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:QC(r,e)}function QC(r,e){const t=r.choices.map(n=>{var i;if(n.finish_reason==="length")throw new s2;if(n.finish_reason==="content_filter")throw new u2;return{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:((i=n.message.tool_calls)==null?void 0:i.map(a=>GQ(e,a)))??void 0}:void 0,parsed:n.message.content&&!n.message.refusal?WQ(e,n.message.content):null}}});return{...r,choices:t}}function WQ(r,e){var t,n;return((t=r.response_format)==null?void 0:t.type)!=="json_schema"?null:((n=r.response_format)==null?void 0:n.type)==="json_schema"?"$parseRaw"in r.response_format?r.response_format.$parseRaw(e):JSON.parse(e):null}function GQ(r,e){var n;const t=(n=r.tools)==null?void 0:n.find(i=>{var a;return((a=i.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Em(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function JQ(r,e){var n;if(!r)return!1;const t=(n=r.tools)==null?void 0:n.find(i=>{var a;return((a=i.function)==null?void 0:a.name)===e.function.name});return Em(t)||(t==null?void 0:t.function.strict)||!1}function j2(r){var e;return ZC(r.response_format)?!0:((e=r.tools)==null?void 0:e.some(t=>Em(t)||t.type==="function"&&t.function.strict===!0))??!1}function XQ(r){for(const e of r??[]){if(e.type!=="function")throw new Ie(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ie(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var _r=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Xt,GR,E_,JR,XR,ZR,T2,QR;const QT=10;class A2 extends GC{constructor(){super(...arguments),Xt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(n=e.choices[0])==null?void 0:n.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(C2(e)||P2(e))&&e.content)this._emit("functionCallResult",e.content);else if(Gd(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Gd(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionCall",n.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ie("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),_r(this,Xt,"m",GR).call(this)}async finalMessage(){return await this.done(),_r(this,Xt,"m",E_).call(this)}async finalFunctionCall(){return await this.done(),_r(this,Xt,"m",JR).call(this)}async finalFunctionCallResult(){return await this.done(),_r(this,Xt,"m",XR).call(this)}async totalUsage(){return await this.done(),_r(this,Xt,"m",ZR).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=_r(this,Xt,"m",E_).call(this);t&&this._emit("finalMessage",t);const n=_r(this,Xt,"m",GR).call(this);n&&this._emit("finalContent",n);const i=_r(this,Xt,"m",JR).call(this);i&&this._emit("finalFunctionCall",i);const a=_r(this,Xt,"m",XR).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",_r(this,Xt,"m",ZR).call(this))}async _createChatCompletion(e,t,n){const i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),_r(this,Xt,"m",T2).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(QC(a,t))}async _runChatCompletion(e,t,n){for(const i of t.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){var h;const i="function",{function_call:a="auto",stream:o,...s}=t,u=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:l=QT}=n||{},c={};for(const f of t.functions)c[f.name||f.function.name]=f;const d=t.functions.map(f=>({name:f.name||f.function.name,parameters:f.parameters,description:f.description}));for(const f of t.messages)this._addMessage(f,!1);for(let f=0;f<l;++f){const p=(h=(await this._createChatCompletion(e,{...s,function_call:a,functions:d,messages:[...this.messages]},n)).choices[0])==null?void 0:h.message;if(!p)throw new Ie("missing message in ChatCompletion response");if(!p.function_call)return;const{name:g,arguments:b}=p.function_call,_=c[g];if(_){if(u&&u!==g){const S=`Invalid function_call: ${JSON.stringify(g)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:i,name:g,content:S});continue}}else{const S=`Invalid function_call: ${JSON.stringify(g)}. Available options are: ${d.map(R=>JSON.stringify(R.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:g,content:S});continue}let y;try{y=ZT(_)?await _.parse(b):b}catch(S){this._addMessage({role:i,name:g,content:S instanceof Error?S.message:String(S)});continue}const v=await _.function(y,this),w=_r(this,Xt,"m",QR).call(this,v);if(this._addMessage({role:i,name:g,content:w}),u)return}}async _runTools(e,t,n){var f,m,p;const i="tool",{tool_choice:a="auto",stream:o,...s}=t,u=typeof a!="string"&&((f=a==null?void 0:a.function)==null?void 0:f.name),{maxChatCompletions:l=QT}=n||{},c=t.tools.map(g=>{if(Em(g)){if(!g.$callback)throw new Ie("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:g.$callback,name:g.function.name,description:g.function.description||"",parameters:g.function.parameters,parse:g.$parseRaw,strict:!0}}}return g}),d={};for(const g of c)g.type==="function"&&(d[g.function.name||g.function.function.name]=g.function);const h="tools"in t?c.map(g=>g.type==="function"?{type:"function",function:{name:g.function.name||g.function.function.name,parameters:g.function.parameters,description:g.function.description,strict:g.function.strict}}:g):void 0;for(const g of t.messages)this._addMessage(g,!1);for(let g=0;g<l;++g){const _=(m=(await this._createChatCompletion(e,{...s,tool_choice:a,tools:h,messages:[...this.messages]},n)).choices[0])==null?void 0:m.message;if(!_)throw new Ie("missing message in ChatCompletion response");if(!((p=_.tool_calls)!=null&&p.length))return;for(const y of _.tool_calls){if(y.type!=="function")continue;const v=y.id,{name:w,arguments:S}=y.function,R=d[w];if(R){if(u&&u!==w){const M=`Invalid tool_call: ${JSON.stringify(w)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:i,tool_call_id:v,content:M});continue}}else{const M=`Invalid tool_call: ${JSON.stringify(w)}. Available options are: ${Object.keys(d).map(G=>JSON.stringify(G)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:v,content:M});continue}let P;try{P=ZT(R)?await R.parse(S):S}catch(M){const G=M instanceof Error?M.message:String(M);this._addMessage({role:i,tool_call_id:v,content:G});continue}const C=await R.function(P,this),A=_r(this,Xt,"m",QR).call(this,C);if(this._addMessage({role:i,tool_call_id:v,content:A}),u)return}}}}Xt=new WeakSet,GR=function(){return _r(this,Xt,"m",E_).call(this).content??null},E_=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(Gd(t)){const{function_call:n,...i}=t,a={...i,content:t.content??null,refusal:t.refusal??null};return n&&(a.function_call=n),a}}throw new Ie("stream ended without producing a ChatCompletionMessage with role=assistant")},JR=function(){var e,t;for(let n=this.messages.length-1;n>=0;n--){const i=this.messages[n];if(Gd(i)&&(i!=null&&i.function_call))return i.function_call;if(Gd(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(t=i.tool_calls.at(-1))==null?void 0:t.function}},XR=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(C2(t)&&t.content!=null||P2(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(n=>{var i;return n.role==="assistant"&&((i=n.tool_calls)==null?void 0:i.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},ZR=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},T2=function(e){if(e.n!=null&&e.n>1)throw new Ie("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},QR=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class im extends A2{static runFunctions(e,t,n){const i=new im,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,a)),i}static runTools(e,t,n){const i=new im,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,a)),i}_addMessage(e,t=!0){super._addMessage(e,t),Gd(e)&&e.content&&this._emit("content",e.content)}}const M2=1,I2=2,x2=4,D2=8,$2=16,N2=32,q2=64,B2=128,U2=256,z2=B2|U2,L2=$2|N2|z2|q2,F2=M2|I2|L2,k2=x2|D2,ZQ=F2|k2,Bt={STR:M2,NUM:I2,ARR:x2,OBJ:D2,NULL:$2,BOOL:N2,NAN:q2,INFINITY:B2,MINUS_INFINITY:U2,INF:z2,SPECIAL:L2,ATOM:F2,COLLECTION:k2,ALL:ZQ};class QQ extends Error{}class YQ extends Error{}function eY(r,e=Bt.ALL){if(typeof r!="string")throw new TypeError(`expecting str, got ${typeof r}`);if(!r.trim())throw new Error(`${r} is empty`);return tY(r.trim(),e)}const tY=(r,e)=>{const t=r.length;let n=0;const i=h=>{throw new QQ(`${h} at position ${n}`)},a=h=>{throw new YQ(`${h} at position ${n}`)},o=()=>(d(),n>=t&&i("Unexpected end of input"),r[n]==='"'?s():r[n]==="{"?u():r[n]==="["?l():r.substring(n,n+4)==="null"||Bt.NULL&e&&t-n<4&&"null".startsWith(r.substring(n))?(n+=4,null):r.substring(n,n+4)==="true"||Bt.BOOL&e&&t-n<4&&"true".startsWith(r.substring(n))?(n+=4,!0):r.substring(n,n+5)==="false"||Bt.BOOL&e&&t-n<5&&"false".startsWith(r.substring(n))?(n+=5,!1):r.substring(n,n+8)==="Infinity"||Bt.INFINITY&e&&t-n<8&&"Infinity".startsWith(r.substring(n))?(n+=8,1/0):r.substring(n,n+9)==="-Infinity"||Bt.MINUS_INFINITY&e&&1<t-n&&t-n<9&&"-Infinity".startsWith(r.substring(n))?(n+=9,-1/0):r.substring(n,n+3)==="NaN"||Bt.NAN&e&&t-n<3&&"NaN".startsWith(r.substring(n))?(n+=3,NaN):c()),s=()=>{const h=n;let f=!1;for(n++;n<t&&(r[n]!=='"'||f&&r[n-1]==="\\");)f=r[n]==="\\"?!f:!1,n++;if(r.charAt(n)=='"')try{return JSON.parse(r.substring(h,++n-Number(f)))}catch(m){a(String(m))}else if(Bt.STR&e)try{return JSON.parse(r.substring(h,n-Number(f))+'"')}catch{return JSON.parse(r.substring(h,r.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},u=()=>{n++,d();const h={};try{for(;r[n]!=="}";){if(d(),n>=t&&Bt.OBJ&e)return h;const f=s();d(),n++;try{const m=o();Object.defineProperty(h,f,{value:m,writable:!0,enumerable:!0,configurable:!0})}catch(m){if(Bt.OBJ&e)return h;throw m}d(),r[n]===","&&n++}}catch{if(Bt.OBJ&e)return h;i("Expected '}' at end of object")}return n++,h},l=()=>{n++;const h=[];try{for(;r[n]!=="]";)h.push(o()),d(),r[n]===","&&n++}catch{if(Bt.ARR&e)return h;i("Expected ']' at end of array")}return n++,h},c=()=>{if(n===0){r==="-"&&Bt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(r)}catch(f){if(Bt.NUM&e)try{return r[r.length-1]==="."?JSON.parse(r.substring(0,r.lastIndexOf("."))):JSON.parse(r.substring(0,r.lastIndexOf("e")))}catch{}a(String(f))}}const h=n;for(r[n]==="-"&&n++;r[n]&&!",]}".includes(r[n]);)n++;n==t&&!(Bt.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(r.substring(h,n))}catch{r.substring(h,n)==="-"&&Bt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(r.substring(h,r.lastIndexOf("e")))}catch(m){a(String(m))}}},d=()=>{for(;n<t&&` 
\r	`.includes(r[n]);)n++};return o()},YT=r=>eY(r,Bt.ALL^Bt.NUM);var Rd=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},ct=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Tt,Lu,Cd,cl,uv,ng,lv,cv,dv,ig,fv,eA;class am extends A2{constructor(e){super(),Tt.add(this),Lu.set(this,void 0),Cd.set(this,void 0),cl.set(this,void 0),Rd(this,Lu,e,"f"),Rd(this,Cd,[],"f")}get currentChatCompletionSnapshot(){return ct(this,cl,"f")}static fromReadableStream(e){const t=new am(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){const i=new am(t);return i._run(()=>i._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,t,n){var o;super._createChatCompletion;const i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),ct(this,Tt,"m",uv).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const s of a)ct(this,Tt,"m",lv).call(this,s);if((o=a.controller.signal)!=null&&o.aborted)throw new qr;return this._addChatCompletion(ct(this,Tt,"m",ig).call(this))}async _fromReadableStream(e,t){var o;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),ct(this,Tt,"m",uv).call(this),this._connected();const i=nm.fromReadableStream(e,this.controller);let a;for await(const s of i)a&&a!==s.id&&this._addChatCompletion(ct(this,Tt,"m",ig).call(this)),ct(this,Tt,"m",lv).call(this,s),a=s.id;if((o=i.controller.signal)!=null&&o.aborted)throw new qr;return this._addChatCompletion(ct(this,Tt,"m",ig).call(this))}[(Lu=new WeakMap,Cd=new WeakMap,cl=new WeakMap,Tt=new WeakSet,uv=function(){this.ended||Rd(this,cl,void 0,"f")},ng=function(t){let n=ct(this,Cd,"f")[t.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ct(this,Cd,"f")[t.index]=n,n)},lv=function(t){var i,a,o,s,u,l,c,d,h,f,m,p,g,b,_;if(this.ended)return;const n=ct(this,Tt,"m",eA).call(this,t);this._emit("chunk",t,n);for(const y of t.choices){const v=n.choices[y.index];y.delta.content!=null&&((i=v.message)==null?void 0:i.role)==="assistant"&&((a=v.message)!=null&&a.content)&&(this._emit("content",y.delta.content,v.message.content),this._emit("content.delta",{delta:y.delta.content,snapshot:v.message.content,parsed:v.message.parsed})),y.delta.refusal!=null&&((o=v.message)==null?void 0:o.role)==="assistant"&&((s=v.message)!=null&&s.refusal)&&this._emit("refusal.delta",{delta:y.delta.refusal,snapshot:v.message.refusal}),((u=y.logprobs)==null?void 0:u.content)!=null&&((l=v.message)==null?void 0:l.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(c=y.logprobs)==null?void 0:c.content,snapshot:((d=v.logprobs)==null?void 0:d.content)??[]}),((h=y.logprobs)==null?void 0:h.refusal)!=null&&((f=v.message)==null?void 0:f.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(m=y.logprobs)==null?void 0:m.refusal,snapshot:((p=v.logprobs)==null?void 0:p.refusal)??[]});const w=ct(this,Tt,"m",ng).call(this,v);v.finish_reason&&(ct(this,Tt,"m",dv).call(this,v),w.current_tool_call_index!=null&&ct(this,Tt,"m",cv).call(this,v,w.current_tool_call_index));for(const S of y.delta.tool_calls??[])w.current_tool_call_index!==S.index&&(ct(this,Tt,"m",dv).call(this,v),w.current_tool_call_index!=null&&ct(this,Tt,"m",cv).call(this,v,w.current_tool_call_index)),w.current_tool_call_index=S.index;for(const S of y.delta.tool_calls??[]){const R=(g=v.message.tool_calls)==null?void 0:g[S.index];R!=null&&R.type&&((R==null?void 0:R.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(b=R.function)==null?void 0:b.name,index:S.index,arguments:R.function.arguments,parsed_arguments:R.function.parsed_arguments,arguments_delta:((_=S.function)==null?void 0:_.arguments)??""}):(R==null||R.type,void 0))}}},cv=function(t,n){var o,s,u;if(ct(this,Tt,"m",ng).call(this,t).done_tool_calls.has(n))return;const a=(o=t.message.tool_calls)==null?void 0:o[n];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=(u=(s=ct(this,Lu,"f"))==null?void 0:s.tools)==null?void 0:u.find(c=>c.type==="function"&&c.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:n,arguments:a.function.arguments,parsed_arguments:Em(l)?l.$parseRaw(a.function.arguments):l!=null&&l.function.strict?JSON.parse(a.function.arguments):null})}else a.type},dv=function(t){var i,a;const n=ct(this,Tt,"m",ng).call(this,t);if(t.message.content&&!n.content_done){n.content_done=!0;const o=ct(this,Tt,"m",fv).call(this);this._emit("content.done",{content:t.message.content,parsed:o?o.$parseRaw(t.message.content):null})}t.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(i=t.logprobs)!=null&&i.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},ig=function(){if(this.ended)throw new Ie("stream has ended, this shouldn't happen");const t=ct(this,cl,"f");if(!t)throw new Ie("request ended without sending any chunks");return Rd(this,cl,void 0,"f"),Rd(this,Cd,[],"f"),rY(t,ct(this,Lu,"f"))},fv=function(){var n;const t=(n=ct(this,Lu,"f"))==null?void 0:n.response_format;return ZC(t)?t:null},eA=function(t){var n,i,a,o;let s=ct(this,cl,"f");const{choices:u,...l}=t;s?Object.assign(s,l):s=Rd(this,cl,{...l,choices:[]},"f");for(const{delta:c,finish_reason:d,index:h,logprobs:f=null,...m}of t.choices){let p=s.choices[h];if(p||(p=s.choices[h]={finish_reason:d,index:h,message:{},logprobs:f,...m}),f)if(!p.logprobs)p.logprobs=Object.assign({},f);else{const{content:S,refusal:R,...P}=f;Object.assign(p.logprobs,P),S&&((n=p.logprobs).content??(n.content=[]),p.logprobs.content.push(...S)),R&&((i=p.logprobs).refusal??(i.refusal=[]),p.logprobs.refusal.push(...R))}if(d&&(p.finish_reason=d,ct(this,Lu,"f")&&j2(ct(this,Lu,"f")))){if(d==="length")throw new s2;if(d==="content_filter")throw new u2}if(Object.assign(p,m),!c)continue;const{content:g,refusal:b,function_call:_,role:y,tool_calls:v,...w}=c;if(Object.assign(p.message,w),b&&(p.message.refusal=(p.message.refusal||"")+b),y&&(p.message.role=y),_&&(p.message.function_call?(_.name&&(p.message.function_call.name=_.name),_.arguments&&((a=p.message.function_call).arguments??(a.arguments=""),p.message.function_call.arguments+=_.arguments)):p.message.function_call=_),g&&(p.message.content=(p.message.content||"")+g,!p.message.refusal&&ct(this,Tt,"m",fv).call(this)&&(p.message.parsed=YT(p.message.content))),v){p.message.tool_calls||(p.message.tool_calls=[]);for(const{index:S,id:R,type:P,function:C,...A}of v){const M=(o=p.message.tool_calls)[S]??(o[S]={});Object.assign(M,A),R&&(M.id=R),P&&(M.type=P),C&&(M.function??(M.function={name:C.name??"",arguments:""})),C!=null&&C.name&&(M.function.name=C.name),C!=null&&C.arguments&&(M.function.arguments+=C.arguments,JQ(ct(this,Lu,"f"),M)&&(M.function.parsed_arguments=YT(M.function.arguments)))}}}return s},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",i=>{const a=t.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{n=!0;for(const a of t)a.reject(i);t.length=0}),this.on("error",i=>{n=!0;for(const a of t)a.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new nm(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function rY(r,e){const{id:t,choices:n,created:i,model:a,system_fingerprint:o,...s}=r,u={...s,id:t,choices:n.map(({message:l,finish_reason:c,index:d,logprobs:h,...f})=>{if(!c)throw new Ie(`missing finish_reason for choice ${d}`);const{content:m=null,function_call:p,tool_calls:g,...b}=l,_=l.role;if(!_)throw new Ie(`missing role for choice ${d}`);if(p){const{arguments:y,name:v}=p;if(y==null)throw new Ie(`missing function_call.arguments for choice ${d}`);if(!v)throw new Ie(`missing function_call.name for choice ${d}`);return{...f,message:{content:m,function_call:{arguments:y,name:v},role:_,refusal:l.refusal??null},finish_reason:c,index:d,logprobs:h}}return g?{...f,index:d,finish_reason:c,logprobs:h,message:{...b,role:_,content:m,refusal:l.refusal??null,tool_calls:g.map((y,v)=>{const{function:w,type:S,id:R,...P}=y,{arguments:C,name:A,...M}=w||{};if(R==null)throw new Ie(`missing choices[${d}].tool_calls[${v}].id
${ag(r)}`);if(S==null)throw new Ie(`missing choices[${d}].tool_calls[${v}].type
${ag(r)}`);if(A==null)throw new Ie(`missing choices[${d}].tool_calls[${v}].function.name
${ag(r)}`);if(C==null)throw new Ie(`missing choices[${d}].tool_calls[${v}].function.arguments
${ag(r)}`);return{...P,id:R,type:S,function:{...M,name:A,arguments:C}}})}}:{...f,message:{...b,content:m,role:_,refusal:l.refusal??null},finish_reason:c,index:d,logprobs:h}}),created:i,model:a,object:"chat.completion",...o?{system_fingerprint:o}:{}};return KQ(u,e)}function ag(r){return JSON.stringify(r)}class Jd extends am{static fromReadableStream(e){const t=new Jd(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,n){const i=new Jd(null),a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,a)),i}static runTools(e,t,n){const i=new Jd(t),a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,a)),i}}let V2=class extends De{parse(e,t){return XQ(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(n=>QC(n,e))}runFunctions(e,t){return e.stream?Jd.runFunctions(this._client,e,t):im.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?Jd.runTools(this._client,e,t):im.runTools(this._client,e,t)}stream(e,t){return am.createChatCompletion(this._client,e,t)}},YR=class extends De{constructor(){super(...arguments),this.completions=new V2(this._client)}};(function(r){r.Completions=V2})(YR||(YR={}));class H2 extends De{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class K2 extends De{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class cb extends De{constructor(){super(...arguments),this.sessions=new H2(this._client),this.transcriptionSessions=new K2(this._client)}}cb.Sessions=H2;cb.TranscriptionSessions=K2;let YC=class extends De{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,i){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},n){return bt(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,eP,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}};class eP extends Nt{}YC.MessagesPage=eP;class tP extends De{retrieve(e,t,n,i={},a){return bt(i)?this.retrieve(e,t,n,{},i):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:i,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,t,n={},i){return bt(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,rP,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class rP extends Nt{}tP.RunStepsPage=rP;let Rm=class extends De{constructor(){super(...arguments),this.steps=new tP(this._client)}create(e,t,n){const{include:i,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:a,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,i){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},n){return bt(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,nP,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const i=await this.create(e,t,n);return await this.poll(e,i.id,n)}createAndStream(e,t,n){return gu.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const i={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(e,t,{...n,headers:{...n==null?void 0:n.headers,...i}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let s=5e3;if(n!=null&&n.pollIntervalMs)s=n.pollIntervalMs;else{const u=o.headers.get("openai-poll-after-ms");if(u){const l=parseInt(u);isNaN(l)||(s=l)}}await Sm(s);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,n){return gu.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,i){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,i){const a=await this.submitToolOutputs(e,t,n,i);return await this.poll(e,a.id,i)}submitToolOutputsStream(e,t,n,i){return gu.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,i)}};class nP extends Nt{}Rm.RunsPage=nP;Rm.Steps=tP;Rm.RunStepsPage=rP;class yf extends De{constructor(){super(...arguments),this.runs=new Rm(this._client),this.messages=new YC(this._client)}create(e={},t){return bt(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return gu.createThreadAssistantStream(e,this._client.beta.threads,t)}}yf.Runs=Rm;yf.RunsPage=nP;yf.Messages=YC;yf.MessagesPage=eP;let vf=class extends De{constructor(){super(...arguments),this.realtime=new cb(this._client),this.chat=new YR(this._client),this.assistants=new JC(this._client),this.threads=new yf(this._client)}};vf.Realtime=cb;vf.Assistants=JC;vf.AssistantsPage=XC;vf.Threads=yf;let W2=class extends De{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}},G2=class extends De{retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}/content`,{...n,headers:{Accept:"application/binary",...n==null?void 0:n.headers},__binaryResponse:!0})}},db=class extends De{constructor(){super(...arguments),this.content=new G2(this._client)}create(e,t,n){return this._client.post(`/containers/${e}/files`,cd({body:t,...n}))}retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}`,n)}list(e,t={},n){return bt(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,iP,{query:t,...n})}del(e,t,n){return this._client.delete(`/containers/${e}/files/${t}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}};class iP extends Nt{}db.FileListResponsesPage=iP;db.Content=G2;class Cm extends De{constructor(){super(...arguments),this.files=new db(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return bt(e)?this.list({},e):this._client.getAPIList("/containers",aP,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}}class aP extends Nt{}Cm.ContainerListResponsesPage=aP;Cm.Files=db;Cm.FileListResponsesPage=iP;let J2=class extends De{create(e,t){const n=!!e.encoding_format;let i=n?e.encoding_format:"base64";n&&Cl("Request","User defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:i},...t});return n?a:(Cl("response","Decoding base64 embeddings to float32 array"),a._thenUnwrap(o=>(o&&o.data&&o.data.forEach(s=>{const u=s.embedding;s.embedding=FQ(u)}),o)))}};class oP extends De{retrieve(e,t,n,i){return this._client.get(`/evals/${e}/runs/${t}/output_items/${n}`,i)}list(e,t,n={},i){return bt(n)?this.list(e,t,{},n):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,sP,{query:n,...i})}}class sP extends Nt{}oP.OutputItemListResponsesPage=sP;class Pm extends De{constructor(){super(...arguments),this.outputItems=new oP(this._client)}create(e,t,n){return this._client.post(`/evals/${e}/runs`,{body:t,...n})}retrieve(e,t,n){return this._client.get(`/evals/${e}/runs/${t}`,n)}list(e,t={},n){return bt(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,uP,{query:t,...n})}del(e,t,n){return this._client.delete(`/evals/${e}/runs/${t}`,n)}cancel(e,t,n){return this._client.post(`/evals/${e}/runs/${t}`,n)}}class uP extends Nt{}Pm.RunListResponsesPage=uP;Pm.OutputItems=oP;Pm.OutputItemListResponsesPage=sP;class jm extends De{constructor(){super(...arguments),this.runs=new Pm(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,n){return this._client.post(`/evals/${e}`,{body:t,...n})}list(e={},t){return bt(e)?this.list({},e):this._client.getAPIList("/evals",lP,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class lP extends Nt{}jm.EvalListResponsesPage=lP;jm.Runs=Pm;jm.RunListResponsesPage=uP;let cP=class extends De{create(e,t){return this._client.post("/files",cd({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return bt(e)?this.list({},e):this._client.getAPIList("/files",dP,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t==null?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await Sm(t),o=await this.retrieve(e),Date.now()-a>n)throw new nb({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return o}};class dP extends Nt{}cP.FileObjectsPage=dP;class X2 extends De{}let Z2=class extends De{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class fP extends De{constructor(){super(...arguments),this.graders=new Z2(this._client)}}fP.Graders=Z2;class pP extends De{create(e,t,n){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,hP,{body:t,method:"post",...n})}retrieve(e,t={},n){return bt(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...n})}del(e,t,n){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,n)}}class hP extends ob{}pP.PermissionCreateResponsesPage=hP;let fb=class extends De{constructor(){super(...arguments),this.permissions=new pP(this._client)}};fb.Permissions=pP;fb.PermissionCreateResponsesPage=hP;class mP extends De{list(e,t={},n){return bt(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,gP,{query:t,...n})}}class gP extends Nt{}mP.FineTuningJobCheckpointsPage=gP;class wf extends De{constructor(){super(...arguments),this.checkpoints=new mP(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return bt(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",_P,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return bt(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,bP,{query:t,...n})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class _P extends Nt{}class bP extends Nt{}wf.FineTuningJobsPage=_P;wf.FineTuningJobEventsPage=bP;wf.Checkpoints=mP;wf.FineTuningJobCheckpointsPage=gP;class Nl extends De{constructor(){super(...arguments),this.methods=new X2(this._client),this.jobs=new wf(this._client),this.checkpoints=new fb(this._client),this.alpha=new fP(this._client)}}Nl.Methods=X2;Nl.Jobs=wf;Nl.FineTuningJobsPage=_P;Nl.FineTuningJobEventsPage=bP;Nl.Checkpoints=fb;Nl.Alpha=fP;class Q2 extends De{}class yP extends De{constructor(){super(...arguments),this.graderModels=new Q2(this._client)}}yP.GraderModels=Q2;class Y2 extends De{createVariation(e,t){return this._client.post("/images/variations",cd({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",cd({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}let vP=class extends De{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",wP,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}};class wP extends ob{}vP.ModelsPage=wP;class e6 extends De{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function nY(r,e){return!e||!aY(e)?{...r,output_parsed:null,output:r.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(n=>({...n,parsed:null}))}:t)}:t6(r,e)}function t6(r,e){const t=r.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:uY(e,i)};if(i.type==="message"){const a=i.content.map(o=>o.type==="output_text"?{...o,parsed:iY(e,o.text)}:o);return{...i,content:a}}return i}),n=Object.assign({},r,{output:t});return Object.getOwnPropertyDescriptor(r,"output_text")||r6(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(const i of n.output)if(i.type==="message"){for(const a of i.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),n}function iY(r,e){var t,n,i,a;return((n=(t=r.text)==null?void 0:t.format)==null?void 0:n.type)!=="json_schema"?null:"$parseRaw"in((i=r.text)==null?void 0:i.format)?((a=r.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function aY(r){var e;return!!ZC((e=r.text)==null?void 0:e.format)}function oY(r){return(r==null?void 0:r.$brand)==="auto-parseable-tool"}function sY(r,e){return r.find(t=>t.type==="function"&&t.name===e)}function uY(r,e){const t=sY(r.tools??[],e.name);return{...e,...e,parsed_arguments:oY(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function r6(r){const e=[];for(const t of r.output)if(t.type==="message")for(const n of t.content)n.type==="output_text"&&e.push(n.text);r.output_text=e.join("")}class n6 extends De{list(e,t={},n){return bt(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,cY,{query:t,...n})}}var Pd=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},dl=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},jd,og,fl,sg,tA,rA,nA,iA;class SP extends GC{constructor(e){super(),jd.add(this),og.set(this,void 0),fl.set(this,void 0),sg.set(this,void 0),Pd(this,og,e,"f")}static createResponse(e,t,n){const i=new SP(t);return i._run(()=>i._createOrRetrieveResponse(e,t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,t,n){var s;const i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),dl(this,jd,"m",tA).call(this);let a,o=null;"response_id"in t?(a=await e.responses.retrieve(t.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),o=t.starting_after??null):a=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(const u of a)dl(this,jd,"m",rA).call(this,u,o);if((s=a.controller.signal)!=null&&s.aborted)throw new qr;return dl(this,jd,"m",nA).call(this)}[(og=new WeakMap,fl=new WeakMap,sg=new WeakMap,jd=new WeakSet,tA=function(){this.ended||Pd(this,fl,void 0,"f")},rA=function(t,n){if(this.ended)return;const i=(o,s)=>{(n==null||s.sequence_number>n)&&this._emit(o,s)},a=dl(this,jd,"m",iA).call(this,t);switch(i("event",t),t.type){case"response.output_text.delta":{const o=a.output[t.output_index];if(!o)throw new Ie(`missing output at index ${t.output_index}`);if(o.type==="message"){const s=o.content[t.content_index];if(!s)throw new Ie(`missing content at index ${t.content_index}`);if(s.type!=="output_text")throw new Ie(`expected content to be 'output_text', got ${s.type}`);i("response.output_text.delta",{...t,snapshot:s.text})}break}case"response.function_call_arguments.delta":{const o=a.output[t.output_index];if(!o)throw new Ie(`missing output at index ${t.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...t,snapshot:o.arguments});break}default:i(t.type,t);break}},nA=function(){if(this.ended)throw new Ie("stream has ended, this shouldn't happen");const t=dl(this,fl,"f");if(!t)throw new Ie("request ended without sending any events");Pd(this,fl,void 0,"f");const n=lY(t,dl(this,og,"f"));return Pd(this,sg,n,"f"),n},iA=function(t){let n=dl(this,fl,"f");if(!n){if(t.type!=="response.created")throw new Ie(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return n=Pd(this,fl,t.response,"f"),n}switch(t.type){case"response.output_item.added":{n.output.push(t.item);break}case"response.content_part.added":{const i=n.output[t.output_index];if(!i)throw new Ie(`missing output at index ${t.output_index}`);i.type==="message"&&i.content.push(t.part);break}case"response.output_text.delta":{const i=n.output[t.output_index];if(!i)throw new Ie(`missing output at index ${t.output_index}`);if(i.type==="message"){const a=i.content[t.content_index];if(!a)throw new Ie(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new Ie(`expected content to be 'output_text', got ${a.type}`);a.text+=t.delta}break}case"response.function_call_arguments.delta":{const i=n.output[t.output_index];if(!i)throw new Ie(`missing output at index ${t.output_index}`);i.type==="function_call"&&(i.arguments+=t.delta);break}case"response.completed":{Pd(this,fl,t.response,"f");break}}return n},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",i=>{const a=t.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{n=!0;for(const a of t)a.reject(i);t.length=0}),this.on("error",i=>{n=!0;for(const a of t)a.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=dl(this,sg,"f");if(!e)throw new Ie("stream ended without producing a ChatCompletion");return e}}function lY(r,e){return nY(r,e)}class OP extends De{constructor(){super(...arguments),this.inputItems=new n6(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&r6(n),n))}retrieve(e,t={},n){return this._client.get(`/responses/${e}`,{query:t,...n,stream:(t==null?void 0:t.stream)??!1})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(n=>t6(n,e))}stream(e,t){return SP.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}}class cY extends Nt{}OP.InputItems=n6;class i6 extends De{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,cd({body:t,...n}))}}class EP extends De{constructor(){super(...arguments),this.parts=new i6(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}}EP.Parts=i6;const dY=async r=>{const e=await Promise.allSettled(r),t=e.filter(i=>i.status==="rejected");if(t.length){for(const i of t)console.error(i.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const n=[];for(const i of e)i.status==="fulfilled"&&n.push(i.value);return n};let pb=class extends De{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,i){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},n){return bt(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,hb,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const i=await this.create(e,t,n);return await this.poll(e,i.id,n)}async poll(e,t,n){const i={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...n,headers:i}).withResponse(),o=a.data;switch(o.status){case"in_progress":let s=5e3;if(n!=null&&n.pollIntervalMs)s=n.pollIntervalMs;else{const u=a.response.headers.get("openai-poll-after-ms");if(u){const l=parseInt(u);isNaN(l)||(s=l)}}await Sm(s);break;case"failed":case"completed":return o}}}async upload(e,t,n){const i=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:i.id},n)}async uploadAndPoll(e,t,n){const i=await this.upload(e,t,n);return await this.poll(e,i.id,n)}content(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,RP,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}};class hb extends Nt{}class RP extends ob{}pb.VectorStoreFilesPage=hb;pb.FileContentResponsesPage=RP;class a6 extends De{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const i=await this.create(e,t);return await this.poll(e,i.id,n)}listFiles(e,t,n={},i){return bt(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,hb,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async poll(e,t,n){const i={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(e,t,{...n,headers:i}).withResponse();switch(a.status){case"in_progress":let s=5e3;if(n!=null&&n.pollIntervalMs)s=n.pollIntervalMs;else{const u=o.headers.get("openai-poll-after-ms");if(u){const l=parseInt(u);isNaN(l)||(s=l)}}await Sm(s);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},i){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(i==null?void 0:i.maxConcurrency)??5,o=Math.min(a,t.length),s=this._client,u=t.values(),l=[...n];async function c(h){for(let f of h){const m=await s.files.create({file:f,purpose:"assistants"},i);l.push(m.id)}}const d=Array(o).fill(u).map(c);return await dY(d),await this.createAndPoll(e,{file_ids:l})}}class ql extends De{constructor(){super(...arguments),this.files=new pb(this._client),this.fileBatches=new a6(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},t){return bt(e)?this.list({},e):this._client.getAPIList("/vector_stores",CP,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}search(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/search`,PP,{body:t,method:"post",...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class CP extends Nt{}class PP extends ob{}ql.VectorStoresPage=CP;ql.VectorStoreSearchResponsesPage=PP;ql.Files=pb;ql.VectorStoreFilesPage=hb;ql.FileContentResponsesPage=RP;ql.FileBatches=a6;var fY={},o6;let Ne=class extends AQ{constructor({baseURL:e=ad("OPENAI_BASE_URL"),apiKey:t=ad("OPENAI_API_KEY"),organization:n=ad("OPENAI_ORG_ID")??null,project:i=ad("OPENAI_PROJECT_ID")??null,...a}={}){if(t===void 0)throw new Ie("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:n,project:i,...a,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&zQ())throw new Ie(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new W2(this),this.chat=new lb(this),this.embeddings=new J2(this),this.files=new cP(this),this.images=new Y2(this),this.audio=new Om(this),this.moderations=new e6(this),this.models=new vP(this),this.fineTuning=new Nl(this),this.graders=new yP(this),this.vectorStores=new ql(this),this.beta=new vf(this),this.batches=new KC(this),this.uploads=new EP(this),this.responses=new OP(this),this.evals=new jm(this),this.containers=new Cm(this),this._options=o,this.apiKey=t,this.organization=n,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return fQ(e,{arrayFormat:"brackets"})}};o6=Ne;Ne.OpenAI=o6;Ne.DEFAULT_TIMEOUT=6e5;Ne.OpenAIError=Ie;Ne.APIError=Rr;Ne.APIConnectionError=rb;Ne.APIConnectionTimeoutError=nb;Ne.APIUserAbortError=qr;Ne.NotFoundError=r2;Ne.ConflictError=n2;Ne.RateLimitError=a2;Ne.BadRequestError=Y3;Ne.AuthenticationError=e2;Ne.InternalServerError=o2;Ne.PermissionDeniedError=t2;Ne.UnprocessableEntityError=i2;Ne.toFile=f2;Ne.fileFromPath=X3;Ne.Completions=W2;Ne.Chat=lb;Ne.ChatCompletionsPage=ub;Ne.Embeddings=J2;Ne.Files=cP;Ne.FileObjectsPage=dP;Ne.Images=Y2;Ne.Audio=Om;Ne.Moderations=e6;Ne.Models=vP;Ne.ModelsPage=wP;Ne.FineTuning=Nl;Ne.Graders=yP;Ne.VectorStores=ql;Ne.VectorStoresPage=CP;Ne.VectorStoreSearchResponsesPage=PP;Ne.Beta=vf;Ne.Batches=KC;Ne.BatchesPage=WC;Ne.Uploads=EP;Ne.Responses=OP;Ne.Evals=jm;Ne.EvalListResponsesPage=lP;Ne.Containers=Cm;Ne.ContainerListResponsesPage=aP;let s6=class extends Ne{constructor({baseURL:e=ad("OPENAI_BASE_URL"),apiKey:t=ad("AZURE_OPENAI_API_KEY"),apiVersion:n=ad("OPENAI_API_VERSION"),endpoint:i,deployment:a,azureADTokenProvider:o,dangerouslyAllowBrowser:s,...u}={}){if(!n)throw new Ie("The OPENAI_API_VERSION environment variable is missing or empty; either provide it, or instantiate the AzureOpenAI client with an apiVersion option, like new AzureOpenAI({ apiVersion: 'My API Version' }).");if(typeof o=="function"&&(s=!0),!o&&!t)throw new Ie("Missing credentials. Please pass one of `apiKey` and `azureADTokenProvider`, or set the `AZURE_OPENAI_API_KEY` environment variable.");if(o&&t)throw new Ie("The `apiKey` and `azureADTokenProvider` arguments are mutually exclusive; only one can be passed at a time.");if(t??(t=aA),u.defaultQuery={...u.defaultQuery,"api-version":n},e){if(i)throw new Ie("baseURL and endpoint are mutually exclusive")}else{if(i||(i=fY.AZURE_OPENAI_ENDPOINT),!i)throw new Ie("Must provide one of the `baseURL` or `endpoint` arguments, or the `AZURE_OPENAI_ENDPOINT` environment variable");e=`${i}/openai`}super({apiKey:t,baseURL:e,...u,...s!==void 0?{dangerouslyAllowBrowser:s}:{}}),this.apiVersion="",this._azureADTokenProvider=o,this.apiVersion=n,this.deploymentName=a}buildRequest(e,t={}){var n;if(pY.has(e.path)&&e.method==="post"&&e.body!==void 0){if(!Ug(e.body))throw new Error("Expected request body to be an object");const i=this.deploymentName||e.body.model||((n=e.__metadata)==null?void 0:n.model);i!==void 0&&!this.baseURL.includes("/deployments")&&(e.path=`/deployments/${i}${e.path}`)}return super.buildRequest(e,t)}async _getAzureADToken(){if(typeof this._azureADTokenProvider=="function"){const e=await this._azureADTokenProvider();if(!e||typeof e!="string")throw new Ie(`Expected 'azureADTokenProvider' argument to return a string but it returned ${e}`);return e}}authHeaders(e){return{}}async prepareOptions(e){var n;if((n=e.headers)!=null&&n["api-key"])return super.prepareOptions(e);const t=await this._getAzureADToken();if(e.headers??(e.headers={}),t)e.headers.Authorization=`Bearer ${t}`;else if(this.apiKey!==aA)e.headers["api-key"]=this.apiKey;else throw new Ie("Unable to handle auth");return super.prepareOptions(e)}};const pY=new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations","/images/edits"]),aA="<Missing Key>";/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var hY=typeof window=="object"?window:{},Ke="0123456789abcdef".split(""),mY=[-2147483648,8388608,32768,128],ln=[24,16,8,0],qt=[];function Ou(r){r?(qt[0]=qt[16]=qt[1]=qt[2]=qt[3]=qt[4]=qt[5]=qt[6]=qt[7]=qt[8]=qt[9]=qt[10]=qt[11]=qt[12]=qt[13]=qt[14]=qt[15]=0,this.blocks=qt):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Ou.prototype.update=function(r){if(!this.finalized){var e=typeof r!="string";e&&r.constructor===hY.ArrayBuffer&&(r=new Uint8Array(r));for(var t,n=0,i,a=r.length||0,o=this.blocks;n<a;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),e)for(i=this.start;n<a&&i<64;++n)o[i>>2]|=r[n]<<ln[i++&3];else for(i=this.start;n<a&&i<64;++n)t=r.charCodeAt(n),t<128?o[i>>2]|=t<<ln[i++&3]:t<2048?(o[i>>2]|=(192|t>>6)<<ln[i++&3],o[i>>2]|=(128|t&63)<<ln[i++&3]):t<55296||t>=57344?(o[i>>2]|=(224|t>>12)<<ln[i++&3],o[i>>2]|=(128|t>>6&63)<<ln[i++&3],o[i>>2]|=(128|t&63)<<ln[i++&3]):(t=65536+((t&1023)<<10|r.charCodeAt(++n)&1023),o[i>>2]|=(240|t>>18)<<ln[i++&3],o[i>>2]|=(128|t>>12&63)<<ln[i++&3],o[i>>2]|=(128|t>>6&63)<<ln[i++&3],o[i>>2]|=(128|t&63)<<ln[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=o[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Ou.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var r=this.blocks,e=this.lastByteIndex;r[16]=this.block,r[e>>2]|=mY[e&3],this.block=r[16],e>=56&&(this.hashed||this.hash(),r[0]=this.block,r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),r[14]=this.hBytes<<3|this.bytes>>>29,r[15]=this.bytes<<3,this.hash()}};Ou.prototype.hash=function(){var r=this.h0,e=this.h1,t=this.h2,n=this.h3,i=this.h4,a,o,s,u=this.blocks;for(o=16;o<80;++o)s=u[o-3]^u[o-8]^u[o-14]^u[o-16],u[o]=s<<1|s>>>31;for(o=0;o<20;o+=5)a=e&t|~e&n,s=r<<5|r>>>27,i=s+a+i+1518500249+u[o]<<0,e=e<<30|e>>>2,a=r&e|~r&t,s=i<<5|i>>>27,n=s+a+n+1518500249+u[o+1]<<0,r=r<<30|r>>>2,a=i&r|~i&e,s=n<<5|n>>>27,t=s+a+t+1518500249+u[o+2]<<0,i=i<<30|i>>>2,a=n&i|~n&r,s=t<<5|t>>>27,e=s+a+e+1518500249+u[o+3]<<0,n=n<<30|n>>>2,a=t&n|~t&i,s=e<<5|e>>>27,r=s+a+r+1518500249+u[o+4]<<0,t=t<<30|t>>>2;for(;o<40;o+=5)a=e^t^n,s=r<<5|r>>>27,i=s+a+i+1859775393+u[o]<<0,e=e<<30|e>>>2,a=r^e^t,s=i<<5|i>>>27,n=s+a+n+1859775393+u[o+1]<<0,r=r<<30|r>>>2,a=i^r^e,s=n<<5|n>>>27,t=s+a+t+1859775393+u[o+2]<<0,i=i<<30|i>>>2,a=n^i^r,s=t<<5|t>>>27,e=s+a+e+1859775393+u[o+3]<<0,n=n<<30|n>>>2,a=t^n^i,s=e<<5|e>>>27,r=s+a+r+1859775393+u[o+4]<<0,t=t<<30|t>>>2;for(;o<60;o+=5)a=e&t|e&n|t&n,s=r<<5|r>>>27,i=s+a+i-1894007588+u[o]<<0,e=e<<30|e>>>2,a=r&e|r&t|e&t,s=i<<5|i>>>27,n=s+a+n-1894007588+u[o+1]<<0,r=r<<30|r>>>2,a=i&r|i&e|r&e,s=n<<5|n>>>27,t=s+a+t-1894007588+u[o+2]<<0,i=i<<30|i>>>2,a=n&i|n&r|i&r,s=t<<5|t>>>27,e=s+a+e-1894007588+u[o+3]<<0,n=n<<30|n>>>2,a=t&n|t&i|n&i,s=e<<5|e>>>27,r=s+a+r-1894007588+u[o+4]<<0,t=t<<30|t>>>2;for(;o<80;o+=5)a=e^t^n,s=r<<5|r>>>27,i=s+a+i-899497514+u[o]<<0,e=e<<30|e>>>2,a=r^e^t,s=i<<5|i>>>27,n=s+a+n-899497514+u[o+1]<<0,r=r<<30|r>>>2,a=i^r^e,s=n<<5|n>>>27,t=s+a+t-899497514+u[o+2]<<0,i=i<<30|i>>>2,a=n^i^r,s=t<<5|t>>>27,e=s+a+e-899497514+u[o+3]<<0,n=n<<30|n>>>2,a=t^n^i,s=e<<5|e>>>27,r=s+a+r-899497514+u[o+4]<<0,t=t<<30|t>>>2;this.h0=this.h0+r<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+n<<0,this.h4=this.h4+i<<0};Ou.prototype.hex=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,n=this.h3,i=this.h4;return Ke[r>>28&15]+Ke[r>>24&15]+Ke[r>>20&15]+Ke[r>>16&15]+Ke[r>>12&15]+Ke[r>>8&15]+Ke[r>>4&15]+Ke[r&15]+Ke[e>>28&15]+Ke[e>>24&15]+Ke[e>>20&15]+Ke[e>>16&15]+Ke[e>>12&15]+Ke[e>>8&15]+Ke[e>>4&15]+Ke[e&15]+Ke[t>>28&15]+Ke[t>>24&15]+Ke[t>>20&15]+Ke[t>>16&15]+Ke[t>>12&15]+Ke[t>>8&15]+Ke[t>>4&15]+Ke[t&15]+Ke[n>>28&15]+Ke[n>>24&15]+Ke[n>>20&15]+Ke[n>>16&15]+Ke[n>>12&15]+Ke[n>>8&15]+Ke[n>>4&15]+Ke[n&15]+Ke[i>>28&15]+Ke[i>>24&15]+Ke[i>>20&15]+Ke[i>>16&15]+Ke[i>>12&15]+Ke[i>>8&15]+Ke[i>>4&15]+Ke[i&15]};Ou.prototype.toString=Ou.prototype.hex;Ou.prototype.digest=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,n=this.h3,i=this.h4;return[r>>24&255,r>>16&255,r>>8&255,r&255,e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,i>>24&255,i>>16&255,i>>8&255,i&255]};Ou.prototype.array=Ou.prototype.digest;Ou.prototype.arrayBuffer=function(){this.finalize();var r=new ArrayBuffer(20),e=new DataView(r);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),r};let oA=!1;const gY=r=>(oA||(console.warn(["The default method for hashing keys is insecure and will be replaced in a future version,","but hasn't been replaced yet as to not break existing caches. It's recommended that you use","a more secure hashing algorithm to avoid cache poisoning.","","See this page for more information:","|","└> https://js.langchain.com/docs/troubleshooting/warnings/insecure-cache-algorithm"].join(`
`)),oA=!0),new Ou(!0).update(r).hex()),_Y=(...r)=>gY(r.join("_"));class bY{constructor(){Object.defineProperty(this,"keyEncoder",{enumerable:!0,configurable:!0,writable:!0,value:_Y})}makeDefaultKeyEncoder(e){this.keyEncoder=e}}const yY=new Map;class jP extends bY{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(this.keyEncoder(e,t))??null)}async update(e,t,n){this.cache.set(this.keyEncoder(e,t),n)}static global(){return new jP(yY)}}const vY=r=>r.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":r.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":r.startsWith("gpt-4-32k")?"gpt-4-32k":r.startsWith("gpt-4-")?"gpt-4":r.startsWith("gpt-4o")?"gpt-4o":r;function Tm(r){return typeof r!="object"||!r?!1:!!("type"in r&&r.type==="function"&&"function"in r&&typeof r.function=="object"&&r.function&&"name"in r.function&&"parameters"in r.function)}const wY=()=>!1;class SY extends gt{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??wY(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class u6 extends SY{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...n}){const{cache:i,...a}=n;super({callbacks:e??t,...a}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof i=="object"?this.cache=i:i?this.cache=jP.global():this.cache=void 0,this.caller=new ym(n??{})}async getNumTokens(e){let t;typeof e=="string"?t=e:t=e.map(i=>typeof i=="string"?i:i.type==="text"&&"text"in i?i.text:"").join("");let n=Math.ceil(t.length/4);if(!this._encoding)try{this._encoding=await QZ("modelName"in this?vY(this.modelName):"gpt2")}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}if(this._encoding)try{n=this._encoding.encode(t).length}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}return n}static _convertInputToPromptValue(e){return typeof e=="string"?new D3(e):Array.isArray(e)?new $3(e.map(yl)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...t}){const n={...this._identifyingParams(),...t,_type:this._llmType(),_model:this._modelType()};return Object.entries(n).filter(([o,s])=>s!==void 0).map(([o,s])=>`${o}:${JSON.stringify(s)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}function pv(r){const e=[];for(const t of r){let n=t;if(Array.isArray(t.content))for(let i=0;i<t.content.length;i++){const a=t.content[i];(f7(a)||p7(a))&&n===t&&(n=new t.constructor({...n,content:[...t.content.slice(0,i),h7(a),...t.content.slice(i+1)]}))}e.push(n)}return e}class Qr extends u6{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){const[t,n]=super._separateRunnableConfigFromCallOptions(e);return n.signal=t.signal,[t,n]}async invoke(e,t){const n=Qr._convertInputToPromptValue(e);return(await this.generatePrompt([n],t,t==null?void 0:t.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,t,n){throw new Error("Not implemented.")}async*_streamIterator(e,t){var n;if(this._streamResponseChunks===Qr.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,t);else{const a=Qr._convertInputToPromptValue(e).toChatMessages(),[o,s]=this._separateRunnableConfigFromCallOptionsCompat(t),u={...o.metadata,...this.getLsParams(s)},l=await zt.configure(o.callbacks,this.callbacks,o.tags,this.tags,u,this.metadata,{verbose:this.verbose}),c={options:s,invocation_params:this==null?void 0:this.invocationParams(s),batch_size:1},d=await(l==null?void 0:l.handleChatModelStart(this.toJSON(),[pv(a)],o.runId,void 0,c,void 0,void 0,o.runName));let h,f;try{for await(const m of this._streamResponseChunks(a,s,d==null?void 0:d[0])){if(m.message.id==null){const p=(n=d==null?void 0:d.at(0))==null?void 0:n.runId;p!=null&&m.message._updateId(`run-${p}`)}m.message.response_metadata={...m.generationInfo,...m.message.response_metadata},yield m.message,h?h=h.concat(m):h=m,Jj(m.message)&&m.message.usage_metadata!==void 0&&(f={tokenUsage:{promptTokens:m.message.usage_metadata.input_tokens,completionTokens:m.message.usage_metadata.output_tokens,totalTokens:m.message.usage_metadata.total_tokens}})}}catch(m){throw await Promise.all((d??[]).map(p=>p==null?void 0:p.handleLLMError(m))),m}await Promise.all((d??[]).map(m=>m==null?void 0:m.handleLLMEnd({generations:[[h]],llmOutput:f})))}}getLsParams(e){const t=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:t}}async _generateUncached(e,t,n,i){var d,h;const a=e.map(f=>f.map(yl));let o;if(i!==void 0&&i.length===a.length)o=i;else{const f={...n.metadata,...this.getLsParams(t)},m=await zt.configure(n.callbacks,this.callbacks,n.tags,this.tags,f,this.metadata,{verbose:this.verbose}),p={options:t,invocation_params:this==null?void 0:this.invocationParams(t),batch_size:1};o=await(m==null?void 0:m.handleChatModelStart(this.toJSON(),a.map(pv),n.runId,void 0,p,void 0,void 0,n.runName))}const s=[],u=[];if(!!(o!=null&&o[0].handlers.find(KV))&&!this.disableStreaming&&a.length===1&&this._streamResponseChunks!==Qr.prototype._streamResponseChunks)try{const f=await this._streamResponseChunks(a[0],t,o==null?void 0:o[0]);let m,p;for await(const g of f){if(g.message.id==null){const b=(d=o==null?void 0:o.at(0))==null?void 0:d.runId;b!=null&&g.message._updateId(`run-${b}`)}m===void 0?m=g:m=tn(m,g),Jj(g.message)&&g.message.usage_metadata!==void 0&&(p={tokenUsage:{promptTokens:g.message.usage_metadata.input_tokens,completionTokens:g.message.usage_metadata.output_tokens,totalTokens:g.message.usage_metadata.total_tokens}})}if(m===void 0)throw new Error("Received empty response from chat model call.");s.push([m]),await(o==null?void 0:o[0].handleLLMEnd({generations:s,llmOutput:p}))}catch(f){throw await(o==null?void 0:o[0].handleLLMError(f)),f}else{const f=await Promise.allSettled(a.map((m,p)=>this._generate(m,{...t,promptIndex:p},o==null?void 0:o[p])));await Promise.all(f.map(async(m,p)=>{var g,b,_;if(m.status==="fulfilled"){const y=m.value;for(const v of y.generations){if(v.message.id==null){const w=(g=o==null?void 0:o.at(0))==null?void 0:g.runId;w!=null&&v.message._updateId(`run-${w}`)}v.message.response_metadata={...v.generationInfo,...v.message.response_metadata}}return y.generations.length===1&&(y.generations[0].message.response_metadata={...y.llmOutput,...y.generations[0].message.response_metadata}),s[p]=y.generations,u[p]=y.llmOutput,(b=o==null?void 0:o[p])==null?void 0:b.handleLLMEnd({generations:[y.generations],llmOutput:y.llmOutput})}else return await((_=o==null?void 0:o[p])==null?void 0:_.handleLLMError(m.reason)),Promise.reject(m.reason)}))}const c={generations:s,llmOutput:u.length?(h=this._combineLLMOutput)==null?void 0:h.call(this,...u):void 0};return Object.defineProperty(c,h_,{value:o?{runIds:o==null?void 0:o.map(f=>f.runId)}:void 0,configurable:!0}),c}async _generateCached({messages:e,cache:t,llmStringKey:n,parsedOptions:i,handledOptions:a}){const o=e.map(g=>g.map(yl)),s={...a.metadata,...this.getLsParams(i)},u=await zt.configure(a.callbacks,this.callbacks,a.tags,this.tags,s,this.metadata,{verbose:this.verbose}),l={options:i,invocation_params:this==null?void 0:this.invocationParams(i),batch_size:1},c=await(u==null?void 0:u.handleChatModelStart(this.toJSON(),o.map(pv),a.runId,void 0,l,void 0,void 0,a.runName)),d=[],f=(await Promise.allSettled(o.map(async(g,b)=>{const _=Qr._convertInputToPromptValue(g).toString(),y=await t.lookup(_,n);return y==null&&d.push(b),y}))).map((g,b)=>({result:g,runManager:c==null?void 0:c[b]})).filter(({result:g})=>g.status==="fulfilled"&&g.value!=null||g.status==="rejected"),m=[];await Promise.all(f.map(async({result:g,runManager:b},_)=>{if(g.status==="fulfilled"){const y=g.value;return m[_]=y.map(v=>("message"in v&&mf(v.message)&&xu(v.message)&&(v.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),v.generationInfo={...v.generationInfo,tokenUsage:{}},v)),y.length&&await(b==null?void 0:b.handleLLMNewToken(y[0].text)),b==null?void 0:b.handleLLMEnd({generations:[y]},void 0,void 0,void 0,{cached:!0})}else return await(b==null?void 0:b.handleLLMError(g.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(g.reason)}));const p={generations:m,missingPromptIndices:d,startedRunManagers:c};return Object.defineProperty(p,h_,{value:c?{runIds:c==null?void 0:c.map(g=>g.runId)}:void 0,configurable:!0}),p}async generate(e,t,n){let i;Array.isArray(t)?i={stop:t}:i=t;const a=e.map(m=>m.map(yl)),[o,s]=this._separateRunnableConfigFromCallOptionsCompat(i);if(o.callbacks=o.callbacks??n,!this.cache)return this._generateUncached(a,s,o);const{cache:u}=this,l=this._getSerializedCacheKeyParametersForCall(s),{generations:c,missingPromptIndices:d,startedRunManagers:h}=await this._generateCached({messages:a,cache:u,llmStringKey:l,parsedOptions:s,handledOptions:o});let f={};if(d.length>0){const m=await this._generateUncached(d.map(p=>a[p]),s,o,h!==void 0?d.map(p=>h==null?void 0:h[p]):void 0);await Promise.all(m.generations.map(async(p,g)=>{const b=d[g];c[b]=p;const _=Qr._convertInputToPromptValue(a[b]).toString();return u.update(_,l,p)})),f=m.llmOutput??{}}return{generations:c,llmOutput:f}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,t,n){const i=e.map(a=>a.toChatMessages());return this.generate(i,t,n)}async call(e,t,n){return(await this.generate([e.map(yl)],t,n)).generations[0][0].message}async callPrompt(e,t,n){const i=e.toChatMessages();return this.call(i,t,n)}async predictMessages(e,t,n){return this.call(e,t,n)}async predict(e,t,n){const i=new Al(e),a=await this.call([i],t,n);if(typeof a.content!="string")throw new Error("Cannot use predict when output is not a string.");return a.content}withStructuredOutput(e,t){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(t!=null&&t.strict)throw new Error('"strict" mode is not supported for this model by default.');const n=e,i=t==null?void 0:t.name,a=A3(n)??"A function available to call.",o=t==null?void 0:t.method,s=t==null?void 0:t.includeRaw;if(o==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let u=i??"extract",l;lf(n)?l=[{type:"function",function:{name:u,description:a,parameters:Zu(n)}}]:("name"in n&&(u=n.name),l=[{type:"function",function:{name:u,description:a,parameters:n}}]);const c=this.bindTools(l),d=vm.from(p=>{if(!p.tool_calls||p.tool_calls.length===0)throw new Error("No tool calls found in the response.");const g=p.tool_calls.find(b=>b.name===u);if(!g)throw new Error(`No tool call found with name ${u}.`);return g.args});if(!s)return c.pipe(d).withConfig({runName:"StructuredOutput"});const h=$u.assign({parsed:(p,g)=>d.invoke(p.raw,g)}),f=$u.assign({parsed:()=>null}),m=h.withFallbacks({fallbacks:[f]});return Nr.from([{raw:c},m]).withConfig({runName:"StructuredOutputRunnable"})}}class TP extends gt{parseResultWithPrompt(e,t,n){return this.parseResult(e,n)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,t){return typeof e=="string"?this._callWithConfig(async(n,i)=>this.parseResult([{text:n}],i==null?void 0:i.callbacks),e,{...t,runType:"parser"}):this._callWithConfig(async(n,i)=>this.parseResult([{message:n,text:this._baseMessageToString(n)}],i==null?void 0:i.callbacks),e,{...t,runType:"parser"})}}class l6 extends TP{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,n){return this.parse(e,n)}_type(){throw new Error("_type not implemented")}}class df extends Error{constructor(e,t,n,i=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=t,this.observation=n,this.sendToLLM=i,i&&(n===void 0||t===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");K_(this,"OUTPUT_PARSING_FAILURE")}}class OY extends l6{async*_transform(e){for await(const t of e)typeof t=="string"?yield this.parseResult([{text:t}]):yield this.parseResult([{message:t,text:this._baseMessageToString(t)}])}async*transform(e,t){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...t,runType:"parser"})}}class c6 extends OY{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let t,n;for await(const i of e){if(typeof i!="string"&&typeof i.content!="string")throw new Error("Cannot handle non-string output.");let a;if(v7(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");a=new wr({message:i,text:i.content})}else if(mf(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");a=new wr({message:R7(i),text:i.content})}else a=new nl({text:i});n===void 0?n=a:n=n.concat(a);const o=await this.parsePartialResult([n]);o!=null&&!jR(o,t)&&(this.diff?yield this._diff(t,o):yield o,t=o)}}getFormatInstructions(){return""}}class eC extends l6{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const t=g3(Object.fromEntries(Object.entries(e).map(([n,i])=>[n,m3().describe(i)])));return new this(t)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(Zu(this.schema))}
\`\`\`
`}async parse(e){try{const n=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(i,a)=>`"${a.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await T3(this.schema,JSON.parse(n))}catch(t){throw new df(`Failed to parse. Text: "${e}". Error: ${t}`,e)}}}class tC extends c6{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,t){if(t)return e?vJ(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return Gj(e[0].text)}async parse(e){return Gj(e,JSON.parse)}getFormatInstructions(){return""}}function AP(r,e){if(r.function===void 0)return;let t;if(e!=null&&e.partial)try{t=IC(r.function.arguments??"{}")}catch{return}else try{t=JSON.parse(r.function.arguments)}catch(i){throw new df([`Function "${r.function.name}" arguments:`,"",r.function.arguments,"","are not valid JSON.",`Error: ${i.message}`].join(`
`))}const n={name:r.function.name,args:t,type:"tool_call"};return e!=null&&e.returnId&&(n.id=r.id),n}function d6(r){if(r.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:r.id,type:"function",function:{name:r.name,arguments:JSON.stringify(r.args)}}}function f6(r,e){var t,n;return{name:(t=r.function)==null?void 0:t.name,args:(n=r.function)==null?void 0:n.arguments,id:r.id,error:e,type:"invalid_tool_call"}}class EY extends c6{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=(e==null?void 0:e.returnId)??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,t=!0){var o;const n=e[0].message;let i;if(xu(n)&&((o=n.tool_calls)!=null&&o.length)?i=n.tool_calls.map(s=>{const{id:u,...l}=s;return this.returnId?{id:u,...l}:l}):n.additional_kwargs.tool_calls!==void 0&&(i=JSON.parse(JSON.stringify(n.additional_kwargs.tool_calls)).map(u=>AP(u,{returnId:this.returnId,partial:t}))),!i)return[];const a=[];for(const s of i)if(s!==void 0){const u={type:s.name,args:s.args,id:s.id};a.push(u)}return a}}class R_ extends EY{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){var n;if(this.zodSchema===void 0)return e;const t=await j3(this.zodSchema,e);if(t.success)return t.data;throw new df(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify((n=t.error)==null?void 0:n.issues)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const n=(await super.parsePartialResult(e)).filter(a=>a.type===this.keyName);let i=n;if(n.length)return this.returnId||(i=n.map(a=>a.args)),this.returnSingle?i[0]:i}async parseResult(e){const n=(await super.parsePartialResult(e,!1)).filter(o=>o.type===this.keyName);let i=n;return n.length?(this.returnId||(i=n.map(o=>o.args)),this.returnSingle?this._validateResult(i[0]):await Promise.all(i.map(o=>this._validateResult(o)))):void 0}}const RY=Symbol("Let zodToJsonSchema decide on which parser to use"),sA={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},CY=r=>typeof r=="string"?{...sA,basePath:["#"],definitions:{},name:r}:{...sA,basePath:["#"],definitions:{},...r},rC=r=>"_def"in r?r._def:r;function PY(r){if(!r)return!0;for(const e in r)return!1;return!0}const jY=r=>{const e=CY(r),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[rC(i),{def:rC(i),path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function p6(r,e,t,n){n!=null&&n.errorMessages&&t&&(r.errorMessage={...r.errorMessage,[e]:t})}function ut(r,e,t,n,i){r[e]=t,p6(r,e,n,i)}function TY(){return{}}function AY(r,e){var n,i;const t={type:"array"};return((i=(n=r.type)==null?void 0:n._def)==null?void 0:i.typeName)!==ue.ZodAny&&(t.items=tt(r.type._def,{...e,currentPath:[...e.currentPath,"items"]})),r.minLength&&ut(t,"minItems",r.minLength.value,r.minLength.message,e),r.maxLength&&ut(t,"maxItems",r.maxLength.value,r.maxLength.message,e),r.exactLength&&(ut(t,"minItems",r.exactLength.value,r.exactLength.message,e),ut(t,"maxItems",r.exactLength.value,r.exactLength.message,e)),t}function MY(r,e){const t={type:"integer",format:"int64"};if(!r.checks)return t;for(const n of r.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?ut(t,"minimum",n.value,n.message,e):ut(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),ut(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?ut(t,"maximum",n.value,n.message,e):ut(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),ut(t,"maximum",n.value,n.message,e));break;case"multipleOf":ut(t,"multipleOf",n.value,n.message,e);break}return t}function IY(){return{type:"boolean"}}function xY(r,e){return tt(r.type._def,e)}const DY=(r,e)=>tt(r.innerType._def,e);function h6(r,e,t){const n=t??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((i,a)=>h6(r,e,i))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return $Y(r,e)}}const $Y=(r,e)=>{const t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(const n of r.checks)switch(n.kind){case"min":ut(t,"minimum",n.value,n.message,e);break;case"max":ut(t,"maximum",n.value,n.message,e);break}return t};function NY(r,e){return{...tt(r.innerType._def,e),default:r.defaultValue()}}function qY(r,e,t){return e.effectStrategy==="input"?tt(r.schema._def,e,t):{}}function BY(r){return{type:"string",enum:[...r.values]}}const UY=r=>"type"in r&&r.type==="string"?!1:"allOf"in r;function zY(r,e){const t=[tt(r.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),tt(r.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return t.forEach(a=>{if(UY(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let o=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:s,...u}=a;o=u}else n=void 0;i.push(o)}}),i.length?{allOf:i,...n}:void 0}function LY(r,e){const t=typeof r.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(r.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[r.value]}:{type:t==="bigint"?"integer":t,const:r.value}}let hv;const Jl={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(hv===void 0&&(hv=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),hv),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function m6(r,e){const t={type:"string"};function n(i){return e.patternStrategy==="escape"?FY(i):i}if(r.checks)for(const i of r.checks)switch(i.kind){case"min":ut(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,i.value):i.value,i.message,e);break;case"max":ut(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,i.value):i.value,i.message,e);break;case"email":switch(e.emailStrategy){case"format:email":cn(t,"email",i.message,e);break;case"format:idn-email":cn(t,"idn-email",i.message,e);break;case"pattern:zod":dn(t,Jl.email,i.message,e);break}break;case"url":cn(t,"uri",i.message,e);break;case"uuid":cn(t,"uuid",i.message,e);break;case"regex":dn(t,i.regex,i.message,e);break;case"cuid":dn(t,Jl.cuid,i.message,e);break;case"cuid2":dn(t,Jl.cuid2,i.message,e);break;case"startsWith":dn(t,RegExp(`^${n(i.value)}`),i.message,e);break;case"endsWith":dn(t,RegExp(`${n(i.value)}$`),i.message,e);break;case"datetime":cn(t,"date-time",i.message,e);break;case"date":cn(t,"date",i.message,e);break;case"time":cn(t,"time",i.message,e);break;case"duration":cn(t,"duration",i.message,e);break;case"length":ut(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,i.value):i.value,i.message,e),ut(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,i.value):i.value,i.message,e);break;case"includes":{dn(t,RegExp(n(i.value)),i.message,e);break}case"ip":{i.version!=="v6"&&cn(t,"ipv4",i.message,e),i.version!=="v4"&&cn(t,"ipv6",i.message,e);break}case"emoji":dn(t,Jl.emoji,i.message,e);break;case"ulid":{dn(t,Jl.ulid,i.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{cn(t,"binary",i.message,e);break}case"contentEncoding:base64":{ut(t,"contentEncoding","base64",i.message,e);break}case"pattern:zod":{dn(t,Jl.base64,i.message,e);break}}break}case"nanoid":dn(t,Jl.nanoid,i.message,e)}return t}const FY=r=>Array.from(r).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),cn=(r,e,t,n)=>{var i;r.format||(i=r.anyOf)!=null&&i.some(a=>a.format)?(r.anyOf||(r.anyOf=[]),r.format&&(r.anyOf.push({format:r.format,...r.errorMessage&&n.errorMessages&&{errorMessage:{format:r.errorMessage.format}}}),delete r.format,r.errorMessage&&(delete r.errorMessage.format,Object.keys(r.errorMessage).length===0&&delete r.errorMessage)),r.anyOf.push({format:e,...t&&n.errorMessages&&{errorMessage:{format:t}}})):ut(r,"format",e,t,n)},dn=(r,e,t,n)=>{var i;r.pattern||(i=r.allOf)!=null&&i.some(a=>a.pattern)?(r.allOf||(r.allOf=[]),r.pattern&&(r.allOf.push({pattern:r.pattern,...r.errorMessage&&n.errorMessages&&{errorMessage:{pattern:r.errorMessage.pattern}}}),delete r.pattern,r.errorMessage&&(delete r.errorMessage.pattern,Object.keys(r.errorMessage).length===0&&delete r.errorMessage)),r.allOf.push({pattern:uA(e,n),...t&&n.errorMessages&&{errorMessage:{pattern:t}}})):ut(r,"pattern",uA(e,n),t,n)},uA=(r,e)=>{var l;const t=typeof r=="function"?r():r;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},i=n.i?t.source.toLowerCase():t.source;let a="",o=!1,s=!1,u=!1;for(let c=0;c<i.length;c++){if(o){a+=i[c],o=!1;continue}if(n.i){if(s){if(i[c].match(/[a-z]/)){u?(a+=i[c],a+=`${i[c-2]}-${i[c]}`.toUpperCase(),u=!1):i[c+1]==="-"&&((l=i[c+2])!=null&&l.match(/[a-z]/))?(a+=i[c],u=!0):a+=`${i[c]}${i[c].toUpperCase()}`;continue}}else if(i[c].match(/[a-z]/)){a+=`[${i[c]}${i[c].toUpperCase()}]`;continue}}if(n.m){if(i[c]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(i[c]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&i[c]==="."){a+=s?`${i[c]}\r
`:`[${i[c]}\r
]`;continue}a+=i[c],i[c]==="\\"?o=!0:s&&i[c]==="]"?s=!1:!s&&i[c]==="["&&(s=!0)}try{const c=new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return a};function g6(r,e){var n,i,a,o;if(e.target==="openApi3"&&((n=r.keyType)==null?void 0:n._def.typeName)===ue.ZodEnum)return{type:"object",required:r.keyType._def.values,properties:r.keyType._def.values.reduce((s,u)=>({...s,[u]:tt(r.valueType._def,{...e,currentPath:[...e.currentPath,"properties",u]})??{}}),{}),additionalProperties:!1};const t={type:"object",additionalProperties:tt(r.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return t;if(((i=r.keyType)==null?void 0:i._def.typeName)===ue.ZodString&&((a=r.keyType._def.checks)!=null&&a.length)){const s=Object.entries(m6(r.keyType._def,e)).reduce((u,[l,c])=>l==="type"?u:{...u,[l]:c},{});return{...t,propertyNames:s}}else if(((o=r.keyType)==null?void 0:o._def.typeName)===ue.ZodEnum)return{...t,propertyNames:{enum:r.keyType._def.values}};return t}function kY(r,e){if(e.mapStrategy==="record")return g6(r,e);const t=tt(r.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=tt(r.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,n],minItems:2,maxItems:2}}}function VY(r){const e=r.values,n=Object.keys(r.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(n.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}function HY(){return{not:{}}}function KY(r){return r.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const C_={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function WY(r,e){if(e.target==="openApi3")return lA(r,e);const t=r.options instanceof Map?Array.from(r.options.values()):r.options;if(t.every(n=>n._def.typeName in C_&&(!n._def.checks||!n._def.checks.length))){const n=t.reduce((i,a)=>{const o=C_[a._def.typeName];return o&&!i.includes(o)?[...i,o]:i},[]);return{type:n.length>1?n:n[0]}}else if(t.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=t.reduce((i,a)=>{const o=typeof a._def.value;switch(o){case"string":case"number":case"boolean":return[...i,o];case"bigint":return[...i,"integer"];case"object":if(a._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===t.length){const i=n.filter((a,o,s)=>s.indexOf(a)===o);return{type:i.length>1?i:i[0],enum:t.reduce((a,o)=>a.includes(o._def.value)?a:[...a,o._def.value],[])}}}else if(t.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((n,i)=>[...n,...i._def.values.filter(a=>!n.includes(a))],[])};return lA(r,e)}const lA=(r,e)=>{const t=(r.options instanceof Map?Array.from(r.options.values()):r.options).map((n,i)=>tt(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return t.length?{anyOf:t}:void 0};function GY(r,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(r.innerType._def.typeName)&&(!r.innerType._def.checks||!r.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:C_[r.innerType._def.typeName],nullable:!0}:{type:[C_[r.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const n=tt(r.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const t=tt(r.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function JY(r,e){const t={type:"number"};if(!r.checks)return t;for(const n of r.checks)switch(n.kind){case"int":t.type="integer",p6(t,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?ut(t,"minimum",n.value,n.message,e):ut(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),ut(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?ut(t,"maximum",n.value,n.message,e):ut(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),ut(t,"maximum",n.value,n.message,e));break;case"multipleOf":ut(t,"multipleOf",n.value,n.message,e);break}return t}function XY(r,e){return e.removeAdditionalStrategy==="strict"?r.catchall._def.typeName==="ZodNever"?r.unknownKeys!=="strict":tt(r.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:r.catchall._def.typeName==="ZodNever"?r.unknownKeys==="passthrough":tt(r.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function ZY(r,e){const t={type:"object",...Object.entries(r.shape()).reduce((n,[i,a])=>{if(a===void 0||a._def===void 0)return n;const o=[...e.currentPath,"properties",i],s=tt(a._def,{...e,currentPath:o,propertyPath:o});return s===void 0?n:(e.openaiStrictMode&&a.isOptional()&&!a.isNullable()&&console.warn(`Zod field at \`${o.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required
This will become an error in a future version of the SDK.`),{properties:{...n.properties,[i]:s},required:a.isOptional()&&!e.openaiStrictMode?n.required:[...n.required,i]})},{properties:{},required:[]}),additionalProperties:XY(r,e)};return t.required.length||delete t.required,t}const QY=(r,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return tt(r.innerType._def,e);const t=tt(r.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}},YY=(r,e)=>{if(e.pipeStrategy==="input")return tt(r.in._def,e);if(e.pipeStrategy==="output")return tt(r.out._def,e);const t=tt(r.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=tt(r.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,n].filter(i=>i!==void 0)}};function eee(r,e){return tt(r.type._def,e)}function tee(r,e){const n={type:"array",uniqueItems:!0,items:tt(r.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return r.minSize&&ut(n,"minItems",r.minSize.value,r.minSize.message,e),r.maxSize&&ut(n,"maxItems",r.maxSize.value,r.maxSize.message,e),n}function ree(r,e){return r.rest?{type:"array",minItems:r.items.length,items:r.items.map((t,n)=>tt(t._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((t,n)=>n===void 0?t:[...t,n],[]),additionalItems:tt(r.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:r.items.length,maxItems:r.items.length,items:r.items.map((t,n)=>tt(t._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((t,n)=>n===void 0?t:[...t,n],[])}}function nee(){return{not:{}}}function iee(){return{}}const aee=(r,e)=>tt(r.innerType._def,e);function tt(r,e,t=!1){var o;const n=e.seen.get(r);if(e.override){const s=(o=e.override)==null?void 0:o.call(e,r,e,n,t);if(s!==RY)return s}if(n&&!t){const s=oee(n,e);if(s!==void 0)return"$ref"in s&&e.seenRefs.add(s.$ref),s}const i={def:r,path:e.currentPath,jsonSchema:void 0};e.seen.set(r,i);const a=uee(r,r.typeName,e,t);return a&&lee(r,e,a),i.jsonSchema=a,a}const oee=(r,e)=>{switch(e.$refStrategy){case"root":return{$ref:r.path.join("/")};case"extract-to-root":const t=r.path.slice(e.basePath.length+1).join("_");return t!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[t]=r.def),{$ref:[...e.basePath,e.definitionPath,t].join("/")};case"relative":return{$ref:see(e.currentPath,r.path)};case"none":case"seen":return r.path.length<e.currentPath.length&&r.path.every((n,i)=>e.currentPath[i]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},see=(r,e)=>{let t=0;for(;t<r.length&&t<e.length&&r[t]===e[t];t++);return[(r.length-t).toString(),...e.slice(t)].join("/")},uee=(r,e,t,n)=>{switch(e){case ue.ZodString:return m6(r,t);case ue.ZodNumber:return JY(r,t);case ue.ZodObject:return ZY(r,t);case ue.ZodBigInt:return MY(r,t);case ue.ZodBoolean:return IY();case ue.ZodDate:return h6(r,t);case ue.ZodUndefined:return nee();case ue.ZodNull:return KY(t);case ue.ZodArray:return AY(r,t);case ue.ZodUnion:case ue.ZodDiscriminatedUnion:return WY(r,t);case ue.ZodIntersection:return zY(r,t);case ue.ZodTuple:return ree(r,t);case ue.ZodRecord:return g6(r,t);case ue.ZodLiteral:return LY(r,t);case ue.ZodEnum:return BY(r);case ue.ZodNativeEnum:return VY(r);case ue.ZodNullable:return GY(r,t);case ue.ZodOptional:return QY(r,t);case ue.ZodMap:return kY(r,t);case ue.ZodSet:return tee(r,t);case ue.ZodLazy:return tt(r.getter()._def,t);case ue.ZodPromise:return eee(r,t);case ue.ZodNaN:case ue.ZodNever:return HY();case ue.ZodEffects:return qY(r,t,n);case ue.ZodAny:return TY();case ue.ZodUnknown:return iee();case ue.ZodDefault:return NY(r,t);case ue.ZodBranded:return xY(r,t);case ue.ZodReadonly:return aee(r,t);case ue.ZodCatch:return DY(r,t);case ue.ZodPipeline:return YY(r,t);case ue.ZodFunction:case ue.ZodVoid:case ue.ZodSymbol:return;default:return(i=>{})()}},lee=(r,e,t)=>(r.description&&(t.description=r.description,e.markdownDescription&&(t.markdownDescription=r.description)),t),cee=(r,e)=>{const t=jY(e),n=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,i=tt(r._def,n===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,n]},!1)??{},a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(i.title=a);const o=(()=>{if(PY(t.definitions))return;const u={},l=new Set;for(let c=0;c<500;c++){const d=Object.entries(t.definitions).filter(([h])=>!l.has(h));if(d.length===0)break;for(const[h,f]of d)u[h]=tt(rC(f),{...t,currentPath:[...t.basePath,t.definitionPath,h]},!0)??{},l.add(h)}return u})(),s=n===void 0?o?{...i,[t.definitionPath]:o}:i:t.nameStrategy==="duplicate-ref"?{...i,...o||t.seenRefs.size?{[t.definitionPath]:{...o,...t.seenRefs.size?{[n]:i}:void 0}}:void 0}:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,n].join("/"),[t.definitionPath]:{...o,[n]:i}};return t.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="jsonSchema2019-09"&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),s};function _6(r,e){return cee(r,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function dee(r,e,t){return VQ({type:"json_schema",json_schema:{...t,name:e,strict:!0,schema:_6(r,{name:e})}},n=>r.parse(JSON.parse(n)))}function fee(r){return HQ({type:"function",function:{name:r.name,parameters:_6(r.parameters,{name:r.name}),strict:!0,...r.description?{description:r.description}:void 0}},{callback:r.function,parser:e=>r.parameters.parse(JSON.parse(e))})}function mb(r){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:t,azureOpenAIApiKey:n,azureOpenAIBasePath:i,baseURL:a,azureADTokenProvider:o,azureOpenAIEndpoint:s}=r;if((n||o)&&i&&e)return`${i}/${e}`;if((n||o)&&s&&e)return`${s}/openai/deployments/${e}`;if(n||o){if(!t)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${t}.openai.azure.com/openai/deployments/${e}`}return a}function pee(r){return r!==void 0&&Array.isArray(r.lc_namespace)}function hee(r){return r!==void 0&&gt.isRunnable(r)&&"lc_name"in r.constructor&&typeof r.constructor.lc_name=="function"&&r.constructor.lc_name()==="RunnableToolLike"}function mee(r){return!!r&&typeof r=="object"&&"name"in r&&"schema"in r&&(lf(r.schema)||r.schema!=null&&typeof r.schema=="object"&&"type"in r.schema&&typeof r.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(r.schema.type))}function Sf(r){return mee(r)||hee(r)||pee(r)}function b6(r,e){const t=typeof e=="number"?void 0:e;return{name:r.name,description:r.description,parameters:Zu(r.schema),...(t==null?void 0:t.strict)!==void 0?{strict:t.strict}:{}}}function gee(r,e){let t;return Sf(r)?t={type:"function",function:b6(r)}:t=r,t}function ug(r,e){return r.lc_error_code=e,r.message=`${r.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,r}function P_(r){let e;return r.constructor.name===nb.name?(e=new Error(r.message),e.name="TimeoutError"):r.constructor.name===qr.name?(e=new Error(r.message),e.name="AbortError"):r.status===400&&r.message.includes("tool_calls")?e=ug(r,"INVALID_TOOL_RESULTS"):r.status===401?e=ug(r,"MODEL_AUTHENTICATION"):r.status===429?e=ug(r,"MODEL_RATE_LIMIT"):r.status===404?e=ug(r,"MODEL_NOT_FOUND"):e=r,e}function _ee(r){if(r)return r==="any"||r==="required"?"required":r==="auto"?"auto":r==="none"?"none":typeof r=="string"?{type:"function",function:{name:r}}:r}function bee(r){return r.anyOf!==void 0&&Array.isArray(r.anyOf)}function yee(r){const e=["namespace functions {",""];for(const t of r)t.description&&e.push(`// ${t.description}`),Object.keys(t.parameters.properties??{}).length>0?(e.push(`type ${t.name} = (_: {`),e.push(y6(t.parameters,0)),e.push("}) => any;")):e.push(`type ${t.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function y6(r,e){var n;const t=[];for(const[i,a]of Object.entries(r.properties??{}))a.description&&e<2&&t.push(`// ${a.description}`),(n=r.required)!=null&&n.includes(i)?t.push(`${i}: ${j_(a,e)},`):t.push(`${i}?: ${j_(a,e)},`);return t.map(i=>" ".repeat(e)+i).join(`
`)}function j_(r,e){if(bee(r))return r.anyOf.map(t=>j_(t,e)).join(" | ");switch(r.type){case"string":return r.enum?r.enum.map(t=>`"${t}"`).join(" | "):"string";case"number":return r.enum?r.enum.map(t=>`${t}`).join(" | "):"number";case"integer":return r.enum?r.enum.map(t=>`${t}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",y6(r,e+2),"}"].join(`
`);case"array":return r.items?`${j_(r.items,e)}[]`:"any[]";default:return""}}function vee(r,e){let t;if(Sf(r)){const n=fee({name:r.name,parameters:r.schema,description:r.description});n.function.parameters?t={type:n.type,function:{name:n.function.name,description:n.function.description,parameters:n.function.parameters,...(e==null?void 0:e.strict)!==void 0?{strict:e.strict}:{}}}:t={type:"function",function:b6(r,e)}}else t=r;return(e==null?void 0:e.strict)!==void 0&&(t.function.strict=e.strict),t}function wee(r){return r.role!=="system"&&r.role!=="developer"&&r.role!=="assistant"&&r.role!=="user"&&r.role!=="function"&&r.role!=="tool"&&console.warn(`Unknown message role: ${r.role}`),r.role}function v6(r){const e=r._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!hd.isInstance(r))throw new Error("Invalid generic chat message");return wee(r)}default:throw new Error(`Unknown message type: ${e}`)}}function See(r,e,t){const n=r.tool_calls;switch(r.role){case"assistant":{const i=[],a=[];for(const u of n??[])try{i.push(AP(u,{returnId:!0}))}catch(l){a.push(f6(u,l.message))}const o={function_call:r.function_call,tool_calls:n};t!==void 0&&(o.__raw_response=e);const s={model_name:e.model,...e.system_fingerprint?{usage:{...e.usage},system_fingerprint:e.system_fingerprint}:{}};return r.audio&&(o.audio=r.audio),new Su({content:r.content||"",tool_calls:i,invalid_tool_calls:a,additional_kwargs:o,response_metadata:s,id:e.id})}default:return new hd(r.content||"",r.role??"unknown")}}function Oee(r,e,t,n){var u,l;const i=r.role??t,a=r.content??"";let o;r.function_call?o={function_call:r.function_call}:r.tool_calls?o={tool_calls:r.tool_calls}:o={},n&&(o.__raw_response=e),r.audio&&(o.audio={...r.audio,index:e.choices[0].index});const s={usage:{...e.usage}};if(i==="user")return new bm({content:a,response_metadata:s});if(i==="assistant"){const c=[];if(Array.isArray(r.tool_calls))for(const d of r.tool_calls)c.push({name:(u=d.function)==null?void 0:u.name,args:(l=d.function)==null?void 0:l.arguments,id:d.id,index:d.index,type:"tool_call_chunk"});return new ft({content:a,tool_call_chunks:c,additional_kwargs:o,id:e.id,response_metadata:s})}else return i==="system"?new rf({content:a,response_metadata:s}):i==="developer"?new rf({content:a,response_metadata:s,additional_kwargs:{__openai_role__:"developer"}}):i==="function"?new G_({content:a,additional_kwargs:o,name:r.name,response_metadata:s}):i==="tool"?new xC({content:a,additional_kwargs:o,tool_call_id:r.tool_call_id,response_metadata:s}):new _m({content:a,role:i,response_metadata:s})}function cA(r,e){return r.flatMap(t=>{var a;let n=v6(t);n==="system"&&(e!=null&&e.startsWith("o1"))&&(n="developer");const i={role:n,content:t.content};if(t.name!=null&&(i.name=t.name),t.additional_kwargs.function_call!=null&&(i.function_call=t.additional_kwargs.function_call,i.content=null),xu(t)&&((a=t.tool_calls)!=null&&a.length)?(i.tool_calls=t.tool_calls.map(d6),i.content=null):(t.additional_kwargs.tool_calls!=null&&(i.tool_calls=t.additional_kwargs.tool_calls),t.tool_call_id!=null&&(i.tool_call_id=t.tool_call_id)),t.additional_kwargs.audio&&typeof t.additional_kwargs.audio=="object"&&"id"in t.additional_kwargs.audio){const o={role:"assistant",audio:{id:t.additional_kwargs.audio.id}};return[i,o]}return i})}function dA(r,e){return Tm(r)?(e==null?void 0:e.strict)!==void 0?{...r,function:{...r.function,strict:e.strict}}:r:vee(r,e)}class MP extends Qr{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning_effort"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,t){var n,i,a,o,s,u,l,c,d;if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureADTokenProvider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIEndpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoningEffort",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(e==null?void 0:e.apiKey)??(e==null?void 0:e.openAIApiKey)??((n=e==null?void 0:e.configuration)==null?void 0:n.apiKey)??ot("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.azureOpenAIApiKey=(e==null?void 0:e.azureOpenAIApiKey)??ot("AZURE_OPENAI_API_KEY"),this.azureADTokenProvider=(e==null?void 0:e.azureADTokenProvider)??void 0,!this.azureOpenAIApiKey&&!this.apiKey&&!this.azureADTokenProvider)throw new Error("OpenAI or Azure OpenAI API key or Token Provider not found");if(this.azureOpenAIApiInstanceName=(e==null?void 0:e.azureOpenAIApiInstanceName)??ot("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e==null?void 0:e.azureOpenAIApiDeploymentName)??ot("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=(e==null?void 0:e.azureOpenAIApiVersion)??ot("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=(e==null?void 0:e.azureOpenAIBasePath)??ot("AZURE_OPENAI_BASE_PATH"),this.organization=((i=e==null?void 0:e.configuration)==null?void 0:i.organization)??ot("OPENAI_ORGANIZATION"),this.azureOpenAIEndpoint=(e==null?void 0:e.azureOpenAIEndpoint)??ot("AZURE_OPENAI_ENDPOINT"),this.modelName=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.model=this.modelName,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.maxTokens=e==null?void 0:e.maxTokens,this.logprobs=e==null?void 0:e.logprobs,this.topLogprobs=e==null?void 0:e.topLogprobs,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=(e==null?void 0:e.stopSequences)??(e==null?void 0:e.stop),this.stopSequences=this==null?void 0:this.stop,this.user=e==null?void 0:e.user,this.__includeRawResponse=e==null?void 0:e.__includeRawResponse,this.audio=e==null?void 0:e.audio,this.modalities=e==null?void 0:e.modalities,this.reasoningEffort=e==null?void 0:e.reasoningEffort,this.azureOpenAIApiKey||this.azureADTokenProvider){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath&&!this.azureOpenAIEndpoint)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName&&this.azureOpenAIBasePath){const h=this.azureOpenAIBasePath.split("/openai/deployments/");if(h.length===2){const[,f]=h;this.azureOpenAIApiDeploymentName=f}}if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found");this.apiKey=this.apiKey??"",this.streamUsage=!1}this.model==="o1"&&(this.disableStreaming=!0),this.streaming=(e==null?void 0:e.streaming)??!1,this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage,this.clientConfig={apiKey:this.apiKey,organization:this.organization,baseURL:(t==null?void 0:t.basePath)??((a=e==null?void 0:e.configuration)==null?void 0:a.basePath),dangerouslyAllowBrowser:!0,defaultHeaders:((o=t==null?void 0:t.baseOptions)==null?void 0:o.headers)??((u=(s=e==null?void 0:e.configuration)==null?void 0:s.baseOptions)==null?void 0:u.headers),defaultQuery:((l=t==null?void 0:t.baseOptions)==null?void 0:l.params)??((d=(c=e==null?void 0:e.configuration)==null?void 0:c.baseOptions)==null?void 0:d.params),...t,...e==null?void 0:e.configuration},(e==null?void 0:e.supportsStrictToolCalling)!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling)}getLsParams(e){const t=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??void 0,ls_max_tokens:t.max_tokens??void 0,ls_stop:e.stop}}bindTools(e,t){let n;return(t==null?void 0:t.strict)!==void 0?n=t.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling),this.bind({tools:e.map(i=>dA(i,{strict:n})),...t})}createResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&lg(e.json_schema.schema)?dee(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}invocationParams(e,t){var s;let n;(e==null?void 0:e.strict)!==void 0?n=e.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling);let i={};(e==null?void 0:e.stream_options)!==void 0?i={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||t!=null&&t.streaming)&&(i={stream_options:{include_usage:!0}});const a={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(e==null?void 0:e.stop)??this.stopSequences,user:this.user,stream:this.streaming,functions:e==null?void 0:e.functions,function_call:e==null?void 0:e.function_call,tools:(s=e==null?void 0:e.tools)!=null&&s.length?e.tools.map(u=>dA(u,{strict:n})):void 0,tool_choice:_ee(e==null?void 0:e.tool_choice),response_format:this.createResponseFormat(e==null?void 0:e.response_format),seed:e==null?void 0:e.seed,...i,parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,...this.audio||e!=null&&e.audio?{audio:this.audio||(e==null?void 0:e.audio)}:{},...this.modalities||e!=null&&e.modalities?{modalities:this.modalities||(e==null?void 0:e.modalities)}:{},...this.modelKwargs};(e==null?void 0:e.prediction)!==void 0&&(a.prediction=e.prediction);const o=(e==null?void 0:e.reasoning_effort)??this.reasoningEffort;return o!==void 0&&(a.reasoning_effort=o),a}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,t,n){var l,c,d,h,f,m,p,g,b,_;const i=cA(e,this.model),a={...this.invocationParams(t,{streaming:!0}),messages:i,stream:!0};let o;const s=await this.completionWithRetry(a,t);let u;for await(const y of s){const v=(l=y==null?void 0:y.choices)==null?void 0:l[0];if(y.usage&&(u=y.usage),!v)continue;const{delta:w}=v;if(!w)continue;const S=Oee(w,y,o,this.__includeRawResponse);o=w.role??o;const R={prompt:t.promptIndex??0,completion:v.index??0};if(typeof S.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const P={...R};v.finish_reason!=null&&(P.finish_reason=v.finish_reason,P.system_fingerprint=y.system_fingerprint,P.model_name=y.model),this.logprobs&&(P.logprobs=v.logprobs);const C=new wr({message:S,text:S.content,generationInfo:P});yield C,await(n==null?void 0:n.handleLLMNewToken(C.text??"",R,void 0,void 0,void 0,{chunk:C}))}if(u){const y={...((c=u.prompt_tokens_details)==null?void 0:c.audio_tokens)!==null&&{audio:(d=u.prompt_tokens_details)==null?void 0:d.audio_tokens},...((h=u.prompt_tokens_details)==null?void 0:h.cached_tokens)!==null&&{cache_read:(f=u.prompt_tokens_details)==null?void 0:f.cached_tokens}},v={...((m=u.completion_tokens_details)==null?void 0:m.audio_tokens)!==null&&{audio:(p=u.completion_tokens_details)==null?void 0:p.audio_tokens},...((g=u.completion_tokens_details)==null?void 0:g.reasoning_tokens)!==null&&{reasoning:(b=u.completion_tokens_details)==null?void 0:b.reasoning_tokens}};yield new wr({message:new ft({content:"",response_metadata:{usage:{...u}},usage_metadata:{input_tokens:u.prompt_tokens,output_tokens:u.completion_tokens,total_tokens:u.total_tokens,...Object.keys(y).length>0&&{input_token_details:y},...Object.keys(v).length>0&&{output_token_details:v}}}),text:""})}if((_=t.signal)!=null&&_.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _generate(e,t,n){var s,u;const i={},a=this.invocationParams(t),o=cA(e,this.model);if(a.stream){const l=this._streamResponseChunks(e,t,n),c={};for await(const g of l){g.message.response_metadata={...g.generationInfo,...g.message.response_metadata};const b=((s=g.generationInfo)==null?void 0:s.completion)??0;c[b]===void 0?c[b]=g:c[b]=c[b].concat(g)}const d=Object.entries(c).sort(([g],[b])=>parseInt(g,10)-parseInt(b,10)).map(([g,b])=>b),{functions:h,function_call:f}=this.invocationParams(t),m=await this.getEstimatedTokenCountFromPrompt(e,h,f),p=await this.getNumTokensFromGenerations(d);return i.input_tokens=m,i.output_tokens=p,i.total_tokens=m+p,{generations:d,llmOutput:{estimatedTokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}else{let l;t.response_format&&t.response_format.type==="json_schema"?l=await this.betaParsedCompletionWithRetry({...a,stream:!1,messages:o},{signal:t==null?void 0:t.signal,...t==null?void 0:t.options}):l=await this.completionWithRetry({...a,stream:!1,messages:o},{signal:t==null?void 0:t.signal,...t==null?void 0:t.options});const{completion_tokens:c,prompt_tokens:d,total_tokens:h,prompt_tokens_details:f,completion_tokens_details:m}=(l==null?void 0:l.usage)??{};c&&(i.output_tokens=(i.output_tokens??0)+c),d&&(i.input_tokens=(i.input_tokens??0)+d),h&&(i.total_tokens=(i.total_tokens??0)+h),((f==null?void 0:f.audio_tokens)!==null||(f==null?void 0:f.cached_tokens)!==null)&&(i.input_token_details={...(f==null?void 0:f.audio_tokens)!==null&&{audio:f==null?void 0:f.audio_tokens},...(f==null?void 0:f.cached_tokens)!==null&&{cache_read:f==null?void 0:f.cached_tokens}}),((m==null?void 0:m.audio_tokens)!==null||(m==null?void 0:m.reasoning_tokens)!==null)&&(i.output_token_details={...(m==null?void 0:m.audio_tokens)!==null&&{audio:m==null?void 0:m.audio_tokens},...(m==null?void 0:m.reasoning_tokens)!==null&&{reasoning:m==null?void 0:m.reasoning_tokens}});const p=[];for(const g of(l==null?void 0:l.choices)??[]){const _={text:((u=g.message)==null?void 0:u.content)??"",message:See(g.message??{role:"assistant"},l,this.__includeRawResponse)};_.generationInfo={...g.finish_reason?{finish_reason:g.finish_reason}:{},...g.logprobs?{logprobs:g.logprobs}:{}},xu(_.message)&&(_.message.usage_metadata=i),_.message=new Su(Object.fromEntries(Object.entries(_.message).filter(([y])=>!y.startsWith("lc_")))),p.push(_)}return{generations:p,llmOutput:{tokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}}async getEstimatedTokenCountFromPrompt(e,t,n){let i=(await this.getNumTokensFromMessages(e)).totalCount;if(t&&n!=="auto"){const a=yee(t);i+=await this.getNumTokens(a),i+=9}return t&&e.find(a=>a._getType()==="system")&&(i-=4),n==="none"?i+=1:typeof n=="object"&&(i+=await this.getNumTokens(n.name)+4),i}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async n=>{var i;return(i=n.message.additional_kwargs)!=null&&i.function_call?(await this.getNumTokensFromMessages([n.message])).countPerMessage[0]:await this.getNumTokens(n.message.content)}))).reduce((n,i)=>n+i,0)}async getNumTokensFromMessages(e){let t=0,n=0,i=0;this.model==="gpt-3.5-turbo-0301"?(n=4,i=-1):(n=3,i=1);const a=await Promise.all(e.map(async o=>{var h,f,m,p,g,b;const s=await this.getNumTokens(o.content),u=await this.getNumTokens(v6(o)),l=o.name!==void 0?i+await this.getNumTokens(o.name):0;let c=s+n+u+l;const d=o;if(d._getType()==="function"&&(c-=2),(h=d.additional_kwargs)!=null&&h.function_call&&(c+=3),(f=d==null?void 0:d.additional_kwargs.function_call)!=null&&f.name&&(c+=await this.getNumTokens((m=d.additional_kwargs.function_call)==null?void 0:m.name)),(p=d.additional_kwargs.function_call)!=null&&p.arguments)try{c+=await this.getNumTokens(JSON.stringify(JSON.parse((g=d.additional_kwargs.function_call)==null?void 0:g.arguments)))}catch(_){console.error("Error parsing function arguments",_,JSON.stringify(d.additional_kwargs.function_call)),c+=await this.getNumTokens((b=d.additional_kwargs.function_call)==null?void 0:b.arguments)}return t+=c,c}));return t+=3,{totalCount:t,countPerMessage:a}}async completionWithRetry(e,t){const n=this._getClientOptions(t);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,n)}catch(i){throw P_(i)}})}async betaParsedCompletionWithRetry(e,t){const n=this._getClientOptions(t);return this.caller.call(async()=>{try{return await this.client.beta.chat.completions.parse(e,n)}catch(i){throw P_(i)}})}_getClientOptions(e){if(!this.client){const n={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL,azureOpenAIEndpoint:this.azureOpenAIEndpoint},i=mb(n),a={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};a.baseURL||delete a.baseURL,this.client=new Ne(a)}const t={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(t.headers={"api-key":this.azureOpenAIApiKey,...t.headers},t.query={"api-version":this.azureOpenAIApiVersion,...t.query}),t}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((t,n)=>(n&&n.tokenUsage&&(t.tokenUsage.completionTokens+=n.tokenUsage.completionTokens??0,t.tokenUsage.promptTokens+=n.tokenUsage.promptTokens??0,t.tokenUsage.totalTokens+=n.tokenUsage.totalTokens??0),t),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(e,t){let n,i,a,o;Eee(e)?(n=e.schema,i=e.name,a=e.method,o=e.includeRaw):(n=e,i=t==null?void 0:t.name,a=t==null?void 0:t.method,o=t==null?void 0:t.includeRaw);let s,u;if((t==null?void 0:t.strict)!==void 0&&a==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(a==="jsonMode")s=this.bind({response_format:{type:"json_object"}}),lg(n)?u=eC.fromZodSchema(n):u=new tC;else if(a==="jsonSchema")s=this.bind({response_format:{type:"json_schema",json_schema:{name:i??"extract",description:n.description,schema:n,strict:t==null?void 0:t.strict}}}),lg(n)?u=eC.fromZodSchema(n):u=new tC;else{let h=i??"extract";if(lg(n)){const f=eb(n);s=this.bind({tools:[{type:"function",function:{name:h,description:f.description,parameters:f}}],tool_choice:{type:"function",function:{name:h}},...(t==null?void 0:t.strict)!==void 0?{strict:t.strict}:{}}),u=new R_({returnSingle:!0,keyName:h,zodSchema:n})}else{let f;typeof n.name=="string"&&typeof n.parameters=="object"&&n.parameters!=null?(f=n,h=n.name):(h=n.title??h,f={name:h,description:n.description??"",parameters:n}),s=this.bind({tools:[{type:"function",function:f}],tool_choice:{type:"function",function:{name:h}},...(t==null?void 0:t.strict)!==void 0?{strict:t.strict}:{}}),u=new R_({returnSingle:!0,keyName:h})}}if(!o)return s.pipe(u);const l=$u.assign({parsed:(h,f)=>u.invoke(h.raw,f)}),c=$u.assign({parsed:()=>null}),d=l.withFallbacks({fallbacks:[c]});return Nr.from([{raw:s},d])}}function lg(r){return typeof(r==null?void 0:r.parse)=="function"}function Eee(r){return r!==void 0&&typeof r.schema=="object"}class Ree extends MP{_llmType(){return"azure_openai"}get lc_aliases(){return{openAIApiKey:"openai_api_key",openAIApiVersion:"openai_api_version",openAIBasePath:"openai_api_base",deploymentName:"deployment_name",azureOpenAIEndpoint:"azure_endpoint",azureOpenAIApiVersion:"openai_api_version",azureOpenAIBasePath:"openai_api_base",azureOpenAIApiDeploymentName:"deployment_name"}}constructor(e){const t=e&&{...e};t&&(t.azureOpenAIApiDeploymentName=t.azureOpenAIApiDeploymentName??t.deploymentName,t.azureOpenAIApiKey=t.azureOpenAIApiKey??t.openAIApiKey,t.azureOpenAIApiVersion=t.azureOpenAIApiVersion??t.openAIApiVersion),super(t)}getLsParams(e){const t=super.getLsParams(e);return t.ls_provider="azure",t}_getClientOptions(e){var n;if(!this.client){const i={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,azureADTokenProvider:this.azureADTokenProvider,baseURL:this.clientConfig.baseURL,azureOpenAIEndpoint:this.azureOpenAIEndpoint},a=mb(i),o={...this.clientConfig,baseURL:a,timeout:this.timeout,maxRetries:0};this.azureADTokenProvider||(o.apiKey=i.azureOpenAIApiKey),o.baseURL||delete o.baseURL,o.defaultHeaders={...o.defaultHeaders,"User-Agent":(n=o.defaultHeaders)!=null&&n["User-Agent"]?`${o.defaultHeaders["User-Agent"]}: langchainjs-azure-openai-v2`:"langchainjs-azure-openai-v2"},this.client=new s6({apiVersion:this.azureOpenAIApiVersion,azureADTokenProvider:this.azureADTokenProvider,deployment:this.azureOpenAIApiDeploymentName,...o})}const t={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(t.headers={"api-key":this.azureOpenAIApiKey,...t.headers},t.query={"api-version":this.azureOpenAIApiVersion,...t.query}),t}toJSON(){const e=super.toJSON();function t(n){return typeof n=="object"&&n!=null}if(t(e)&&t(e.kwargs)){if(delete e.kwargs.azure_openai_base_path,delete e.kwargs.azure_openai_api_deployment_name,delete e.kwargs.azure_openai_api_key,delete e.kwargs.azure_openai_api_version,delete e.kwargs.azure_open_ai_base_path,!e.kwargs.azure_endpoint&&this.azureOpenAIEndpoint&&(e.kwargs.azure_endpoint=this.azureOpenAIEndpoint),!e.kwargs.azure_endpoint&&this.azureOpenAIBasePath){const n=this.azureOpenAIBasePath.split("/openai/deployments/");if(n.length===2&&n[0].startsWith("http")){const[i]=n;e.kwargs.azure_endpoint=i}}if(!e.kwargs.azure_endpoint&&this.azureOpenAIApiInstanceName&&(e.kwargs.azure_endpoint=`https://${this.azureOpenAIApiInstanceName}.openai.azure.com/`),!e.kwargs.deployment_name&&this.azureOpenAIApiDeploymentName&&(e.kwargs.deployment_name=this.azureOpenAIApiDeploymentName),!e.kwargs.deployment_name&&this.azureOpenAIBasePath){const n=this.azureOpenAIBasePath.split("/openai/deployments/");if(n.length===2){const[,i]=n;e.kwargs.deployment_name=i}}e.kwargs.azure_endpoint&&e.kwargs.deployment_name&&e.kwargs.openai_api_base&&delete e.kwargs.openai_api_base,e.kwargs.azure_openai_api_instance_name&&e.kwargs.azure_endpoint&&delete e.kwargs.azure_openai_api_instance_name}return e}}class Fd extends u6{constructor({concurrency:e,...t}){super(e?{maxConcurrency:e,...t}:t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]})}async invoke(e,t){const n=Fd._convertInputToPromptValue(e);return(await this.generatePrompt([n],t,t==null?void 0:t.callbacks)).generations[0][0].text}async*_streamResponseChunks(e,t,n){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(e){const[t,n]=super._separateRunnableConfigFromCallOptions(e);return n.signal=t.signal,[t,n]}async*_streamIterator(e,t){if(this._streamResponseChunks===Fd.prototype._streamResponseChunks)yield this.invoke(e,t);else{const n=Fd._convertInputToPromptValue(e),[i,a]=this._separateRunnableConfigFromCallOptionsCompat(t),o=await zt.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),s={options:a,invocation_params:this==null?void 0:this.invocationParams(a),batch_size:1},u=await(o==null?void 0:o.handleLLMStart(this.toJSON(),[n.toString()],i.runId,void 0,s,void 0,void 0,i.runName));let l=new nl({text:""});try{for await(const c of this._streamResponseChunks(n.toString(),a,u==null?void 0:u[0]))l?l=l.concat(c):l=c,typeof c.text=="string"&&(yield c.text)}catch(c){throw await Promise.all((u??[]).map(d=>d==null?void 0:d.handleLLMError(c))),c}await Promise.all((u??[]).map(c=>c==null?void 0:c.handleLLMEnd({generations:[[l]]})))}}async generatePrompt(e,t,n){const i=e.map(a=>a.toString());return this.generate(i,t,n)}invocationParams(e){return{}}_flattenLLMResult(e){const t=[];for(let n=0;n<e.generations.length;n+=1){const i=e.generations[n];if(n===0)t.push({generations:[i],llmOutput:e.llmOutput});else{const a=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;t.push({generations:[i],llmOutput:a})}}return t}async _generateUncached(e,t,n,i){let a;if(i!==void 0&&i.length===e.length)a=i;else{const l=await zt.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),c={options:t,invocation_params:this==null?void 0:this.invocationParams(t),batch_size:e.length};a=await(l==null?void 0:l.handleLLMStart(this.toJSON(),e,n.runId,void 0,c,void 0,void 0,n==null?void 0:n.runName))}const o=!!(a!=null&&a[0].handlers.find(KV));let s;if(o&&e.length===1&&this._streamResponseChunks!==Fd.prototype._streamResponseChunks)try{const l=await this._streamResponseChunks(e[0],t,a==null?void 0:a[0]);let c;for await(const d of l)c===void 0?c=d:c=tn(c,d);if(c===void 0)throw new Error("Received empty response from chat model call.");s={generations:[[c]],llmOutput:{}},await(a==null?void 0:a[0].handleLLMEnd(s))}catch(l){throw await(a==null?void 0:a[0].handleLLMError(l)),l}else{try{s=await this._generate(e,t,a==null?void 0:a[0])}catch(c){throw await Promise.all((a??[]).map(d=>d==null?void 0:d.handleLLMError(c))),c}const l=this._flattenLLMResult(s);await Promise.all((a??[]).map((c,d)=>c==null?void 0:c.handleLLMEnd(l[d])))}const u=(a==null?void 0:a.map(l=>l.runId))||void 0;return Object.defineProperty(s,h_,{value:u?{runIds:u}:void 0,configurable:!0}),s}async _generateCached({prompts:e,cache:t,llmStringKey:n,parsedOptions:i,handledOptions:a,runId:o}){const s=await zt.configure(a.callbacks,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),u={options:i,invocation_params:this==null?void 0:this.invocationParams(i),batch_size:e.length},l=await(s==null?void 0:s.handleLLMStart(this.toJSON(),e,o,void 0,u,void 0,void 0,a==null?void 0:a.runName)),c=[],h=(await Promise.allSettled(e.map(async(p,g)=>{const b=await t.lookup(p,n);return b==null&&c.push(g),b}))).map((p,g)=>({result:p,runManager:l==null?void 0:l[g]})).filter(({result:p})=>p.status==="fulfilled"&&p.value!=null||p.status==="rejected"),f=[];await Promise.all(h.map(async({result:p,runManager:g},b)=>{if(p.status==="fulfilled"){const _=p.value;return f[b]=_.map(y=>(y.generationInfo={...y.generationInfo,tokenUsage:{}},y)),_.length&&await(g==null?void 0:g.handleLLMNewToken(_[0].text)),g==null?void 0:g.handleLLMEnd({generations:[_]},void 0,void 0,void 0,{cached:!0})}else return await(g==null?void 0:g.handleLLMError(p.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(p.reason)}));const m={generations:f,missingPromptIndices:c,startedRunManagers:l};return Object.defineProperty(m,h_,{value:l?{runIds:l==null?void 0:l.map(p=>p.runId)}:void 0,configurable:!0}),m}async generate(e,t,n){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let i;Array.isArray(t)?i={stop:t}:i=t;const[a,o]=this._separateRunnableConfigFromCallOptionsCompat(i);if(a.callbacks=a.callbacks??n,!this.cache)return this._generateUncached(e,o,a);const{cache:s}=this,u=this._getSerializedCacheKeyParametersForCall(o),{generations:l,missingPromptIndices:c,startedRunManagers:d}=await this._generateCached({prompts:e,cache:s,llmStringKey:u,parsedOptions:o,handledOptions:a,runId:a.runId});let h={};if(c.length>0){const f=await this._generateUncached(c.map(m=>e[m]),o,a,d!==void 0?c.map(m=>d==null?void 0:d[m]):void 0);await Promise.all(f.generations.map(async(m,p)=>{const g=c[p];return l[g]=m,s.update(e[g],u,m)})),h=f.llmOutput??{}}return{generations:l,llmOutput:h}}async call(e,t,n){const{generations:i}=await this.generate([e],t,n);return i[0][0].text}async predict(e,t,n){return this.call(e,t,n)}async predictMessages(e,t,n){const i=DC(e),a=await this.call(i,t,n);return new Su(a)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}}class w6 extends Fd{async _generate(e,t,n){return{generations:await Promise.all(e.map((a,o)=>this._call(a,{...t,promptIndex:o},n).then(s=>[{text:s}])))}}}const IP=(r,e)=>r.reduce((t,n,i)=>{const a=Math.floor(i/e),o=t[a]||[];return t[a]=o.concat([n]),t},[]);let S6=class{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new ym(e??{})}};class nC extends S6{constructor(e,t){var l,c,d;const n={maxConcurrency:2,...e};super(n),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:512}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"dimensions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureADTokenProvider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let i=(n==null?void 0:n.apiKey)??(n==null?void 0:n.openAIApiKey)??ot("OPENAI_API_KEY");const a=(n==null?void 0:n.azureOpenAIApiKey)??ot("AZURE_OPENAI_API_KEY");if(this.azureADTokenProvider=(e==null?void 0:e.azureADTokenProvider)??void 0,!a&&!i&&!this.azureADTokenProvider)throw new Error("OpenAI or Azure OpenAI API key or Token Provider not found");const o=(n==null?void 0:n.azureOpenAIApiInstanceName)??ot("AZURE_OPENAI_API_INSTANCE_NAME"),s=((n==null?void 0:n.azureOpenAIApiEmbeddingsDeploymentName)||(n==null?void 0:n.azureOpenAIApiDeploymentName))??(ot("AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME")||ot("AZURE_OPENAI_API_DEPLOYMENT_NAME")),u=(n==null?void 0:n.azureOpenAIApiVersion)??ot("AZURE_OPENAI_API_VERSION");if(this.azureOpenAIBasePath=(n==null?void 0:n.azureOpenAIBasePath)??ot("AZURE_OPENAI_BASE_PATH"),this.organization=((l=n==null?void 0:n.configuration)==null?void 0:l.organization)??ot("OPENAI_ORGANIZATION"),this.modelName=(n==null?void 0:n.model)??(n==null?void 0:n.modelName)??this.model,this.model=this.modelName,this.batchSize=(n==null?void 0:n.batchSize)??(a?1:this.batchSize),this.stripNewLines=(n==null?void 0:n.stripNewLines)??this.stripNewLines,this.timeout=n==null?void 0:n.timeout,this.dimensions=n==null?void 0:n.dimensions,this.azureOpenAIApiVersion=u,this.azureOpenAIApiKey=a,this.azureOpenAIApiInstanceName=o,this.azureOpenAIApiDeploymentName=s,this.azureOpenAIApiKey||this.azureADTokenProvider){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found");i=i??""}this.clientConfig={apiKey:i,organization:this.organization,baseURL:t==null?void 0:t.basePath,dangerouslyAllowBrowser:!0,defaultHeaders:(c=t==null?void 0:t.baseOptions)==null?void 0:c.headers,defaultQuery:(d=t==null?void 0:t.baseOptions)==null?void 0:d.params,...t,...e==null?void 0:e.configuration}}async embedDocuments(e){const t=IP(this.stripNewLines?e.map(o=>o.replace(/\n/g," ")):e,this.batchSize),n=t.map(o=>{const s={model:this.model,input:o};return this.dimensions&&(s.dimensions=this.dimensions),this.embeddingWithRetry(s)}),i=await Promise.all(n),a=[];for(let o=0;o<i.length;o+=1){const s=t[o],{data:u}=i[o];for(let l=0;l<s.length;l+=1)a.push(u[l].embedding)}return a}async embedQuery(e){const t={model:this.model,input:this.stripNewLines?e.replace(/\n/g," "):e};this.dimensions&&(t.dimensions=this.dimensions);const{data:n}=await this.embeddingWithRetry(t);return n[0].embedding}async embeddingWithRetry(e){if(!this.client){const n={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL},i=mb(n),a={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};a.baseURL||delete a.baseURL,this.client=new Ne(a)}const t={};return this.azureOpenAIApiKey&&(t.headers={"api-key":this.azureOpenAIApiKey,...t.headers},t.query={"api-version":this.azureOpenAIApiVersion,...t.query}),this.caller.call(async()=>{try{return await this.client.embeddings.create(e,t)}catch(n){throw P_(n)}})}}class Cee extends nC{constructor(e,t){const n={...e};Object.entries(n).length&&(n.azureOpenAIApiDeploymentName=n.azureOpenAIApiDeploymentName??n.deploymentName,n.azureOpenAIApiKey=n.azureOpenAIApiKey??n.apiKey,n.azureOpenAIApiVersion=n.azureOpenAIApiVersion??n.openAIApiVersion),super(n,t)}async embeddingWithRetry(e){var n;if(!this.client){const i={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,azureADTokenProvider:this.azureADTokenProvider,baseURL:this.clientConfig.baseURL},a=mb(i),o={...this.clientConfig,baseURL:a,timeout:this.timeout,maxRetries:0};this.azureADTokenProvider||(o.apiKey=i.azureOpenAIApiKey),o.baseURL||delete o.baseURL,o.defaultHeaders={...o.defaultHeaders,"User-Agent":(n=o.defaultHeaders)!=null&&n["User-Agent"]?`${o.defaultHeaders["User-Agent"]}: langchainjs-azure-openai-v2`:"langchainjs-azure-openai-v2"},this.client=new s6({apiVersion:this.azureOpenAIApiVersion,azureADTokenProvider:this.azureADTokenProvider,deployment:this.azureOpenAIApiDeploymentName,...o})}const t={};return this.azureOpenAIApiKey&&(t.headers={"api-key":this.azureOpenAIApiKey,...t.headers},t.query={"api-version":this.azureOpenAIApiVersion,...t.query}),this.caller.call(async()=>{try{return await this.client.embeddings.create(e,t)}catch(i){throw P_(i)}})}}function Le(r,e,t,n,i){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}function be(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}let O6=function(){const{crypto:r}=globalThis;if(r!=null&&r.randomUUID)return O6=r.randomUUID.bind(r),r.randomUUID();const e=new Uint8Array(1),t=r?()=>r.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^t()&15>>+n/4).toString(16))};function om(r){return typeof r=="object"&&r!==null&&("name"in r&&r.name==="AbortError"||"message"in r&&String(r.message).includes("FetchRequestCanceledException"))}const iC=r=>{if(r instanceof Error)return r;if(typeof r=="object"&&r!==null){try{if(Object.prototype.toString.call(r)==="[object Error]"){const e=new Error(r.message,r.cause?{cause:r.cause}:{});return r.stack&&(e.stack=r.stack),r.cause&&!e.cause&&(e.cause=r.cause),r.name&&(e.name=r.name),e}}catch{}try{return new Error(JSON.stringify(r))}catch{}}return new Error(r)};class Ge extends Error{}let zr=class aC extends Ge{constructor(e,t,n,i){super(`${aC.makeMessage(e,t,n)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("request-id"),this.error=t}static makeMessage(e,t,n){const i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,n,i){if(!e||!i)return new gb({message:n,cause:iC(t)});const a=t;return e===400?new R6(e,a,n,i):e===401?new C6(e,a,n,i):e===403?new P6(e,a,n,i):e===404?new j6(e,a,n,i):e===409?new T6(e,a,n,i):e===422?new A6(e,a,n,i):e===429?new M6(e,a,n,i):e>=500?new I6(e,a,n,i):new aC(e,a,n,i)}},_u=class extends zr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},gb=class extends zr{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}},E6=class extends gb{constructor({message:e}={}){super({message:e??"Request timed out."})}},R6=class extends zr{},C6=class extends zr{},P6=class extends zr{},j6=class extends zr{},T6=class extends zr{},A6=class extends zr{},M6=class extends zr{},I6=class extends zr{};const Pee=/^[a-z][a-z0-9+.-]*:/i,jee=r=>Pee.test(r);function fA(r){return typeof r!="object"?{}:r??{}}function Tee(r){if(!r)return!0;for(const e in r)return!1;return!0}function Aee(r,e){return Object.prototype.hasOwnProperty.call(r,e)}const Mee=(r,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ge(`${r} must be an integer`);if(e<0)throw new Ge(`${r} must be a positive integer`);return e},x6=r=>{try{return JSON.parse(r)}catch{return}},Iee=r=>new Promise(e=>setTimeout(e,r)),T_={off:0,error:200,warn:300,info:400,debug:500},pA=(r,e,t)=>{if(r){if(Aee(T_,r))return r;br(t).warn(`${e} was set to ${JSON.stringify(r)}, expected one of ${JSON.stringify(Object.keys(T_))}`)}};function Ih(){}function cg(r,e,t){return!e||T_[r]>T_[t]?Ih:e[r].bind(e)}const xee={error:Ih,warn:Ih,info:Ih,debug:Ih};let hA=new WeakMap;function br(r){const e=r.logger,t=r.logLevel??"off";if(!e)return xee;const n=hA.get(e);if(n&&n[0]===t)return n[1];const i={error:cg("error",e,t),warn:cg("warn",e,t),info:cg("info",e,t),debug:cg("debug",e,t)};return hA.set(e,[t,i]),i}const Yc=r=>(r.options&&(r.options={...r.options},delete r.options.headers),r.headers&&(r.headers=Object.fromEntries((r.headers instanceof Headers?[...r.headers]:Object.entries(r.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in r&&(r.retryOfRequestLogID&&(r.retryOf=r.retryOfRequestLogID),delete r.retryOfRequestLogID),r),Nd="0.52.0",Dee=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function $ee(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Nee=()=>{var t;const r=$ee();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nd,"X-Stainless-OS":gA(Deno.build.os),"X-Stainless-Arch":mA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nd,"X-Stainless-OS":gA(globalThis.process.platform),"X-Stainless-Arch":mA(globalThis.process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version};const e=qee();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function qee(){if(typeof navigator>"u"||!navigator)return null;const r=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of r){const n=t.exec(navigator.userAgent);if(n){const i=n[1]||0,a=n[2]||0,o=n[3]||0;return{browser:e,version:`${i}.${a}.${o}`}}}return null}const mA=r=>r==="x32"?"x32":r==="x86_64"||r==="x64"?"x64":r==="arm"?"arm":r==="aarch64"||r==="arm64"?"arm64":r?`other:${r}`:"unknown",gA=r=>(r=r.toLowerCase(),r.includes("ios")?"iOS":r==="android"?"Android":r==="darwin"?"MacOS":r==="win32"?"Windows":r==="freebsd"?"FreeBSD":r==="openbsd"?"OpenBSD":r==="linux"?"Linux":r?`Other:${r}`:"Unknown");let _A;const Bee=()=>_A??(_A=Nee());function Uee(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function D6(...r){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...r)}function $6(r){let e=Symbol.asyncIterator in r?r[Symbol.asyncIterator]():r[Symbol.iterator]();return D6({start(){},async pull(t){const{done:n,value:i}=await e.next();n?t.close():t.enqueue(i)},async cancel(){var t;await((t=e.return)==null?void 0:t.call(e))}})}function xP(r){if(r[Symbol.asyncIterator])return r;const e=r.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function zee(r){var n,i;if(r===null||typeof r!="object")return;if(r[Symbol.asyncIterator]){await((i=(n=r[Symbol.asyncIterator]()).return)==null?void 0:i.call(n));return}const e=r.getReader(),t=e.cancel();e.releaseLock(),await t}const Lee=({headers:r,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});function Fee(r){let e=0;for(const i of r)e+=i.length;const t=new Uint8Array(e);let n=0;for(const i of r)t.set(i,n),n+=i.length;return t}let bA;function DP(r){let e;return(bA??(e=new globalThis.TextEncoder,bA=e.encode.bind(e)))(r)}let yA;function vA(r){let e;return(yA??(e=new globalThis.TextDecoder,yA=e.decode.bind(e)))(r)}var xr,Dr;let Am=class{constructor(){xr.set(this,void 0),Dr.set(this,void 0),Le(this,xr,new Uint8Array),Le(this,Dr,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?DP(e):e;Le(this,xr,Fee([be(this,xr,"f"),t]));const n=[];let i;for(;(i=kee(be(this,xr,"f"),be(this,Dr,"f")))!=null;){if(i.carriage&&be(this,Dr,"f")==null){Le(this,Dr,i.index);continue}if(be(this,Dr,"f")!=null&&(i.index!==be(this,Dr,"f")+1||i.carriage)){n.push(vA(be(this,xr,"f").subarray(0,be(this,Dr,"f")-1))),Le(this,xr,be(this,xr,"f").subarray(be(this,Dr,"f"))),Le(this,Dr,null);continue}const a=be(this,Dr,"f")!==null?i.preceding-1:i.preceding,o=vA(be(this,xr,"f").subarray(0,a));n.push(o),Le(this,xr,be(this,xr,"f").subarray(i.index)),Le(this,Dr,null)}return n}flush(){return be(this,xr,"f").length?this.decode(`
`):[]}};xr=new WeakMap,Dr=new WeakMap;Am.NEWLINE_CHARS=new Set([`
`,"\r"]);Am.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function kee(r,e){for(let i=e??0;i<r.length;i++){if(r[i]===10)return{preceding:i,index:i+1,carriage:!1};if(r[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Vee(r){for(let n=0;n<r.length-1;n++){if(r[n]===10&&r[n+1]===10||r[n]===13&&r[n+1]===13)return n+2;if(r[n]===13&&r[n+1]===10&&n+3<r.length&&r[n+2]===13&&r[n+3]===10)return n+4}return-1}let sm=class xh{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;async function*i(){if(n)throw new Ge("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(const o of Hee(e,t)){if(o.event==="completion")try{yield JSON.parse(o.data)}catch(s){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),s}if(o.event==="message_start"||o.event==="message_delta"||o.event==="message_stop"||o.event==="content_block_start"||o.event==="content_block_delta"||o.event==="content_block_stop")try{yield JSON.parse(o.data)}catch(s){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),s}if(o.event!=="ping"&&o.event==="error")throw new zr(void 0,x6(o.data)??o.data,void 0,e.headers)}a=!0}catch(o){if(om(o))return;throw o}finally{a||t.abort()}}return new xh(i,t)}static fromReadableStream(e,t){let n=!1;async function*i(){const o=new Am,s=xP(e);for await(const u of s)for(const l of o.decode(u))yield l;for(const u of o.flush())yield u}async function*a(){if(n)throw new Ge("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let o=!1;try{for await(const s of i())o||s&&(yield JSON.parse(s));o=!0}catch(s){if(om(s))return;throw s}finally{o||t.abort()}}return new xh(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),i=a=>({next:()=>{if(a.length===0){const o=n.next();e.push(o),t.push(o)}return a.shift()}});return[new xh(()=>i(e),this.controller),new xh(()=>i(t),this.controller)]}toReadableStream(){const e=this;let t;return D6({async start(){t=e[Symbol.asyncIterator]()},async pull(n){try{const{value:i,done:a}=await t.next();if(a)return n.close();const o=DP(JSON.stringify(i)+`
`);n.enqueue(o)}catch(i){n.error(i)}},async cancel(){var n;await((n=t.return)==null?void 0:n.call(t))}})}};async function*Hee(r,e){if(!r.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ge("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ge("Attempted to iterate over a response with no body");const t=new Wee,n=new Am,i=xP(r.body);for await(const a of Kee(i))for(const o of n.decode(a)){const s=t.decode(o);s&&(yield s)}for(const a of n.flush()){const o=t.decode(a);o&&(yield o)}}async function*Kee(r){let e=new Uint8Array;for await(const t of r){if(t==null)continue;const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?DP(t):t;let i=new Uint8Array(e.length+n.length);i.set(e),i.set(n,e.length),e=i;let a;for(;(a=Vee(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}let Wee=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,i]=Gee(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}};function Gee(r,e){const t=r.indexOf(e);return t!==-1?[r.substring(0,t),e,r.substring(t+e.length)]:[r,"",""]}async function N6(r,e){const{response:t,requestLogID:n,retryOfRequestLogID:i,startTime:a}=e,o=await(async()=>{var d;if(e.options.stream)return br(r).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):sm.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const s=t.headers.get("content-type"),u=(d=s==null?void 0:s.split(";")[0])==null?void 0:d.trim();if((u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))){const h=await t.json();return q6(h,t)}return await t.text()})();return br(r).debug(`[${n}] response parsed`,Yc({retryOfRequestLogID:i,url:t.url,status:t.status,body:o,durationMs:Date.now()-a})),o}function q6(r,e){return!r||typeof r!="object"||Array.isArray(r)?r:Object.defineProperty(r,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}var Dh;let B6=class U6 extends Promise{constructor(e,t,n=N6){super(i=>{i(null)}),this.responsePromise=t,this.parseResponse=n,Dh.set(this,void 0),Le(this,Dh,e)}_thenUnwrap(e){return new U6(be(this,Dh,"f"),this.responsePromise,async(t,n)=>q6(e(await this.parseResponse(t,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(be(this,Dh,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};Dh=new WeakMap;var dg;class Jee{constructor(e,t,n,i){dg.set(this,void 0),Le(this,dg,e),this.options=i,this.response=t,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Ge("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await be(this,dg,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(dg=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}let Xee=class extends B6{constructor(e,t,n){super(e,t,async(i,a)=>new n(i,a.response,await N6(i,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}};class Mm extends Jee{constructor(e,t,n,i){super(e,t,n,i),this.data=n.data||[],this.has_more=n.has_more||!1,this.first_id=n.first_id||null,this.last_id=n.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var t;if((t=this.options.query)!=null&&t.before_id){const n=this.first_id;return n?{...this.options,query:{...fA(this.options.query),before_id:n}}:null}const e=this.last_id;return e?{...this.options,query:{...fA(this.options.query),after_id:e}}:null}}const z6=()=>{var r;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((r=e==null?void 0:e.versions)==null?void 0:r.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Xd(r,e,t){return z6(),new File(r,e??"unknown_file",t)}function Kg(r){return(typeof r=="object"&&r!==null&&("name"in r&&r.name&&String(r.name)||"url"in r&&r.url&&String(r.url)||"filename"in r&&r.filename&&String(r.filename)||"path"in r&&r.path&&String(r.path))||"").split(/[\\/]/).pop()||void 0}const L6=r=>r!=null&&typeof r=="object"&&typeof r[Symbol.asyncIterator]=="function",Zee=async(r,e)=>({...r,body:await Yee(r.body,e)}),wA=new WeakMap;function Qee(r){const e=typeof r=="function"?r:r.fetch,t=wA.get(e);if(t)return t;const n=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new i(a).text()}catch{return!0}})();return wA.set(e,n),n}const Yee=async(r,e)=>{if(!await Qee(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const t=new FormData;return await Promise.all(Object.entries(r||{}).map(([n,i])=>oC(t,n,i))),t},ete=r=>r instanceof Blob&&"name"in r,oC=async(r,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")r.append(e,String(t));else if(t instanceof Response){let n={};const i=t.headers.get("Content-Type");i&&(n={type:i}),r.append(e,Xd([await t.blob()],Kg(t),n))}else if(L6(t))r.append(e,Xd([await new Response($6(t)).blob()],Kg(t)));else if(ete(t))r.append(e,Xd([t],Kg(t),{type:t.type}));else if(Array.isArray(t))await Promise.all(t.map(n=>oC(r,e+"[]",n)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([n,i])=>oC(r,`${e}[${n}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}},F6=r=>r!=null&&typeof r=="object"&&typeof r.size=="number"&&typeof r.type=="string"&&typeof r.text=="function"&&typeof r.slice=="function"&&typeof r.arrayBuffer=="function",tte=r=>r!=null&&typeof r=="object"&&typeof r.name=="string"&&typeof r.lastModified=="number"&&F6(r),rte=r=>r!=null&&typeof r=="object"&&typeof r.url=="string"&&typeof r.blob=="function";async function nte(r,e,t){if(z6(),r=await r,e||(e=Kg(r)),tte(r))return r instanceof File&&e==null&&t==null?r:Xd([await r.arrayBuffer()],e??r.name,{type:r.type,lastModified:r.lastModified,...t});if(rte(r)){const i=await r.blob();return e||(e=new URL(r.url).pathname.split(/[\\/]/).pop()),Xd(await sC(i),e,t)}const n=await sC(r);if(!(t!=null&&t.type)){const i=n.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof i=="string"&&(t={...t,type:i})}return Xd(n,e,t)}async function sC(r){var t;let e=[];if(typeof r=="string"||ArrayBuffer.isView(r)||r instanceof ArrayBuffer)e.push(r);else if(F6(r))e.push(r instanceof Blob?r:await r.arrayBuffer());else if(L6(r))for await(const n of r)e.push(...await sC(n));else{const n=(t=r==null?void 0:r.constructor)==null?void 0:t.name;throw new Error(`Unexpected data type: ${typeof r}${n?`; constructor: ${n}`:""}${ite(r)}`)}return e}function ite(r){return typeof r!="object"||r===null?"":`; props: [${Object.getOwnPropertyNames(r).map(t=>`"${t}"`).join(", ")}]`}let al=class{constructor(e){this._client=e}};const k6=Symbol.for("brand.privateNullableHeaders"),SA=Array.isArray;function*ate(r){if(!r)return;if(k6 in r){const{values:n,nulls:i}=r;yield*n.entries();for(const a of i)yield[a,null];return}let e=!1,t;r instanceof Headers?t=r.entries():SA(r)?t=r:(e=!0,t=Object.entries(r??{}));for(let n of t){const i=n[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const a=SA(n[1])?n[1]:[n[1]];let o=!1;for(const s of a)s!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,s])}}const pt=r=>{const e=new Headers,t=new Set;for(const n of r){const i=new Set;for(const[a,o]of ate(n)){const s=a.toLowerCase();i.has(s)||(e.delete(a),i.add(s)),o===null?(e.delete(a),t.add(s)):(e.append(a,o),t.delete(s))}}return{[k6]:!0,values:e,nulls:t}};function V6(r){return r.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const ote=(r=V6)=>function(t,...n){if(t.length===1)return t[0];let i=!1;const a=t.reduce((c,d,h)=>(/[?#]/.test(d)&&(i=!0),c+d+(h===n.length?"":(i?encodeURIComponent:r)(String(n[h])))),""),o=a.split(/[?#]/,1)[0],s=[],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let l;for(;(l=u.exec(o))!==null;)s.push({start:l.index,length:l[0].length});if(s.length>0){let c=0;const d=s.reduce((h,f)=>{const m=" ".repeat(f.start-c),p="^".repeat(f.length);return c=f.start+f.length,h+m+p},"");throw new Ge(`Path parameters result in path with invalid segments:
${a}
${d}`)}return a},yu=ote(V6);class H6 extends al{list(e={},t){const{betas:n,...i}=e??{};return this._client.getAPIList("/v1/files",Mm,{query:i,...t,headers:pt([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},t==null?void 0:t.headers])})}delete(e,t={},n){const{betas:i}=t??{};return this._client.delete(yu`/v1/files/${e}`,{...n,headers:pt([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},n==null?void 0:n.headers])})}download(e,t={},n){const{betas:i}=t??{};return this._client.get(yu`/v1/files/${e}/content`,{...n,headers:pt([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}retrieveMetadata(e,t={},n){const{betas:i}=t??{};return this._client.get(yu`/v1/files/${e}`,{...n,headers:pt([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},n==null?void 0:n.headers])})}upload(e,t){const{betas:n,...i}=e;return this._client.post("/v1/files",Zee({body:i,...t,headers:pt([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},t==null?void 0:t.headers])},this._client))}}let K6=class extends al{retrieve(e,t={},n){const{betas:i}=t??{};return this._client.get(yu`/v1/models/${e}?beta=true`,{...n,headers:pt([{...(i==null?void 0:i.toString())!=null?{"anthropic-beta":i==null?void 0:i.toString()}:void 0},n==null?void 0:n.headers])})}list(e={},t){const{betas:n,...i}=e??{};return this._client.getAPIList("/v1/models?beta=true",Mm,{query:i,...t,headers:pt([{...(n==null?void 0:n.toString())!=null?{"anthropic-beta":n==null?void 0:n.toString()}:void 0},t==null?void 0:t.headers])})}};class _b{constructor(e,t){this.iterator=e,this.controller=t}async*decoder(){const e=new Am;for await(const t of this.iterator)for(const n of e.decode(t))yield JSON.parse(n);for(const t of e.flush())yield JSON.parse(t)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,t){if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ge("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ge("Attempted to iterate over a response with no body");return new _b(xP(e.body),t)}}let W6=class extends al{create(e,t){const{betas:n,...i}=e;return this._client.post("/v1/messages/batches?beta=true",{body:i,...t,headers:pt([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},t==null?void 0:t.headers])})}retrieve(e,t={},n){const{betas:i}=t??{};return this._client.get(yu`/v1/messages/batches/${e}?beta=true`,{...n,headers:pt([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},n==null?void 0:n.headers])})}list(e={},t){const{betas:n,...i}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",Mm,{query:i,...t,headers:pt([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},t==null?void 0:t.headers])})}delete(e,t={},n){const{betas:i}=t??{};return this._client.delete(yu`/v1/messages/batches/${e}?beta=true`,{...n,headers:pt([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},n==null?void 0:n.headers])})}cancel(e,t={},n){const{betas:i}=t??{};return this._client.post(yu`/v1/messages/batches/${e}/cancel?beta=true`,{...n,headers:pt([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},n==null?void 0:n.headers])})}async results(e,t={},n){const i=await this.retrieve(e);if(!i.results_url)throw new Ge(`No batch \`results_url\`; Has it finished processing? ${i.processing_status} - ${i.id}`);const{betas:a}=t??{};return this._client.get(i.results_url,{...n,headers:pt([{"anthropic-beta":[...a??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},n==null?void 0:n.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((o,s)=>_b.fromResponse(s.response,s.controller))}};const ste=r=>{let e=0,t=[];for(;e<r.length;){let n=r[e];if(n==="\\"){e++;continue}if(n==="{"){t.push({type:"brace",value:"{"}),e++;continue}if(n==="}"){t.push({type:"brace",value:"}"}),e++;continue}if(n==="["){t.push({type:"paren",value:"["}),e++;continue}if(n==="]"){t.push({type:"paren",value:"]"}),e++;continue}if(n===":"){t.push({type:"separator",value:":"}),e++;continue}if(n===","){t.push({type:"delimiter",value:","}),e++;continue}if(n==='"'){let s="",u=!1;for(n=r[++e];n!=='"';){if(e===r.length){u=!0;break}if(n==="\\"){if(e++,e===r.length){u=!0;break}s+=n+r[e],n=r[++e]}else s+=n,n=r[++e]}n=r[++e],u||t.push({type:"string",value:s});continue}if(n&&/\s/.test(n)){e++;continue}let a=/[0-9]/;if(n&&a.test(n)||n==="-"||n==="."){let s="";for(n==="-"&&(s+=n,n=r[++e]);n&&a.test(n)||n===".";)s+=n,n=r[++e];t.push({type:"number",value:s});continue}let o=/[a-z]/i;if(n&&o.test(n)){let s="";for(;n&&o.test(n)&&e!==r.length;)s+=n,n=r[++e];if(s=="true"||s=="false"||s==="null")t.push({type:"name",value:s});else{e++;continue}continue}e++}return t},qd=r=>{if(r.length===0)return r;let e=r[r.length-1];switch(e.type){case"separator":return r=r.slice(0,r.length-1),qd(r);case"number":let t=e.value[e.value.length-1];if(t==="."||t==="-")return r=r.slice(0,r.length-1),qd(r);case"string":let n=r[r.length-2];if((n==null?void 0:n.type)==="delimiter")return r=r.slice(0,r.length-1),qd(r);if((n==null?void 0:n.type)==="brace"&&n.value==="{")return r=r.slice(0,r.length-1),qd(r);break;case"delimiter":return r=r.slice(0,r.length-1),qd(r)}return r},ute=r=>{let e=[];return r.map(t=>{t.type==="brace"&&(t.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),t.type==="paren"&&(t.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(t=>{t==="}"?r.push({type:"brace",value:"}"}):t==="]"&&r.push({type:"paren",value:"]"})}),r},lte=r=>{let e="";return r.map(t=>{switch(t.type){case"string":e+='"'+t.value+'"';break;default:e+=t.value;break}}),e},G6=r=>JSON.parse(lte(ute(qd(ste(r)))));var Gr,pl,xf,fg,Df,$f,pg,Nf,Fu,qf,hg,mg,Td,gg,_g,mv,OA,gv,_v,bv,yv,EA;const RA="__json_buf";class A_{constructor(){Gr.add(this),this.messages=[],this.receivedMessages=[],pl.set(this,void 0),this.controller=new AbortController,xf.set(this,void 0),fg.set(this,()=>{}),Df.set(this,()=>{}),$f.set(this,void 0),pg.set(this,()=>{}),Nf.set(this,()=>{}),Fu.set(this,{}),qf.set(this,!1),hg.set(this,!1),mg.set(this,!1),Td.set(this,!1),gg.set(this,void 0),_g.set(this,void 0),gv.set(this,e=>{if(Le(this,hg,!0),om(e)&&(e=new _u),e instanceof _u)return Le(this,mg,!0),this._emit("abort",e);if(e instanceof Ge)return this._emit("error",e);if(e instanceof Error){const t=new Ge(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Ge(String(e)))}),Le(this,xf,new Promise((e,t)=>{Le(this,fg,e,"f"),Le(this,Df,t,"f")})),Le(this,$f,new Promise((e,t)=>{Le(this,pg,e,"f"),Le(this,Nf,t,"f")})),be(this,xf,"f").catch(()=>{}),be(this,$f,"f").catch(()=>{})}get response(){return be(this,gg,"f")}get request_id(){return be(this,_g,"f")}async withResponse(){const e=await be(this,xf,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new A_;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,n){const i=new A_;for(const a of t.messages)i._addMessageParam(a);return i._run(()=>i._createMessage(e,{...t,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},be(this,gv,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,n){var s;const i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),be(this,Gr,"m",_v).call(this);const{response:a,data:o}=await e.create({...t,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(a);for await(const u of o)be(this,Gr,"m",bv).call(this,u);if((s=o.controller.signal)!=null&&s.aborted)throw new _u;be(this,Gr,"m",yv).call(this)}_connected(e){this.ended||(Le(this,gg,e),Le(this,_g,e==null?void 0:e.headers.get("request-id")),be(this,fg,"f").call(this,e),this._emit("connect"))}get ended(){return be(this,qf,"f")}get errored(){return be(this,hg,"f")}get aborted(){return be(this,mg,"f")}abort(){this.controller.abort()}on(e,t){return(be(this,Fu,"f")[e]||(be(this,Fu,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=be(this,Fu,"f")[e];if(!n)return this;const i=n.findIndex(a=>a.listener===t);return i>=0&&n.splice(i,1),this}once(e,t){return(be(this,Fu,"f")[e]||(be(this,Fu,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{Le(this,Td,!0),e!=="error"&&this.once("error",n),this.once(e,t)})}async done(){Le(this,Td,!0),await be(this,$f,"f")}get currentMessage(){return be(this,pl,"f")}async finalMessage(){return await this.done(),be(this,Gr,"m",mv).call(this)}async finalText(){return await this.done(),be(this,Gr,"m",OA).call(this)}_emit(e,...t){if(be(this,qf,"f"))return;e==="end"&&(Le(this,qf,!0),be(this,pg,"f").call(this));const n=be(this,Fu,"f")[e];if(n&&(be(this,Fu,"f")[e]=n.filter(i=>!i.once),n.forEach(({listener:i})=>i(...t))),e==="abort"){const i=t[0];!be(this,Td,"f")&&!(n!=null&&n.length)&&Promise.reject(i),be(this,Df,"f").call(this,i),be(this,Nf,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=t[0];!be(this,Td,"f")&&!(n!=null&&n.length)&&Promise.reject(i),be(this,Df,"f").call(this,i),be(this,Nf,"f").call(this,i),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",be(this,Gr,"m",mv).call(this))}async _fromReadableStream(e,t){var a;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),be(this,Gr,"m",_v).call(this),this._connected(null);const i=sm.fromReadableStream(e,this.controller);for await(const o of i)be(this,Gr,"m",bv).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new _u;be(this,Gr,"m",yv).call(this)}[(pl=new WeakMap,xf=new WeakMap,fg=new WeakMap,Df=new WeakMap,$f=new WeakMap,pg=new WeakMap,Nf=new WeakMap,Fu=new WeakMap,qf=new WeakMap,hg=new WeakMap,mg=new WeakMap,Td=new WeakMap,gg=new WeakMap,_g=new WeakMap,gv=new WeakMap,Gr=new WeakSet,mv=function(){if(this.receivedMessages.length===0)throw new Ge("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},OA=function(){if(this.receivedMessages.length===0)throw new Ge("stream ended without producing a Message with role=assistant");const t=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(t.length===0)throw new Ge("stream ended without producing a content block with type=text");return t.join(" ")},_v=function(){this.ended||Le(this,pl,void 0)},bv=function(t){if(this.ended)return;const n=be(this,Gr,"m",EA).call(this,t);switch(this._emit("streamEvent",t,n),t.type){case"content_block_delta":{const i=n.content.at(-1);switch(t.delta.type){case"text_delta":{i.type==="text"&&this._emit("text",t.delta.text,i.text||"");break}case"citations_delta":{i.type==="text"&&this._emit("citation",t.delta.citation,i.citations??[]);break}case"input_json_delta":{(i.type==="tool_use"||i.type==="mcp_tool_use")&&i.input&&this._emit("inputJson",t.delta.partial_json,i.input);break}case"thinking_delta":{i.type==="thinking"&&this._emit("thinking",t.delta.thinking,i.thinking);break}case"signature_delta":{i.type==="thinking"&&this._emit("signature",i.signature);break}default:t.delta}break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Le(this,pl,n);break}}},yv=function(){if(this.ended)throw new Ge("stream has ended, this shouldn't happen");const t=be(this,pl,"f");if(!t)throw new Ge("request ended without sending any chunks");return Le(this,pl,void 0),t},EA=function(t){let n=be(this,pl,"f");if(t.type==="message_start"){if(n)throw new Ge(`Unexpected event order, got ${t.type} before receiving "message_stop"`);return t.message}if(!n)throw new Ge(`Unexpected event order, got ${t.type} before "message_start"`);switch(t.type){case"message_stop":return n;case"message_delta":return n.container=t.delta.container,n.stop_reason=t.delta.stop_reason,n.stop_sequence=t.delta.stop_sequence,n.usage.output_tokens=t.usage.output_tokens,t.usage.input_tokens!=null&&(n.usage.input_tokens=t.usage.input_tokens),t.usage.cache_creation_input_tokens!=null&&(n.usage.cache_creation_input_tokens=t.usage.cache_creation_input_tokens),t.usage.cache_read_input_tokens!=null&&(n.usage.cache_read_input_tokens=t.usage.cache_read_input_tokens),t.usage.server_tool_use!=null&&(n.usage.server_tool_use=t.usage.server_tool_use),n;case"content_block_start":return n.content.push(t.content_block),n;case"content_block_delta":{const i=n.content.at(t.index);switch(t.delta.type){case"text_delta":{(i==null?void 0:i.type)==="text"&&(i.text+=t.delta.text);break}case"citations_delta":{(i==null?void 0:i.type)==="text"&&(i.citations??(i.citations=[]),i.citations.push(t.delta.citation));break}case"input_json_delta":{if((i==null?void 0:i.type)==="tool_use"||(i==null?void 0:i.type)==="mcp_tool_use"){let a=i[RA]||"";a+=t.delta.partial_json,Object.defineProperty(i,RA,{value:a,enumerable:!1,writable:!0}),a&&(i.input=G6(a))}break}case"thinking_delta":{(i==null?void 0:i.type)==="thinking"&&(i.thinking+=t.delta.thinking);break}case"signature_delta":{(i==null?void 0:i.type)==="thinking"&&(i.signature=t.delta.signature);break}default:t.delta}return n}case"content_block_stop":return n}},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("streamEvent",i=>{const a=t.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{n=!0;for(const a of t)a.reject(i);t.length=0}),this.on("error",i=>{n=!0;for(const a of t)a.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new sm(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}const J6={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192},CA={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};let $P=class extends al{constructor(){super(...arguments),this.batches=new W6(this._client)}create(e,t){const{betas:n,...i}=e;i.model in CA&&console.warn(`The model '${i.model}' is deprecated and will reach end-of-life on ${CA[i.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let a=this._client._options.timeout;if(!i.stream&&a==null){const o=J6[i.model]??void 0;a=this._client.calculateNonstreamingTimeout(i.max_tokens,o)}return this._client.post("/v1/messages?beta=true",{body:i,timeout:a??6e5,...t,headers:pt([{...(n==null?void 0:n.toString())!=null?{"anthropic-beta":n==null?void 0:n.toString()}:void 0},t==null?void 0:t.headers]),stream:e.stream??!1})}stream(e,t){return A_.createMessage(this,e,t)}countTokens(e,t){const{betas:n,...i}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:i,...t,headers:pt([{"anthropic-beta":[...n??[],"token-counting-2024-11-01"].toString()},t==null?void 0:t.headers])})}};$P.Batches=W6;class Im extends al{constructor(){super(...arguments),this.models=new K6(this._client),this.messages=new $P(this._client),this.files=new H6(this._client)}}Im.Models=K6;Im.Messages=$P;Im.Files=H6;let X6=class extends al{create(e,t){const{betas:n,...i}=e;return this._client.post("/v1/complete",{body:i,timeout:this._client._options.timeout??6e5,...t,headers:pt([{...(n==null?void 0:n.toString())!=null?{"anthropic-beta":n==null?void 0:n.toString()}:void 0},t==null?void 0:t.headers]),stream:e.stream??!1})}};var Jr,hl,Bf,bg,Uf,zf,yg,Lf,ku,Ff,vg,wg,Ad,Sg,Og,vv,PA,wv,Sv,Ov,Ev,jA;const TA="__json_buf";class M_{constructor(){Jr.add(this),this.messages=[],this.receivedMessages=[],hl.set(this,void 0),this.controller=new AbortController,Bf.set(this,void 0),bg.set(this,()=>{}),Uf.set(this,()=>{}),zf.set(this,void 0),yg.set(this,()=>{}),Lf.set(this,()=>{}),ku.set(this,{}),Ff.set(this,!1),vg.set(this,!1),wg.set(this,!1),Ad.set(this,!1),Sg.set(this,void 0),Og.set(this,void 0),wv.set(this,e=>{if(Le(this,vg,!0),om(e)&&(e=new _u),e instanceof _u)return Le(this,wg,!0),this._emit("abort",e);if(e instanceof Ge)return this._emit("error",e);if(e instanceof Error){const t=new Ge(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Ge(String(e)))}),Le(this,Bf,new Promise((e,t)=>{Le(this,bg,e,"f"),Le(this,Uf,t,"f")})),Le(this,zf,new Promise((e,t)=>{Le(this,yg,e,"f"),Le(this,Lf,t,"f")})),be(this,Bf,"f").catch(()=>{}),be(this,zf,"f").catch(()=>{})}get response(){return be(this,Sg,"f")}get request_id(){return be(this,Og,"f")}async withResponse(){const e=await be(this,Bf,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new M_;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,n){const i=new M_;for(const a of t.messages)i._addMessageParam(a);return i._run(()=>i._createMessage(e,{...t,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},be(this,wv,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,n){var s;const i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),be(this,Jr,"m",Sv).call(this);const{response:a,data:o}=await e.create({...t,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(a);for await(const u of o)be(this,Jr,"m",Ov).call(this,u);if((s=o.controller.signal)!=null&&s.aborted)throw new _u;be(this,Jr,"m",Ev).call(this)}_connected(e){this.ended||(Le(this,Sg,e),Le(this,Og,e==null?void 0:e.headers.get("request-id")),be(this,bg,"f").call(this,e),this._emit("connect"))}get ended(){return be(this,Ff,"f")}get errored(){return be(this,vg,"f")}get aborted(){return be(this,wg,"f")}abort(){this.controller.abort()}on(e,t){return(be(this,ku,"f")[e]||(be(this,ku,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=be(this,ku,"f")[e];if(!n)return this;const i=n.findIndex(a=>a.listener===t);return i>=0&&n.splice(i,1),this}once(e,t){return(be(this,ku,"f")[e]||(be(this,ku,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{Le(this,Ad,!0),e!=="error"&&this.once("error",n),this.once(e,t)})}async done(){Le(this,Ad,!0),await be(this,zf,"f")}get currentMessage(){return be(this,hl,"f")}async finalMessage(){return await this.done(),be(this,Jr,"m",vv).call(this)}async finalText(){return await this.done(),be(this,Jr,"m",PA).call(this)}_emit(e,...t){if(be(this,Ff,"f"))return;e==="end"&&(Le(this,Ff,!0),be(this,yg,"f").call(this));const n=be(this,ku,"f")[e];if(n&&(be(this,ku,"f")[e]=n.filter(i=>!i.once),n.forEach(({listener:i})=>i(...t))),e==="abort"){const i=t[0];!be(this,Ad,"f")&&!(n!=null&&n.length)&&Promise.reject(i),be(this,Uf,"f").call(this,i),be(this,Lf,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=t[0];!be(this,Ad,"f")&&!(n!=null&&n.length)&&Promise.reject(i),be(this,Uf,"f").call(this,i),be(this,Lf,"f").call(this,i),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",be(this,Jr,"m",vv).call(this))}async _fromReadableStream(e,t){var a;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),be(this,Jr,"m",Sv).call(this),this._connected(null);const i=sm.fromReadableStream(e,this.controller);for await(const o of i)be(this,Jr,"m",Ov).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new _u;be(this,Jr,"m",Ev).call(this)}[(hl=new WeakMap,Bf=new WeakMap,bg=new WeakMap,Uf=new WeakMap,zf=new WeakMap,yg=new WeakMap,Lf=new WeakMap,ku=new WeakMap,Ff=new WeakMap,vg=new WeakMap,wg=new WeakMap,Ad=new WeakMap,Sg=new WeakMap,Og=new WeakMap,wv=new WeakMap,Jr=new WeakSet,vv=function(){if(this.receivedMessages.length===0)throw new Ge("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},PA=function(){if(this.receivedMessages.length===0)throw new Ge("stream ended without producing a Message with role=assistant");const t=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(t.length===0)throw new Ge("stream ended without producing a content block with type=text");return t.join(" ")},Sv=function(){this.ended||Le(this,hl,void 0)},Ov=function(t){if(this.ended)return;const n=be(this,Jr,"m",jA).call(this,t);switch(this._emit("streamEvent",t,n),t.type){case"content_block_delta":{const i=n.content.at(-1);switch(t.delta.type){case"text_delta":{i.type==="text"&&this._emit("text",t.delta.text,i.text||"");break}case"citations_delta":{i.type==="text"&&this._emit("citation",t.delta.citation,i.citations??[]);break}case"input_json_delta":{i.type==="tool_use"&&i.input&&this._emit("inputJson",t.delta.partial_json,i.input);break}case"thinking_delta":{i.type==="thinking"&&this._emit("thinking",t.delta.thinking,i.thinking);break}case"signature_delta":{i.type==="thinking"&&this._emit("signature",i.signature);break}default:t.delta}break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Le(this,hl,n);break}}},Ev=function(){if(this.ended)throw new Ge("stream has ended, this shouldn't happen");const t=be(this,hl,"f");if(!t)throw new Ge("request ended without sending any chunks");return Le(this,hl,void 0),t},jA=function(t){let n=be(this,hl,"f");if(t.type==="message_start"){if(n)throw new Ge(`Unexpected event order, got ${t.type} before receiving "message_stop"`);return t.message}if(!n)throw new Ge(`Unexpected event order, got ${t.type} before "message_start"`);switch(t.type){case"message_stop":return n;case"message_delta":return n.stop_reason=t.delta.stop_reason,n.stop_sequence=t.delta.stop_sequence,n.usage.output_tokens=t.usage.output_tokens,t.usage.input_tokens!=null&&(n.usage.input_tokens=t.usage.input_tokens),t.usage.cache_creation_input_tokens!=null&&(n.usage.cache_creation_input_tokens=t.usage.cache_creation_input_tokens),t.usage.cache_read_input_tokens!=null&&(n.usage.cache_read_input_tokens=t.usage.cache_read_input_tokens),t.usage.server_tool_use!=null&&(n.usage.server_tool_use=t.usage.server_tool_use),n;case"content_block_start":return n.content.push(t.content_block),n;case"content_block_delta":{const i=n.content.at(t.index);switch(t.delta.type){case"text_delta":{(i==null?void 0:i.type)==="text"&&(i.text+=t.delta.text);break}case"citations_delta":{(i==null?void 0:i.type)==="text"&&(i.citations??(i.citations=[]),i.citations.push(t.delta.citation));break}case"input_json_delta":{if((i==null?void 0:i.type)==="tool_use"){let a=i[TA]||"";a+=t.delta.partial_json,Object.defineProperty(i,TA,{value:a,enumerable:!1,writable:!0}),a&&(i.input=G6(a))}break}case"thinking_delta":{(i==null?void 0:i.type)==="thinking"&&(i.thinking+=t.delta.thinking);break}case"signature_delta":{(i==null?void 0:i.type)==="thinking"&&(i.signature=t.delta.signature);break}default:t.delta}return n}case"content_block_stop":return n}},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("streamEvent",i=>{const a=t.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{n=!0;for(const a of t)a.reject(i);t.length=0}),this.on("error",i=>{n=!0;for(const a of t)a.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new sm(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class Z6 extends al{create(e,t){return this._client.post("/v1/messages/batches",{body:e,...t})}retrieve(e,t){return this._client.get(yu`/v1/messages/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/v1/messages/batches",Mm,{query:e,...t})}delete(e,t){return this._client.delete(yu`/v1/messages/batches/${e}`,t)}cancel(e,t){return this._client.post(yu`/v1/messages/batches/${e}/cancel`,t)}async results(e,t){const n=await this.retrieve(e);if(!n.results_url)throw new Ge(`No batch \`results_url\`; Has it finished processing? ${n.processing_status} - ${n.id}`);return this._client.get(n.results_url,{...t,headers:pt([{Accept:"application/binary"},t==null?void 0:t.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((i,a)=>_b.fromResponse(a.response,a.controller))}}class NP extends al{constructor(){super(...arguments),this.batches=new Z6(this._client)}create(e,t){e.model in AA&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${AA[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let n=this._client._options.timeout;if(!e.stream&&n==null){const i=J6[e.model]??void 0;n=this._client.calculateNonstreamingTimeout(e.max_tokens,i)}return this._client.post("/v1/messages",{body:e,timeout:n??6e5,...t,stream:e.stream??!1})}stream(e,t){return M_.createMessage(this,e,t)}countTokens(e,t){return this._client.post("/v1/messages/count_tokens",{body:e,...t})}}const AA={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};NP.Batches=Z6;let Q6=class extends al{retrieve(e,t={},n){const{betas:i}=t??{};return this._client.get(yu`/v1/models/${e}`,{...n,headers:pt([{...(i==null?void 0:i.toString())!=null?{"anthropic-beta":i==null?void 0:i.toString()}:void 0},n==null?void 0:n.headers])})}list(e={},t){const{betas:n,...i}=e??{};return this._client.getAPIList("/v1/models",Mm,{query:i,...t,headers:pt([{...(n==null?void 0:n.toString())!=null?{"anthropic-beta":n==null?void 0:n.toString()}:void 0},t==null?void 0:t.headers])})}};var Rv={};const Eg=r=>{var e,t,n,i;if(typeof globalThis.process<"u")return((e=Rv==null?void 0:Rv[r])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(n=(t=globalThis.Deno.env)==null?void 0:t.get)==null?void 0:n.call(t,r))==null?void 0:i.trim()};var Y6,Wg;class jt{constructor({baseURL:e=Eg("ANTHROPIC_BASE_URL"),apiKey:t=Eg("ANTHROPIC_API_KEY")??null,authToken:n=Eg("ANTHROPIC_AUTH_TOKEN")??null,...i}={}){Wg.set(this,void 0);const a={apiKey:t,authToken:n,...i,baseURL:e||"https://api.anthropic.com"};if(!a.dangerouslyAllowBrowser&&Dee())throw new Ge(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);this.baseURL=a.baseURL,this.timeout=a.timeout??md.DEFAULT_TIMEOUT,this.logger=a.logger??console;const o="warn";this.logLevel=o,this.logLevel=pA(a.logLevel,"ClientOptions.logLevel",this)??pA(Eg("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??o,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??Uee(),Le(this,Wg,Lee),this._options=a,this.apiKey=t,this.authToken=n}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(this.apiKey&&e.get("x-api-key"))&&!t.has("x-api-key")&&!(this.authToken&&e.get("authorization"))&&!t.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}authHeaders(e){return pt([this.apiKeyAuth(e),this.bearerAuth(e)])}apiKeyAuth(e){if(this.apiKey!=null)return pt([{"X-Api-Key":this.apiKey}])}bearerAuth(e){if(this.authToken!=null)return pt([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([t,n])=>typeof n<"u").map(([t,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(t)}=`;throw new Ge(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Nd}`}defaultIdempotencyKey(){return`stainless-node-retry-${O6()}`}makeStatusError(e,t,n,i){return zr.generate(e,t,n,i)}buildURL(e,t){const n=jee(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return Tee(i)||(t={...i,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new Ge("Streaming is strongly recommended for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-python#streaming-responses for more details");return 600*1e3}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(i=>({method:e,path:t,...i})))}request(e,t=null){return new B6(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,n){var b,_;const i=await e,a=i.maxRetries??this.maxRetries;t==null&&(t=a),await this.prepareOptions(i);const{req:o,url:s,timeout:u}=this.buildRequest(i,{retryCount:a-t});await this.prepareRequest(o,{url:s,options:i});const l="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),c=n===void 0?"":`, retryOf: ${n}`,d=Date.now();if(br(this).debug(`[${l}] sending request`,Yc({retryOfRequestLogID:n,method:i.method,url:s,options:i,headers:o.headers})),(b=i.signal)!=null&&b.aborted)throw new _u;const h=new AbortController,f=await this.fetchWithTimeout(s,o,u,h).catch(iC),m=Date.now();if(f instanceof Error){const y=`retrying, ${t} attempts remaining`;if((_=i.signal)!=null&&_.aborted)throw new _u;const v=om(f)||/timed? ?out/i.test(String(f)+("cause"in f?String(f.cause):""));if(t)return br(this).info(`[${l}] connection ${v?"timed out":"failed"} - ${y}`),br(this).debug(`[${l}] connection ${v?"timed out":"failed"} (${y})`,Yc({retryOfRequestLogID:n,url:s,durationMs:m-d,message:f.message})),this.retryRequest(i,t,n??l);throw br(this).info(`[${l}] connection ${v?"timed out":"failed"} - error; no more retries left`),br(this).debug(`[${l}] connection ${v?"timed out":"failed"} (error; no more retries left)`,Yc({retryOfRequestLogID:n,url:s,durationMs:m-d,message:f.message})),v?new E6:new gb({cause:f})}const p=[...f.headers.entries()].filter(([y])=>y==="request-id").map(([y,v])=>", "+y+": "+JSON.stringify(v)).join(""),g=`[${l}${c}${p}] ${o.method} ${s} ${f.ok?"succeeded":"failed"} with status ${f.status} in ${m-d}ms`;if(!f.ok){const y=this.shouldRetry(f);if(t&&y){const C=`retrying, ${t} attempts remaining`;return await zee(f.body),br(this).info(`${g} - ${C}`),br(this).debug(`[${l}] response error (${C})`,Yc({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:m-d})),this.retryRequest(i,t,n??l,f.headers)}const v=y?"error; no more retries left":"error; not retryable";br(this).info(`${g} - ${v}`);const w=await f.text().catch(C=>iC(C).message),S=x6(w),R=S?void 0:w;throw br(this).debug(`[${l}] response error (${v})`,Yc({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,message:R,durationMs:Date.now()-d})),this.makeStatusError(f.status,S,R,f.headers)}return br(this).info(g),br(this).debug(`[${l}] response start`,Yc({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:m-d})),{response:f,options:i,controller:h,requestLogID:l,retryOfRequestLogID:n,startTime:d}}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}requestAPIList(e,t){const n=this.makeRequest(t,null,void 0);return new Xee(this,n,e)}async fetchWithTimeout(e,t,n,i){const{signal:a,method:o,...s}=t||{};a&&a.addEventListener("abort",()=>i.abort());const u=setTimeout(()=>i.abort(),n),l=globalThis.ReadableStream&&s.body instanceof globalThis.ReadableStream||typeof s.body=="object"&&s.body!==null&&Symbol.asyncIterator in s.body,c={signal:i.signal,...l?{duplex:"half"}:{},method:"GET",...s};o&&(c.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,c)}finally{clearTimeout(u)}}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,n,i){let a;const o=i==null?void 0:i.get("retry-after-ms");if(o){const u=parseFloat(o);Number.isNaN(u)||(a=u)}const s=i==null?void 0:i.get("retry-after");if(s&&!a){const u=parseFloat(s);Number.isNaN(u)?a=Date.parse(s)-Date.now():a=u*1e3}if(!(a&&0<=a&&a<60*1e3)){const u=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,u)}return await Iee(a),this.makeRequest(e,t-1,n)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,o=Math.min(.5*Math.pow(2,a),8),s=1-Math.random()*.25;return o*s*1e3}calculateNonstreamingTimeout(e,t){if(36e5*e/128e3>6e5||t!=null&&e>t)throw new Ge("Streaming is strongly recommended for operations that may token longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}buildRequest(e,{retryCount:t=0}={}){const n={...e},{method:i,path:a,query:o}=n,s=this.buildURL(a,o);"timeout"in n&&Mee("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const{bodyHeaders:u,body:l}=this.buildBody({options:n}),c=this.buildHeaders({options:e,method:i,bodyHeaders:u,retryCount:t});return{req:{method:i,headers:c,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&l instanceof globalThis.ReadableStream&&{duplex:"half"},...l&&{body:l},...this.fetchOptions??{},...n.fetchOptions??{}},url:s,timeout:n.timeout}}buildHeaders({options:e,method:t,bodyHeaders:n,retryCount:i}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const o=pt([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...Bee(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const n=pt([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:$6(e)}:be(this,Wg,"f").call(this,{body:e,headers:n})}}Y6=jt,Wg=new WeakMap;jt.Anthropic=Y6;jt.HUMAN_PROMPT=`

Human:`;jt.AI_PROMPT=`

Assistant:`;jt.DEFAULT_TIMEOUT=6e5;jt.AnthropicError=Ge;jt.APIError=zr;jt.APIConnectionError=gb;jt.APIConnectionTimeoutError=E6;jt.APIUserAbortError=_u;jt.NotFoundError=j6;jt.ConflictError=T6;jt.RateLimitError=M6;jt.BadRequestError=R6;jt.AuthenticationError=C6;jt.InternalServerError=I6;jt.PermissionDeniedError=P6;jt.UnprocessableEntityError=A6;jt.toFile=nte;class md extends jt{constructor(){super(...arguments),this.completions=new X6(this),this.messages=new NP(this),this.models=new Q6(this),this.beta=new Im(this)}}md.Completions=X6;md.Messages=NP;md.Models=Q6;md.Beta=Im;const{HUMAN_PROMPT:Jwe,AI_PROMPT:Xwe}=md;class MA extends TP{static lc_name(){return"AnthropicToolsOutputParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","anthropic","output_parsers"]}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){let t=e;if(typeof e=="string")try{t=JSON.parse(e)}catch(i){throw new df(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(i.message)}`,e)}else t=e;if(this.zodSchema===void 0)return t;const n=await j3(this.zodSchema,t);if(n.success)return n.data;throw new df(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(n.error.issues)}`,JSON.stringify(t,null,2))}async parseResult(e){const t=e.flatMap(a=>{const{message:o}=a;return Array.isArray(o.content)?e8(o.content)[0]:[]});if(t[0]===void 0)throw new Error("No parseable tool calls provided to AnthropicToolsOutputParser.");const[n]=t;return await this._validateResult(n.args)}}function e8(r){const e=[];for(const t of r)t.type==="tool_use"?e.push({name:t.name,args:t.input,id:t.id,type:"tool_call"}):t.type==="server_tool_use"&&t.name==="web_search"&&e.push({name:t.name,args:t.input,id:t.id,type:"tool_call"});return e}function cte(r){if(r)return r==="any"?{type:"any"}:r==="auto"?{type:"auto"}:typeof r=="string"?{type:"tool",name:r}:r}function dte(r){return r==null||typeof r!="object"||!("type"in r)||r.type!=="image"||!("source"in r)||typeof r.source!="object"||r.source==null||!("type"in r.source)?!1:r.source.type==="base64"?!(!("media_type"in r.source)||typeof r.source.media_type!="string"||!("data"in r.source)||typeof r.source.data!="string"):r.source.type==="url"?!(!("url"in r.source)||typeof r.source.url!="string"):!1}function IA(r){const e=u3({dataUrl:r});if(e)return{type:"base64",media_type:e.mime_type,data:e.data};let t;try{t=new URL(r)}catch{throw new Error([`Malformed image URL: ${JSON.stringify(r)}. Content blocks of type 'image_url' must be a valid http, https, or base64-encoded data URL.`,"Example: data:image/png;base64,/9j/4AAQSk...","Example: https://example.com/image.jpg"].join(`

`))}if(t.protocol==="http:"||t.protocol==="https:")return{type:"url",url:r};throw new Error([`Invalid image URL protocol: ${JSON.stringify(t.protocol)}. Anthropic only supports images as http, https, or base64-encoded data URLs on 'image_url' content blocks.`,"Example: data:image/png;base64,/9j/4AAQSk...","Example: https://example.com/image.jpg"].join(`

`))}function fte(r){const e=[];for(const t of r)if(t._getType()==="tool")if(typeof t.content=="string"){const n=e[e.length-1];(n==null?void 0:n._getType())==="human"&&Array.isArray(n.content)&&"type"in n.content[0]&&n.content[0].type==="tool_result"?n.content.push({type:"tool_result",content:t.content,tool_use_id:t.tool_call_id}):e.push(new Al({content:[{type:"tool_result",content:t.content,tool_use_id:t.tool_call_id}]}))}else e.push(new Al({content:[{type:"tool_result",...t.content!=null?{content:uC(t.content)}:{},tool_use_id:t.tool_call_id}]}));else e.push(t);return e}function xA(r){if(r.id===void 0)throw new Error('Anthropic requires all tool calls to have an "id".');return{type:"tool_use",id:r.id,name:r.name,input:r.args}}const pte={providerName:"anthropic",fromStandardTextBlock(r){return{type:"text",text:r.text,..."citations"in(r.metadata??{})?{citations:r.metadata.citations}:{},..."cache_control"in(r.metadata??{})?{cache_control:r.metadata.cache_control}:{}}},fromStandardImageBlock(r){if(r.source_type==="url"){const e=u3({dataUrl:r.url,asTypedArray:!1});return e?{type:"image",source:{type:"base64",data:e.data,media_type:e.mime_type},..."cache_control"in(r.metadata??{})?{cache_control:r.metadata.cache_control}:{}}:{type:"image",source:{type:"url",url:r.url,media_type:r.mime_type??""},..."cache_control"in(r.metadata??{})?{cache_control:r.metadata.cache_control}:{}}}else{if(r.source_type==="base64")return{type:"image",source:{type:"base64",data:r.data,media_type:r.mime_type??""},..."cache_control"in(r.metadata??{})?{cache_control:r.metadata.cache_control}:{}};throw new Error(`Unsupported image source type: ${r.source_type}`)}},fromStandardFileBlock(r){const e=(r.mime_type??"").split(";")[0];if(r.source_type==="url"){if(e==="application/pdf"||e==="")return{type:"document",source:{type:"url",url:r.url,media_type:r.mime_type??""},..."cache_control"in(r.metadata??{})?{cache_control:r.metadata.cache_control}:{},..."citations"in(r.metadata??{})?{citations:r.metadata.citations}:{},..."context"in(r.metadata??{})?{context:r.metadata.context}:{},..."title"in(r.metadata??{})?{title:r.metadata.title}:{}};throw new Error(`Unsupported file mime type for file url source: ${r.mime_type}`)}else if(r.source_type==="text"){if(e==="text/plain"||e==="")return{type:"document",source:{type:"text",data:r.text,media_type:r.mime_type??""},..."cache_control"in(r.metadata??{})?{cache_control:r.metadata.cache_control}:{},..."citations"in(r.metadata??{})?{citations:r.metadata.citations}:{},..."context"in(r.metadata??{})?{context:r.metadata.context}:{},..."title"in(r.metadata??{})?{title:r.metadata.title}:{}};throw new Error(`Unsupported file mime type for file text source: ${r.mime_type}`)}else if(r.source_type==="base64"){if(e==="application/pdf"||e==="")return{type:"document",source:{type:"base64",data:r.data,media_type:"application/pdf"},..."cache_control"in(r.metadata??{})?{cache_control:r.metadata.cache_control}:{},..."citations"in(r.metadata??{})?{citations:r.metadata.citations}:{},..."context"in(r.metadata??{})?{context:r.metadata.context}:{},..."title"in(r.metadata??{})?{title:r.metadata.title}:{}};if(["image/jpeg","image/png","image/gif","image/webp"].includes(e))return{type:"document",source:{type:"content",content:[{type:"image",source:{type:"base64",data:r.data,media_type:e}}]},..."cache_control"in(r.metadata??{})?{cache_control:r.metadata.cache_control}:{},..."citations"in(r.metadata??{})?{citations:r.metadata.citations}:{},..."context"in(r.metadata??{})?{context:r.metadata.context}:{},..."title"in(r.metadata??{})?{title:r.metadata.title}:{}};throw new Error(`Unsupported file mime type for file base64 source: ${r.mime_type}`)}else throw new Error(`Unsupported file source type: ${r.source_type}`)}};function uC(r){const e=["tool_use","tool_result","input_json_delta","server_tool_use","web_search_tool_result","web_search_result"],t=["text","text_delta"];return typeof r=="string"?r:r.map(i=>{if(tf(i))return m7(i,pte);const a="cache_control"in i?i.cache_control:void 0;if(i.type==="image_url"){let o;return typeof i.image_url=="string"?o=IA(i.image_url):o=IA(i.image_url.url),{type:"image",source:o,...a?{cache_control:a}:{}}}else{if(dte(i))return i;if(i.type==="document")return{...i,...a?{cache_control:a}:{}};if(i.type==="thinking")return{type:"thinking",thinking:i.thinking,signature:i.signature,...a?{cache_control:a}:{}};if(i.type==="redacted_thinking")return{type:"redacted_thinking",data:i.data,...a?{cache_control:a}:{}};if(t.find(o=>o===i.type)&&"text"in i)return{type:"text",text:i.text,...a?{cache_control:a}:{},..."citations"in i&&i.citations?{citations:i.citations}:{}};if(e.find(o=>o===i.type)){const o={...i};if("index"in o&&delete o.index,o.type==="input_json_delta"&&(o.type="tool_use"),"input"in o&&typeof o.input=="string")try{o.input=JSON.parse(o.input)}catch{o.input={}}return{...o,...a?{cache_control:a}:{}}}else throw new Error("Unsupported message content format")}})}function DA(r){const e=fte(r);let t;e.length>0&&e[0]._getType()==="system"&&(t=r[0].content);const i=(t!==void 0?e.slice(1):e).map(a=>{var s;let o;if(a._getType()==="human")o="user";else if(a._getType()==="ai")o="assistant";else if(a._getType()==="tool")o="user";else throw a._getType()==="system"?new Error("System messages are only permitted as the first passed message."):new Error(`Message type "${a._getType()}" is not supported.`);if(xu(a)&&((s=a.tool_calls)!=null&&s.length)){if(typeof a.content=="string")return a.content===""?{role:o,content:a.tool_calls.map(xA)}:{role:o,content:[{type:"text",text:a.content},...a.tool_calls.map(xA)]};{const{content:u}=a;return!a.tool_calls.every(c=>u.find(d=>(d.type==="tool_use"||d.type==="input_json_delta"||d.type==="server_tool_use")&&d.id===c.id))&&console.warn('The "tool_calls" field on a message is only respected if content is a string.'),{role:o,content:uC(a.content)}}}else return{role:o,content:uC(a.content)}});return{messages:hte(i),system:t}}function hte(r){if(!r||r.length<=1)return r;const e=[];let t=r[0];const n=a=>typeof a=="string"?[{type:"text",text:a}]:a,i=a=>a.role!=="user"||typeof a.content=="string"?!1:Array.isArray(a.content)&&a.content.every(o=>o.type==="tool_result");for(let a=1;a<r.length;a+=1){const o=r[a];i(t)&&i(o)?t={...t,content:[...n(t.content),...n(o.content)]}:(e.push(t),t=o)}return e.push(t),e}function mte(r,e){var t;if(r.type==="message_start"){const{content:n,usage:i,...a}=r.message,o={};for(const[d,h]of Object.entries(a))h!=null&&(o[d]=h);const{input_tokens:s,output_tokens:u,...l}=i??{},c={input_tokens:s,output_tokens:u,total_tokens:s+u,input_token_details:{cache_creation:l.cache_creation_input_tokens,cache_read:l.cache_read_input_tokens}};return{chunk:new ft({content:e.coerceContentToString?"":[],additional_kwargs:o,usage_metadata:e.streamUsage?c:void 0,response_metadata:{usage:{...l}},id:r.message.id})}}else if(r.type==="message_delta"){const n={input_tokens:0,output_tokens:r.usage.output_tokens,total_tokens:r.usage.output_tokens,input_token_details:{cache_creation:r.usage.cache_creation_input_tokens,cache_read:r.usage.cache_read_input_tokens}};return{chunk:new ft({content:e.coerceContentToString?"":[],additional_kwargs:{...r.delta},usage_metadata:e.streamUsage?n:void 0})}}else if(r.type==="content_block_start"&&["tool_use","document","server_tool_use","web_search_tool_result"].includes(r.content_block.type)){const n=r.content_block;let i;return n.type==="tool_use"?i=[{id:n.id,index:r.index,name:n.name,args:""}]:n.type==="server_tool_use"?i=[{id:n.id,index:r.index,name:n.name,args:""}]:i=[],{chunk:new ft({content:e.coerceContentToString?"":[{index:r.index,...r.content_block,input:n.type==="server_tool_use"||n.type==="tool_use"?"":void 0}],additional_kwargs:{},tool_call_chunks:i})}}else if(r.type==="content_block_delta"&&["text_delta","citations_delta","thinking_delta","signature_delta"].includes(r.delta.type)){if(e.coerceContentToString&&"text"in r.delta)return{chunk:new ft({content:r.delta.text})};{const n=r.delta;return"citation"in n&&(n.citations=[n.citation],delete n.citation),n.type==="thinking_delta"||n.type==="signature_delta"?{chunk:new ft({content:[{index:r.index,...n,type:"thinking"}]})}:{chunk:new ft({content:[{index:r.index,...n,type:"text"}]})}}}else{if(r.type==="content_block_delta"&&r.delta.type==="input_json_delta")return{chunk:new ft({content:e.coerceContentToString?"":[{index:r.index,input:r.delta.partial_json,type:r.delta.type}],additional_kwargs:{},tool_call_chunks:[{index:r.index,args:r.delta.partial_json}]})};if(r.type==="content_block_start"&&r.content_block.type==="text"){const n=(t=r.content_block)==null?void 0:t.text;if(n!==void 0)return{chunk:new ft({content:e.coerceContentToString?n:[{index:r.index,...r.content_block}],additional_kwargs:{}})}}else{if(r.type==="content_block_start"&&r.content_block.type==="redacted_thinking")return{chunk:new ft({content:e.coerceContentToString?"":[{index:r.index,...r.content_block}]})};if(r.type==="content_block_start"&&r.content_block.type==="thinking"){const n=r.content_block.thinking;return{chunk:new ft({content:e.coerceContentToString?n:[{index:r.index,...r.content_block}]})}}}}return null}function gte(r,e){const t=e.usage,n=t!=null?{input_tokens:t.input_tokens??0,output_tokens:t.output_tokens??0,total_tokens:(t.input_tokens??0)+(t.output_tokens??0),input_token_details:{cache_creation:t.cache_creation_input_tokens,cache_read:t.cache_read_input_tokens}}:void 0;if(r.length===1&&r[0].type==="text")return[{text:r[0].text,message:new Su({content:r[0].text,additional_kwargs:e,usage_metadata:n,response_metadata:e,id:e.id})}];{const i=e8(r);return[{text:"",message:new Su({content:r,additional_kwargs:e,tool_calls:i,usage_metadata:n,response_metadata:e,id:e.id})}]}}function Rg(r,e){return r.lc_error_code=e,r.message=`${r.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,r}function $A(r){let e;return r.status===400&&r.message.includes("tool")?e=Rg(r,"INVALID_TOOL_RESULTS"):r.status===401?e=Rg(r,"MODEL_AUTHENTICATION"):r.status===404?e=Rg(r,"MODEL_NOT_FOUND"):r.status===429?e=Rg(r,"MODEL_RATE_LIMIT"):e=r,e}function _te(r){return!!(r.tools&&r.tools.length>0)}function bte(r){for(const e of r.messages??[])if(typeof e.content!="string"){for(const t of e.content??[])if(typeof t=="object"&&t!=null&&t.type==="document"&&typeof t.citations=="object"&&t.citations.enabled)return!0}return!1}function yte(r){return!!(r.thinking&&r.thinking.type==="enabled")}function vte(r){return"input_schema"in r}function wte(r){const e=["web_search"];return typeof r=="object"&&r!==null&&"type"in r&&"name"in r&&typeof r.type=="string"&&typeof r.name=="string"&&e.includes(r.name)}function Ste(r){if(typeof r.content=="string")return r.content;if(Array.isArray(r.content)&&r.content.length>=1&&"input"in r.content[0])return typeof r.content[0].input=="string"?r.content[0].input:JSON.stringify(r.content[0].input);if(Array.isArray(r.content)&&r.content.length>=1&&"text"in r.content[0])return r.content[0].text}class Ote extends Qr{static lc_name(){return"ChatAnthropic"}get lc_secrets(){return{anthropicApiKey:"ANTHROPIC_API_KEY",apiKey:"ANTHROPIC_API_KEY"}}get lc_aliases(){return{modelName:"model"}}constructor(e){if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"anthropicApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:2048}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"claude-2.1"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"claude-2.1"}),Object.defineProperty(this,"invocationKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clientOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thinking",{enumerable:!0,configurable:!0,writable:!0,value:{type:"disabled"}}),Object.defineProperty(this,"batchClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamingClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"createClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.anthropicApiKey=(e==null?void 0:e.apiKey)??(e==null?void 0:e.anthropicApiKey)??ot("ANTHROPIC_API_KEY"),!this.anthropicApiKey&&!(e!=null&&e.createClient))throw new Error("Anthropic API key not found");this.clientOptions=(e==null?void 0:e.clientOptions)??{},this.apiKey=this.anthropicApiKey,this.apiUrl=e==null?void 0:e.anthropicApiUrl,this.modelName=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.model=this.modelName,this.invocationKwargs=(e==null?void 0:e.invocationKwargs)??{},this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topK=(e==null?void 0:e.topK)??this.topK,this.topP=(e==null?void 0:e.topP)??this.topP,this.maxTokens=(e==null?void 0:e.maxTokensToSample)??(e==null?void 0:e.maxTokens)??this.maxTokens,this.stopSequences=(e==null?void 0:e.stopSequences)??this.stopSequences,this.streaming=(e==null?void 0:e.streaming)??!1,this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage,this.thinking=(e==null?void 0:e.thinking)??this.thinking,this.createClient=(e==null?void 0:e.createClient)??(t=>new md(t))}getLsParams(e){const t=this.invocationParams(e);return{ls_provider:"anthropic",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??void 0,ls_max_tokens:t.max_tokens??void 0,ls_stop:e.stop}}formatStructuredToolToAnthropic(e){if(!(!e||!e.length))return e.map(t=>{if(wte(t)||vte(t))return t;if(Tm(t))return{name:t.function.name,description:t.function.description,input_schema:t.function.parameters};if(Sf(t))return{name:t.name,description:t.description,input_schema:lf(t.schema)?Zu(t.schema):t.schema};throw new Error(`Unknown tool type passed to ChatAnthropic: ${JSON.stringify(t,null,2)}`)})}bindTools(e,t){return this.withConfig({tools:this.formatStructuredToolToAnthropic(e),...t})}invocationParams(e){const t=cte(e==null?void 0:e.tool_choice);if(this.thinking.type==="enabled"){if(this.topK!==-1)throw new Error("topK is not supported when thinking is enabled");if(this.topP!==-1)throw new Error("topP is not supported when thinking is enabled");if(this.temperature!==1)throw new Error("temperature is not supported when thinking is enabled");return{model:this.model,stop_sequences:(e==null?void 0:e.stop)??this.stopSequences,stream:this.streaming,max_tokens:this.maxTokens,tools:this.formatStructuredToolToAnthropic(e==null?void 0:e.tools),tool_choice:t,thinking:this.thinking,...this.invocationKwargs}}return{model:this.model,temperature:this.temperature,top_k:this.topK,top_p:this.topP,stop_sequences:(e==null?void 0:e.stop)??this.stopSequences,stream:this.streaming,max_tokens:this.maxTokens,tools:this.formatStructuredToolToAnthropic(e==null?void 0:e.tools),tool_choice:t,thinking:this.thinking,...this.invocationKwargs}}_identifyingParams(){return{model_name:this.model,...this.invocationParams()}}identifyingParams(){return{model_name:this.model,...this.invocationParams()}}async*_streamResponseChunks(e,t,n){var l;const i=this.invocationParams(t),a=DA(e),o={...i,...a,stream:!0},s=!_te(o)&&!bte(o)&&!yte(o),u=await this.createStreamWithRetry(o,{headers:t.headers});for await(const c of u){if((l=t.signal)!=null&&l.aborted)throw u.controller.abort(),new Error("AbortError: User aborted the request.");const d=this.streamUsage??t.streamUsage,h=mte(c,{streamUsage:d,coerceContentToString:s});if(!h)continue;const{chunk:f}=h,m=Ste(f),p=new wr({message:new ft({content:f.content,additional_kwargs:f.additional_kwargs,tool_call_chunks:f.tool_call_chunks,usage_metadata:d?f.usage_metadata:void 0,response_metadata:f.response_metadata,id:f.id}),text:m??""});yield p,await(n==null?void 0:n.handleLLMNewToken(m??"",void 0,void 0,void 0,void 0,{chunk:p}))}}async _generateNonStreaming(e,t,n){const i=await this.completionWithRetry({...t,stream:!1,...DA(e)},n),{content:a,...o}=i,s=gte(a,o),{role:u,type:l,...c}=o;return{generations:s,llmOutput:c}}async _generate(e,t,n){if(this.stopSequences&&t.stop)throw new Error('"stopSequence" parameter found in input and default params');const i=this.invocationParams(t);if(i.stream){let a;const o=this._streamResponseChunks(e,t,n);for await(const s of o)a===void 0?a=s:a=a.concat(s);if(a===void 0)throw new Error("No chunks returned from Anthropic API.");return{generations:[{text:a.text,message:a.message}]}}else return this._generateNonStreaming(e,i,{signal:t.signal,headers:t.headers})}async createStreamWithRetry(e,t){if(!this.streamingClient){const i=this.apiUrl?{baseURL:this.apiUrl}:void 0;this.streamingClient=this.createClient({dangerouslyAllowBrowser:!0,...this.clientOptions,...i,apiKey:this.apiKey,maxRetries:0})}const n=async()=>{try{return await this.streamingClient.messages.create({...e,...this.invocationKwargs,stream:!0},t)}catch(i){throw $A(i)}};return this.caller.call(n)}async completionWithRetry(e,t){if(!this.batchClient){const i=this.apiUrl?{baseURL:this.apiUrl}:void 0;this.batchClient=this.createClient({dangerouslyAllowBrowser:!0,...this.clientOptions,...i,apiKey:this.apiKey,maxRetries:0})}const n=async()=>{try{return await this.batchClient.messages.create({...e,...this.invocationKwargs},t)}catch(i){throw $A(i)}};return this.caller.callWithOptions({signal:t.signal??void 0},n)}_llmType(){return"anthropic"}withStructuredOutput(e,t){var m;const n=e,i=t==null?void 0:t.name,a=t==null?void 0:t.method,o=t==null?void 0:t.includeRaw;if(a==="jsonMode")throw new Error('Anthropic only supports "functionCalling" as a method.');let s=i??"extract",u,l;if(lf(n)){const p=Zu(n);l=[{name:s,description:p.description??"A function available to call.",input_schema:p}],u=new MA({returnSingle:!0,keyName:s,zodSchema:n})}else{let p;typeof n.name=="string"&&typeof n.description=="string"&&typeof n.input_schema=="object"&&n.input_schema!=null?(p=n,s=n.name):p={name:s,description:n.description??"",input_schema:n},l=[p],u=new MA({returnSingle:!0,keyName:s})}let c;if(((m=this.thinking)==null?void 0:m.type)==="enabled"){const p="Anthropic structured output relies on forced tool calling, which is not supported when `thinking` is enabled. This method will raise OutputParserException if tool calls are not generated. Consider disabling `thinking` or adjust your prompt to ensure the tool is called.";console.warn(p),c=this.withConfig({tools:l,ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:Zu(n)}});const g=b=>{if(!b.tool_calls||b.tool_calls.length===0)throw new Error(p);return b};c=c.pipe(g)}else c=this.withConfig({tools:l,tool_choice:{type:"tool",name:s},ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:Zu(n)}});if(!o)return c.pipe(u).withConfig({runName:"ChatAnthropicStructuredOutput"});const d=$u.assign({parsed:(p,g)=>u.invoke(p.raw,g)}),h=$u.assign({parsed:()=>null}),f=d.withFallbacks({fallbacks:[h]});return Nr.from([{raw:c},f]).withConfig({runName:"StructuredOutputRunnable"})}}class Ete extends Ote{}class Rte extends MP{static lc_name(){return"ChatFireworks"}_llmType(){return"fireworks"}get lc_secrets(){return{fireworksApiKey:"FIREWORKS_API_KEY",apiKey:"FIREWORKS_API_KEY"}}constructor(e){const t=(e==null?void 0:e.apiKey)||(e==null?void 0:e.fireworksApiKey)||ot("FIREWORKS_API_KEY");if(!t)throw new Error('Fireworks API key not found. Please set the FIREWORKS_API_KEY environment variable or provide the key into "fireworksApiKey"');super({...e,model:(e==null?void 0:e.model)||(e==null?void 0:e.modelName)||"accounts/fireworks/models/llama-v3p1-8b-instruct",apiKey:t,configuration:{baseURL:"https://api.fireworks.ai/inference/v1"},streamUsage:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"fireworksApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.fireworksApiKey=t,this.apiKey=t}getLsParams(e){const t=super.getLsParams(e);return t.ls_provider="fireworks",t}toJSON(){const e=super.toJSON();return"kwargs"in e&&typeof e.kwargs=="object"&&e.kwargs!=null&&(delete e.kwargs.openai_api_key,delete e.kwargs.configuration),e}async completionWithRetry(e,t){return delete e.frequency_penalty,delete e.presence_penalty,delete e.logit_bias,delete e.functions,e.stream===!0?super.completionWithRetry(e,t):super.completionWithRetry(e,t)}}function Cte(r){return r!=null&&typeof r=="object"&&"on"in r}async function Pte(r,e){if(Cte(r))return new Promise(n=>{r.on("readable",()=>{let i;for(;;){if(i=r.read(),i==null){e(new Uint8Array,!0);break}e(i)}n()})});const t=r.getReader();for(;;){const n=await t.read();if(n.done){e(new Uint8Array,!0);break}e(n.value)}}function jte(r){let e,t,n,i=!1;return function(o,s){if(s){r(o,0,!0);return}e===void 0?(e=o,t=0,n=-1):e=Ate(e,o);const u=e.length;let l=0;for(;t<u;){i&&(e[t]===10&&(l=++t),i=!1);let c=-1;for(;t<u&&c===-1;++t)switch(e[t]){case 58:n===-1&&(n=t-l);break;case 13:i=!0;case 10:c=t;break}if(c===-1)break;r(e.subarray(l,c),n),l=t,n=-1}l===u?e=void 0:l!==0&&(e=e.subarray(l),t-=l)}}function Tte(r,e,t){let n=Cv();const i=new TextDecoder;return function(o,s,u){if(u){Ite(n)||(r==null||r(n),n=Cv());return}if(o.length===0)r==null||r(n),n=Cv();else if(s>0){const l=i.decode(o.subarray(0,s)),c=s+(o[s+1]===32?2:1),d=i.decode(o.subarray(c));switch(l){case"data":n.data=n.data?n.data+`
`+d:d;break;case"event":n.event=d;break}}}}function Ate(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function Cv(){return{data:"",event:"",id:"",retry:void 0}}function Mte(r){const e=new ReadableStream({async start(t){const n=Tte(a=>{a.data&&t.enqueue(a.data)});await Pte(r,jte((a,o,s)=>{n(a,o,s),s&&t.close()}))}});return Or.fromReadableStream(e)}function Ite(r){return r.data===""&&r.event===""&&r.id===""&&r.retry===void 0}class xte extends w6{static lc_name(){return"TogetherAI"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"repetitionPenalty",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"safetyModel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inferenceAPIUrl",{enumerable:!0,configurable:!0,writable:!0,value:"https://api.together.xyz/inference"});const t=e.apiKey??ot("TOGETHER_AI_API_KEY");if(!t)throw new Error("TOGETHER_AI_API_KEY not found.");if(!e.model&&!e.modelName)throw new Error("Model name is required for TogetherAI.");this.apiKey=t,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topK=(e==null?void 0:e.topK)??this.topK,this.topP=(e==null?void 0:e.topP)??this.topP,this.modelName=e.model??e.modelName??"",this.model=this.modelName,this.streaming=e.streaming??this.streaming,this.repetitionPenalty=e.repetitionPenalty??this.repetitionPenalty,this.logprobs=e.logprobs,this.safetyModel=e.safetyModel,this.maxTokens=e.maxTokens,this.stop=e.stop}_llmType(){return"together_ai"}constructHeaders(){return{accept:"application/json","content-type":"application/json",Authorization:`Bearer ${this.apiKey}`}}constructBody(e,t){return{model:(t==null?void 0:t.model)??(t==null?void 0:t.modelName)??(this==null?void 0:this.model),prompt:e,temperature:(this==null?void 0:this.temperature)??(t==null?void 0:t.temperature),top_k:(this==null?void 0:this.topK)??(t==null?void 0:t.topK),top_p:(this==null?void 0:this.topP)??(t==null?void 0:t.topP),repetition_penalty:(this==null?void 0:this.repetitionPenalty)??(t==null?void 0:t.repetitionPenalty),logprobs:(this==null?void 0:this.logprobs)??(t==null?void 0:t.logprobs),stream_tokens:this==null?void 0:this.streaming,safety_model:(this==null?void 0:this.safetyModel)??(t==null?void 0:t.safetyModel),max_tokens:(this==null?void 0:this.maxTokens)??(t==null?void 0:t.maxTokens),stop:(this==null?void 0:this.stop)??(t==null?void 0:t.stop)}}async completionWithRetry(e,t){return this.caller.call(async()=>{const n=await fetch(this.inferenceAPIUrl,{method:"POST",headers:{...this.constructHeaders()},body:JSON.stringify(this.constructBody(e,t))});if(n.status===200)return n.json();const i=await n.json();throw new Error(`Error getting prompt completion from Together AI. ${JSON.stringify(i,null,2)}`)})}async _call(e,t){var i,a,o;const n=await this.completionWithRetry(e,t);return n.output?((i=n.output.choices[0])==null?void 0:i.text)??"":((o=(a=n.choices)==null?void 0:a[0])==null?void 0:o.text)??""}async*_streamResponseChunks(e,t,n){const i=await fetch(this.inferenceAPIUrl,{method:"POST",headers:{...this.constructHeaders()},body:JSON.stringify(this.constructBody(e,t))});if(i.status!==200||!i.body){const o=await i.json();throw new Error(`Error getting prompt completion from Together AI. ${JSON.stringify(o,null,2)}`)}const a=Mte(i.body);for await(const o of a)if(o!=="[DONE]"){const s=JSON.parse(o),u=new nl({text:s.choices[0].text??""});yield u,n==null||n.handleLLMNewToken(u.text??"")}}}var NA;(function(r){r.STRING="string",r.NUMBER="number",r.INTEGER="integer",r.BOOLEAN="boolean",r.ARRAY="array",r.OBJECT="object"})(NA||(NA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qA;(function(r){r.LANGUAGE_UNSPECIFIED="language_unspecified",r.PYTHON="python"})(qA||(qA={}));var BA;(function(r){r.OUTCOME_UNSPECIFIED="outcome_unspecified",r.OUTCOME_OK="outcome_ok",r.OUTCOME_FAILED="outcome_failed",r.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(BA||(BA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=["user","model","function","system"];var zA;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(zA||(zA={}));var LA;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(LA||(LA={}));var FA;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(FA||(FA={}));var kA;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER"})(kA||(kA={}));var Hh;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.LANGUAGE="LANGUAGE",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.OTHER="OTHER"})(Hh||(Hh={}));var VA;(function(r){r.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",r.RETRIEVAL_QUERY="RETRIEVAL_QUERY",r.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",r.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",r.CLASSIFICATION="CLASSIFICATION",r.CLUSTERING="CLUSTERING"})(VA||(VA={}));var kd;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE"})(kd||(kd={}));var HA;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(HA||(HA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Md extends Yt{constructor(e,t){super(e),this.response=t}}class t8 extends Yt{constructor(e,t,n,i){super(e),this.status=t,this.statusText=n,this.errorDetails=i}}class Pl extends Yt{}class r8 extends Yt{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dte="https://generativelanguage.googleapis.com",$te="v1beta",Nte="0.24.1",qte="genai-js";var dd;(function(r){r.GENERATE_CONTENT="generateContent",r.STREAM_GENERATE_CONTENT="streamGenerateContent",r.COUNT_TOKENS="countTokens",r.EMBED_CONTENT="embedContent",r.BATCH_EMBED_CONTENTS="batchEmbedContents"})(dd||(dd={}));class Bte{constructor(e,t,n,i,a){this.model=e,this.task=t,this.apiKey=n,this.stream=i,this.requestOptions=a}toString(){var e,t;const n=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||$te;let a=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||Dte}/${n}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function Ute(r){const e=[];return r!=null&&r.apiClient&&e.push(r.apiClient),e.push(`${qte}/${Nte}`),e.join(" ")}async function zte(r){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",Ute(r.requestOptions)),t.append("x-goog-api-key",r.apiKey);let n=(e=r.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(i){throw new Pl(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${i.message}`)}for(const[i,a]of n.entries()){if(i==="x-goog-api-key")throw new Pl(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new Pl(`Header name ${i} can only be set using the apiClient field`);t.append(i,a)}}return t}async function Lte(r,e,t,n,i,a){const o=new Bte(r,e,t,n,a);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},Hte(a)),{method:"POST",headers:await zte(o),body:i})}}async function xm(r,e,t,n,i,a={},o=fetch){const{url:s,fetchOptions:u}=await Lte(r,e,t,n,i,a);return Fte(s,u,o)}async function Fte(r,e,t=fetch){let n;try{n=await t(r,e)}catch(i){kte(i,r)}return n.ok||await Vte(n,r),n}function kte(r,e){let t=r;throw t.name==="AbortError"?(t=new r8(`Request aborted when fetching ${e.toString()}: ${r.message}`),t.stack=r.stack):r instanceof t8||r instanceof Pl||(t=new Yt(`Error fetching from ${e.toString()}: ${r.message}`),t.stack=r.stack),t}async function Vte(r,e){let t="",n;try{const i=await r.json();t=i.error.message,i.error.details&&(t+=` ${JSON.stringify(i.error.details)}`,n=i.error.details)}catch{}throw new t8(`Error fetching from ${e.toString()}: [${r.status} ${r.statusText}] ${t}`,r.status,r.statusText,n)}function Hte(r){const e={};if((r==null?void 0:r.signal)!==void 0||(r==null?void 0:r.timeout)>=0){const t=new AbortController;(r==null?void 0:r.timeout)>=0&&setTimeout(()=>t.abort(),r.timeout),r!=null&&r.signal&&r.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(r){return r.text=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Gg(r.candidates[0]))throw new Md(`${bl(r)}`,r);return Kte(r)}else if(r.promptFeedback)throw new Md(`Text not available. ${bl(r)}`,r);return""},r.functionCall=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Gg(r.candidates[0]))throw new Md(`${bl(r)}`,r);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),KA(r)[0]}else if(r.promptFeedback)throw new Md(`Function call not available. ${bl(r)}`,r)},r.functionCalls=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Gg(r.candidates[0]))throw new Md(`${bl(r)}`,r);return KA(r)}else if(r.promptFeedback)throw new Md(`Function call not available. ${bl(r)}`,r)},r}function Kte(r){var e,t,n,i;const a=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const o of(i=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)o.text&&a.push(o.text),o.executableCode&&a.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&a.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function KA(r){var e,t,n,i;const a=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const o of(i=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)o.functionCall&&a.push(o.functionCall);if(a.length>0)return a}const Wte=[Hh.RECITATION,Hh.SAFETY,Hh.LANGUAGE];function Gg(r){return!!r.finishReason&&Wte.includes(r.finishReason)}function bl(r){var e,t,n;let i="";if((!r.candidates||r.candidates.length===0)&&r.promptFeedback)i+="Response was blocked",!((e=r.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${r.promptFeedback.blockReason}`),!((t=r.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(i+=`: ${r.promptFeedback.blockReasonMessage}`);else if(!((n=r.candidates)===null||n===void 0)&&n[0]){const a=r.candidates[0];Gg(a)&&(i+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(i+=`: ${a.finishMessage}`))}return i}function um(r){return this instanceof um?(this.v=r,this):new um(r)}function Gte(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){n[h]&&(i[h]=function(f){return new Promise(function(m,p){a.push([h,f,m,p])>1||s(h,f)})})}function s(h,f){try{u(n[h](f))}catch(m){d(a[0][3],m)}}function u(h){h.value instanceof um?Promise.resolve(h.value.v).then(l,c):d(a[0][2],h)}function l(h){s("next",h)}function c(h){s("throw",h)}function d(h,f){h(f),a.shift(),a.length&&s(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Jte(r){const e=r.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=Qte(e),[n,i]=t.tee();return{stream:Zte(n),response:Xte(i)}}async function Xte(r){const e=[],t=r.getReader();for(;;){const{done:n,value:i}=await t.read();if(n)return qP(Yte(e));e.push(i)}}function Zte(r){return Gte(this,arguments,function*(){const t=r.getReader();for(;;){const{value:n,done:i}=yield um(t.read());if(i)break;yield yield um(qP(n))}})}function Qte(r){const e=r.getReader();return new ReadableStream({start(n){let i="";return a();function a(){return e.read().then(({value:o,done:s})=>{if(s){if(i.trim()){n.error(new Yt("Failed to parse stream"));return}n.close();return}i+=o;let u=i.match(WA),l;for(;u;){try{l=JSON.parse(u[1])}catch{n.error(new Yt(`Error parsing JSON response: "${u[1]}"`));return}n.enqueue(l),i=i.substring(u[0].length),u=i.match(WA)}return a()}).catch(o=>{let s=o;throw s.stack=o.stack,s.name==="AbortError"?s=new r8("Request aborted when reading from the stream"):s=new Yt("Error reading from the stream"),s})}}})}function Yte(r){const e=r[r.length-1],t={promptFeedback:e==null?void 0:e.promptFeedback};for(const n of r){if(n.candidates){let i=0;for(const a of n.candidates)if(t.candidates||(t.candidates=[]),t.candidates[i]||(t.candidates[i]={index:i}),t.candidates[i].citationMetadata=a.citationMetadata,t.candidates[i].groundingMetadata=a.groundingMetadata,t.candidates[i].finishReason=a.finishReason,t.candidates[i].finishMessage=a.finishMessage,t.candidates[i].safetyRatings=a.safetyRatings,a.content&&a.content.parts){t.candidates[i].content||(t.candidates[i].content={role:a.content.role||"user",parts:[]});const o={};for(const s of a.content.parts)s.text&&(o.text=s.text),s.functionCall&&(o.functionCall=s.functionCall),s.executableCode&&(o.executableCode=s.executableCode),s.codeExecutionResult&&(o.codeExecutionResult=s.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),t.candidates[i].content.parts.push(o)}i++}n.usageMetadata&&(t.usageMetadata=n.usageMetadata)}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n8(r,e,t,n){const i=await xm(e,dd.STREAM_GENERATE_CONTENT,r,!0,JSON.stringify(t),n);return Jte(i)}async function i8(r,e,t,n){const a=await(await xm(e,dd.GENERATE_CONTENT,r,!1,JSON.stringify(t),n)).json();return{response:qP(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8(r){if(r!=null){if(typeof r=="string")return{role:"system",parts:[{text:r}]};if(r.text)return{role:"system",parts:[r]};if(r.parts)return r.role?r:{role:"system",parts:r.parts}}}function lm(r){let e=[];if(typeof r=="string")e=[{text:r}];else for(const t of r)typeof t=="string"?e.push({text:t}):e.push(t);return ere(e)}function ere(r){const e={role:"user",parts:[]},t={role:"function",parts:[]};let n=!1,i=!1;for(const a of r)"functionResponse"in a?(t.parts.push(a),i=!0):(e.parts.push(a),n=!0);if(n&&i)throw new Yt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!i)throw new Yt("No content is provided for sending chat message.");return n?e:t}function tre(r,e){var t;let n={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(t=e==null?void 0:e.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const i=r.generateContentRequest!=null;if(r.contents){if(i)throw new Pl("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=r.contents}else if(i)n=Object.assign(Object.assign({},n),r.generateContentRequest);else{const a=lm(r);n.contents=[a]}return{generateContentRequest:n}}function GA(r){let e;return r.contents?e=r:e={contents:[lm(r)]},r.systemInstruction&&(e.systemInstruction=a8(r.systemInstruction)),e}function rre(r){return typeof r=="string"||Array.isArray(r)?{content:lm(r)}:r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],nre={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function ire(r){let e=!1;for(const t of r){const{role:n,parts:i}=t;if(!e&&n!=="user")throw new Yt(`First content should be with role 'user', got ${n}`);if(!UA.includes(n))throw new Yt(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(UA)}`);if(!Array.isArray(i))throw new Yt("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new Yt("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const s of i)for(const u of JA)u in s&&(a[u]+=1);const o=nre[n];for(const s of JA)if(!o.includes(s)&&a[s]>0)throw new Yt(`Content with role '${n}' can't contain '${s}' part`);e=!0}}function XA(r){var e;if(r.candidates===void 0||r.candidates.length===0)return!1;const t=(e=r.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const n of t.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="SILENT_ERROR";class are{constructor(e,t,n,i={}){this.model=t,this.params=n,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n!=null&&n.history&&(ire(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,i,a,o,s,u;await this._sendPromise;const l=lm(e),c={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(s=this.params)===null||s===void 0?void 0:s.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,l]},d=Object.assign(Object.assign({},this._requestOptions),t);let h;return this._sendPromise=this._sendPromise.then(()=>i8(this._apiKey,this.model,c,d)).then(f=>{var m;if(XA(f.response)){this._history.push(l);const p=Object.assign({parts:[],role:"model"},(m=f.response.candidates)===null||m===void 0?void 0:m[0].content);this._history.push(p)}else{const p=bl(f.response);p&&console.warn(`sendMessage() was unsuccessful. ${p}. Inspect response object for details.`)}h=f}).catch(f=>{throw this._sendPromise=Promise.resolve(),f}),await this._sendPromise,h}async sendMessageStream(e,t={}){var n,i,a,o,s,u;await this._sendPromise;const l=lm(e),c={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(s=this.params)===null||s===void 0?void 0:s.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,l]},d=Object.assign(Object.assign({},this._requestOptions),t),h=n8(this._apiKey,this.model,c,d);return this._sendPromise=this._sendPromise.then(()=>h).catch(f=>{throw new Error(ZA)}).then(f=>f.response).then(f=>{if(XA(f)){this._history.push(l);const m=Object.assign({},f.candidates[0].content);m.role||(m.role="model"),this._history.push(m)}else{const m=bl(f);m&&console.warn(`sendMessageStream() was unsuccessful. ${m}. Inspect response object for details.`)}}).catch(f=>{f.message!==ZA&&console.error(f)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ore(r,e,t,n){return(await xm(e,dd.COUNT_TOKENS,r,!1,JSON.stringify(t),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sre(r,e,t,n){return(await xm(e,dd.EMBED_CONTENT,r,!1,JSON.stringify(t),n)).json()}async function ure(r,e,t,n){const i=t.requests.map(o=>Object.assign(Object.assign({},o),{model:e}));return(await xm(e,dd.BATCH_EMBED_CONTENTS,r,!1,JSON.stringify({requests:i}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=a8(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;const i=GA(e),a=Object.assign(Object.assign({},this._requestOptions),t);return i8(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),a)}async generateContentStream(e,t={}){var n;const i=GA(e),a=Object.assign(Object.assign({},this._requestOptions),t);return n8(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),a)}startChat(e){var t;return new are(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const n=tre(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),t);return ore(this.apiKey,this.model,n,i)}async embedContent(e,t={}){const n=rre(e),i=Object.assign(Object.assign({},this._requestOptions),t);return sre(this.apiKey,this.model,n,i)}async batchEmbedContents(e,t={}){const n=Object.assign(Object.assign({},this._requestOptions),t);return ure(this.apiKey,this.model,e,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Yt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new QA(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new Pl("Cached content must contain a `name` field.");if(!e.model)throw new Pl("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const o of i)if(t!=null&&t[o]&&e[o]&&(t==null?void 0:t[o])!==e[o]){if(o==="model"){const s=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,u=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(s===u)continue}throw new Pl(`Different value for "${o}" specified in modelParams (${t[o]}) and cachedContent (${e[o]})`)}const a=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new QA(this.apiKey,a,n)}}function cm(r){if(typeof r=="object"&&r!==null){const e={...r};"additionalProperties"in e&&delete e.additionalProperties,"$schema"in e&&delete e.$schema;for(const t in e)t in e&&(Array.isArray(e[t])?e[t]=e[t].map(cm):typeof e[t]=="object"&&e[t]!==null&&(e[t]=cm(e[t])));return e}return r}function o8(r){const e=cm(eb(r)),{$schema:t,...n}=e;return n}function lre(r){const e=cm(r),{$schema:t,...n}=e;return n}function cre(r){const e=r._getType();return hd.isInstance(r)?r.role:e==="tool"?e:r.name??e}function dre(r){switch(r){case"ai":case"model":return"model";case"system":return"system";case"human":return"user";case"tool":case"function":return"function";default:throw new Error(`Unknown / unsupported author: ${r}`)}}function fre(r){if("mimeType"in r&&"data"in r)return{inlineData:{mimeType:r.mimeType,data:r.data}};if("mimeType"in r&&"fileUri"in r)return{fileData:{mimeType:r.mimeType,fileUri:r.fileUri}};throw new Error("Invalid media content")}function pre(r,e){if(typeof r.content=="string"&&r.content!=="")return[{text:r.content}];let t=[],n=[],i=[];return"tool_calls"in r&&Array.isArray(r.tool_calls)&&r.tool_calls.length>0?t=r.tool_calls.map(a=>({functionCall:{name:a.name,args:a.args}})):r.getType()==="tool"&&r.name&&r.content?n=[{functionResponse:{name:r.name,response:r.content}}]:Array.isArray(r.content)&&(i=r.content.map(a=>{var o;if(a.type==="text")return{text:a.text};if(a.type==="executableCode")return{executableCode:a.executableCode};if(a.type==="codeExecutionResult")return{codeExecutionResult:a.codeExecutionResult};if(a.type==="image_url"){if(!e)throw new Error("This model does not support images");let s;if(typeof a.image_url=="string")s=a.image_url;else if(typeof a.image_url=="object"&&"url"in a.image_url)s=a.image_url.url;else throw new Error("Please provide image as base64 encoded data URL");const[u,l]=s.split(",");if(!u.startsWith("data:"))throw new Error("Please provide image as base64 encoded data URL");const[c,d]=u.replace(/^data:/,"").split(";");if(d!=="base64")throw new Error("Please provide image as base64 encoded data URL");return{inlineData:{data:l,mimeType:c}}}else{if(a.type==="media")return fre(a);if(a.type==="tool_use")return{functionCall:{name:a.name,args:a.input}};if((o=a.type)!=null&&o.includes("/")&&a.type.split("/").length===2&&"data"in a&&typeof a.data=="string")return{inlineData:{mimeType:a.type,data:a.data}}}throw new Error(`Unknown content type ${a.type}`)})),[...i,...t,...n]}function eM(r,e,t=!1){return r.reduce((n,i,a)=>{if(!mf(i))throw new Error("Unsupported message input");const o=cre(i);if(o==="system"&&a!==0)throw new Error("System message should be the first one");const s=dre(o),u=n.content[n.content.length];if(!n.mergeWithPreviousContent&&u&&u.role===s)throw new Error("Google Generative AI requires alternate messages between authors");const l=pre(i,e);if(n.mergeWithPreviousContent){const h=n.content[n.content.length-1];if(!h)throw new Error("There was a problem parsing your system message. Please try a prompt without one.");return h.parts.push(...l),{mergeWithPreviousContent:!1,content:n.content}}let c=s;(c==="function"||c==="system"&&!t)&&(c="user");const d={role:c,parts:l};return{mergeWithPreviousContent:o==="system"&&!t,content:[...n.content,d]}},{content:[],mergeWithPreviousContent:!1}).content}function hre(r,e){var l,c,d;if(!r.candidates||r.candidates.length===0||!r.candidates[0])return{generations:[],llmOutput:{filters:r.promptFeedback}};const t=r.functionCalls(),[n]=r.candidates,{content:i,...a}=n;let o;(i==null?void 0:i.parts.length)===1&&i.parts[0].text?o=i.parts[0].text:o=i.parts.map(h=>"text"in h?{type:"text",text:h.text}:"executableCode"in h?{type:"executableCode",executableCode:h.executableCode}:"codeExecutionResult"in h?{type:"codeExecutionResult",codeExecutionResult:h.codeExecutionResult}:h);let s="";return typeof o=="string"?s=o:"text"in o[0]&&(s=o[0].text),{generations:[{text:s,message:new Su({content:o,tool_calls:t==null?void 0:t.map(h=>({...h,type:"tool_call"})),additional_kwargs:{...a},usage_metadata:e==null?void 0:e.usageMetadata}),generationInfo:a}],llmOutput:{tokenUsage:{promptTokens:(l=e==null?void 0:e.usageMetadata)==null?void 0:l.input_tokens,completionTokens:(c=e==null?void 0:e.usageMetadata)==null?void 0:c.output_tokens,totalTokens:(d=e==null?void 0:e.usageMetadata)==null?void 0:d.total_tokens}}}}function mre(r,e){if(!r.candidates||r.candidates.length===0)return null;const t=r.functionCalls(),[n]=r.candidates,{content:i,...a}=n;let o;i!=null&&i.parts&&i.parts.every(l=>"text"in l)?o=i.parts.map(l=>l.text).join(""):i.parts&&(o=i.parts.map(l=>"text"in l?{type:"text",text:l.text}:"executableCode"in l?{type:"executableCode",executableCode:l.executableCode}:"codeExecutionResult"in l?{type:"codeExecutionResult",codeExecutionResult:l.codeExecutionResult}:l));let s="";o&&typeof o=="string"?s=o:o&&typeof o=="object"&&"text"in o[0]&&(s=o[0].text);const u=[];return t&&u.push(...t.map(l=>({...l,args:JSON.stringify(l.args),index:e.index,type:"tool_call_chunk"}))),new wr({text:s,message:new ft({content:o||"",name:i?i.role:void 0,tool_call_chunks:u,additional_kwargs:{},usage_metadata:e.usageMetadata}),generationInfo:a})}function gre(r){return r.every(e=>"functionDeclarations"in e&&Array.isArray(e.functionDeclarations))?r:[{functionDeclarations:r.map(e=>{if(Sf(e)){const t=o8(e.schema);return{name:e.name,description:e.description,parameters:t}}return Tm(e)?{name:e.function.name,description:e.function.description??"A function available to call.",parameters:lre(e.function.parameters)}:e})}]}class tM extends TP{static lc_name(){return"GoogleGenerativeAIToolsOutputParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","google_genai","output_parsers"]}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;const t=await this.zodSchema.safeParseAsync(e);if(t.success)return t.data;throw new df(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.error.errors)}`,JSON.stringify(e,null,2))}async parseResult(e){const t=e.flatMap(a=>{const{message:o}=a;return!("tool_calls"in o)||!Array.isArray(o.tool_calls)?[]:o.tool_calls});if(t[0]===void 0)throw new Error("No parseable tool calls provided to GoogleGenerativeAIToolsOutputParser.");const[n]=t;return await this._validateResult(n.args)}}function rM(r,e){const t=_re(r),n=yre(t,e);return{tools:t,toolConfig:n}}function _re(r){let e=[];const t=[];return r.forEach(i=>{if(Sf(i)){const[a]=gre([i]);a.functionDeclarations&&e.push(...a.functionDeclarations)}else if(Tm(i)){const{functionDeclarations:a}=bre(i);if(a)e.push(...a);else throw new Error("Failed to convert OpenAI structured tool to GenerativeAI tool")}else t.push(i)}),t.find(i=>"functionDeclarations"in i)?t.map(i=>{if((e==null?void 0:e.length)>0&&"functionDeclarations"in i){const a={functionDeclarations:[...i.functionDeclarations||[],...e]};return e=[],a}return i}):[...t,...e.length>0?[{functionDeclarations:e}]:[]]}function bre(r){return{functionDeclarations:[{name:r.function.name,description:r.function.description,parameters:cm(r.function.parameters)}]}}function yre(r,e){if(!r.length||!e)return;const{toolChoice:t,allowedFunctionNames:n}=e,i={any:kd.ANY,auto:kd.AUTO,none:kd.NONE};if(t&&["any","auto","none"].includes(t))return{functionCallingConfig:{mode:i[t]??"MODE_UNSPECIFIED",allowedFunctionNames:n}};if(typeof t=="string"||n)return{functionCallingConfig:{mode:kd.ANY,allowedFunctionNames:[...n??[],...t&&typeof t=="string"?[t]:[]]}}}class vre extends Qr{static lc_name(){return"ChatGoogleGenerativeAI"}get lc_secrets(){return{apiKey:"GOOGLE_API_KEY"}}get lc_aliases(){return{apiKey:"google_api_key"}}get _isMultimodalModel(){return this.model.includes("vision")||this.model.startsWith("gemini-1.5")||this.model.startsWith("gemini-2")}constructor(e){var t,n;if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models","google_genai"]}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gemini-pro"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gemini-pro"}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxOutputTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"safetySettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"convertSystemMessageToHumanContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.modelName=((t=e==null?void 0:e.model)==null?void 0:t.replace(/^models\//,""))??((n=e==null?void 0:e.modelName)==null?void 0:n.replace(/^models\//,""))??this.model,this.model=this.modelName,this.maxOutputTokens=(e==null?void 0:e.maxOutputTokens)??this.maxOutputTokens,this.maxOutputTokens&&this.maxOutputTokens<0)throw new Error("`maxOutputTokens` must be a positive integer");if(this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.temperature&&(this.temperature<0||this.temperature>2))throw new Error("`temperature` must be in the range of [0.0,2.0]");if(this.topP=(e==null?void 0:e.topP)??this.topP,this.topP&&this.topP<0)throw new Error("`topP` must be a positive integer");if(this.topP&&this.topP>1)throw new Error("`topP` must be below 1.");if(this.topK=(e==null?void 0:e.topK)??this.topK,this.topK&&this.topK<0)throw new Error("`topK` must be a positive integer");if(this.stopSequences=(e==null?void 0:e.stopSequences)??this.stopSequences,this.apiKey=(e==null?void 0:e.apiKey)??ot("GOOGLE_API_KEY"),!this.apiKey)throw new Error("Please set an API key for Google GenerativeAI in the environment variable GOOGLE_API_KEY or in the `apiKey` field of the ChatGoogleGenerativeAI constructor");if(this.safetySettings=(e==null?void 0:e.safetySettings)??this.safetySettings,this.safetySettings&&this.safetySettings.length>0&&new Set(this.safetySettings.map(a=>a.category)).size!==this.safetySettings.length)throw new Error("The categories in `safetySettings` array must be unique");this.streaming=(e==null?void 0:e.streaming)??this.streaming,this.client=new YA(this.apiKey).getGenerativeModel({model:this.model,safetySettings:this.safetySettings,generationConfig:{candidateCount:1,stopSequences:this.stopSequences,maxOutputTokens:this.maxOutputTokens,temperature:this.temperature,topP:this.topP,topK:this.topK,...e!=null&&e.json?{responseMimeType:"application/json"}:{}}},{apiVersion:e==null?void 0:e.apiVersion,baseUrl:e==null?void 0:e.baseUrl}),this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage}useCachedContent(e,t,n){this.apiKey&&(this.client=new YA(this.apiKey).getGenerativeModelFromCachedContent(e,t,n))}get useSystemInstruction(){return typeof this.convertSystemMessageToHumanContent=="boolean"?!this.convertSystemMessageToHumanContent:this.computeUseSystemInstruction}get computeUseSystemInstruction(){return this.modelName==="gemini-1.0-pro-001"||this.modelName.startsWith("gemini-pro-vision")||this.modelName.startsWith("gemini-1.0-pro-vision")?!1:this.modelName!=="gemini-pro"}getLsParams(e){return{ls_provider:"google_genai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:this.client.generationConfig.temperature,ls_max_tokens:this.client.generationConfig.maxOutputTokens,ls_stop:e.stop}}_combineLLMOutput(){return[]}_llmType(){return"googlegenerativeai"}bindTools(e,t){var n;return this.bind({tools:(n=rM(e))==null?void 0:n.tools,...t})}invocationParams(e){var n;const t=(n=e==null?void 0:e.tools)!=null&&n.length?rM(e.tools,{toolChoice:e.tool_choice,allowedFunctionNames:e.allowedFunctionNames}):void 0;return{...t!=null&&t.tools?{tools:t.tools}:{},...t!=null&&t.toolConfig?{toolConfig:t.toolConfig}:{}}}async _generate(e,t,n){var c;const i=eM(e,this._isMultimodalModel,this.useSystemInstruction);let a=i;if(i[0].role==="system"){const[d]=i;this.client.systemInstruction=d,a=i.slice(1)}const o=this.invocationParams(t);if(this.streaming){const d={},h=this._streamResponseChunks(e,t,n),f={};for await(const p of h){const g=((c=p.generationInfo)==null?void 0:c.completion)??0;f[g]===void 0?f[g]=p:f[g]=f[g].concat(p)}return{generations:Object.entries(f).sort(([p],[g])=>parseInt(p,10)-parseInt(g,10)).map(([p,g])=>g),llmOutput:{estimatedTokenUsage:d}}}const s=await this.completionWithRetry({...o,contents:a});let u;if("usageMetadata"in s.response){const d=s.response.usageMetadata;u={input_tokens:d.promptTokenCount??0,output_tokens:d.candidatesTokenCount??0,total_tokens:d.totalTokenCount??0}}const l=hre(s.response,{usageMetadata:u});return await(n==null?void 0:n.handleLLMNewToken(l.generations[0].text??"")),l}async*_streamResponseChunks(e,t,n){const i=eM(e,this._isMultimodalModel,this.useSystemInstruction);let a=i;if(i[0].role==="system"){const[d]=i;this.client.systemInstruction=d,a=i.slice(1)}const s={...this.invocationParams(t),contents:a},u=await this.caller.callWithOptions({signal:t==null?void 0:t.signal},async()=>{const{stream:d}=await this.client.generateContentStream(s);return d});let l,c=0;for await(const d of u){if("usageMetadata"in d&&this.streamUsage!==!1&&t.streamUsage!==!1){const f=d.usageMetadata;if(!l)l={input_tokens:f.promptTokenCount??0,output_tokens:f.candidatesTokenCount??0,total_tokens:f.totalTokenCount??0};else{const m=(f.candidatesTokenCount??0)-l.output_tokens;l={input_tokens:0,output_tokens:m,total_tokens:m}}}const h=mre(d,{usageMetadata:l,index:c});c+=1,h&&(yield h,await(n==null?void 0:n.handleLLMNewToken(h.text??"")))}}async completionWithRetry(e,t){return this.caller.callWithOptions({signal:t==null?void 0:t.signal},async()=>{var n;try{return await this.client.generateContent(e)}catch(i){throw(n=i.message)!=null&&n.includes("400 Bad Request")&&(i.status=400),i}})}withStructuredOutput(e,t){const n=e,i=t==null?void 0:t.name,a=t==null?void 0:t.method,o=t==null?void 0:t.includeRaw;if(a==="jsonMode")throw new Error('ChatGoogleGenerativeAI only supports "functionCalling" as a method.');let s=i??"extract",u,l;if(TR(n)){const m=o8(n);l=[{functionDeclarations:[{name:s,description:m.description??"A function available to call.",parameters:m}]}],u=new tM({returnSingle:!0,keyName:s,zodSchema:n})}else{let m;typeof n.name=="string"&&typeof n.parameters=="object"&&n.parameters!=null?(m=n,s=n.name):m={name:s,description:n.description??"",parameters:n},l=[{functionDeclarations:[m]}],u=new tM({returnSingle:!0,keyName:s})}const c=this.bind({tools:l,tool_choice:s});if(!o)return c.pipe(u).withConfig({runName:"ChatGoogleGenerativeAIStructuredOutput"});const d=$u.assign({parsed:(m,p)=>u.invoke(m.raw,p)}),h=$u.assign({parsed:()=>null}),f=d.withFallbacks({fallbacks:[h]});return Nr.from([{raw:c},f]).withConfig({runName:"StructuredOutputRunnable"})}}var Vu={},Xl={},fn={},Zl={},Ql={},Pv={},nM;function wre(){return nM||(nM=1,Object.defineProperty(Pv,"__esModule",{value:!0})),Pv}var kf={},iM;function Sre(){return iM||(iM=1,Object.defineProperty(kf,"__esModule",{value:!0}),kf.V2ChatStreamRequestSafetyMode=void 0,kf.V2ChatStreamRequestSafetyMode={Contextual:"CONTEXTUAL",Strict:"STRICT",Off:"OFF"}),kf}var Vf={},aM;function Ore(){return aM||(aM=1,Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.V2ChatStreamRequestToolChoice=void 0,Vf.V2ChatStreamRequestToolChoice={Required:"REQUIRED",None:"NONE"}),Vf}var jv={},oM;function Ere(){return oM||(oM=1,Object.defineProperty(jv,"__esModule",{value:!0})),jv}var Hf={},sM;function Rre(){return sM||(sM=1,Object.defineProperty(Hf,"__esModule",{value:!0}),Hf.V2ChatRequestSafetyMode=void 0,Hf.V2ChatRequestSafetyMode={Contextual:"CONTEXTUAL",Strict:"STRICT",Off:"OFF"}),Hf}var Kf={},uM;function Cre(){return uM||(uM=1,Object.defineProperty(Kf,"__esModule",{value:!0}),Kf.V2ChatRequestToolChoice=void 0,Kf.V2ChatRequestToolChoice={Required:"REQUIRED",None:"NONE"}),Kf}var Wf={},lM;function Pre(){return lM||(lM=1,Object.defineProperty(Wf,"__esModule",{value:!0}),Wf.V2EmbedRequestTruncate=void 0,Wf.V2EmbedRequestTruncate={None:"NONE",Start:"START",End:"END"}),Wf}var Tv={},cM;function jre(){return cM||(cM=1,Object.defineProperty(Tv,"__esModule",{value:!0})),Tv}var Av={},dM;function Tre(){return dM||(dM=1,Object.defineProperty(Av,"__esModule",{value:!0})),Av}var Mv={},fM;function Are(){return fM||(fM=1,Object.defineProperty(Mv,"__esModule",{value:!0})),Mv}var pM;function s8(){return pM||(pM=1,function(r){var e=Ql&&Ql.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Ql&&Ql.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(wre(),r),t(Sre(),r),t(Ore(),r),t(Ere(),r),t(Rre(),r),t(Cre(),r),t(Pre(),r),t(jre(),r),t(Tre(),r),t(Are(),r)}(Ql)),Ql}var Yl={},Iv={},hM;function u8(){return hM||(hM=1,Object.defineProperty(Iv,"__esModule",{value:!0})),Iv}var mM;function Mre(){return mM||(mM=1,function(r){var e=Yl&&Yl.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Yl&&Yl.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(u8(),r)}(Yl)),Yl}var gM;function Ire(){return gM||(gM=1,function(r){var e=Zl&&Zl.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Zl&&Zl.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(s8(),r),t(Mre(),r)}(Zl)),Zl}var ec={},tc={},Gf={},_M;function xre(){return _M||(_M=1,Object.defineProperty(Gf,"__esModule",{value:!0}),Gf.CreateEmbedJobRequestTruncate=void 0,Gf.CreateEmbedJobRequestTruncate={Start:"START",End:"END"}),Gf}var bM;function l8(){return bM||(bM=1,function(r){var e=tc&&tc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=tc&&tc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(xre(),r)}(tc)),tc}var rc={},xv={},yM;function c8(){return yM||(yM=1,Object.defineProperty(xv,"__esModule",{value:!0})),xv}var vM;function Dre(){return vM||(vM=1,function(r){var e=rc&&rc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=rc&&rc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(c8(),r)}(rc)),rc}var wM;function $re(){return wM||(wM=1,function(r){var e=ec&&ec.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=ec&&ec.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(l8(),r),t(Dre(),r)}(ec)),ec}var nc={},ic={},Dv={},SM;function Nre(){return SM||(SM=1,Object.defineProperty(Dv,"__esModule",{value:!0})),Dv}var $v={},OM;function qre(){return OM||(OM=1,Object.defineProperty($v,"__esModule",{value:!0})),$v}var Nv={},EM;function Bre(){return EM||(EM=1,Object.defineProperty(Nv,"__esModule",{value:!0})),Nv}var qv={},RM;function Ure(){return RM||(RM=1,Object.defineProperty(qv,"__esModule",{value:!0})),qv}var Bv={},CM;function zre(){return CM||(CM=1,Object.defineProperty(Bv,"__esModule",{value:!0})),Bv}var PM;function d8(){return PM||(PM=1,function(r){var e=ic&&ic.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=ic&&ic.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(Nre(),r),t(qre(),r),t(Bre(),r),t(Ure(),r),t(zre(),r)}(ic)),ic}var ac={},Uv={},jM;function f8(){return jM||(jM=1,Object.defineProperty(Uv,"__esModule",{value:!0})),Uv}var TM;function Lre(){return TM||(TM=1,function(r){var e=ac&&ac.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=ac&&ac.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(f8(),r)}(ac)),ac}var AM;function Fre(){return AM||(AM=1,function(r){var e=nc&&nc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=nc&&nc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(d8(),r),t(Lre(),r)}(nc)),nc}var oc={},pn={},sc={},uc={},Jf={},MM;function kre(){return MM||(MM=1,Object.defineProperty(Jf,"__esModule",{value:!0}),Jf.BaseType=void 0,Jf.BaseType={BaseTypeUnspecified:"BASE_TYPE_UNSPECIFIED",BaseTypeGenerative:"BASE_TYPE_GENERATIVE",BaseTypeClassification:"BASE_TYPE_CLASSIFICATION",BaseTypeRerank:"BASE_TYPE_RERANK",BaseTypeChat:"BASE_TYPE_CHAT"}),Jf}var Xf={},IM;function Vre(){return IM||(IM=1,Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.Strategy=void 0,Xf.Strategy={StrategyUnspecified:"STRATEGY_UNSPECIFIED",StrategyVanilla:"STRATEGY_VANILLA",StrategyTfew:"STRATEGY_TFEW"}),Xf}var zv={},xM;function Hre(){return xM||(xM=1,Object.defineProperty(zv,"__esModule",{value:!0})),zv}var Zf={},DM;function Kre(){return DM||(DM=1,Object.defineProperty(Zf,"__esModule",{value:!0}),Zf.LoraTargetModules=void 0,Zf.LoraTargetModules={LoraTargetModulesUnspecified:"LORA_TARGET_MODULES_UNSPECIFIED",LoraTargetModulesQv:"LORA_TARGET_MODULES_QV",LoraTargetModulesQkvo:"LORA_TARGET_MODULES_QKVO",LoraTargetModulesQkvoFfn:"LORA_TARGET_MODULES_QKVO_FFN"}),Zf}var Lv={},$M;function Wre(){return $M||($M=1,Object.defineProperty(Lv,"__esModule",{value:!0})),Lv}var Fv={},NM;function Gre(){return NM||(NM=1,Object.defineProperty(Fv,"__esModule",{value:!0})),Fv}var kv={},qM;function Jre(){return qM||(qM=1,Object.defineProperty(kv,"__esModule",{value:!0})),kv}var Qf={},BM;function Xre(){return BM||(BM=1,Object.defineProperty(Qf,"__esModule",{value:!0}),Qf.Status=void 0,Qf.Status={StatusUnspecified:"STATUS_UNSPECIFIED",StatusFinetuning:"STATUS_FINETUNING",StatusDeployingApi:"STATUS_DEPLOYING_API",StatusReady:"STATUS_READY",StatusFailed:"STATUS_FAILED",StatusDeleted:"STATUS_DELETED",StatusTemporarilyOffline:"STATUS_TEMPORARILY_OFFLINE",StatusPaused:"STATUS_PAUSED",StatusQueued:"STATUS_QUEUED"}),Qf}var Vv={},UM;function Zre(){return UM||(UM=1,Object.defineProperty(Vv,"__esModule",{value:!0})),Vv}var Hv={},zM;function Qre(){return zM||(zM=1,Object.defineProperty(Hv,"__esModule",{value:!0})),Hv}var Kv={},LM;function Yre(){return LM||(LM=1,Object.defineProperty(Kv,"__esModule",{value:!0})),Kv}var Wv={},FM;function ene(){return FM||(FM=1,Object.defineProperty(Wv,"__esModule",{value:!0})),Wv}var Gv={},kM;function tne(){return kM||(kM=1,Object.defineProperty(Gv,"__esModule",{value:!0})),Gv}var Jv={},VM;function rne(){return VM||(VM=1,Object.defineProperty(Jv,"__esModule",{value:!0})),Jv}var Xv={},HM;function nne(){return HM||(HM=1,Object.defineProperty(Xv,"__esModule",{value:!0})),Xv}var Zv={},KM;function ine(){return KM||(KM=1,Object.defineProperty(Zv,"__esModule",{value:!0})),Zv}var Qv={},WM;function ane(){return WM||(WM=1,Object.defineProperty(Qv,"__esModule",{value:!0})),Qv}var Yv={},GM;function one(){return GM||(GM=1,Object.defineProperty(Yv,"__esModule",{value:!0})),Yv}var JM;function p8(){return JM||(JM=1,function(r){var e=uc&&uc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=uc&&uc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(kre(),r),t(Vre(),r),t(Hre(),r),t(Kre(),r),t(Wre(),r),t(Gre(),r),t(Jre(),r),t(Xre(),r),t(Zre(),r),t(Qre(),r),t(Yre(),r),t(ene(),r),t(tne(),r),t(rne(),r),t(nne(),r),t(ine(),r),t(ane(),r),t(one(),r)}(uc)),uc}var XM;function sne(){return XM||(XM=1,function(r){var e=sc&&sc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=sc&&sc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(p8(),r)}(sc)),sc}var ZM;function une(){return ZM||(ZM=1,function(r){var e=pn&&pn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),t=pn&&pn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),n=pn&&pn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o},i=pn&&pn.__exportStar||function(a,o){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&e(o,a,s)};Object.defineProperty(r,"__esModule",{value:!0}),r.finetuning=void 0,r.finetuning=n(sne()),i(p8(),r)}(pn)),pn}var lc={},ew={},QM;function h8(){return QM||(QM=1,Object.defineProperty(ew,"__esModule",{value:!0})),ew}var YM;function lne(){return YM||(YM=1,function(r){var e=lc&&lc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=lc&&lc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(h8(),r)}(lc)),lc}var eI;function cne(){return eI||(eI=1,function(r){var e=oc&&oc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=oc&&oc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(une(),r),t(lne(),r)}(oc)),oc}var cc={},dc={},tw={},tI;function m8(){return tI||(tI=1,Object.defineProperty(tw,"__esModule",{value:!0})),tw}var rI;function dne(){return rI||(rI=1,function(r){var e=dc&&dc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=dc&&dc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(m8(),r)}(dc)),dc}var nI;function fne(){return nI||(nI=1,function(r){var e=cc&&cc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=cc&&cc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(dne(),r)}(cc)),cc}var fc={},pc={},rw={},iI;function g8(){return iI||(iI=1,Object.defineProperty(rw,"__esModule",{value:!0})),rw}var aI;function pne(){return aI||(aI=1,function(r){var e=pc&&pc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=pc&&pc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(g8(),r)}(pc)),pc}var oI;function hne(){return oI||(oI=1,function(r){var e=fc&&fc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=fc&&fc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(pne(),r)}(fc)),fc}var sI;function mne(){return sI||(sI=1,function(r){var e=fn&&fn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),t=fn&&fn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),n=fn&&fn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o},i=fn&&fn.__exportStar||function(a,o){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&e(o,a,s)};Object.defineProperty(r,"__esModule",{value:!0}),r.models=r.connectors=r.finetuning=r.datasets=r.embedJobs=r.v2=void 0,r.v2=n(Ire()),i(s8(),r),r.embedJobs=n($re()),i(l8(),r),r.datasets=n(Fre()),i(d8(),r),r.finetuning=n(cne()),r.connectors=n(fne()),r.models=n(hne()),i(u8(),r),i(c8(),r),i(f8(),r),i(m8(),r),i(g8(),r),i(h8(),r)}(fn)),fn}var hc={},Yf={},uI;function gne(){return uI||(uI=1,Object.defineProperty(Yf,"__esModule",{value:!0}),Yf.ChatStreamRequestPromptTruncation=void 0,Yf.ChatStreamRequestPromptTruncation={Off:"OFF",Auto:"AUTO",AutoPreserveOrder:"AUTO_PRESERVE_ORDER"}),Yf}var ep={},lI;function _ne(){return lI||(lI=1,Object.defineProperty(ep,"__esModule",{value:!0}),ep.ChatStreamRequestCitationQuality=void 0,ep.ChatStreamRequestCitationQuality={Fast:"fast",Accurate:"accurate",Off:"off"}),ep}var nw={},cI;function bne(){return cI||(cI=1,Object.defineProperty(nw,"__esModule",{value:!0})),nw}var tp={},dI;function yne(){return dI||(dI=1,Object.defineProperty(tp,"__esModule",{value:!0}),tp.ChatStreamRequestSafetyMode=void 0,tp.ChatStreamRequestSafetyMode={Contextual:"CONTEXTUAL",Strict:"STRICT",None:"NONE"}),tp}var rp={},fI;function vne(){return fI||(fI=1,Object.defineProperty(rp,"__esModule",{value:!0}),rp.ChatRequestPromptTruncation=void 0,rp.ChatRequestPromptTruncation={Off:"OFF",Auto:"AUTO",AutoPreserveOrder:"AUTO_PRESERVE_ORDER"}),rp}var np={},pI;function wne(){return pI||(pI=1,Object.defineProperty(np,"__esModule",{value:!0}),np.ChatRequestCitationQuality=void 0,np.ChatRequestCitationQuality={Fast:"fast",Accurate:"accurate",Off:"off"}),np}var iw={},hI;function Sne(){return hI||(hI=1,Object.defineProperty(iw,"__esModule",{value:!0})),iw}var ip={},mI;function One(){return mI||(mI=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.ChatRequestSafetyMode=void 0,ip.ChatRequestSafetyMode={Contextual:"CONTEXTUAL",Strict:"STRICT",None:"NONE"}),ip}var ap={},gI;function Ene(){return gI||(gI=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.GenerateStreamRequestTruncate=void 0,ap.GenerateStreamRequestTruncate={None:"NONE",Start:"START",End:"END"}),ap}var op={},_I;function Rne(){return _I||(_I=1,Object.defineProperty(op,"__esModule",{value:!0}),op.GenerateStreamRequestReturnLikelihoods=void 0,op.GenerateStreamRequestReturnLikelihoods={Generation:"GENERATION",All:"ALL",None:"NONE"}),op}var sp={},bI;function Cne(){return bI||(bI=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.GenerateRequestTruncate=void 0,sp.GenerateRequestTruncate={None:"NONE",Start:"START",End:"END"}),sp}var up={},yI;function Pne(){return yI||(yI=1,Object.defineProperty(up,"__esModule",{value:!0}),up.GenerateRequestReturnLikelihoods=void 0,up.GenerateRequestReturnLikelihoods={Generation:"GENERATION",All:"ALL",None:"NONE"}),up}var lp={},vI;function jne(){return vI||(vI=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.EmbedRequestTruncate=void 0,lp.EmbedRequestTruncate={None:"NONE",Start:"START",End:"END"}),lp}var aw={},wI;function Tne(){return wI||(wI=1,Object.defineProperty(aw,"__esModule",{value:!0})),aw}var ow={},SI;function Ane(){return SI||(SI=1,Object.defineProperty(ow,"__esModule",{value:!0})),ow}var sw={},OI;function Mne(){return OI||(OI=1,Object.defineProperty(sw,"__esModule",{value:!0})),sw}var uw={},EI;function Ine(){return EI||(EI=1,Object.defineProperty(uw,"__esModule",{value:!0})),uw}var lw={},RI;function xne(){return RI||(RI=1,Object.defineProperty(lw,"__esModule",{value:!0})),lw}var cp={},CI;function Dne(){return CI||(CI=1,Object.defineProperty(cp,"__esModule",{value:!0}),cp.ClassifyRequestTruncate=void 0,cp.ClassifyRequestTruncate={None:"NONE",Start:"START",End:"END"}),cp}var cw={},PI;function $ne(){return PI||(PI=1,Object.defineProperty(cw,"__esModule",{value:!0})),cw}var dp={},jI;function Nne(){return jI||(jI=1,Object.defineProperty(dp,"__esModule",{value:!0}),dp.ClassifyResponseClassificationsItemClassificationType=void 0,dp.ClassifyResponseClassificationsItemClassificationType={SingleLabel:"single-label",MultiLabel:"multi-label"}),dp}var dw={},TI;function qne(){return TI||(TI=1,Object.defineProperty(dw,"__esModule",{value:!0})),dw}var fw={},AI;function Bne(){return AI||(AI=1,Object.defineProperty(fw,"__esModule",{value:!0})),fw}var fp={},MI;function Une(){return MI||(MI=1,Object.defineProperty(fp,"__esModule",{value:!0}),fp.SummarizeRequestLength=void 0,fp.SummarizeRequestLength={Short:"short",Medium:"medium",Long:"long"}),fp}var pp={},II;function zne(){return II||(II=1,Object.defineProperty(pp,"__esModule",{value:!0}),pp.SummarizeRequestFormat=void 0,pp.SummarizeRequestFormat={Paragraph:"paragraph",Bullets:"bullets"}),pp}var hp={},xI;function Lne(){return xI||(xI=1,Object.defineProperty(hp,"__esModule",{value:!0}),hp.SummarizeRequestExtractiveness=void 0,hp.SummarizeRequestExtractiveness={Low:"low",Medium:"medium",High:"high"}),hp}var pw={},DI;function Fne(){return DI||(DI=1,Object.defineProperty(pw,"__esModule",{value:!0})),pw}var hw={},$I;function kne(){return $I||($I=1,Object.defineProperty(hw,"__esModule",{value:!0})),hw}var mw={},NI;function Vne(){return NI||(NI=1,Object.defineProperty(mw,"__esModule",{value:!0})),mw}var gw={},qI;function Hne(){return qI||(qI=1,Object.defineProperty(gw,"__esModule",{value:!0})),gw}var _w={},BI;function Kne(){return BI||(BI=1,Object.defineProperty(_w,"__esModule",{value:!0})),_w}var bw={},UI;function Wne(){return UI||(UI=1,Object.defineProperty(bw,"__esModule",{value:!0})),bw}var yw={},zI;function Gne(){return zI||(zI=1,Object.defineProperty(yw,"__esModule",{value:!0})),yw}var vw={},LI;function Jne(){return LI||(LI=1,Object.defineProperty(vw,"__esModule",{value:!0})),vw}var ww={},FI;function Xne(){return FI||(FI=1,Object.defineProperty(ww,"__esModule",{value:!0})),ww}var Sw={},kI;function Zne(){return kI||(kI=1,Object.defineProperty(Sw,"__esModule",{value:!0})),Sw}var Ow={},VI;function Qne(){return VI||(VI=1,Object.defineProperty(Ow,"__esModule",{value:!0})),Ow}var Ew={},HI;function Yne(){return HI||(HI=1,Object.defineProperty(Ew,"__esModule",{value:!0})),Ew}var Rw={},KI;function eie(){return KI||(KI=1,Object.defineProperty(Rw,"__esModule",{value:!0})),Rw}var Cw={},WI;function tie(){return WI||(WI=1,Object.defineProperty(Cw,"__esModule",{value:!0})),Cw}var Pw={},GI;function rie(){return GI||(GI=1,Object.defineProperty(Pw,"__esModule",{value:!0})),Pw}var jw={},JI;function nie(){return JI||(JI=1,Object.defineProperty(jw,"__esModule",{value:!0})),jw}var mp={},XI;function iie(){return XI||(XI=1,Object.defineProperty(mp,"__esModule",{value:!0}),mp.ChatCitationType=void 0,mp.ChatCitationType={TextContent:"TEXT_CONTENT",Plan:"PLAN"}),mp}var Tw={},ZI;function aie(){return ZI||(ZI=1,Object.defineProperty(Tw,"__esModule",{value:!0})),Tw}var Aw={},QI;function oie(){return QI||(QI=1,Object.defineProperty(Aw,"__esModule",{value:!0})),Aw}var Mw={},YI;function sie(){return YI||(YI=1,Object.defineProperty(Mw,"__esModule",{value:!0})),Mw}var Iw={},ex;function uie(){return ex||(ex=1,Object.defineProperty(Iw,"__esModule",{value:!0})),Iw}var gp={},tx;function lie(){return tx||(tx=1,Object.defineProperty(gp,"__esModule",{value:!0}),gp.FinishReason=void 0,gp.FinishReason={Complete:"COMPLETE",StopSequence:"STOP_SEQUENCE",Error:"ERROR",ErrorToxic:"ERROR_TOXIC",ErrorLimit:"ERROR_LIMIT",UserCancel:"USER_CANCEL",MaxTokens:"MAX_TOKENS"}),gp}var xw={},rx;function cie(){return rx||(rx=1,Object.defineProperty(xw,"__esModule",{value:!0})),xw}var Dw={},nx;function die(){return nx||(nx=1,Object.defineProperty(Dw,"__esModule",{value:!0})),Dw}var $w={},ix;function fie(){return ix||(ix=1,Object.defineProperty($w,"__esModule",{value:!0})),$w}var Nw={},ax;function pie(){return ax||(ax=1,Object.defineProperty(Nw,"__esModule",{value:!0})),Nw}var qw={},ox;function hie(){return ox||(ox=1,Object.defineProperty(qw,"__esModule",{value:!0})),qw}var Bw={},sx;function mie(){return sx||(sx=1,Object.defineProperty(Bw,"__esModule",{value:!0})),Bw}var Uw={},ux;function gie(){return ux||(ux=1,Object.defineProperty(Uw,"__esModule",{value:!0})),Uw}var zw={},lx;function _ie(){return lx||(lx=1,Object.defineProperty(zw,"__esModule",{value:!0})),zw}var Lw={},cx;function bie(){return cx||(cx=1,Object.defineProperty(Lw,"__esModule",{value:!0})),Lw}var Fw={},dx;function yie(){return dx||(dx=1,Object.defineProperty(Fw,"__esModule",{value:!0})),Fw}var kw={},fx;function vie(){return fx||(fx=1,Object.defineProperty(kw,"__esModule",{value:!0})),kw}var Vw={},px;function wie(){return px||(px=1,Object.defineProperty(Vw,"__esModule",{value:!0})),Vw}var _p={},hx;function Sie(){return hx||(hx=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.ChatStreamEndEventFinishReason=void 0,_p.ChatStreamEndEventFinishReason={Complete:"COMPLETE",ErrorLimit:"ERROR_LIMIT",MaxTokens:"MAX_TOKENS",Error:"ERROR",ErrorToxic:"ERROR_TOXIC"}),_p}var Hw={},mx;function Oie(){return mx||(mx=1,Object.defineProperty(Hw,"__esModule",{value:!0})),Hw}var Kw={},gx;function Eie(){return gx||(gx=1,Object.defineProperty(Kw,"__esModule",{value:!0})),Kw}var Ww={},_x;function Rie(){return _x||(_x=1,Object.defineProperty(Ww,"__esModule",{value:!0})),Ww}var Gw={},bx;function Cie(){return bx||(bx=1,Object.defineProperty(Gw,"__esModule",{value:!0})),Gw}var Jw={},yx;function Pie(){return yx||(yx=1,Object.defineProperty(Jw,"__esModule",{value:!0})),Jw}var Xw={},vx;function jie(){return vx||(vx=1,Object.defineProperty(Xw,"__esModule",{value:!0})),Xw}var Zw={},wx;function Tie(){return wx||(wx=1,Object.defineProperty(Zw,"__esModule",{value:!0})),Zw}var Qw={},Sx;function Aie(){return Sx||(Sx=1,Object.defineProperty(Qw,"__esModule",{value:!0})),Qw}var Yw={},Ox;function Mie(){return Ox||(Ox=1,Object.defineProperty(Yw,"__esModule",{value:!0})),Yw}var e0={},Ex;function Iie(){return Ex||(Ex=1,Object.defineProperty(e0,"__esModule",{value:!0})),e0}var t0={},Rx;function xie(){return Rx||(Rx=1,Object.defineProperty(t0,"__esModule",{value:!0})),t0}var r0={},Cx;function Die(){return Cx||(Cx=1,Object.defineProperty(r0,"__esModule",{value:!0})),r0}var n0={},Px;function $ie(){return Px||(Px=1,Object.defineProperty(n0,"__esModule",{value:!0})),n0}var i0={},jx;function Nie(){return jx||(jx=1,Object.defineProperty(i0,"__esModule",{value:!0})),i0}var a0={},Tx;function qie(){return Tx||(Tx=1,Object.defineProperty(a0,"__esModule",{value:!0})),a0}var o0={},Ax;function Bie(){return Ax||(Ax=1,Object.defineProperty(o0,"__esModule",{value:!0})),o0}var bp={},Mx;function Uie(){return Mx||(Mx=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.CitationType=void 0,bp.CitationType={TextContent:"TEXT_CONTENT",Plan:"PLAN"}),bp}var s0={},Ix;function zie(){return Ix||(Ix=1,Object.defineProperty(s0,"__esModule",{value:!0})),s0}var u0={},xx;function Lie(){return xx||(xx=1,Object.defineProperty(u0,"__esModule",{value:!0})),u0}var l0={},Dx;function Fie(){return Dx||(Dx=1,Object.defineProperty(l0,"__esModule",{value:!0})),l0}var c0={},$x;function kie(){return $x||($x=1,Object.defineProperty(c0,"__esModule",{value:!0})),c0}var d0={},Nx;function Vie(){return Nx||(Nx=1,Object.defineProperty(d0,"__esModule",{value:!0})),d0}var f0={},qx;function Hie(){return qx||(qx=1,Object.defineProperty(f0,"__esModule",{value:!0})),f0}var p0={},Bx;function Kie(){return Bx||(Bx=1,Object.defineProperty(p0,"__esModule",{value:!0})),p0}var h0={},Ux;function Wie(){return Ux||(Ux=1,Object.defineProperty(h0,"__esModule",{value:!0})),h0}var m0={},zx;function Gie(){return zx||(zx=1,Object.defineProperty(m0,"__esModule",{value:!0})),m0}var g0={},Lx;function Jie(){return Lx||(Lx=1,Object.defineProperty(g0,"__esModule",{value:!0})),g0}var _0={},Fx;function Xie(){return Fx||(Fx=1,Object.defineProperty(_0,"__esModule",{value:!0})),_0}var b0={},kx;function Zie(){return kx||(kx=1,Object.defineProperty(b0,"__esModule",{value:!0})),b0}var y0={},Vx;function Qie(){return Vx||(Vx=1,Object.defineProperty(y0,"__esModule",{value:!0})),y0}var v0={},Hx;function Yie(){return Hx||(Hx=1,Object.defineProperty(v0,"__esModule",{value:!0})),v0}var yp={},Kx;function eae(){return Kx||(Kx=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.ReasoningEffort=void 0,yp.ReasoningEffort={Low:"low",Medium:"medium",High:"high"}),yp}var w0={},Wx;function tae(){return Wx||(Wx=1,Object.defineProperty(w0,"__esModule",{value:!0})),w0}var S0={},Gx;function rae(){return Gx||(Gx=1,Object.defineProperty(S0,"__esModule",{value:!0})),S0}var vp={},Jx;function nae(){return Jx||(Jx=1,Object.defineProperty(vp,"__esModule",{value:!0}),vp.CitationOptionsMode=void 0,vp.CitationOptionsMode={Fast:"FAST",Accurate:"ACCURATE",Off:"OFF"}),vp}var O0={},Xx;function iae(){return Xx||(Xx=1,Object.defineProperty(O0,"__esModule",{value:!0})),O0}var E0={},Zx;function aae(){return Zx||(Zx=1,Object.defineProperty(E0,"__esModule",{value:!0})),E0}var R0={},Qx;function oae(){return Qx||(Qx=1,Object.defineProperty(R0,"__esModule",{value:!0})),R0}var C0={},Yx;function sae(){return Yx||(Yx=1,Object.defineProperty(C0,"__esModule",{value:!0})),C0}var P0={},eD;function uae(){return eD||(eD=1,Object.defineProperty(P0,"__esModule",{value:!0})),P0}var j0={},tD;function lae(){return tD||(tD=1,Object.defineProperty(j0,"__esModule",{value:!0})),j0}var T0={},rD;function cae(){return rD||(rD=1,Object.defineProperty(T0,"__esModule",{value:!0})),T0}var wp={},nD;function dae(){return nD||(nD=1,Object.defineProperty(wp,"__esModule",{value:!0}),wp.ChatFinishReason=void 0,wp.ChatFinishReason={Complete:"COMPLETE",StopSequence:"STOP_SEQUENCE",MaxTokens:"MAX_TOKENS",ToolCall:"TOOL_CALL",Error:"ERROR"}),wp}var A0={},iD;function fae(){return iD||(iD=1,Object.defineProperty(A0,"__esModule",{value:!0})),A0}var M0={},aD;function pae(){return aD||(aD=1,Object.defineProperty(M0,"__esModule",{value:!0})),M0}var I0={},oD;function hae(){return oD||(oD=1,Object.defineProperty(I0,"__esModule",{value:!0})),I0}var x0={},sD;function mae(){return sD||(sD=1,Object.defineProperty(x0,"__esModule",{value:!0})),x0}var D0={},uD;function gae(){return uD||(uD=1,Object.defineProperty(D0,"__esModule",{value:!0})),D0}var $0={},lD;function _ae(){return lD||(lD=1,Object.defineProperty($0,"__esModule",{value:!0})),$0}var N0={},cD;function bae(){return cD||(cD=1,Object.defineProperty(N0,"__esModule",{value:!0})),N0}var q0={},dD;function yae(){return dD||(dD=1,Object.defineProperty(q0,"__esModule",{value:!0})),q0}var B0={},fD;function vae(){return fD||(fD=1,Object.defineProperty(B0,"__esModule",{value:!0})),B0}var U0={},pD;function wae(){return pD||(pD=1,Object.defineProperty(U0,"__esModule",{value:!0})),U0}var z0={},hD;function Sae(){return hD||(hD=1,Object.defineProperty(z0,"__esModule",{value:!0})),z0}var L0={},mD;function Oae(){return mD||(mD=1,Object.defineProperty(L0,"__esModule",{value:!0})),L0}var F0={},gD;function Eae(){return gD||(gD=1,Object.defineProperty(F0,"__esModule",{value:!0})),F0}var k0={},_D;function Rae(){return _D||(_D=1,Object.defineProperty(k0,"__esModule",{value:!0})),k0}var V0={},bD;function Cae(){return bD||(bD=1,Object.defineProperty(V0,"__esModule",{value:!0})),V0}var H0={},yD;function Pae(){return yD||(yD=1,Object.defineProperty(H0,"__esModule",{value:!0})),H0}var K0={},vD;function jae(){return vD||(vD=1,Object.defineProperty(K0,"__esModule",{value:!0})),K0}var W0={},wD;function Tae(){return wD||(wD=1,Object.defineProperty(W0,"__esModule",{value:!0})),W0}var G0={},SD;function Aae(){return SD||(SD=1,Object.defineProperty(G0,"__esModule",{value:!0})),G0}var J0={},OD;function Mae(){return OD||(OD=1,Object.defineProperty(J0,"__esModule",{value:!0})),J0}var X0={},ED;function Iae(){return ED||(ED=1,Object.defineProperty(X0,"__esModule",{value:!0})),X0}var Z0={},RD;function xae(){return RD||(RD=1,Object.defineProperty(Z0,"__esModule",{value:!0})),Z0}var Q0={},CD;function Dae(){return CD||(CD=1,Object.defineProperty(Q0,"__esModule",{value:!0})),Q0}var Y0={},PD;function $ae(){return PD||(PD=1,Object.defineProperty(Y0,"__esModule",{value:!0})),Y0}var eS={},jD;function Nae(){return jD||(jD=1,Object.defineProperty(eS,"__esModule",{value:!0})),eS}var tS={},TD;function qae(){return TD||(TD=1,Object.defineProperty(tS,"__esModule",{value:!0})),tS}var rS={},AD;function Bae(){return AD||(AD=1,Object.defineProperty(rS,"__esModule",{value:!0})),rS}var nS={},MD;function Uae(){return MD||(MD=1,Object.defineProperty(nS,"__esModule",{value:!0})),nS}var iS={},ID;function zae(){return ID||(ID=1,Object.defineProperty(iS,"__esModule",{value:!0})),iS}var aS={},xD;function Lae(){return xD||(xD=1,Object.defineProperty(aS,"__esModule",{value:!0})),aS}var oS={},DD;function Fae(){return DD||(DD=1,Object.defineProperty(oS,"__esModule",{value:!0})),oS}var sS={},$D;function kae(){return $D||($D=1,Object.defineProperty(sS,"__esModule",{value:!0})),sS}var uS={},ND;function Vae(){return ND||(ND=1,Object.defineProperty(uS,"__esModule",{value:!0})),uS}var lS={},qD;function Hae(){return qD||(qD=1,Object.defineProperty(lS,"__esModule",{value:!0})),lS}var cS={},BD;function Kae(){return BD||(BD=1,Object.defineProperty(cS,"__esModule",{value:!0})),cS}var dS={},UD;function Wae(){return UD||(UD=1,Object.defineProperty(dS,"__esModule",{value:!0})),dS}var fS={},zD;function Gae(){return zD||(zD=1,Object.defineProperty(fS,"__esModule",{value:!0})),fS}var pS={},LD;function Jae(){return LD||(LD=1,Object.defineProperty(pS,"__esModule",{value:!0})),pS}var hS={},FD;function Xae(){return FD||(FD=1,Object.defineProperty(hS,"__esModule",{value:!0})),hS}var mS={},kD;function Zae(){return kD||(kD=1,Object.defineProperty(mS,"__esModule",{value:!0})),mS}var gS={},VD;function Qae(){return VD||(VD=1,Object.defineProperty(gS,"__esModule",{value:!0})),gS}var _S={},HD;function Yae(){return HD||(HD=1,Object.defineProperty(_S,"__esModule",{value:!0})),_S}var bS={},KD;function eoe(){return KD||(KD=1,Object.defineProperty(bS,"__esModule",{value:!0})),bS}var yS={},WD;function toe(){return WD||(WD=1,Object.defineProperty(yS,"__esModule",{value:!0})),yS}var vS={},GD;function roe(){return GD||(GD=1,Object.defineProperty(vS,"__esModule",{value:!0})),vS}var wS={},JD;function noe(){return JD||(JD=1,Object.defineProperty(wS,"__esModule",{value:!0})),wS}var SS={},XD;function ioe(){return XD||(XD=1,Object.defineProperty(SS,"__esModule",{value:!0})),SS}var OS={},ZD;function aoe(){return ZD||(ZD=1,Object.defineProperty(OS,"__esModule",{value:!0})),OS}var ES={},QD;function ooe(){return QD||(QD=1,Object.defineProperty(ES,"__esModule",{value:!0})),ES}var Sp={},YD;function soe(){return YD||(YD=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.EmbedInputType=void 0,Sp.EmbedInputType={SearchDocument:"search_document",SearchQuery:"search_query",Classification:"classification",Clustering:"clustering",Image:"image"}),Sp}var Op={},e$;function uoe(){return e$||(e$=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.EmbeddingType=void 0,Op.EmbeddingType={Float:"float",Int8:"int8",Uint8:"uint8",Binary:"binary",Ubinary:"ubinary"}),Op}var RS={},t$;function loe(){return t$||(t$=1,Object.defineProperty(RS,"__esModule",{value:!0})),RS}var CS={},r$;function coe(){return r$||(r$=1,Object.defineProperty(CS,"__esModule",{value:!0})),CS}var PS={},n$;function doe(){return n$||(n$=1,Object.defineProperty(PS,"__esModule",{value:!0})),PS}var jS={},i$;function foe(){return i$||(i$=1,Object.defineProperty(jS,"__esModule",{value:!0})),jS}var TS={},a$;function poe(){return a$||(a$=1,Object.defineProperty(TS,"__esModule",{value:!0})),TS}var AS={},o$;function hoe(){return o$||(o$=1,Object.defineProperty(AS,"__esModule",{value:!0})),AS}var MS={},s$;function moe(){return s$||(s$=1,Object.defineProperty(MS,"__esModule",{value:!0})),MS}var IS={},u$;function goe(){return u$||(u$=1,Object.defineProperty(IS,"__esModule",{value:!0})),IS}var xS={},l$;function _oe(){return l$||(l$=1,Object.defineProperty(xS,"__esModule",{value:!0})),xS}var Ep={},c$;function boe(){return c$||(c$=1,Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.EmbedJobStatus=void 0,Ep.EmbedJobStatus={Processing:"processing",Complete:"complete",Cancelling:"cancelling",Cancelled:"cancelled",Failed:"failed"}),Ep}var Rp={},d$;function yoe(){return d$||(d$=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.EmbedJobTruncate=void 0,Rp.EmbedJobTruncate={Start:"START",End:"END"}),Rp}var DS={},f$;function voe(){return f$||(f$=1,Object.defineProperty(DS,"__esModule",{value:!0})),DS}var $S={},p$;function woe(){return p$||(p$=1,Object.defineProperty($S,"__esModule",{value:!0})),$S}var NS={},h$;function Soe(){return h$||(h$=1,Object.defineProperty(NS,"__esModule",{value:!0})),NS}var qS={},m$;function Ooe(){return m$||(m$=1,Object.defineProperty(qS,"__esModule",{value:!0})),qS}var BS={},g$;function Eoe(){return g$||(g$=1,Object.defineProperty(BS,"__esModule",{value:!0})),BS}var Cp={},_$;function Roe(){return _$||(_$=1,Object.defineProperty(Cp,"__esModule",{value:!0}),Cp.DatasetValidationStatus=void 0,Cp.DatasetValidationStatus={Unknown:"unknown",Queued:"queued",Processing:"processing",Failed:"failed",Validated:"validated",Skipped:"skipped"}),Cp}var Pp={},b$;function Coe(){return b$||(b$=1,Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.DatasetType=void 0,Pp.DatasetType={EmbedInput:"embed-input",EmbedResult:"embed-result",ClusterResult:"cluster-result",ClusterOutliers:"cluster-outliers",RerankerFinetuneInput:"reranker-finetune-input",SingleLabelClassificationFinetuneInput:"single-label-classification-finetune-input",ChatFinetuneInput:"chat-finetune-input",MultiLabelClassificationFinetuneInput:"multi-label-classification-finetune-input"}),Pp}var US={},y$;function Poe(){return y$||(y$=1,Object.defineProperty(US,"__esModule",{value:!0})),US}var zS={},v$;function joe(){return v$||(v$=1,Object.defineProperty(zS,"__esModule",{value:!0})),zS}var LS={},w$;function Toe(){return w$||(w$=1,Object.defineProperty(LS,"__esModule",{value:!0})),LS}var FS={},S$;function Aoe(){return S$||(S$=1,Object.defineProperty(FS,"__esModule",{value:!0})),FS}var kS={},O$;function Moe(){return O$||(O$=1,Object.defineProperty(kS,"__esModule",{value:!0})),kS}var VS={},E$;function Ioe(){return E$||(E$=1,Object.defineProperty(VS,"__esModule",{value:!0})),VS}var HS={},R$;function xoe(){return R$||(R$=1,Object.defineProperty(HS,"__esModule",{value:!0})),HS}var KS={},C$;function Doe(){return C$||(C$=1,Object.defineProperty(KS,"__esModule",{value:!0})),KS}var WS={},P$;function $oe(){return P$||(P$=1,Object.defineProperty(WS,"__esModule",{value:!0})),WS}var GS={},j$;function Noe(){return j$||(j$=1,Object.defineProperty(GS,"__esModule",{value:!0})),GS}var JS={},T$;function qoe(){return T$||(T$=1,Object.defineProperty(JS,"__esModule",{value:!0})),JS}var XS={},A$;function Boe(){return A$||(A$=1,Object.defineProperty(XS,"__esModule",{value:!0})),XS}var jp={},M$;function Uoe(){return M$||(M$=1,Object.defineProperty(jp,"__esModule",{value:!0}),jp.ConnectorAuthStatus=void 0,jp.ConnectorAuthStatus={Valid:"valid",Expired:"expired"}),jp}var ZS={},I$;function zoe(){return I$||(I$=1,Object.defineProperty(ZS,"__esModule",{value:!0})),ZS}var QS={},x$;function Loe(){return x$||(x$=1,Object.defineProperty(QS,"__esModule",{value:!0})),QS}var YS={},D$;function Foe(){return D$||(D$=1,Object.defineProperty(YS,"__esModule",{value:!0})),YS}var Tp={},$$;function koe(){return $$||($$=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.AuthTokenType=void 0,Tp.AuthTokenType={Bearer:"bearer",Basic:"basic",Noscheme:"noscheme"}),Tp}var eO={},N$;function Voe(){return N$||(N$=1,Object.defineProperty(eO,"__esModule",{value:!0})),eO}var tO={},q$;function Hoe(){return q$||(q$=1,Object.defineProperty(tO,"__esModule",{value:!0})),tO}var rO={},B$;function Koe(){return B$||(B$=1,Object.defineProperty(rO,"__esModule",{value:!0})),rO}var nO={},U$;function Woe(){return U$||(U$=1,Object.defineProperty(nO,"__esModule",{value:!0})),nO}var iO={},z$;function Goe(){return z$||(z$=1,Object.defineProperty(iO,"__esModule",{value:!0})),iO}var aO={},L$;function Joe(){return L$||(L$=1,Object.defineProperty(aO,"__esModule",{value:!0})),aO}var Ap={},F$;function Xoe(){return F$||(F$=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.CompatibleEndpoint=void 0,Ap.CompatibleEndpoint={Chat:"chat",Embed:"embed",Classify:"classify",Summarize:"summarize",Rerank:"rerank",Rate:"rate",Generate:"generate"}),Ap}var oO={},k$;function Zoe(){return k$||(k$=1,Object.defineProperty(oO,"__esModule",{value:!0})),oO}var sO={},V$;function Qoe(){return V$||(V$=1,Object.defineProperty(sO,"__esModule",{value:!0})),sO}var H$;function Yoe(){return H$||(H$=1,function(r){var e=hc&&hc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=hc&&hc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(gne(),r),t(_ne(),r),t(bne(),r),t(yne(),r),t(vne(),r),t(wne(),r),t(Sne(),r),t(One(),r),t(Ene(),r),t(Rne(),r),t(Cne(),r),t(Pne(),r),t(jne(),r),t(Tne(),r),t(Ane(),r),t(Mne(),r),t(Ine(),r),t(xne(),r),t(Dne(),r),t($ne(),r),t(Nne(),r),t(qne(),r),t(Bne(),r),t(Une(),r),t(zne(),r),t(Lne(),r),t(Fne(),r),t(kne(),r),t(Vne(),r),t(Hne(),r),t(Kne(),r),t(Wne(),r),t(Gne(),r),t(Jne(),r),t(Xne(),r),t(Zne(),r),t(Qne(),r),t(Yne(),r),t(eie(),r),t(tie(),r),t(rie(),r),t(nie(),r),t(iie(),r),t(aie(),r),t(oie(),r),t(sie(),r),t(uie(),r),t(lie(),r),t(cie(),r),t(die(),r),t(fie(),r),t(pie(),r),t(hie(),r),t(mie(),r),t(gie(),r),t(_ie(),r),t(bie(),r),t(yie(),r),t(vie(),r),t(wie(),r),t(Sie(),r),t(Oie(),r),t(Eie(),r),t(Rie(),r),t(Cie(),r),t(Pie(),r),t(jie(),r),t(Tie(),r),t(Aie(),r),t(Mie(),r),t(Iie(),r),t(xie(),r),t(Die(),r),t($ie(),r),t(Nie(),r),t(qie(),r),t(Bie(),r),t(Uie(),r),t(zie(),r),t(Lie(),r),t(Fie(),r),t(kie(),r),t(Vie(),r),t(Hie(),r),t(Kie(),r),t(Wie(),r),t(Gie(),r),t(Jie(),r),t(Xie(),r),t(Zie(),r),t(Qie(),r),t(Yie(),r),t(eae(),r),t(tae(),r),t(rae(),r),t(nae(),r),t(iae(),r),t(aae(),r),t(oae(),r),t(sae(),r),t(uae(),r),t(lae(),r),t(cae(),r),t(dae(),r),t(fae(),r),t(pae(),r),t(hae(),r),t(mae(),r),t(gae(),r),t(_ae(),r),t(bae(),r),t(yae(),r),t(vae(),r),t(wae(),r),t(Sae(),r),t(Oae(),r),t(Eae(),r),t(Rae(),r),t(Cae(),r),t(Pae(),r),t(jae(),r),t(Tae(),r),t(Aae(),r),t(Mae(),r),t(Iae(),r),t(xae(),r),t(Dae(),r),t($ae(),r),t(Nae(),r),t(qae(),r),t(Bae(),r),t(Uae(),r),t(zae(),r),t(Lae(),r),t(Fae(),r),t(kae(),r),t(Vae(),r),t(Hae(),r),t(Kae(),r),t(Wae(),r),t(Gae(),r),t(Jae(),r),t(Xae(),r),t(Zae(),r),t(Qae(),r),t(Yae(),r),t(eoe(),r),t(toe(),r),t(roe(),r),t(noe(),r),t(ioe(),r),t(aoe(),r),t(ooe(),r),t(soe(),r),t(uoe(),r),t(loe(),r),t(coe(),r),t(doe(),r),t(foe(),r),t(poe(),r),t(hoe(),r),t(moe(),r),t(goe(),r),t(_oe(),r),t(boe(),r),t(yoe(),r),t(voe(),r),t(woe(),r),t(Soe(),r),t(Ooe(),r),t(Eoe(),r),t(Roe(),r),t(Coe(),r),t(Poe(),r),t(joe(),r),t(Toe(),r),t(Aoe(),r),t(Moe(),r),t(Ioe(),r),t(xoe(),r),t(Doe(),r),t($oe(),r),t(Noe(),r),t(qoe(),r),t(Boe(),r),t(Uoe(),r),t(zoe(),r),t(Loe(),r),t(Foe(),r),t(koe(),r),t(Voe(),r),t(Hoe(),r),t(Koe(),r),t(Woe(),r),t(Goe(),r),t(Joe(),r),t(Xoe(),r),t(Zoe(),r),t(Qoe(),r)}(hc)),hc}var mc={},hn={},uO={},Mp={},K$;function ese(){if(K$)return Mp;K$=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.CohereError=void 0;let r=class _8 extends Error{constructor({message:n,statusCode:i,body:a}){super(e({message:n,statusCode:i,body:a})),Object.setPrototypeOf(this,_8.prototype),i!=null&&(this.statusCode=i),a!==void 0&&(this.body=a)}};Mp.CohereError=r;function e({message:t,statusCode:n,body:i}){let a=[];return t!=null&&a.push(t),n!=null&&a.push(`Status code: ${n.toString()}`),i!=null&&a.push(`Body: ${JSON.stringify(i,void 0,2)}`),a.join(`
`)}return Mp}var Ip={},W$;function tse(){if(W$)return Ip;W$=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.CohereTimeoutError=void 0;let r=class b8 extends Error{constructor(t){super(t),Object.setPrototypeOf(this,b8.prototype)}};return Ip.CohereTimeoutError=r,Ip}var G$;function Ot(){return G$||(G$=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CohereTimeoutError=r.CohereError=void 0;var e=ese();Object.defineProperty(r,"CohereError",{enumerable:!0,get:function(){return e.CohereError}});var t=tse();Object.defineProperty(r,"CohereTimeoutError",{enumerable:!0,get:function(){return t.CohereTimeoutError}})}(uO)),uO}var J$;function rse(){if(J$)return hn;J$=1;var r=hn&&hn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=hn&&hn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=hn&&hn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(hn,"__esModule",{value:!0}),hn.BadRequestError=void 0;const n=t(Ot());class i extends n.CohereError{constructor(o){super({message:"BadRequestError",statusCode:400,body:o}),Object.setPrototypeOf(this,i.prototype)}}return hn.BadRequestError=i,hn}var mn={},X$;function nse(){if(X$)return mn;X$=1;var r=mn&&mn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=mn&&mn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=mn&&mn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(mn,"__esModule",{value:!0}),mn.UnauthorizedError=void 0;const n=t(Ot());let i=class y8 extends n.CohereError{constructor(o){super({message:"UnauthorizedError",statusCode:401,body:o}),Object.setPrototypeOf(this,y8.prototype)}};return mn.UnauthorizedError=i,mn}var gn={},Z$;function ise(){if(Z$)return gn;Z$=1;var r=gn&&gn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=gn&&gn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=gn&&gn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(gn,"__esModule",{value:!0}),gn.ForbiddenError=void 0;const n=t(Ot());let i=class v8 extends n.CohereError{constructor(o){super({message:"ForbiddenError",statusCode:403,body:o}),Object.setPrototypeOf(this,v8.prototype)}};return gn.ForbiddenError=i,gn}var _n={},Q$;function ase(){if(Q$)return _n;Q$=1;var r=_n&&_n.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=_n&&_n.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=_n&&_n.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(_n,"__esModule",{value:!0}),_n.NotFoundError=void 0;const n=t(Ot());class i extends n.CohereError{constructor(o){super({message:"NotFoundError",statusCode:404,body:o}),Object.setPrototypeOf(this,i.prototype)}}return _n.NotFoundError=i,_n}var bn={},Y$;function ose(){if(Y$)return bn;Y$=1;var r=bn&&bn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=bn&&bn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=bn&&bn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(bn,"__esModule",{value:!0}),bn.UnprocessableEntityError=void 0;const n=t(Ot());class i extends n.CohereError{constructor(o){super({message:"UnprocessableEntityError",statusCode:422,body:o}),Object.setPrototypeOf(this,i.prototype)}}return bn.UnprocessableEntityError=i,bn}var yn={},eN;function sse(){if(eN)return yn;eN=1;var r=yn&&yn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=yn&&yn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=yn&&yn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(yn,"__esModule",{value:!0}),yn.TooManyRequestsError=void 0;const n=t(Ot());let i=class w8 extends n.CohereError{constructor(o){super({message:"TooManyRequestsError",statusCode:429,body:o}),Object.setPrototypeOf(this,w8.prototype)}};return yn.TooManyRequestsError=i,yn}var vn={},tN;function use(){if(tN)return vn;tN=1;var r=vn&&vn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=vn&&vn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=vn&&vn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(vn,"__esModule",{value:!0}),vn.InvalidTokenError=void 0;const n=t(Ot());let i=class S8 extends n.CohereError{constructor(o){super({message:"InvalidTokenError",statusCode:498,body:o}),Object.setPrototypeOf(this,S8.prototype)}};return vn.InvalidTokenError=i,vn}var wn={},rN;function lse(){if(rN)return wn;rN=1;var r=wn&&wn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=wn&&wn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=wn&&wn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(wn,"__esModule",{value:!0}),wn.ClientClosedRequestError=void 0;const n=t(Ot());let i=class O8 extends n.CohereError{constructor(o){super({message:"ClientClosedRequestError",statusCode:499,body:o}),Object.setPrototypeOf(this,O8.prototype)}};return wn.ClientClosedRequestError=i,wn}var Sn={},nN;function cse(){if(nN)return Sn;nN=1;var r=Sn&&Sn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Sn&&Sn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Sn&&Sn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.InternalServerError=void 0;const n=t(Ot());class i extends n.CohereError{constructor(o){super({message:"InternalServerError",statusCode:500,body:o}),Object.setPrototypeOf(this,i.prototype)}}return Sn.InternalServerError=i,Sn}var On={},iN;function dse(){if(iN)return On;iN=1;var r=On&&On.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=On&&On.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=On&&On.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(On,"__esModule",{value:!0}),On.NotImplementedError=void 0;const n=t(Ot());let i=class E8 extends n.CohereError{constructor(o){super({message:"NotImplementedError",statusCode:501,body:o}),Object.setPrototypeOf(this,E8.prototype)}};return On.NotImplementedError=i,On}var En={},aN;function fse(){if(aN)return En;aN=1;var r=En&&En.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=En&&En.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=En&&En.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(En,"__esModule",{value:!0}),En.ServiceUnavailableError=void 0;const n=t(Ot());let i=class R8 extends n.CohereError{constructor(o){super({message:"ServiceUnavailableError",statusCode:503,body:o}),Object.setPrototypeOf(this,R8.prototype)}};return En.ServiceUnavailableError=i,En}var Rn={},oN;function pse(){if(oN)return Rn;oN=1;var r=Rn&&Rn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Rn&&Rn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Rn&&Rn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.GatewayTimeoutError=void 0;const n=t(Ot());let i=class C8 extends n.CohereError{constructor(o){super({message:"GatewayTimeoutError",statusCode:504,body:o}),Object.setPrototypeOf(this,C8.prototype)}};return Rn.GatewayTimeoutError=i,Rn}var sN;function hse(){return sN||(sN=1,function(r){var e=mc&&mc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=mc&&mc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(rse(),r),t(nse(),r),t(ise(),r),t(ase(),r),t(ose(),r),t(sse(),r),t(use(),r),t(lse(),r),t(cse(),r),t(dse(),r),t(fse(),r),t(pse(),r)}(mc)),mc}var gc={},lO={},uN;function mse(){return uN||(uN=1,Object.defineProperty(lO,"__esModule",{value:!0})),lO}var lN;function gse(){return lN||(lN=1,function(r){var e=gc&&gc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=gc&&gc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(mse(),r)}(gc)),gc}var cN;function Bl(){return cN||(cN=1,function(r){var e=Xl&&Xl.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Xl&&Xl.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(mne(),r),t(Yoe(),r),t(hse(),r),t(gse(),r)}(Xl)),Xl}var _c={},jr={};function _se(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?a(c.value):i(c.value).then(s,u)}l((n=n.apply(r,e||[])).next())})}function bse(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){t.label=l[1];break}if(l[0]===6&&t.label<a[1]){t.label=a[1],a=l;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(l);break}a[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var Zr=64,yse=32,vse=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),wse=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Sse=Math.pow(2,53)-1,Jg=function(){function r(){this.state=Int32Array.from(wse),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return r.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,this.bytesHashed*8>Sse)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===Zr&&(this.hashBuffer(),this.bufferLength=0)},r.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%Zr>=Zr-8){for(var i=this.bufferLength;i<Zr;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<Zr-8;i++)t.setUint8(i,0);t.setUint32(Zr-8,Math.floor(e/4294967296),!0),t.setUint32(Zr-4,e),this.hashBuffer(),this.finished=!0}for(var a=new Uint8Array(yse),i=0;i<8;i++)a[i*4]=this.state[i]>>>24&255,a[i*4+1]=this.state[i]>>>16&255,a[i*4+2]=this.state[i]>>>8&255,a[i*4+3]=this.state[i]>>>0&255;return a},r.prototype.hashBuffer=function(){for(var e=this,t=e.buffer,n=e.state,i=n[0],a=n[1],o=n[2],s=n[3],u=n[4],l=n[5],c=n[6],d=n[7],h=0;h<Zr;h++){if(h<16)this.temp[h]=(t[h*4]&255)<<24|(t[h*4+1]&255)<<16|(t[h*4+2]&255)<<8|t[h*4+3]&255;else{var f=this.temp[h-2],m=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10;f=this.temp[h-15];var p=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[h]=(m+this.temp[h-7]|0)+(p+this.temp[h-16]|0)}var g=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&l^~u&c)|0)+(d+(vse[h]+this.temp[h]|0)|0)|0,b=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&a^i&o^a&o)|0;d=c,c=l,l=u,u=s+g|0,s=o,o=a,a=i,i=g+b|0}n[0]+=i,n[1]+=a,n[2]+=o,n[3]+=s,n[4]+=u,n[5]+=l,n[6]+=c,n[7]+=d},r}();const Ose=r=>new TextEncoder().encode(r);var Ese=typeof Buffer<"u"&&Buffer.from?function(r){return Buffer.from(r,"utf8")}:Ose;function P8(r){return r instanceof Uint8Array?r:typeof r=="string"?Ese(r):ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(r)}function Rse(r){return typeof r=="string"?r.length===0:r.byteLength===0}var Cse=function(){function r(e){this.secret=e,this.hash=new Jg,this.reset()}return r.prototype.update=function(e){if(!(Rse(e)||this.error))try{this.hash.update(P8(e))}catch(t){this.error=t}},r.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},r.prototype.digest=function(){return _se(this,void 0,void 0,function(){return bse(this,function(e){return[2,this.digestSync()]})})},r.prototype.reset=function(){if(this.hash=new Jg,this.secret){this.outer=new Jg;var e=Pse(this.secret),t=new Uint8Array(Zr);t.set(e);for(var n=0;n<Zr;n++)e[n]^=54,t[n]^=92;this.hash.update(e),this.outer.update(t);for(var n=0;n<e.byteLength;n++)e[n]=0}},r}();function Pse(r){var e=P8(r);if(e.byteLength>Zr){var t=new Jg;t.update(e),e=t.digest()}var n=new Uint8Array(Zr);return n.set(e),n}const jse=Object.freeze(Object.defineProperty({__proto__:null,Sha256:Cse},Symbol.toStringTag,{value:"Module"})),Tse=pd(jse);class BP extends Error{constructor(e,t=!0){var a;let n,i=!0;typeof t=="boolean"?(n=void 0,i=t):t!=null&&typeof t=="object"&&(n=t.logger,i=t.tryNextLink??!0),super(e),this.name="ProviderError",this.tryNextLink=i,Object.setPrototypeOf(this,BP.prototype),(a=n==null?void 0:n.debug)==null||a.call(n,`@smithy/property-provider ${i?"->":"(!)"} ${e}`)}static from(e,t=!0){return Object.assign(new this(e.message,t),e)}}class Br extends BP{constructor(e,t=!0){super(e,t),this.name="CredentialsProviderError",Object.setPrototypeOf(this,Br.prototype)}}function j8(r){return Promise.all(Object.keys(r).reduce((e,t)=>{const n=r[t];return typeof n=="string"?e.push([t,n]):e.push(n().then(i=>[t,i])),e},[])).then(e=>e.reduce((t,[n,i])=>(t[n]=i,t),{}))}function T8(r){return async e=>{var l;(l=r.logger)==null||l.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");const{GetCredentialsForIdentityCommand:t,CognitoIdentityClient:n}=await Rl(async()=>{const{GetCredentialsForIdentityCommand:c,CognitoIdentityClient:d}=await import("./loadCognitoIdentity.js");return{GetCredentialsForIdentityCommand:c,CognitoIdentityClient:d}},__vite__mapDeps([0,1])),i=c=>{var d,h,f;return((d=r.clientConfig)==null?void 0:d[c])??((h=r.parentClientConfig)==null?void 0:h[c])??((f=e==null?void 0:e.callerClientConfig)==null?void 0:f[c])},{Credentials:{AccessKeyId:a=Ase(r.logger),Expiration:o,SecretKey:s=Ise(r.logger),SessionToken:u}=Mse(r.logger)}=await(r.client??new n(Object.assign({},r.clientConfig??{},{region:i("region"),profile:i("profile")}))).send(new t({CustomRoleArn:r.customRoleArn,IdentityId:r.identityId,Logins:r.logins?await j8(r.logins):void 0}));return{identityId:r.identityId,accessKeyId:a,secretAccessKey:s,sessionToken:u,expiration:o}}}function Ase(r){throw new Br("Response from Amazon Cognito contained no access key ID",{logger:r})}function Mse(r){throw new Br("Response from Amazon Cognito contained no credentials",{logger:r})}function Ise(r){throw new Br("Response from Amazon Cognito contained no secret key",{logger:r})}const cO="IdentityIds";class xse{constructor(e="aws:cognito-identity-ids"){Ee(this,"dbName");this.dbName=e}getItem(e){return this.withObjectStore("readonly",t=>{const n=t.get(e);return new Promise(i=>{n.onerror=()=>i(null),n.onsuccess=()=>i(n.result?n.result.value:null)})}).catch(()=>null)}removeItem(e){return this.withObjectStore("readwrite",t=>{const n=t.delete(e);return new Promise((i,a)=>{n.onerror=()=>a(n.error),n.onsuccess=()=>i()})})}setItem(e,t){return this.withObjectStore("readwrite",n=>{const i=n.put({id:e,value:t});return new Promise((a,o)=>{i.onerror=()=>o(i.error),i.onsuccess=()=>a()})})}getDb(){const e=self.indexedDB.open(this.dbName,1);return new Promise((t,n)=>{e.onsuccess=()=>{t(e.result)},e.onerror=()=>{n(e.error)},e.onblocked=()=>{n(new Error("Unable to access DB"))},e.onupgradeneeded=()=>{const i=e.result;i.onerror=()=>{n(new Error("Failed to create object store"))},i.createObjectStore(cO,{keyPath:"id"})}})}withObjectStore(e,t){return this.getDb().then(n=>{const i=n.transaction(cO,e);return i.oncomplete=()=>n.close(),new Promise((a,o)=>{i.onerror=()=>o(i.error),a(t(i.objectStore(cO)))}).catch(a=>{throw n.close(),a})})}}class Dse{constructor(e={}){Ee(this,"store");this.store=e}getItem(e){return e in this.store?this.store[e]:null}removeItem(e){delete this.store[e]}setItem(e,t){this.store[e]=t}}const $se=new Dse;function Nse(){return typeof self=="object"&&self.indexedDB?new xse:typeof window=="object"&&window.localStorage?window.localStorage:$se}function qse({accountId:r,cache:e=Nse(),client:t,clientConfig:n,customRoleArn:i,identityPoolId:a,logins:o,userIdentifier:s=!o||Object.keys(o).length===0?"ANONYMOUS":void 0,logger:u,parentClientConfig:l}){u==null||u.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");const c=s?`aws:cognito-identity-credentials:${a}:${s}`:void 0;let d=async h=>{const{GetIdCommand:f,CognitoIdentityClient:m}=await Rl(async()=>{const{GetIdCommand:_,CognitoIdentityClient:y}=await import("./loadCognitoIdentity.js");return{GetIdCommand:_,CognitoIdentityClient:y}},__vite__mapDeps([0,1])),p=_=>{var y;return(n==null?void 0:n[_])??(l==null?void 0:l[_])??((y=h==null?void 0:h.callerClientConfig)==null?void 0:y[_])},g=t??new m(Object.assign({},n??{},{region:p("region"),profile:p("profile")}));let b=c&&await e.getItem(c);if(!b){const{IdentityId:_=Bse(u)}=await g.send(new f({AccountId:r,IdentityPoolId:a,Logins:o?await j8(o):void 0}));b=_,c&&Promise.resolve(e.setItem(c,b)).catch(()=>{})}return d=T8({client:g,customRoleArn:i,logins:o,identityId:b}),d(h)};return h=>d(h).catch(async f=>{throw c&&Promise.resolve(e.removeItem(c)).catch(()=>{}),f})}function Bse(r){throw new Br("Response from Amazon Cognito contained no identity ID",{logger:r})}const Use=r=>T8({...r}),zse=r=>qse({...r});var dN;(function(r){r.HEADER="header",r.QUERY="query"})(dN||(dN={}));var fN;(function(r){r.HEADER="header",r.QUERY="query"})(fN||(fN={}));var pN;(function(r){r.HTTP="http",r.HTTPS="https"})(pN||(pN={}));var hN;(function(r){r.MD5="md5",r.CRC32="crc32",r.CRC32C="crc32c",r.SHA1="sha1",r.SHA256="sha256"})(hN||(hN={}));var mN;(function(r){r[r.HEADER=0]="HEADER",r[r.TRAILER=1]="TRAILER"})(mN||(mN={}));var gN;(function(r){r.PROFILE="profile",r.SSO_SESSION="sso-session",r.SERVICES="services"})(gN||(gN={}));var _N;(function(r){r.HTTP_0_9="http/0.9",r.HTTP_1_0="http/1.0",r.TDS_8_0="tds/8.0"})(_N||(_N={}));let bN=class{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const t=e;return typeof t.statusCode=="number"&&typeof t.headers=="object"}};const dO=r=>encodeURIComponent(r).replace(/[!'()*]/g,Lse),Lse=r=>`%${r.charCodeAt(0).toString(16).toUpperCase()}`;function Fse(r){const e=[];for(let t of Object.keys(r).sort()){const n=r[t];if(t=dO(t),Array.isArray(n))for(let i=0,a=n.length;i<a;i++)e.push(`${t}=${dO(n[i])}`);else{let i=t;(n||typeof n=="string")&&(i+=`=${dO(n)}`),e.push(i)}}return e.join("&")}function yN(r,e){return new Request(r,e)}function kse(r=0){return new Promise((e,t)=>{r&&setTimeout(()=>{const n=new Error(`Request did not complete within ${r} ms`);n.name="TimeoutError",t(n)},r)})}const fO={supported:void 0};class UP{static create(e){return typeof(e==null?void 0:e.handle)=="function"?e:new UP(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(t=>t||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),fO.supported===void 0&&(fO.supported=typeof Request<"u"&&"keepalive"in yN("https://[::1]"))}destroy(){}async handle(e,{abortSignal:t}={}){var b;this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout,i=this.config.keepAlive===!0,a=this.config.credentials;if(t!=null&&t.aborted){const _=new Error("Request aborted");return _.name="AbortError",Promise.reject(_)}let o=e.path;const s=Fse(e.query||{});s&&(o+=`?${s}`),e.fragment&&(o+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){const _=e.username??"",y=e.password??"";u=`${_}:${y}@`}const{port:l,method:c}=e,d=`${e.protocol}//${u}${e.hostname}${l?`:${l}`:""}${o}`,h=c==="GET"||c==="HEAD"?void 0:e.body,f={body:h,headers:new Headers(e.headers),method:c,credentials:a};(b=this.config)!=null&&b.cache&&(f.cache=this.config.cache),h&&(f.duplex="half"),typeof AbortController<"u"&&(f.signal=t),fO.supported&&(f.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(f,this.config.requestInit(e));let m=()=>{};const p=yN(d,f),g=[fetch(p).then(_=>{const y=_.headers,v={};for(const S of y.entries())v[S[0]]=S[1];return _.body!=null?{response:new bN({headers:v,reason:_.statusText,statusCode:_.status,body:_.body})}:_.blob().then(S=>({response:new bN({headers:v,reason:_.statusText,statusCode:_.status,body:S})}))}),kse(n)];return t&&g.push(new Promise((_,y)=>{const v=()=>{const w=new Error("Request aborted");w.name="AbortError",y(w)};if(typeof t.addEventListener=="function"){const w=t;w.addEventListener("abort",v,{once:!0}),m=()=>w.removeEventListener("abort",v)}else t.onabort=v})),Promise.race(g).finally(m)}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=t,n))}httpHandlerConfigs(){return this.config??{}}}const $l={},Of=new Array(64);for(let r=0,e=65,t=90;r+e<=t;r++){const n=String.fromCharCode(r+e);$l[n]=r,Of[r]=n}for(let r=0,e=97,t=122;r+e<=t;r++){const n=String.fromCharCode(r+e),i=r+26;$l[n]=i,Of[i]=n}for(let r=0;r<10;r++){$l[r.toString(10)]=r+52;const e=r.toString(10),t=r+52;$l[e]=t,Of[t]=e}$l["+"]=62;Of[62]="+";$l["/"]=63;Of[63]="/";const Zd=6,Kh=8,Vse=63,Hse=r=>{let e=r.length/4*3;r.slice(-2)==="=="?e-=2:r.slice(-1)==="="&&e--;const t=new ArrayBuffer(e),n=new DataView(t);for(let i=0;i<r.length;i+=4){let a=0,o=0;for(let l=i,c=i+3;l<=c;l++)if(r[l]!=="="){if(!(r[l]in $l))throw new TypeError(`Invalid character ${r[l]} in base64 string.`);a|=$l[r[l]]<<(c-l)*Zd,o+=Zd}else a>>=Zd;const s=i/4*3;a>>=o%Kh;const u=Math.floor(o/Kh);for(let l=0;l<u;l++){const c=(u-l-1)*Kh;n.setUint8(s+l,(a&255<<c)>>c)}}return new Uint8Array(t)},Kse=r=>new TextEncoder().encode(r);function Wse(r){let e;typeof r=="string"?e=Kse(r):e=r;const t=typeof e=="object"&&typeof e.length=="number",n=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!t&&!n)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let i="";for(let a=0;a<e.length;a+=3){let o=0,s=0;for(let l=a,c=Math.min(a+3,e.length);l<c;l++)o|=e[l]<<(c-l-1)*Kh,s+=Kh;const u=Math.ceil(s/Zd);o<<=u*Zd-s;for(let l=1;l<=u;l++){const c=(u-l)*Zd;i+=Of[(o&Vse<<c)>>c]}i+="==".slice(0,4-u)}return i}const Gse=async r=>{var e;return typeof Blob=="function"&&r instanceof Blob||((e=r.constructor)==null?void 0:e.name)==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await r.arrayBuffer()):Jse(r):Xse(r)};async function Jse(r){const e=await Zse(r),t=Hse(e);return new Uint8Array(t)}async function Xse(r){const e=[],t=r.getReader();let n=!1,i=0;for(;!n;){const{done:s,value:u}=await t.read();u&&(e.push(u),i+=u.length),n=s}const a=new Uint8Array(i);let o=0;for(const s of e)a.set(s,o),o+=s.length;return a}function Zse(r){return new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return t(new Error("Reader aborted too early"));const i=n.result??"",a=i.indexOf(","),o=a>-1?a+1:i.length;e(i.substring(o))},n.onabort=()=>t(new Error("Read aborted")),n.onerror=()=>t(n.error),n.readAsDataURL(r)})}const Qse="169.254.170.2",Yse="169.254.170.23",eue="[fd00:ec2::23]",tue=(r,e)=>{if(r.protocol!=="https:"&&!(r.hostname===Qse||r.hostname===Yse||r.hostname===eue)){if(r.hostname.includes("[")){if(r.hostname==="[::1]"||r.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(r.hostname==="localhost")return;const t=r.hostname.split("."),n=i=>{const a=parseInt(i,10);return 0<=a&&a<=255};if(t[0]==="127"&&n(t[1])&&n(t[2])&&n(t[3])&&t.length===4)return}throw new Br(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:e})}};let rue=class lC{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const t=new lC({...e,headers:{...e.headers}});return t.query&&(t.query=nue(t.query)),t}static isInstance(e){if(!e)return!1;const t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&typeof t.query=="object"&&typeof t.headers=="object"}clone(){return lC.clone(this)}};function nue(r){return Object.keys(r).reduce((e,t)=>{const n=r[t];return{...e,[t]:Array.isArray(n)?[...n]:n}},{})}const iue=r=>{if(typeof r=="string")return r;if(typeof r!="object"||typeof r.byteOffset!="number"||typeof r.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(r)},vN=r=>{var e;return typeof ReadableStream=="function"&&(((e=r==null?void 0:r.constructor)==null?void 0:e.name)===ReadableStream.name||r instanceof ReadableStream)},A8={},cC={};for(let r=0;r<256;r++){let e=r.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),A8[r]=e,cC[e]=r}function Qwe(r){if(r.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(r.length/2);for(let t=0;t<r.length;t+=2){const n=r.slice(t,t+2).toLowerCase();if(n in cC)e[t/2]=cC[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function aue(r){let e="";for(let t=0;t<r.byteLength;t++)e+=A8[r[t]];return e}const wN="The stream has already been transformed.",oue=r=>{var i,a;if(!SN(r)&&!vN(r)){const o=((a=(i=r==null?void 0:r.__proto__)==null?void 0:i.constructor)==null?void 0:a.name)||r;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let e=!1;const t=async()=>{if(e)throw new Error(wN);return e=!0,await Gse(r)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(r,{transformToByteArray:t,transformToString:async o=>{const s=await t();if(o==="base64")return Wse(s);if(o==="hex")return aue(s);if(o===void 0||o==="utf8"||o==="utf-8")return iue(s);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(s);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(wN);if(e=!0,SN(r))return n(r);if(vN(r))return r;throw new Error(`Cannot transform payload to web stream, got ${r}`)}})},SN=r=>typeof Blob=="function"&&r instanceof Blob,dC=r=>{if(r!=null){if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return String(e)!==String(r)&&x8.warn(I8(`Expected number but observed string: ${r}`)),e}if(typeof r=="number")return r;throw new TypeError(`Expected number, got ${typeof r}: ${r}`)}},sue=Math.ceil(2**127*(2-2**-23)),ON=r=>{const e=dC(r);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>sue)throw new TypeError(`Expected 32-bit float, got ${r}`);return e},uue=r=>{if(r!=null){if(Number.isInteger(r)&&!Number.isNaN(r))return r;throw new TypeError(`Expected integer, got ${typeof r}: ${r}`)}},EN=r=>zP(r,32),RN=r=>zP(r,16),CN=r=>zP(r,8),zP=(r,e)=>{const t=uue(r);if(t!==void 0&&lue(t,e)!==t)throw new TypeError(`Expected ${e}-bit integer, got ${r}`);return t},lue=(r,e)=>{switch(e){case 32:return Int32Array.of(r)[0];case 16:return Int16Array.of(r)[0];case 8:return Int8Array.of(r)[0]}},Ywe=(r,e)=>{if(r==null)throw new TypeError("Expected a non-null value");return r},e0e=r=>{if(r!=null){if(typeof r=="string")return r;if(["boolean","number","bigint"].includes(typeof r))return x8.warn(I8(`Expected string, got ${typeof r}: ${r}`)),String(r);throw new TypeError(`Expected string, got ${typeof r}: ${r}`)}},cue=r=>dC(typeof r=="string"?Dm(r):r),due=r=>ON(typeof r=="string"?Dm(r):r),fue=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Dm=r=>{const e=r.match(fue);if(e===null||e[0].length!==r.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(r)},t0e=r=>EN(typeof r=="string"?Dm(r):r),M8=r=>RN(typeof r=="string"?Dm(r):r),pue=r=>CN(typeof r=="string"?Dm(r):r),I8=r=>String(new TypeError(r).stack||r).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),x8={warn:console.warn},hue=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],mue=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),gue=r=>{if(r==null)return;if(typeof r!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const e=mue.exec(r);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");const[t,n,i,a,o,s,u,l]=e,c=M8(LP(n)),d=ud(i,"month",1,12),h=ud(a,"day",1,31);return D8(c,d,h,{hours:o,minutes:s,seconds:u,fractionalMilliseconds:l})},_ue=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),r0e=r=>{if(r==null)return;if(typeof r!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const e=_ue.exec(r);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");const[t,n,i,a,o,s,u,l,c]=e,d=M8(LP(n)),h=ud(i,"month",1,12),f=ud(a,"day",1,31),m=D8(d,h,f,{hours:o,minutes:s,seconds:u,fractionalMilliseconds:l});return c.toUpperCase()!="Z"&&m.setTime(m.getTime()-Sue(c)),m},n0e=r=>{if(r==null)return;let e;if(typeof r=="number")e=r;else if(typeof r=="string")e=cue(r);else if(typeof r=="object"&&r.tag===1)e=r.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},D8=(r,e,t,n)=>{const i=e-1;return yue(r,i,t),new Date(Date.UTC(r,i,t,ud(n.hours,"hour",0,23),ud(n.minutes,"minute",0,59),ud(n.seconds,"seconds",0,60),wue(n.fractionalMilliseconds)))},bue=[31,28,31,30,31,30,31,31,30,31,30,31],yue=(r,e,t)=>{let n=bue[e];if(e===1&&vue(r)&&(n=29),t>n)throw new TypeError(`Invalid day for ${hue[e]} in ${r}: ${t}`)},vue=r=>r%4===0&&(r%100!==0||r%400===0),ud=(r,e,t,n)=>{const i=pue(LP(r));if(i<t||i>n)throw new TypeError(`${e} must be between ${t} and ${n}, inclusive`);return i},wue=r=>r==null?0:due("0."+r)*1e3,Sue=r=>{const e=r[0];let t=1;if(e=="+")t=1;else if(e=="-")t=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);const n=Number(r.substring(1,3)),i=Number(r.substring(4,6));return t*(n*60+i)*60*1e3},LP=r=>{let e=0;for(;e<r.length-1&&r.charAt(e)==="0";)e++;return e===0?r:r.slice(e)};function Oue(r){return new rue({protocol:r.protocol,hostname:r.hostname,port:Number(r.port),path:r.pathname,query:Array.from(r.searchParams.entries()).reduce((e,[t,n])=>(e[t]=n,e),{}),fragment:r.hash})}async function Eue(r,e){const n=await oue(r.body).transformToString();if(r.statusCode===200){const i=JSON.parse(n);if(typeof i.AccessKeyId!="string"||typeof i.SecretAccessKey!="string"||typeof i.Token!="string"||typeof i.Expiration!="string")throw new Br("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:e});return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.Token,expiration:gue(i.Expiration)}}if(r.statusCode>=400&&r.statusCode<500){let i={};try{i=JSON.parse(n)}catch{}throw Object.assign(new Br(`Server responded with status: ${r.statusCode}`,{logger:e}),{Code:i.Code,Message:i.Message})}throw new Br(`Server responded with status: ${r.statusCode}`,{logger:e})}const Rue=(r,e,t)=>async()=>{for(let n=0;n<e;++n)try{return await r()}catch{await new Promise(a=>setTimeout(a,t))}return await r()},Cue=(r={})=>{var a;(a=r.logger)==null||a.debug("@aws-sdk/credential-provider-http - fromHttp");let e;const t=r.credentialsFullUri;if(t)e=t;else throw new Br("No HTTP credential provider host provided.",{logger:r.logger});const n=new URL(e);tue(n,r.logger);const i=new UP;return Rue(async()=>{const o=Oue(n);r.authorizationToken&&(o.headers.Authorization=r.authorizationToken);const s=await i.handle(o);return Eue(s.response)},r.maxRetries??3,r.timeout??1e3)};let Pue=class{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const t=e;return typeof t.statusCode=="number"&&typeof t.headers=="object"}};const jue=(r,e)=>(t,n)=>async i=>{var o,s,u,l;const{response:a}=await t(i);try{const c=await e(a,r);return{response:a,output:c}}catch(c){if(Object.defineProperty(c,"$response",{value:a}),!("$metadata"in c)){const d="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{c.message+=`
  `+d}catch{!n.logger||((s=(o=n.logger)==null?void 0:o.constructor)==null?void 0:s.name)==="NoOpLogger"?console.warn(d):(l=(u=n.logger)==null?void 0:u.warn)==null||l.call(u,d)}typeof c.$responseBodyText<"u"&&c.$response&&(c.$response.body=c.$responseBodyText);try{if(Pue.isInstance(a)){const{headers:h={}}=a,f=Object.entries(h);c.$metadata={httpStatusCode:a.statusCode,requestId:pO(/^x-[\w-]+-request-?id$/,f),extendedRequestId:pO(/^x-[\w-]+-id-2$/,f),cfId:pO(/^x-[\w-]+-cf-id$/,f)}}}catch{}}throw c}},pO=(r,e)=>(e.find(([t])=>t.match(r))||[void 0,void 0])[1],Tue=(r,e)=>(t,n)=>async i=>{var u;const a=r,o=(u=n.endpointV2)!=null&&u.url&&a.urlParser?async()=>a.urlParser(n.endpointV2.url):a.endpoint;if(!o)throw new Error("No valid endpoint provider available.");const s=await e(i.input,{...r,endpoint:o});return t({...i,request:s})},Aue={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},$8={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function a0e(r,e,t){return{applyToStack:n=>{n.add(jue(r,t),Aue),n.add(Tue(r,e),$8)}}}$8.name;const Mue=r=>{if(typeof r=="function")return r;const e=Promise.resolve(r);return()=>e},Iue="us-east-1",xue=(r,e,t)=>{let n;return async(i={})=>{var h,f,m,p,g,b;const{callerClientConfig:a}=i,o=((h=r.clientConfig)==null?void 0:h.profile)??(a==null?void 0:a.profile),s=r.logger??(a==null?void 0:a.logger);s==null||s.debug("@aws-sdk/credential-providers - fromTemporaryCredentials (STS)");const u={...r.params,RoleSessionName:r.params.RoleSessionName??"aws-sdk-js-"+Date.now()};if(u!=null&&u.SerialNumber){if(!r.mfaCodeProvider)throw new Br("Temporary credential requires multi-factor authentication, but no MFA code callback was provided.",{tryNextLink:!1,logger:s});u.TokenCode=await r.mfaCodeProvider(u==null?void 0:u.SerialNumber)}const{AssumeRoleCommand:l,STSClient:c}=await Rl(async()=>{const{AssumeRoleCommand:_,STSClient:y}=await import("./loadSts.js").then(v=>v.l);return{AssumeRoleCommand:_,STSClient:y}},__vite__mapDeps([2,1]));if(!n){const _=typeof e=="function"?e():void 0,y=[r.masterCredentials,(f=r.clientConfig)==null?void 0:f.credentials,void(a==null?void 0:a.credentials),(m=a==null?void 0:a.credentialDefaultProvider)==null?void 0:m.call(a),_];let v="STS client default credentials";if(y[0])v="options.masterCredentials";else if(y[1])v="options.clientConfig.credentials";else{if(y[2])throw v="caller client's credentials",new Error("fromTemporaryCredentials recursion in callerClientConfig.credentials");y[3]?v="caller client's credentialDefaultProvider":y[4]&&(v="AWS SDK default credentials")}const w=[(p=r.clientConfig)==null?void 0:p.region,a==null?void 0:a.region,await(t==null?void 0:t({profile:o})),Iue];let S="default partition's default region";w[0]?S="options.clientConfig.region":w[1]?S="caller client's region":w[2]&&(S="file or env region");const R=[PN((g=r.clientConfig)==null?void 0:g.requestHandler),PN(a==null?void 0:a.requestHandler)];let P="STS default requestHandler";R[0]?P="options.clientConfig.requestHandler":R[1]&&(P="caller client's requestHandler"),(b=s==null?void 0:s.debug)==null||b.call(s,`@aws-sdk/credential-providers - fromTemporaryCredentials STS client init with ${S}=${await Mue(Cg(w))()}, ${v}, ${P}.`),n=new c({...r.clientConfig,credentials:Cg(y),logger:s,profile:o,region:Cg(w),requestHandler:Cg(R)})}if(r.clientPlugins)for(const _ of r.clientPlugins)n.middlewareStack.use(_);const{Credentials:d}=await n.send(new l(u));if(!d||!d.AccessKeyId||!d.SecretAccessKey)throw new Br(`Invalid response from STS.assumeRole call with role ${u.RoleArn}`,{logger:s});return{accessKeyId:d.AccessKeyId,secretAccessKey:d.SecretAccessKey,sessionToken:d.SessionToken,expiration:d.Expiration,credentialScope:d.CredentialScope}}},PN=r=>{var e;return((e=r==null?void 0:r.metadata)==null?void 0:e.handlerProtocol)==="h2"?void 0:r},Cg=r=>{for(const e of r)if(e!==void 0)return e},Due={},$ue=Object.freeze(Object.defineProperty({__proto__:null,default:Due},Symbol.toStringTag,{value:"Module"})),Nue=r=>async e=>{var c;(c=r.logger)==null||c.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");const{roleArn:t,roleSessionName:n,webIdentityToken:i,providerId:a,policyArns:o,policy:s,durationSeconds:u}=r;let{roleAssumerWithWebIdentity:l}=r;if(!l){const{getDefaultRoleAssumerWithWebIdentity:d}=await Rl(async()=>{const{getDefaultRoleAssumerWithWebIdentity:h}=await import("./index.js");return{getDefaultRoleAssumerWithWebIdentity:h}},__vite__mapDeps([3,2,1]));l=d({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...e==null?void 0:e.callerClientConfig,...r.parentClientConfig}},r.clientPlugins)}return l({RoleArn:t,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:i,ProviderId:a,PolicyArns:o,Policy:s,DurationSeconds:u})},que=r=>Nue({...r}),Bue=Object.freeze(Object.defineProperty({__proto__:null,fromCognitoIdentity:Use,fromCognitoIdentityPool:zse,fromHttp:Cue,fromTemporaryCredentials:xue,fromWebToken:que},Symbol.toStringTag,{value:"Module"})),Uue=pd(Bue);var jN;(function(r){r.HEADER="header",r.QUERY="query"})(jN||(jN={}));var TN;(function(r){r.HTTP="http",r.HTTPS="https"})(TN||(TN={}));var fC;(function(r){r[r.HEADER=0]="HEADER",r[r.TRAILER=1]="TRAILER"})(fC||(fC={}));var AN;(function(r){r.HTTP_0_9="http/0.9",r.HTTP_1_0="http/1.0",r.TDS_8_0="tds/8.0"})(AN||(AN={}));class zue{constructor({name:e,kind:t=fC.HEADER,values:n=[]}){this.name=e,this.kind=t,this.values=n}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(t=>t!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}}class Lue{constructor({fields:e=[],encoding:t="utf-8"}){this.entries={},e.forEach(this.setField.bind(this)),this.encoding=t}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(t=>t.kind===e)}}class FP{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static isInstance(e){if(!e)return!1;const t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&typeof t.query=="object"&&typeof t.headers=="object"}clone(){const e=new FP({...this,headers:{...this.headers}});return e.query&&(e.query=Fue(e.query)),e}}function Fue(r){return Object.keys(r).reduce((e,t)=>{const n=r[t];return{...e,[t]:Array.isArray(n)?[...n]:n}},{})}class kue{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const t=e;return typeof t.statusCode=="number"&&typeof t.headers=="object"}}function Vue(r){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(r)}const Hue=Object.freeze(Object.defineProperty({__proto__:null,Field:zue,Fields:Lue,HttpRequest:FP,HttpResponse:kue,isValidHostname:Vue},Symbol.toStringTag,{value:"Module"})),Kue=pd(Hue);var hO={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pC=function(r,e){return pC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},pC(r,e)};function Wue(r,e){pC(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var hC=function(){return hC=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},hC.apply(this,arguments)};function Gue(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function Jue(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function Xue(r,e){return function(t,n){e(t,n,r)}}function Zue(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function Que(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?a(c.value):i(c.value).then(s,u)}l((n=n.apply(r,e||[])).next())})}function Yue(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){t.label=l[1];break}if(l[0]===6&&t.label<a[1]){t.label=a[1],a=l;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(l);break}a[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ele(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}function tle(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function mC(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function N8(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return a}function rle(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(N8(arguments[e]));return r}function nle(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function dm(r){return this instanceof dm?(this.v=r,this):new dm(r)}function ile(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){n[h]&&(i[h]=function(f){return new Promise(function(m,p){a.push([h,f,m,p])>1||s(h,f)})})}function s(h,f){try{u(n[h](f))}catch(m){d(a[0][3],m)}}function u(h){h.value instanceof dm?Promise.resolve(h.value.v).then(l,c):d(a[0][2],h)}function l(h){s("next",h)}function c(h){s("throw",h)}function d(h,f){h(f),a.shift(),a.length&&s(a[0][0],a[0][1])}}function ale(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=r[i]?function(o){return(t=!t)?{value:dm(r[i](o)),done:i==="return"}:a?a(o):o}:a}}function ole(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof mC=="function"?mC(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=r[a]&&function(o){return new Promise(function(s,u){o=r[a](o),i(s,u,o.done,o.value)})}}function i(a,o,s,u){Promise.resolve(u).then(function(l){a({value:l,done:s})},o)}}function sle(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function ule(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function lle(r){return r&&r.__esModule?r:{default:r}}function cle(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function dle(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const fle=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return hC},__asyncDelegator:ale,__asyncGenerator:ile,__asyncValues:ole,__await:dm,__awaiter:Que,__classPrivateFieldGet:cle,__classPrivateFieldSet:dle,__createBinding:ele,__decorate:Jue,__exportStar:tle,__extends:Wue,__generator:Yue,__importDefault:lle,__importStar:ule,__makeTemplateObject:sle,__metadata:Zue,__param:Xue,__read:N8,__rest:Gue,__spread:rle,__spreadArrays:nle,__values:mC},Symbol.toStringTag,{value:"Module"})),q8=pd(fle);var mO={},xp={};const ple=r=>{const e=[];for(let t=0,n=r.length;t<n;t++){const i=r.charCodeAt(t);if(i<128)e.push(i);else if(i<2048)e.push(i>>6|192,i&63|128);else if(t+1<r.length&&(i&64512)===55296&&(r.charCodeAt(t+1)&64512)===56320){const a=65536+((i&1023)<<10)+(r.charCodeAt(++t)&1023);e.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else e.push(i>>12|224,i>>6&63|128,i&63|128)}return Uint8Array.from(e)},hle=r=>{let e="";for(let t=0,n=r.length;t<n;t++){const i=r[t];if(i<128)e+=String.fromCharCode(i);else if(192<=i&&i<224){const a=r[++t];e+=String.fromCharCode((i&31)<<6|a&63)}else if(240<=i&&i<365){const o="%"+[i,r[++t],r[++t],r[++t]].map(s=>s.toString(16)).join("%");e+=decodeURIComponent(o)}else e+=String.fromCharCode((i&15)<<12|(r[++t]&63)<<6|r[++t]&63)}return e};function mle(r){return new TextEncoder().encode(r)}function gle(r){return new TextDecoder("utf-8").decode(r)}const _le=r=>typeof TextEncoder=="function"?mle(r):ple(r),ble=r=>typeof TextDecoder=="function"?gle(r):hle(r),yle=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:_le,toUtf8:ble},Symbol.toStringTag,{value:"Module"})),vle=pd(yle);var MN;function wle(){if(MN)return xp;MN=1,Object.defineProperty(xp,"__esModule",{value:!0}),xp.convertToBuffer=void 0;var r=vle,e=typeof Buffer<"u"&&Buffer.from?function(n){return Buffer.from(n,"utf8")}:r.fromUtf8;function t(n){return n instanceof Uint8Array?n:typeof n=="string"?e(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}return xp.convertToBuffer=t,xp}var Dp={},IN;function Sle(){if(IN)return Dp;IN=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.isEmptyData=void 0;function r(e){return typeof e=="string"?e.length===0:e.byteLength===0}return Dp.isEmptyData=r,Dp}var $p={},xN;function Ole(){if(xN)return $p;xN=1,Object.defineProperty($p,"__esModule",{value:!0}),$p.numToUint8=void 0;function r(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}return $p.numToUint8=r,$p}var Np={},DN;function Ele(){if(DN)return Np;DN=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.uint32ArrayFrom=void 0;function r(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),n=0;n<e.length;)t[n]=e[n],n+=1;return t}return Uint32Array.from(e)}return Np.uint32ArrayFrom=r,Np}var $N;function B8(){return $N||($N=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.uint32ArrayFrom=r.numToUint8=r.isEmptyData=r.convertToBuffer=void 0;var e=wle();Object.defineProperty(r,"convertToBuffer",{enumerable:!0,get:function(){return e.convertToBuffer}});var t=Sle();Object.defineProperty(r,"isEmptyData",{enumerable:!0,get:function(){return t.isEmptyData}});var n=Ole();Object.defineProperty(r,"numToUint8",{enumerable:!0,get:function(){return n.numToUint8}});var i=Ele();Object.defineProperty(r,"uint32ArrayFrom",{enumerable:!0,get:function(){return i.uint32ArrayFrom}})}(mO)),mO}var qp={},NN;function Rle(){if(NN)return qp;NN=1,Object.defineProperty(qp,"__esModule",{value:!0}),qp.AwsCrc32=void 0;var r=q8,e=B8(),t=U8(),n=function(){function i(){this.crc32=new t.Crc32}return i.prototype.update=function(a){(0,e.isEmptyData)(a)||this.crc32.update((0,e.convertToBuffer)(a))},i.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(a){return[2,(0,e.numToUint8)(this.crc32.digest())]})})},i.prototype.reset=function(){this.crc32=new t.Crc32},i}();return qp.AwsCrc32=n,qp}var qN;function U8(){return qN||(qN=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AwsCrc32=r.Crc32=r.crc32=void 0;var e=q8,t=B8();function n(u){return new i().update(u).digest()}r.crc32=n;var i=function(){function u(){this.checksum=4294967295}return u.prototype.update=function(l){var c,d;try{for(var h=e.__values(l),f=h.next();!f.done;f=h.next()){var m=f.value;this.checksum=this.checksum>>>8^o[(this.checksum^m)&255]}}catch(p){c={error:p}}finally{try{f&&!f.done&&(d=h.return)&&d.call(h)}finally{if(c)throw c.error}}return this},u.prototype.digest=function(){return(this.checksum^4294967295)>>>0},u}();r.Crc32=i;var a=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=(0,t.uint32ArrayFrom)(a),s=Rle();Object.defineProperty(r,"AwsCrc32",{enumerable:!0,get:function(){return s.AwsCrc32}})}(hO)),hO}U8();const z8={},gC={};for(let r=0;r<256;r++){let e=r.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),z8[r]=e,gC[e]=r}function Cle(r){if(r.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(r.length/2);for(let t=0;t<r.length;t+=2){const n=r.slice(t,t+2).toLowerCase();if(n in gC)e[t/2]=gC[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function Yr(r){let e="";for(let t=0;t<r.byteLength;t++)e+=z8[r[t]];return e}class Wh{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const t=new Uint8Array(8);for(let n=7,i=Math.abs(Math.round(e));n>-1&&i>0;n--,i/=256)t[n]=i;return e<0&&BN(t),new Wh(t)}valueOf(){const e=this.bytes.slice(0),t=e[0]&128;return t&&BN(e),parseInt(Yr(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function BN(r){for(let e=0;e<8;e++)r[e]^=255;for(let e=7;e>-1&&(r[e]++,r[e]===0);e--);}class Ple{constructor(e,t){this.toUtf8=e,this.fromUtf8=t}format(e){const t=[];for(const a of Object.keys(e)){const o=this.fromUtf8(a);t.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[a]))}const n=new Uint8Array(t.reduce((a,o)=>a+o.byteLength,0));let i=0;for(const a of t)n.set(a,i),i+=a.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":const i=new Uint8Array(9);return i[0]=5,i.set(e.value.bytes,1),i;case"binary":const a=new DataView(new ArrayBuffer(3+e.value.byteLength));a.setUint8(0,6),a.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(a.buffer);return o.set(e.value,3),o;case"string":const s=this.fromUtf8(e.value),u=new DataView(new ArrayBuffer(3+s.byteLength));u.setUint8(0,7),u.setUint16(1,s.byteLength,!1);const l=new Uint8Array(u.buffer);return l.set(s,3),l;case"timestamp":const c=new Uint8Array(9);return c[0]=8,c.set(Wh.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!Nle.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(Cle(e.value.replace(/\-/g,"")),1),d}}parse(e){const t={};let n=0;for(;n<e.byteLength;){const i=e.getUint8(n++),a=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,i));switch(n+=i,e.getUint8(n++)){case 0:t[a]={type:zN,value:!0};break;case 1:t[a]={type:zN,value:!1};break;case 2:t[a]={type:jle,value:e.getInt8(n++)};break;case 3:t[a]={type:Tle,value:e.getInt16(n,!1)},n+=2;break;case 4:t[a]={type:Ale,value:e.getInt32(n,!1)},n+=4;break;case 5:t[a]={type:Mle,value:new Wh(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:const o=e.getUint16(n,!1);n+=2,t[a]={type:Ile,value:new Uint8Array(e.buffer,e.byteOffset+n,o)},n+=o;break;case 7:const s=e.getUint16(n,!1);n+=2,t[a]={type:xle,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s))},n+=s;break;case 8:t[a]={type:Dle,value:new Date(new Wh(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:const u=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,t[a]={type:$le,value:`${Yr(u.subarray(0,4))}-${Yr(u.subarray(4,6))}-${Yr(u.subarray(6,8))}-${Yr(u.subarray(8,10))}-${Yr(u.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return t}}var UN;(function(r){r[r.boolTrue=0]="boolTrue",r[r.boolFalse=1]="boolFalse",r[r.byte=2]="byte",r[r.short=3]="short",r[r.integer=4]="integer",r[r.long=5]="long",r[r.byteArray=6]="byteArray",r[r.string=7]="string",r[r.timestamp=8]="timestamp",r[r.uuid=9]="uuid"})(UN||(UN={}));const zN="boolean",jle="byte",Tle="short",Ale="integer",Mle="long",Ile="binary",xle="string",Dle="timestamp",$le="uuid",Nle=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,LN=r=>{if(typeof r=="function")return r;const e=Promise.resolve(r);return()=>e},L8=r=>new TextEncoder().encode(r),Gh=r=>typeof r=="string"?L8(r):ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(r),qle=r=>new TextDecoder("utf-8").decode(r),Ble="X-Amz-Algorithm",Ule="X-Amz-Credential",F8="X-Amz-Date",zle="X-Amz-SignedHeaders",Lle="X-Amz-Expires",k8="X-Amz-Signature",V8="X-Amz-Security-Token",H8="authorization",K8=F8.toLowerCase(),Fle="date",kle=[H8,K8,Fle],Vle=k8.toLowerCase(),_C="x-amz-content-sha256",Hle=V8.toLowerCase(),Kle={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Wle=/^proxy-/,Gle=/^sec-/,gO="AWS4-HMAC-SHA256",Jle="AWS4-HMAC-SHA256-PAYLOAD",Xle="UNSIGNED-PAYLOAD",Zle=50,W8="aws4_request",Qle=60*60*24*7,Vd={},Xg=[],Zg=(r,e,t)=>`${r}/${e}/${t}/${W8}`,G8=async(r,e,t,n,i)=>{const a=await FN(r,e.secretAccessKey,e.accessKeyId),o=`${t}:${n}:${i}:${Yr(a)}:${e.sessionToken}`;if(o in Vd)return Vd[o];for(Xg.push(o);Xg.length>Zle;)delete Vd[Xg.shift()];let s=`AWS4${e.secretAccessKey}`;for(const u of[t,n,i,W8])s=await FN(r,s,u);return Vd[o]=s},Yle=()=>{Xg.length=0,Object.keys(Vd).forEach(r=>{delete Vd[r]})},FN=(r,e,t)=>{const n=new r(e);return n.update(Gh(t)),n.digest()},bC=({headers:r},e,t)=>{const n={};for(const i of Object.keys(r).sort()){if(r[i]==null)continue;const a=i.toLowerCase();(a in Kle||e!=null&&e.has(a)||Wle.test(a)||Gle.test(a))&&(!t||t&&!t.has(a))||(n[a]=r[i].trim().replace(/\s+/g," "))}return n},Pg=r=>encodeURIComponent(r).replace(/[!'()*]/g,ece),ece=r=>`%${r.charCodeAt(0).toString(16).toUpperCase()}`,J8=({query:r={}})=>{const e=[],t={};for(const n of Object.keys(r).sort()){if(n.toLowerCase()===Vle)continue;e.push(n);const i=r[n];typeof i=="string"?t[n]=`${Pg(n)}=${Pg(i)}`:Array.isArray(i)&&(t[n]=i.slice(0).sort().reduce((a,o)=>a.concat([`${Pg(n)}=${Pg(o)}`]),[]).join("&"))}return e.map(n=>t[n]).filter(n=>n).join("&")},tce=r=>typeof ArrayBuffer=="function"&&r instanceof ArrayBuffer||Object.prototype.toString.call(r)==="[object ArrayBuffer]",Qg=async({headers:r,body:e},t)=>{for(const n of Object.keys(r))if(n.toLowerCase()===_C)return r[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||tce(e)){const n=new t;return n.update(Gh(e)),Yr(await n.digest())}return Xle},rce=(r,e)=>{r=r.toLowerCase();for(const t of Object.keys(e))if(r===t.toLowerCase())return!0;return!1},X8=({headers:r,query:e,...t})=>({...t,headers:{...r},query:e?nce(e):void 0}),nce=r=>Object.keys(r).reduce((e,t)=>{const n=r[t];return{...e,[t]:Array.isArray(n)?[...n]:n}},{}),Z8=(r,e={})=>{var i;const{headers:t,query:n={}}=typeof r.clone=="function"?r.clone():X8(r);for(const a of Object.keys(t)){const o=a.toLowerCase();o.slice(0,6)==="x-amz-"&&!((i=e.unhoistableHeaders)!=null&&i.has(o))&&(n[a]=t[a],delete t[a])}return{...r,headers:t,query:n}},yC=r=>{r=typeof r.clone=="function"?r.clone():X8(r);for(const e of Object.keys(r.headers))kle.indexOf(e.toLowerCase())>-1&&delete r.headers[e];return r},ice=r=>ace(r).toISOString().replace(/\.\d{3}Z$/,"Z"),ace=r=>typeof r=="number"?new Date(r*1e3):typeof r=="string"?Number(r)?new Date(Number(r)*1e3):new Date(r):r;class oce{constructor({applyChecksum:e,credentials:t,region:n,service:i,sha256:a,uriEscapePath:o=!0}){this.headerMarshaller=new Ple(qle,L8),this.service=i,this.sha256=a,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=LN(n),this.credentialProvider=LN(t)}async presign(e,t={}){const{signingDate:n=new Date,expiresIn:i=3600,unsignableHeaders:a,unhoistableHeaders:o,signableHeaders:s,signingRegion:u,signingService:l}=t,c=await this.credentialProvider();this.validateResolvedCredentials(c);const d=u??await this.regionProvider(),{longDate:h,shortDate:f}=jg(n);if(i>Qle)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const m=Zg(f,d,l??this.service),p=Z8(yC(e),{unhoistableHeaders:o});c.sessionToken&&(p.query[V8]=c.sessionToken),p.query[Ble]=gO,p.query[Ule]=`${c.accessKeyId}/${m}`,p.query[F8]=h,p.query[Lle]=i.toString(10);const g=bC(p,a,s);return p.query[zle]=kN(g),p.query[k8]=await this.getSignature(h,m,this.getSigningKey(c,d,f,l),this.createCanonicalRequest(p,g,await Qg(e,this.sha256))),p}async sign(e,t){return typeof e=="string"?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:n=new Date,priorSignature:i,signingRegion:a,signingService:o}){const s=a??await this.regionProvider(),{shortDate:u,longDate:l}=jg(n),c=Zg(u,s,o??this.service),d=await Qg({headers:{},body:t},this.sha256),h=new this.sha256;h.update(e);const f=Yr(await h.digest()),m=[Jle,l,c,i,f,d].join(`
`);return this.signString(m,{signingDate:n,signingRegion:s,signingService:o})}async signMessage(e,{signingDate:t=new Date,signingRegion:n,signingService:i}){return this.signEvent({headers:this.headerMarshaller.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:n,signingService:i,priorSignature:e.priorSignature}).then(o=>({message:e.message,signature:o}))}async signString(e,{signingDate:t=new Date,signingRegion:n,signingService:i}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const o=n??await this.regionProvider(),{shortDate:s}=jg(t),u=new this.sha256(await this.getSigningKey(a,o,s,i));return u.update(Gh(e)),Yr(await u.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:n,unsignableHeaders:i,signingRegion:a,signingService:o}={}){const s=await this.credentialProvider();this.validateResolvedCredentials(s);const u=a??await this.regionProvider(),l=yC(e),{longDate:c,shortDate:d}=jg(t),h=Zg(d,u,o??this.service);l.headers[K8]=c,s.sessionToken&&(l.headers[Hle]=s.sessionToken);const f=await Qg(l,this.sha256);!rce(_C,l.headers)&&this.applyChecksum&&(l.headers[_C]=f);const m=bC(l,i,n),p=await this.getSignature(c,h,this.getSigningKey(s,u,d,o),this.createCanonicalRequest(l,m,f));return l.headers[H8]=`${gO} Credential=${s.accessKeyId}/${h}, SignedHeaders=${kN(m)}, Signature=${p}`,l}createCanonicalRequest(e,t,n){const i=Object.keys(t).sort();return`${e.method}
${this.getCanonicalPath(e)}
${J8(e)}
${i.map(a=>`${a}:${t[a]}`).join(`
`)}

${i.join(";")}
${n}`}async createStringToSign(e,t,n){const i=new this.sha256;i.update(Gh(n));const a=await i.digest();return`${gO}
${e}
${t}
${Yr(a)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const t=[];for(const a of e.split("/"))(a==null?void 0:a.length)!==0&&a!=="."&&(a===".."?t.pop():t.push(a));const n=`${e!=null&&e.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&(e!=null&&e.endsWith("/"))?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return e}async getSignature(e,t,n,i){const a=await this.createStringToSign(e,t,i),o=new this.sha256(await n);return o.update(Gh(a)),Yr(await o.digest())}getSigningKey(e,t,n,i){return G8(this.sha256,e,n,t,i||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const jg=r=>{const e=ice(r).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},kN=r=>Object.keys(r).sort().join(";"),sce=Object.freeze(Object.defineProperty({__proto__:null,SignatureV4:oce,clearCredentialCache:Yle,createScope:Zg,getCanonicalHeaders:bC,getCanonicalQuery:J8,getPayloadHash:Qg,getSigningKey:G8,moveHeadersToQuery:Z8,prepareRequest:yC},Symbol.toStringTag,{value:"Module"})),uce=pd(sce);var _O={exports:{}},bO={exports:{}},yO={},Tg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var VN;function lce(){return VN||(VN=1,Tg.read=function(r,e,t,n,i){var a,o,s=i*8-n-1,u=(1<<s)-1,l=u>>1,c=-7,d=t?i-1:0,h=t?-1:1,f=r[e+d];for(d+=h,a=f&(1<<-c)-1,f>>=-c,c+=s;c>0;a=a*256+r[e+d],d+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=o*256+r[e+d],d+=h,c-=8);if(a===0)a=1-l;else{if(a===u)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),a=a-l}return(f?-1:1)*o*Math.pow(2,a-n)},Tg.write=function(r,e,t,n,i,a){var o,s,u,l=a*8-i-1,c=(1<<l)-1,d=c>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:a-1,m=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+d>=1?e+=h/u:e+=h*Math.pow(2,1-d),e*u>=2&&(o++,u/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(e*u-1)*Math.pow(2,i),o=o+d):(s=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;r[t+f]=s&255,f+=m,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;r[t+f]=o&255,f+=m,o/=256,l-=8);r[t+f-m]|=p*128}),Tg}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var HN;function Ul(){return HN||(HN=1,function(r){const e=U3(),t=lce(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=s,r.SlowBuffer=_,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const j=new Uint8Array(1),O={foo:function(){return 42}};return Object.setPrototypeOf(O,Uint8Array.prototype),Object.setPrototypeOf(j,O),j.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(j){if(j>i)throw new RangeError('The value "'+j+'" is invalid for option "size"');const O=new Uint8Array(j);return Object.setPrototypeOf(O,s.prototype),O}function s(j,O,E){if(typeof j=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(j)}return u(j,O,E)}s.poolSize=8192;function u(j,O,E){if(typeof j=="string")return h(j,O);if(ArrayBuffer.isView(j))return m(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(se(j,ArrayBuffer)||j&&se(j.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(se(j,SharedArrayBuffer)||j&&se(j.buffer,SharedArrayBuffer)))return p(j,O,E);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const D=j.valueOf&&j.valueOf();if(D!=null&&D!==j)return s.from(D,O,E);const H=g(j);if(H)return H;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return s.from(j[Symbol.toPrimitive]("string"),O,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}s.from=function(j,O,E){return u(j,O,E)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function c(j,O,E){return l(j),j<=0?o(j):O!==void 0?typeof E=="string"?o(j).fill(O,E):o(j).fill(O):o(j)}s.alloc=function(j,O,E){return c(j,O,E)};function d(j){return l(j),o(j<0?0:b(j)|0)}s.allocUnsafe=function(j){return d(j)},s.allocUnsafeSlow=function(j){return d(j)};function h(j,O){if((typeof O!="string"||O==="")&&(O="utf8"),!s.isEncoding(O))throw new TypeError("Unknown encoding: "+O);const E=y(j,O)|0;let D=o(E);const H=D.write(j,O);return H!==E&&(D=D.slice(0,H)),D}function f(j){const O=j.length<0?0:b(j.length)|0,E=o(O);for(let D=0;D<O;D+=1)E[D]=j[D]&255;return E}function m(j){if(se(j,Uint8Array)){const O=new Uint8Array(j);return p(O.buffer,O.byteOffset,O.byteLength)}return f(j)}function p(j,O,E){if(O<0||j.byteLength<O)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<O+(E||0))throw new RangeError('"length" is outside of buffer bounds');let D;return O===void 0&&E===void 0?D=new Uint8Array(j):E===void 0?D=new Uint8Array(j,O):D=new Uint8Array(j,O,E),Object.setPrototypeOf(D,s.prototype),D}function g(j){if(s.isBuffer(j)){const O=b(j.length)|0,E=o(O);return E.length===0||j.copy(E,0,0,O),E}if(j.length!==void 0)return typeof j.length!="number"||ze(j.length)?o(0):f(j);if(j.type==="Buffer"&&Array.isArray(j.data))return f(j.data)}function b(j){if(j>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return j|0}function _(j){return+j!=j&&(j=0),s.alloc(+j)}s.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==s.prototype},s.compare=function(O,E){if(se(O,Uint8Array)&&(O=s.from(O,O.offset,O.byteLength)),se(E,Uint8Array)&&(E=s.from(E,E.offset,E.byteLength)),!s.isBuffer(O)||!s.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===E)return 0;let D=O.length,H=E.length;for(let ie=0,de=Math.min(D,H);ie<de;++ie)if(O[ie]!==E[ie]){D=O[ie],H=E[ie];break}return D<H?-1:H<D?1:0},s.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(O,E){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return s.alloc(0);let D;if(E===void 0)for(E=0,D=0;D<O.length;++D)E+=O[D].length;const H=s.allocUnsafe(E);let ie=0;for(D=0;D<O.length;++D){let de=O[D];if(se(de,Uint8Array))ie+de.length>H.length?(s.isBuffer(de)||(de=s.from(de)),de.copy(H,ie)):Uint8Array.prototype.set.call(H,de,ie);else if(s.isBuffer(de))de.copy(H,ie);else throw new TypeError('"list" argument must be an Array of Buffers');ie+=de.length}return H};function y(j,O){if(s.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||se(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);const E=j.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&E===0)return 0;let H=!1;for(;;)switch(O){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return pe(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return le(j).length;default:if(H)return D?-1:pe(j).length;O=(""+O).toLowerCase(),H=!0}}s.byteLength=y;function v(j,O,E){let D=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,O>>>=0,E<=O))return"";for(j||(j="utf8");;)switch(j){case"hex":return q(this,O,E);case"utf8":case"utf-8":return z(this,O,E);case"ascii":return oe(this,O,E);case"latin1":case"binary":return I(this,O,E);case"base64":return U(this,O,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,O,E);default:if(D)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),D=!0}}s.prototype._isBuffer=!0;function w(j,O,E){const D=j[O];j[O]=j[E],j[E]=D}s.prototype.swap16=function(){const O=this.length;if(O%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let E=0;E<O;E+=2)w(this,E,E+1);return this},s.prototype.swap32=function(){const O=this.length;if(O%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let E=0;E<O;E+=4)w(this,E,E+3),w(this,E+1,E+2);return this},s.prototype.swap64=function(){const O=this.length;if(O%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let E=0;E<O;E+=8)w(this,E,E+7),w(this,E+1,E+6),w(this,E+2,E+5),w(this,E+3,E+4);return this},s.prototype.toString=function(){const O=this.length;return O===0?"":arguments.length===0?z(this,0,O):v.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(O){if(!s.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O?!0:s.compare(this,O)===0},s.prototype.inspect=function(){let O="";const E=r.INSPECT_MAX_BYTES;return O=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim(),this.length>E&&(O+=" ... "),"<Buffer "+O+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(O,E,D,H,ie){if(se(O,Uint8Array)&&(O=s.from(O,O.offset,O.byteLength)),!s.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(E===void 0&&(E=0),D===void 0&&(D=O?O.length:0),H===void 0&&(H=0),ie===void 0&&(ie=this.length),E<0||D>O.length||H<0||ie>this.length)throw new RangeError("out of range index");if(H>=ie&&E>=D)return 0;if(H>=ie)return-1;if(E>=D)return 1;if(E>>>=0,D>>>=0,H>>>=0,ie>>>=0,this===O)return 0;let de=ie-H,qe=D-E;const it=Math.min(de,qe),X=this.slice(H,ie),Q=O.slice(E,D);for(let Ce=0;Ce<it;++Ce)if(X[Ce]!==Q[Ce]){de=X[Ce],qe=Q[Ce];break}return de<qe?-1:qe<de?1:0};function S(j,O,E,D,H){if(j.length===0)return-1;if(typeof E=="string"?(D=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,ze(E)&&(E=H?0:j.length-1),E<0&&(E=j.length+E),E>=j.length){if(H)return-1;E=j.length-1}else if(E<0)if(H)E=0;else return-1;if(typeof O=="string"&&(O=s.from(O,D)),s.isBuffer(O))return O.length===0?-1:R(j,O,E,D,H);if(typeof O=="number")return O=O&255,typeof Uint8Array.prototype.indexOf=="function"?H?Uint8Array.prototype.indexOf.call(j,O,E):Uint8Array.prototype.lastIndexOf.call(j,O,E):R(j,[O],E,D,H);throw new TypeError("val must be string, number or Buffer")}function R(j,O,E,D,H){let ie=1,de=j.length,qe=O.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(j.length<2||O.length<2)return-1;ie=2,de/=2,qe/=2,E/=2}function it(Q,Ce){return ie===1?Q[Ce]:Q.readUInt16BE(Ce*ie)}let X;if(H){let Q=-1;for(X=E;X<de;X++)if(it(j,X)===it(O,Q===-1?0:X-Q)){if(Q===-1&&(Q=X),X-Q+1===qe)return Q*ie}else Q!==-1&&(X-=X-Q),Q=-1}else for(E+qe>de&&(E=de-qe),X=E;X>=0;X--){let Q=!0;for(let Ce=0;Ce<qe;Ce++)if(it(j,X+Ce)!==it(O,Ce)){Q=!1;break}if(Q)return X}return-1}s.prototype.includes=function(O,E,D){return this.indexOf(O,E,D)!==-1},s.prototype.indexOf=function(O,E,D){return S(this,O,E,D,!0)},s.prototype.lastIndexOf=function(O,E,D){return S(this,O,E,D,!1)};function P(j,O,E,D){E=Number(E)||0;const H=j.length-E;D?(D=Number(D),D>H&&(D=H)):D=H;const ie=O.length;D>ie/2&&(D=ie/2);let de;for(de=0;de<D;++de){const qe=parseInt(O.substr(de*2,2),16);if(ze(qe))return de;j[E+de]=qe}return de}function C(j,O,E,D){return he(pe(O,j.length-E),j,E,D)}function A(j,O,E,D){return he(ge(O),j,E,D)}function M(j,O,E,D){return he(le(O),j,E,D)}function G(j,O,E,D){return he(K(O,j.length-E),j,E,D)}s.prototype.write=function(O,E,D,H){if(E===void 0)H="utf8",D=this.length,E=0;else if(D===void 0&&typeof E=="string")H=E,D=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite(D)?(D=D>>>0,H===void 0&&(H="utf8")):(H=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ie=this.length-E;if((D===void 0||D>ie)&&(D=ie),O.length>0&&(D<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");H||(H="utf8");let de=!1;for(;;)switch(H){case"hex":return P(this,O,E,D);case"utf8":case"utf-8":return C(this,O,E,D);case"ascii":case"latin1":case"binary":return A(this,O,E,D);case"base64":return M(this,O,E,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,O,E,D);default:if(de)throw new TypeError("Unknown encoding: "+H);H=(""+H).toLowerCase(),de=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(j,O,E){return O===0&&E===j.length?e.fromByteArray(j):e.fromByteArray(j.slice(O,E))}function z(j,O,E){E=Math.min(j.length,E);const D=[];let H=O;for(;H<E;){const ie=j[H];let de=null,qe=ie>239?4:ie>223?3:ie>191?2:1;if(H+qe<=E){let it,X,Q,Ce;switch(qe){case 1:ie<128&&(de=ie);break;case 2:it=j[H+1],(it&192)===128&&(Ce=(ie&31)<<6|it&63,Ce>127&&(de=Ce));break;case 3:it=j[H+1],X=j[H+2],(it&192)===128&&(X&192)===128&&(Ce=(ie&15)<<12|(it&63)<<6|X&63,Ce>2047&&(Ce<55296||Ce>57343)&&(de=Ce));break;case 4:it=j[H+1],X=j[H+2],Q=j[H+3],(it&192)===128&&(X&192)===128&&(Q&192)===128&&(Ce=(ie&15)<<18|(it&63)<<12|(X&63)<<6|Q&63,Ce>65535&&Ce<1114112&&(de=Ce))}}de===null?(de=65533,qe=1):de>65535&&(de-=65536,D.push(de>>>10&1023|55296),de=56320|de&1023),D.push(de),H+=qe}return Y(D)}const W=4096;function Y(j){const O=j.length;if(O<=W)return String.fromCharCode.apply(String,j);let E="",D=0;for(;D<O;)E+=String.fromCharCode.apply(String,j.slice(D,D+=W));return E}function oe(j,O,E){let D="";E=Math.min(j.length,E);for(let H=O;H<E;++H)D+=String.fromCharCode(j[H]&127);return D}function I(j,O,E){let D="";E=Math.min(j.length,E);for(let H=O;H<E;++H)D+=String.fromCharCode(j[H]);return D}function q(j,O,E){const D=j.length;(!O||O<0)&&(O=0),(!E||E<0||E>D)&&(E=D);let H="";for(let ie=O;ie<E;++ie)H+=ht[j[ie]];return H}function T(j,O,E){const D=j.slice(O,E);let H="";for(let ie=0;ie<D.length-1;ie+=2)H+=String.fromCharCode(D[ie]+D[ie+1]*256);return H}s.prototype.slice=function(O,E){const D=this.length;O=~~O,E=E===void 0?D:~~E,O<0?(O+=D,O<0&&(O=0)):O>D&&(O=D),E<0?(E+=D,E<0&&(E=0)):E>D&&(E=D),E<O&&(E=O);const H=this.subarray(O,E);return Object.setPrototypeOf(H,s.prototype),H};function V(j,O,E){if(j%1!==0||j<0)throw new RangeError("offset is not uint");if(j+O>E)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(O,E,D){O=O>>>0,E=E>>>0,D||V(O,E,this.length);let H=this[O],ie=1,de=0;for(;++de<E&&(ie*=256);)H+=this[O+de]*ie;return H},s.prototype.readUintBE=s.prototype.readUIntBE=function(O,E,D){O=O>>>0,E=E>>>0,D||V(O,E,this.length);let H=this[O+--E],ie=1;for(;E>0&&(ie*=256);)H+=this[O+--E]*ie;return H},s.prototype.readUint8=s.prototype.readUInt8=function(O,E){return O=O>>>0,E||V(O,1,this.length),this[O]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(O,E){return O=O>>>0,E||V(O,2,this.length),this[O]|this[O+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(O,E){return O=O>>>0,E||V(O,2,this.length),this[O]<<8|this[O+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(O,E){return O=O>>>0,E||V(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+this[O+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(O,E){return O=O>>>0,E||V(O,4,this.length),this[O]*16777216+(this[O+1]<<16|this[O+2]<<8|this[O+3])},s.prototype.readBigUInt64LE=He(function(O){O=O>>>0,B(O,"offset");const E=this[O],D=this[O+7];(E===void 0||D===void 0)&&k(O,this.length-8);const H=E+this[++O]*2**8+this[++O]*2**16+this[++O]*2**24,ie=this[++O]+this[++O]*2**8+this[++O]*2**16+D*2**24;return BigInt(H)+(BigInt(ie)<<BigInt(32))}),s.prototype.readBigUInt64BE=He(function(O){O=O>>>0,B(O,"offset");const E=this[O],D=this[O+7];(E===void 0||D===void 0)&&k(O,this.length-8);const H=E*2**24+this[++O]*2**16+this[++O]*2**8+this[++O],ie=this[++O]*2**24+this[++O]*2**16+this[++O]*2**8+D;return(BigInt(H)<<BigInt(32))+BigInt(ie)}),s.prototype.readIntLE=function(O,E,D){O=O>>>0,E=E>>>0,D||V(O,E,this.length);let H=this[O],ie=1,de=0;for(;++de<E&&(ie*=256);)H+=this[O+de]*ie;return ie*=128,H>=ie&&(H-=Math.pow(2,8*E)),H},s.prototype.readIntBE=function(O,E,D){O=O>>>0,E=E>>>0,D||V(O,E,this.length);let H=E,ie=1,de=this[O+--H];for(;H>0&&(ie*=256);)de+=this[O+--H]*ie;return ie*=128,de>=ie&&(de-=Math.pow(2,8*E)),de},s.prototype.readInt8=function(O,E){return O=O>>>0,E||V(O,1,this.length),this[O]&128?(255-this[O]+1)*-1:this[O]},s.prototype.readInt16LE=function(O,E){O=O>>>0,E||V(O,2,this.length);const D=this[O]|this[O+1]<<8;return D&32768?D|4294901760:D},s.prototype.readInt16BE=function(O,E){O=O>>>0,E||V(O,2,this.length);const D=this[O+1]|this[O]<<8;return D&32768?D|4294901760:D},s.prototype.readInt32LE=function(O,E){return O=O>>>0,E||V(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},s.prototype.readInt32BE=function(O,E){return O=O>>>0,E||V(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},s.prototype.readBigInt64LE=He(function(O){O=O>>>0,B(O,"offset");const E=this[O],D=this[O+7];(E===void 0||D===void 0)&&k(O,this.length-8);const H=this[O+4]+this[O+5]*2**8+this[O+6]*2**16+(D<<24);return(BigInt(H)<<BigInt(32))+BigInt(E+this[++O]*2**8+this[++O]*2**16+this[++O]*2**24)}),s.prototype.readBigInt64BE=He(function(O){O=O>>>0,B(O,"offset");const E=this[O],D=this[O+7];(E===void 0||D===void 0)&&k(O,this.length-8);const H=(E<<24)+this[++O]*2**16+this[++O]*2**8+this[++O];return(BigInt(H)<<BigInt(32))+BigInt(this[++O]*2**24+this[++O]*2**16+this[++O]*2**8+D)}),s.prototype.readFloatLE=function(O,E){return O=O>>>0,E||V(O,4,this.length),t.read(this,O,!0,23,4)},s.prototype.readFloatBE=function(O,E){return O=O>>>0,E||V(O,4,this.length),t.read(this,O,!1,23,4)},s.prototype.readDoubleLE=function(O,E){return O=O>>>0,E||V(O,8,this.length),t.read(this,O,!0,52,8)},s.prototype.readDoubleBE=function(O,E){return O=O>>>0,E||V(O,8,this.length),t.read(this,O,!1,52,8)};function re(j,O,E,D,H,ie){if(!s.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>H||O<ie)throw new RangeError('"value" argument is out of bounds');if(E+D>j.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(O,E,D,H){if(O=+O,E=E>>>0,D=D>>>0,!H){const qe=Math.pow(2,8*D)-1;re(this,O,E,D,qe,0)}let ie=1,de=0;for(this[E]=O&255;++de<D&&(ie*=256);)this[E+de]=O/ie&255;return E+D},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(O,E,D,H){if(O=+O,E=E>>>0,D=D>>>0,!H){const qe=Math.pow(2,8*D)-1;re(this,O,E,D,qe,0)}let ie=D-1,de=1;for(this[E+ie]=O&255;--ie>=0&&(de*=256);)this[E+ie]=O/de&255;return E+D},s.prototype.writeUint8=s.prototype.writeUInt8=function(O,E,D){return O=+O,E=E>>>0,D||re(this,O,E,1,255,0),this[E]=O&255,E+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(O,E,D){return O=+O,E=E>>>0,D||re(this,O,E,2,65535,0),this[E]=O&255,this[E+1]=O>>>8,E+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(O,E,D){return O=+O,E=E>>>0,D||re(this,O,E,2,65535,0),this[E]=O>>>8,this[E+1]=O&255,E+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(O,E,D){return O=+O,E=E>>>0,D||re(this,O,E,4,4294967295,0),this[E+3]=O>>>24,this[E+2]=O>>>16,this[E+1]=O>>>8,this[E]=O&255,E+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(O,E,D){return O=+O,E=E>>>0,D||re(this,O,E,4,4294967295,0),this[E]=O>>>24,this[E+1]=O>>>16,this[E+2]=O>>>8,this[E+3]=O&255,E+4};function Z(j,O,E,D,H){ne(O,D,H,j,E,7);let ie=Number(O&BigInt(4294967295));j[E++]=ie,ie=ie>>8,j[E++]=ie,ie=ie>>8,j[E++]=ie,ie=ie>>8,j[E++]=ie;let de=Number(O>>BigInt(32)&BigInt(4294967295));return j[E++]=de,de=de>>8,j[E++]=de,de=de>>8,j[E++]=de,de=de>>8,j[E++]=de,E}function fe(j,O,E,D,H){ne(O,D,H,j,E,7);let ie=Number(O&BigInt(4294967295));j[E+7]=ie,ie=ie>>8,j[E+6]=ie,ie=ie>>8,j[E+5]=ie,ie=ie>>8,j[E+4]=ie;let de=Number(O>>BigInt(32)&BigInt(4294967295));return j[E+3]=de,de=de>>8,j[E+2]=de,de=de>>8,j[E+1]=de,de=de>>8,j[E]=de,E+8}s.prototype.writeBigUInt64LE=He(function(O,E=0){return Z(this,O,E,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=He(function(O,E=0){return fe(this,O,E,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(O,E,D,H){if(O=+O,E=E>>>0,!H){const it=Math.pow(2,8*D-1);re(this,O,E,D,it-1,-it)}let ie=0,de=1,qe=0;for(this[E]=O&255;++ie<D&&(de*=256);)O<0&&qe===0&&this[E+ie-1]!==0&&(qe=1),this[E+ie]=(O/de>>0)-qe&255;return E+D},s.prototype.writeIntBE=function(O,E,D,H){if(O=+O,E=E>>>0,!H){const it=Math.pow(2,8*D-1);re(this,O,E,D,it-1,-it)}let ie=D-1,de=1,qe=0;for(this[E+ie]=O&255;--ie>=0&&(de*=256);)O<0&&qe===0&&this[E+ie+1]!==0&&(qe=1),this[E+ie]=(O/de>>0)-qe&255;return E+D},s.prototype.writeInt8=function(O,E,D){return O=+O,E=E>>>0,D||re(this,O,E,1,127,-128),O<0&&(O=255+O+1),this[E]=O&255,E+1},s.prototype.writeInt16LE=function(O,E,D){return O=+O,E=E>>>0,D||re(this,O,E,2,32767,-32768),this[E]=O&255,this[E+1]=O>>>8,E+2},s.prototype.writeInt16BE=function(O,E,D){return O=+O,E=E>>>0,D||re(this,O,E,2,32767,-32768),this[E]=O>>>8,this[E+1]=O&255,E+2},s.prototype.writeInt32LE=function(O,E,D){return O=+O,E=E>>>0,D||re(this,O,E,4,2147483647,-2147483648),this[E]=O&255,this[E+1]=O>>>8,this[E+2]=O>>>16,this[E+3]=O>>>24,E+4},s.prototype.writeInt32BE=function(O,E,D){return O=+O,E=E>>>0,D||re(this,O,E,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[E]=O>>>24,this[E+1]=O>>>16,this[E+2]=O>>>8,this[E+3]=O&255,E+4},s.prototype.writeBigInt64LE=He(function(O,E=0){return Z(this,O,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=He(function(O,E=0){return fe(this,O,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _e(j,O,E,D,H,ie){if(E+D>j.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function Se(j,O,E,D,H){return O=+O,E=E>>>0,H||_e(j,O,E,4),t.write(j,O,E,D,23,4),E+4}s.prototype.writeFloatLE=function(O,E,D){return Se(this,O,E,!0,D)},s.prototype.writeFloatBE=function(O,E,D){return Se(this,O,E,!1,D)};function J(j,O,E,D,H){return O=+O,E=E>>>0,H||_e(j,O,E,8),t.write(j,O,E,D,52,8),E+8}s.prototype.writeDoubleLE=function(O,E,D){return J(this,O,E,!0,D)},s.prototype.writeDoubleBE=function(O,E,D){return J(this,O,E,!1,D)},s.prototype.copy=function(O,E,D,H){if(!s.isBuffer(O))throw new TypeError("argument should be a Buffer");if(D||(D=0),!H&&H!==0&&(H=this.length),E>=O.length&&(E=O.length),E||(E=0),H>0&&H<D&&(H=D),H===D||O.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("sourceEnd out of bounds");H>this.length&&(H=this.length),O.length-E<H-D&&(H=O.length-E+D);const ie=H-D;return this===O&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(E,D,H):Uint8Array.prototype.set.call(O,this.subarray(D,H),E),ie},s.prototype.fill=function(O,E,D,H){if(typeof O=="string"){if(typeof E=="string"?(H=E,E=0,D=this.length):typeof D=="string"&&(H=D,D=this.length),H!==void 0&&typeof H!="string")throw new TypeError("encoding must be a string");if(typeof H=="string"&&!s.isEncoding(H))throw new TypeError("Unknown encoding: "+H);if(O.length===1){const de=O.charCodeAt(0);(H==="utf8"&&de<128||H==="latin1")&&(O=de)}}else typeof O=="number"?O=O&255:typeof O=="boolean"&&(O=Number(O));if(E<0||this.length<E||this.length<D)throw new RangeError("Out of range index");if(D<=E)return this;E=E>>>0,D=D===void 0?this.length:D>>>0,O||(O=0);let ie;if(typeof O=="number")for(ie=E;ie<D;++ie)this[ie]=O;else{const de=s.isBuffer(O)?O:s.from(O,H),qe=de.length;if(qe===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(ie=0;ie<D-E;++ie)this[ie+E]=de[ie%qe]}return this};const F={};function ee(j,O,E){F[j]=class extends E{constructor(){super(),Object.defineProperty(this,"message",{value:O.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${j}]`,this.stack,delete this.name}get code(){return j}set code(H){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:H,writable:!0})}toString(){return`${this.name} [${j}]: ${this.message}`}}}ee("ERR_BUFFER_OUT_OF_BOUNDS",function(j){return j?`${j} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ee("ERR_INVALID_ARG_TYPE",function(j,O){return`The "${j}" argument must be of type number. Received type ${typeof O}`},TypeError),ee("ERR_OUT_OF_RANGE",function(j,O,E){let D=`The value of "${j}" is out of range.`,H=E;return Number.isInteger(E)&&Math.abs(E)>2**32?H=L(String(E)):typeof E=="bigint"&&(H=String(E),(E>BigInt(2)**BigInt(32)||E<-(BigInt(2)**BigInt(32)))&&(H=L(H)),H+="n"),D+=` It must be ${O}. Received ${H}`,D},RangeError);function L(j){let O="",E=j.length;const D=j[0]==="-"?1:0;for(;E>=D+4;E-=3)O=`_${j.slice(E-3,E)}${O}`;return`${j.slice(0,E)}${O}`}function te(j,O,E){B(O,"offset"),(j[O]===void 0||j[O+E]===void 0)&&k(O,j.length-(E+1))}function ne(j,O,E,D,H,ie){if(j>E||j<O){const de=typeof O=="bigint"?"n":"";let qe;throw O===0||O===BigInt(0)?qe=`>= 0${de} and < 2${de} ** ${(ie+1)*8}${de}`:qe=`>= -(2${de} ** ${(ie+1)*8-1}${de}) and < 2 ** ${(ie+1)*8-1}${de}`,new F.ERR_OUT_OF_RANGE("value",qe,j)}te(D,H,ie)}function B(j,O){if(typeof j!="number")throw new F.ERR_INVALID_ARG_TYPE(O,"number",j)}function k(j,O,E){throw Math.floor(j)!==j?(B(j,E),new F.ERR_OUT_OF_RANGE("offset","an integer",j)):O<0?new F.ERR_BUFFER_OUT_OF_BOUNDS:new F.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${O}`,j)}const ae=/[^+/0-9A-Za-z-_]/g;function me(j){if(j=j.split("=")[0],j=j.trim().replace(ae,""),j.length<2)return"";for(;j.length%4!==0;)j=j+"=";return j}function pe(j,O){O=O||1/0;let E;const D=j.length;let H=null;const ie=[];for(let de=0;de<D;++de){if(E=j.charCodeAt(de),E>55295&&E<57344){if(!H){if(E>56319){(O-=3)>-1&&ie.push(239,191,189);continue}else if(de+1===D){(O-=3)>-1&&ie.push(239,191,189);continue}H=E;continue}if(E<56320){(O-=3)>-1&&ie.push(239,191,189),H=E;continue}E=(H-55296<<10|E-56320)+65536}else H&&(O-=3)>-1&&ie.push(239,191,189);if(H=null,E<128){if((O-=1)<0)break;ie.push(E)}else if(E<2048){if((O-=2)<0)break;ie.push(E>>6|192,E&63|128)}else if(E<65536){if((O-=3)<0)break;ie.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((O-=4)<0)break;ie.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return ie}function ge(j){const O=[];for(let E=0;E<j.length;++E)O.push(j.charCodeAt(E)&255);return O}function K(j,O){let E,D,H;const ie=[];for(let de=0;de<j.length&&!((O-=2)<0);++de)E=j.charCodeAt(de),D=E>>8,H=E%256,ie.push(H),ie.push(D);return ie}function le(j){return e.toByteArray(me(j))}function he(j,O,E,D){let H;for(H=0;H<D&&!(H+E>=O.length||H>=j.length);++H)O[H+E]=j[H];return H}function se(j,O){return j instanceof O||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===O.name}function ze(j){return j!==j}const ht=function(){const j="0123456789abcdef",O=new Array(256);for(let E=0;E<16;++E){const D=E*16;for(let H=0;H<16;++H)O[D+H]=j[E]+j[H]}return O}();function He(j){return typeof BigInt>"u"?Lt:j}function Lt(){throw new Error("BigInt not supported")}}(yO)),yO}var vO,KN;function _t(){if(KN)return vO;KN=1;class r extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let n="";for(let i=0;i<t.length;i++)n+=`    ${t[i].stack}
`;super(n),this.name="AggregateError",this.errors=t}}return vO={AggregateError:r,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Boolean,Uint8Array},vO}var wO={exports:{}},SO,WN;function Q8(){return WN||(WN=1,SO={format(r,...e){return r.replace(/%([sdifj])/g,function(...[t,n]){const i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(r){switch(typeof r){case"string":if(r.includes("'"))if(r.includes('"')){if(!r.includes("`")&&!r.includes("${"))return`\`${r}\``}else return`"${r}"`;return`'${r}'`;case"number":return isNaN(r)?"NaN":Object.is(r,-0)?String(r):r;case"bigint":return`${String(r)}n`;case"boolean":case"undefined":return String(r);case"object":return"{}"}}}),SO}var OO,GN;function mr(){if(GN)return OO;GN=1;const{format:r,inspect:e}=Q8(),{AggregateError:t}=_t(),n=globalThis.AggregateError||t,i=Symbol("kIsNodeError"),a=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",u={};function l(g,b){if(!g)throw new u.ERR_INTERNAL_ASSERTION(b)}function c(g){let b="",_=g.length;const y=g[0]==="-"?1:0;for(;_>=y+4;_-=3)b=`_${g.slice(_-3,_)}${b}`;return`${g.slice(0,_)}${b}`}function d(g,b,_){if(typeof b=="function")return l(b.length<=_.length,`Code: ${g}; The provided arguments length (${_.length}) does not match the required ones (${b.length}).`),b(..._);const y=(b.match(/%[dfijoOs]/g)||[]).length;return l(y===_.length,`Code: ${g}; The provided arguments length (${_.length}) does not match the required ones (${y}).`),_.length===0?b:r(b,..._)}function h(g,b,_){_||(_=Error);class y extends _{constructor(...w){super(d(g,b,w))}toString(){return`${this.name} [${g}]: ${this.message}`}}Object.defineProperties(y.prototype,{name:{value:_.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${g}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),y.prototype.code=g,y.prototype[i]=!0,u[g]=y}function f(g){const b=s+g.name;return Object.defineProperty(g,"name",{value:b}),g}function m(g,b){if(g&&b&&g!==b){if(Array.isArray(b.errors))return b.errors.push(g),b;const _=new n([b,g],b.message);return _.code=b.code,_}return g||b}class p extends Error{constructor(b="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",_);super(b,_),this.code="ABORT_ERR",this.name="AbortError"}}return h("ERR_ASSERTION","%s",Error),h("ERR_INVALID_ARG_TYPE",(g,b,_)=>{l(typeof g=="string","'name' must be a string"),Array.isArray(b)||(b=[b]);let y="The ";g.endsWith(" argument")?y+=`${g} `:y+=`"${g}" ${g.includes(".")?"property":"argument"} `,y+="must be ";const v=[],w=[],S=[];for(const P of b)l(typeof P=="string","All expected entries have to be of type string"),a.includes(P)?v.push(P.toLowerCase()):o.test(P)?w.push(P):(l(P!=="object",'The value "object" should be written as "Object"'),S.push(P));if(w.length>0){const P=v.indexOf("object");P!==-1&&(v.splice(v,P,1),w.push("Object"))}if(v.length>0){switch(v.length){case 1:y+=`of type ${v[0]}`;break;case 2:y+=`one of type ${v[0]} or ${v[1]}`;break;default:{const P=v.pop();y+=`one of type ${v.join(", ")}, or ${P}`}}(w.length>0||S.length>0)&&(y+=" or ")}if(w.length>0){switch(w.length){case 1:y+=`an instance of ${w[0]}`;break;case 2:y+=`an instance of ${w[0]} or ${w[1]}`;break;default:{const P=w.pop();y+=`an instance of ${w.join(", ")}, or ${P}`}}S.length>0&&(y+=" or ")}switch(S.length){case 0:break;case 1:S[0].toLowerCase()!==S[0]&&(y+="an "),y+=`${S[0]}`;break;case 2:y+=`one of ${S[0]} or ${S[1]}`;break;default:{const P=S.pop();y+=`one of ${S.join(", ")}, or ${P}`}}if(_==null)y+=`. Received ${_}`;else if(typeof _=="function"&&_.name)y+=`. Received function ${_.name}`;else if(typeof _=="object"){var R;if((R=_.constructor)!==null&&R!==void 0&&R.name)y+=`. Received an instance of ${_.constructor.name}`;else{const P=e(_,{depth:-1});y+=`. Received ${P}`}}else{let P=e(_,{colors:!1});P.length>25&&(P=`${P.slice(0,25)}...`),y+=`. Received type ${typeof _} (${P})`}return y},TypeError),h("ERR_INVALID_ARG_VALUE",(g,b,_="is invalid")=>{let y=e(b);return y.length>128&&(y=y.slice(0,128)+"..."),`The ${g.includes(".")?"property":"argument"} '${g}' ${_}. Received ${y}`},TypeError),h("ERR_INVALID_RETURN_VALUE",(g,b,_)=>{var y;const v=_!=null&&(y=_.constructor)!==null&&y!==void 0&&y.name?`instance of ${_.constructor.name}`:`type ${typeof _}`;return`Expected ${g} to be returned from the "${b}" function but got ${v}.`},TypeError),h("ERR_MISSING_ARGS",(...g)=>{l(g.length>0,"At least one arg needs to be specified");let b;const _=g.length;switch(g=(Array.isArray(g)?g:[g]).map(y=>`"${y}"`).join(" or "),_){case 1:b+=`The ${g[0]} argument`;break;case 2:b+=`The ${g[0]} and ${g[1]} arguments`;break;default:{const y=g.pop();b+=`The ${g.join(", ")}, and ${y} arguments`}break}return`${b} must be specified`},TypeError),h("ERR_OUT_OF_RANGE",(g,b,_)=>{l(b,'Missing "range" argument');let y;if(Number.isInteger(_)&&Math.abs(_)>2**32)y=c(String(_));else if(typeof _=="bigint"){y=String(_);const v=BigInt(2)**BigInt(32);(_>v||_<-v)&&(y=c(y)),y+="n"}else y=e(_);return`The value of "${g}" is out of range. It must be ${b}. Received ${y}`},RangeError),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),h("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),h("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),h("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),h("ERR_STREAM_WRITE_AFTER_END","write after end",Error),h("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),OO={AbortError:p,aggregateTwoErrors:f(m),hideStackFrames:f,codes:u},OO}var Bp={exports:{}},JN;function fm(){if(JN)return Bp.exports;JN=1;const{AbortController:r,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Bp.exports=r,Bp.exports.AbortSignal=e,Bp.exports.default=r,Bp.exports}var Ag={exports:{}},XN;function bb(){if(XN)return Ag.exports;XN=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(w,S,R){return Function.prototype.apply.call(w,S,R)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(w){return Object.getOwnPropertyNames(w).concat(Object.getOwnPropertySymbols(w))}:t=function(w){return Object.getOwnPropertyNames(w)};function n(v){console&&console.warn&&console.warn(v)}var i=Number.isNaN||function(w){return w!==w};function a(){a.init.call(this)}Ag.exports=a,Ag.exports.once=b,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(v){if(typeof v!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof v)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(v){if(typeof v!="number"||v<0||i(v))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+v+".");o=v}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(w){if(typeof w!="number"||w<0||i(w))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+w+".");return this._maxListeners=w,this};function u(v){return v._maxListeners===void 0?a.defaultMaxListeners:v._maxListeners}a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(w){for(var S=[],R=1;R<arguments.length;R++)S.push(arguments[R]);var P=w==="error",C=this._events;if(C!==void 0)P=P&&C.error===void 0;else if(!P)return!1;if(P){var A;if(S.length>0&&(A=S[0]),A instanceof Error)throw A;var M=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw M.context=A,M}var G=C[w];if(G===void 0)return!1;if(typeof G=="function")e(G,this,S);else for(var U=G.length,z=m(G,U),R=0;R<U;++R)e(z[R],this,S);return!0};function l(v,w,S,R){var P,C,A;if(s(S),C=v._events,C===void 0?(C=v._events=Object.create(null),v._eventsCount=0):(C.newListener!==void 0&&(v.emit("newListener",w,S.listener?S.listener:S),C=v._events),A=C[w]),A===void 0)A=C[w]=S,++v._eventsCount;else if(typeof A=="function"?A=C[w]=R?[S,A]:[A,S]:R?A.unshift(S):A.push(S),P=u(v),P>0&&A.length>P&&!A.warned){A.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(w)+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=v,M.type=w,M.count=A.length,n(M)}return v}a.prototype.addListener=function(w,S){return l(this,w,S,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(w,S){return l(this,w,S,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(v,w,S){var R={fired:!1,wrapFn:void 0,target:v,type:w,listener:S},P=c.bind(R);return P.listener=S,R.wrapFn=P,P}a.prototype.once=function(w,S){return s(S),this.on(w,d(this,w,S)),this},a.prototype.prependOnceListener=function(w,S){return s(S),this.prependListener(w,d(this,w,S)),this},a.prototype.removeListener=function(w,S){var R,P,C,A,M;if(s(S),P=this._events,P===void 0)return this;if(R=P[w],R===void 0)return this;if(R===S||R.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete P[w],P.removeListener&&this.emit("removeListener",w,R.listener||S));else if(typeof R!="function"){for(C=-1,A=R.length-1;A>=0;A--)if(R[A]===S||R[A].listener===S){M=R[A].listener,C=A;break}if(C<0)return this;C===0?R.shift():p(R,C),R.length===1&&(P[w]=R[0]),P.removeListener!==void 0&&this.emit("removeListener",w,M||S)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(w){var S,R,P;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[w]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[w]),this;if(arguments.length===0){var C=Object.keys(R),A;for(P=0;P<C.length;++P)A=C[P],A!=="removeListener"&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=R[w],typeof S=="function")this.removeListener(w,S);else if(S!==void 0)for(P=S.length-1;P>=0;P--)this.removeListener(w,S[P]);return this};function h(v,w,S){var R=v._events;if(R===void 0)return[];var P=R[w];return P===void 0?[]:typeof P=="function"?S?[P.listener||P]:[P]:S?g(P):m(P,P.length)}a.prototype.listeners=function(w){return h(this,w,!0)},a.prototype.rawListeners=function(w){return h(this,w,!1)},a.listenerCount=function(v,w){return typeof v.listenerCount=="function"?v.listenerCount(w):f.call(v,w)},a.prototype.listenerCount=f;function f(v){var w=this._events;if(w!==void 0){var S=w[v];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function m(v,w){for(var S=new Array(w),R=0;R<w;++R)S[R]=v[R];return S}function p(v,w){for(;w+1<v.length;w++)v[w]=v[w+1];v.pop()}function g(v){for(var w=new Array(v.length),S=0;S<w.length;++S)w[S]=v[S].listener||v[S];return w}function b(v,w){return new Promise(function(S,R){function P(A){v.removeListener(w,C),R(A)}function C(){typeof v.removeListener=="function"&&v.removeListener("error",P),S([].slice.call(arguments))}y(v,w,C,{once:!0}),w!=="error"&&_(v,P,{once:!0})})}function _(v,w,S){typeof v.on=="function"&&y(v,"error",w,S)}function y(v,w,S,R){if(typeof v.on=="function")R.once?v.once(w,S):v.on(w,S);else if(typeof v.addEventListener=="function")v.addEventListener(w,function P(C){R.once&&v.removeEventListener(w,P),S(C)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof v)}return Ag.exports}var ZN;function Sr(){return ZN||(ZN=1,function(r){const e=Ul(),{format:t,inspect:n}=Q8(),{codes:{ERR_INVALID_ARG_TYPE:i}}=mr(),{kResistStopPropagation:a,AggregateError:o,SymbolDispose:s}=_t(),u=globalThis.AbortSignal||fm().AbortSignal,l=globalThis.AbortController||fm().AbortController,c=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||e.Blob,h=typeof d<"u"?function(g){return g instanceof d}:function(g){return!1},f=(p,g)=>{if(p!==void 0&&(p===null||typeof p!="object"||!("aborted"in p)))throw new i(g,"AbortSignal",p)},m=(p,g)=>{if(typeof p!="function")throw new i(g,"Function",p)};r.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(p){let g=!1;return function(...b){g||(g=!0,p.apply(this,b))}},createDeferredPromise:function(){let p,g;return{promise:new Promise((_,y)=>{p=_,g=y}),resolve:p,reject:g}},promisify(p){return new Promise((g,b)=>{p((_,...y)=>_?b(_):g(...y))})},debuglog(){return function(){}},format:t,inspect:n,types:{isAsyncFunction(p){return p instanceof c},isArrayBufferView(p){return ArrayBuffer.isView(p)}},isBlob:h,deprecate(p,g){return p},addAbortListener:bb().addAbortListener||function(g,b){if(g===void 0)throw new i("signal","AbortSignal",g);f(g,"signal"),m(b,"listener");let _;return g.aborted?queueMicrotask(()=>b()):(g.addEventListener("abort",b,{__proto__:null,once:!0,[a]:!0}),_=()=>{g.removeEventListener("abort",b)}),{__proto__:null,[s](){var y;(y=_)===null||y===void 0||y()}}},AbortSignalAny:u.any||function(g){if(g.length===1)return g[0];const b=new l,_=()=>b.abort();return g.forEach(y=>{f(y,"signals"),y.addEventListener("abort",_,{once:!0})}),b.signal.addEventListener("abort",()=>{g.forEach(y=>y.removeEventListener("abort",_))},{once:!0}),b.signal}},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(wO)),wO.exports}var Mg={},EO,QN;function $m(){if(QN)return EO;QN=1;const{ArrayIsArray:r,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:t,ArrayPrototypeMap:n,NumberIsInteger:i,NumberIsNaN:a,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:s,NumberParseInt:u,ObjectPrototypeHasOwnProperty:l,RegExpPrototypeExec:c,String:d,StringPrototypeToUpperCase:h,StringPrototypeTrim:f}=_t(),{hideStackFrames:m,codes:{ERR_SOCKET_BAD_PORT:p,ERR_INVALID_ARG_TYPE:g,ERR_INVALID_ARG_VALUE:b,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:y}}=mr(),{normalizeEncoding:v}=Sr(),{isAsyncFunction:w,isArrayBufferView:S}=Sr().types,R={};function P(K){return K===(K|0)}function C(K){return K===K>>>0}const A=/^[0-7]+$/,M="must be a 32-bit unsigned integer or an octal string";function G(K,le,he){if(typeof K>"u"&&(K=he),typeof K=="string"){if(c(A,K)===null)throw new b(le,K,M);K=u(K,8)}return W(K,le),K}const U=m((K,le,he=s,se=o)=>{if(typeof K!="number")throw new g(le,"number",K);if(!i(K))throw new _(le,"an integer",K);if(K<he||K>se)throw new _(le,`>= ${he} && <= ${se}`,K)}),z=m((K,le,he=-2147483648,se=2147483647)=>{if(typeof K!="number")throw new g(le,"number",K);if(!i(K))throw new _(le,"an integer",K);if(K<he||K>se)throw new _(le,`>= ${he} && <= ${se}`,K)}),W=m((K,le,he=!1)=>{if(typeof K!="number")throw new g(le,"number",K);if(!i(K))throw new _(le,"an integer",K);const se=he?1:0,ze=4294967295;if(K<se||K>ze)throw new _(le,`>= ${se} && <= ${ze}`,K)});function Y(K,le){if(typeof K!="string")throw new g(le,"string",K)}function oe(K,le,he=void 0,se){if(typeof K!="number")throw new g(le,"number",K);if(he!=null&&K<he||se!=null&&K>se||(he!=null||se!=null)&&a(K))throw new _(le,`${he!=null?`>= ${he}`:""}${he!=null&&se!=null?" && ":""}${se!=null?`<= ${se}`:""}`,K)}const I=m((K,le,he)=>{if(!e(he,K)){const ze="must be one of: "+t(n(he,ht=>typeof ht=="string"?`'${ht}'`:d(ht)),", ");throw new b(le,K,ze)}});function q(K,le){if(typeof K!="boolean")throw new g(le,"boolean",K)}function T(K,le,he){return K==null||!l(K,le)?he:K[le]}const V=m((K,le,he=null)=>{const se=T(he,"allowArray",!1),ze=T(he,"allowFunction",!1);if(!T(he,"nullable",!1)&&K===null||!se&&r(K)||typeof K!="object"&&(!ze||typeof K!="function"))throw new g(le,"Object",K)}),re=m((K,le)=>{if(K!=null&&typeof K!="object"&&typeof K!="function")throw new g(le,"a dictionary",K)}),Z=m((K,le,he=0)=>{if(!r(K))throw new g(le,"Array",K);if(K.length<he){const se=`must be longer than ${he}`;throw new b(le,K,se)}});function fe(K,le){Z(K,le);for(let he=0;he<K.length;he++)Y(K[he],`${le}[${he}]`)}function _e(K,le){Z(K,le);for(let he=0;he<K.length;he++)q(K[he],`${le}[${he}]`)}function Se(K,le){Z(K,le);for(let he=0;he<K.length;he++){const se=K[he],ze=`${le}[${he}]`;if(se==null)throw new g(ze,"AbortSignal",se);te(se,ze)}}function J(K,le="signal"){if(Y(K,le),R[K]===void 0)throw R[h(K)]!==void 0?new y(K+" (signals must use all capital letters)"):new y(K)}const F=m((K,le="buffer")=>{if(!S(K))throw new g(le,["Buffer","TypedArray","DataView"],K)});function ee(K,le){const he=v(le),se=K.length;if(he==="hex"&&se%2!==0)throw new b("encoding",le,`is invalid for data of length ${se}`)}function L(K,le="Port",he=!0){if(typeof K!="number"&&typeof K!="string"||typeof K=="string"&&f(K).length===0||+K!==+K>>>0||K>65535||K===0&&!he)throw new p(le,K,he);return K|0}const te=m((K,le)=>{if(K!==void 0&&(K===null||typeof K!="object"||!("aborted"in K)))throw new g(le,"AbortSignal",K)}),ne=m((K,le)=>{if(typeof K!="function")throw new g(le,"Function",K)}),B=m((K,le)=>{if(typeof K!="function"||w(K))throw new g(le,"Function",K)}),k=m((K,le)=>{if(K!==void 0)throw new g(le,"undefined",K)});function ae(K,le,he){if(!e(he,K))throw new g(le,`('${t(he,"|")}')`,K)}const me=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function pe(K,le){if(typeof K>"u"||!c(me,K))throw new b(le,K,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ge(K){if(typeof K=="string")return pe(K,"hints"),K;if(r(K)){const le=K.length;let he="";if(le===0)return he;for(let se=0;se<le;se++){const ze=K[se];pe(ze,"hints"),he+=ze,se!==le-1&&(he+=", ")}return he}throw new b("hints",K,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return EO={isInt32:P,isUint32:C,parseFileMode:G,validateArray:Z,validateStringArray:fe,validateBooleanArray:_e,validateAbortSignalArray:Se,validateBoolean:q,validateBuffer:F,validateDictionary:re,validateEncoding:ee,validateFunction:ne,validateInt32:z,validateInteger:U,validateNumber:oe,validateObject:V,validateOneOf:I,validatePlainFunction:B,validatePort:L,validateSignalName:J,validateString:Y,validateUint32:W,validateUndefined:k,validateUnion:ae,validateAbortSignal:te,validateLinkHeaderValue:ge},EO}var Ig={exports:{}},RO={exports:{}},YN;function gd(){if(YN)return RO.exports;YN=1;var r=RO.exports={},e,t;function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=n}catch{e=n}try{typeof clearTimeout=="function"?t=clearTimeout:t=i}catch{t=i}})();function a(p){if(e===setTimeout)return setTimeout(p,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(p,0);try{return e(p,0)}catch{try{return e.call(null,p,0)}catch{return e.call(this,p,0)}}}function o(p){if(t===clearTimeout)return clearTimeout(p);if((t===i||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(p);try{return t(p)}catch{try{return t.call(null,p)}catch{return t.call(this,p)}}}var s=[],u=!1,l,c=-1;function d(){!u||!l||(u=!1,l.length?s=l.concat(s):c=-1,s.length&&h())}function h(){if(!u){var p=a(d);u=!0;for(var g=s.length;g;){for(l=s,s=[];++c<g;)l&&l[c].run();c=-1,g=s.length}l=null,u=!1,o(p)}}r.nextTick=function(p){var g=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)g[b-1]=arguments[b];s.push(new f(p,g)),s.length===1&&!u&&a(h)};function f(p,g){this.fun=p,this.array=g}f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function m(){}return r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(p){return[]},r.binding=function(p){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(p){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},RO.exports}var CO,eq;function ol(){if(eq)return CO;eq=1;const{SymbolAsyncIterator:r,SymbolIterator:e,SymbolFor:t}=_t(),n=t("nodejs.stream.destroyed"),i=t("nodejs.stream.errored"),a=t("nodejs.stream.readable"),o=t("nodejs.stream.writable"),s=t("nodejs.stream.disturbed"),u=t("nodejs.webstream.isClosedPromise"),l=t("nodejs.webstream.controllerErrorFunction");function c(T,V=!1){var re;return!!(T&&typeof T.pipe=="function"&&typeof T.on=="function"&&(!V||typeof T.pause=="function"&&typeof T.resume=="function")&&(!T._writableState||((re=T._readableState)===null||re===void 0?void 0:re.readable)!==!1)&&(!T._writableState||T._readableState))}function d(T){var V;return!!(T&&typeof T.write=="function"&&typeof T.on=="function"&&(!T._readableState||((V=T._writableState)===null||V===void 0?void 0:V.writable)!==!1))}function h(T){return!!(T&&typeof T.pipe=="function"&&T._readableState&&typeof T.on=="function"&&typeof T.write=="function")}function f(T){return T&&(T._readableState||T._writableState||typeof T.write=="function"&&typeof T.on=="function"||typeof T.pipe=="function"&&typeof T.on=="function")}function m(T){return!!(T&&!f(T)&&typeof T.pipeThrough=="function"&&typeof T.getReader=="function"&&typeof T.cancel=="function")}function p(T){return!!(T&&!f(T)&&typeof T.getWriter=="function"&&typeof T.abort=="function")}function g(T){return!!(T&&!f(T)&&typeof T.readable=="object"&&typeof T.writable=="object")}function b(T){return m(T)||p(T)||g(T)}function _(T,V){return T==null?!1:V===!0?typeof T[r]=="function":V===!1?typeof T[e]=="function":typeof T[r]=="function"||typeof T[e]=="function"}function y(T){if(!f(T))return null;const V=T._writableState,re=T._readableState,Z=V||re;return!!(T.destroyed||T[n]||Z!=null&&Z.destroyed)}function v(T){if(!d(T))return null;if(T.writableEnded===!0)return!0;const V=T._writableState;return V!=null&&V.errored?!1:typeof(V==null?void 0:V.ended)!="boolean"?null:V.ended}function w(T,V){if(!d(T))return null;if(T.writableFinished===!0)return!0;const re=T._writableState;return re!=null&&re.errored?!1:typeof(re==null?void 0:re.finished)!="boolean"?null:!!(re.finished||V===!1&&re.ended===!0&&re.length===0)}function S(T){if(!c(T))return null;if(T.readableEnded===!0)return!0;const V=T._readableState;return!V||V.errored?!1:typeof(V==null?void 0:V.ended)!="boolean"?null:V.ended}function R(T,V){if(!c(T))return null;const re=T._readableState;return re!=null&&re.errored?!1:typeof(re==null?void 0:re.endEmitted)!="boolean"?null:!!(re.endEmitted||V===!1&&re.ended===!0&&re.length===0)}function P(T){return T&&T[a]!=null?T[a]:typeof(T==null?void 0:T.readable)!="boolean"?null:y(T)?!1:c(T)&&T.readable&&!R(T)}function C(T){return T&&T[o]!=null?T[o]:typeof(T==null?void 0:T.writable)!="boolean"?null:y(T)?!1:d(T)&&T.writable&&!v(T)}function A(T,V){return f(T)?y(T)?!0:!((V==null?void 0:V.readable)!==!1&&P(T)||(V==null?void 0:V.writable)!==!1&&C(T)):null}function M(T){var V,re;return f(T)?T.writableErrored?T.writableErrored:(V=(re=T._writableState)===null||re===void 0?void 0:re.errored)!==null&&V!==void 0?V:null:null}function G(T){var V,re;return f(T)?T.readableErrored?T.readableErrored:(V=(re=T._readableState)===null||re===void 0?void 0:re.errored)!==null&&V!==void 0?V:null:null}function U(T){if(!f(T))return null;if(typeof T.closed=="boolean")return T.closed;const V=T._writableState,re=T._readableState;return typeof(V==null?void 0:V.closed)=="boolean"||typeof(re==null?void 0:re.closed)=="boolean"?(V==null?void 0:V.closed)||(re==null?void 0:re.closed):typeof T._closed=="boolean"&&z(T)?T._closed:null}function z(T){return typeof T._closed=="boolean"&&typeof T._defaultKeepAlive=="boolean"&&typeof T._removedConnection=="boolean"&&typeof T._removedContLen=="boolean"}function W(T){return typeof T._sent100=="boolean"&&z(T)}function Y(T){var V;return typeof T._consuming=="boolean"&&typeof T._dumped=="boolean"&&((V=T.req)===null||V===void 0?void 0:V.upgradeOrConnect)===void 0}function oe(T){if(!f(T))return null;const V=T._writableState,re=T._readableState,Z=V||re;return!Z&&W(T)||!!(Z&&Z.autoDestroy&&Z.emitClose&&Z.closed===!1)}function I(T){var V;return!!(T&&((V=T[s])!==null&&V!==void 0?V:T.readableDidRead||T.readableAborted))}function q(T){var V,re,Z,fe,_e,Se,J,F,ee,L;return!!(T&&((V=(re=(Z=(fe=(_e=(Se=T[i])!==null&&Se!==void 0?Se:T.readableErrored)!==null&&_e!==void 0?_e:T.writableErrored)!==null&&fe!==void 0?fe:(J=T._readableState)===null||J===void 0?void 0:J.errorEmitted)!==null&&Z!==void 0?Z:(F=T._writableState)===null||F===void 0?void 0:F.errorEmitted)!==null&&re!==void 0?re:(ee=T._readableState)===null||ee===void 0?void 0:ee.errored)!==null&&V!==void 0?V:!((L=T._writableState)===null||L===void 0)&&L.errored))}return CO={isDestroyed:y,kIsDestroyed:n,isDisturbed:I,kIsDisturbed:s,isErrored:q,kIsErrored:i,isReadable:P,kIsReadable:a,kIsClosedPromise:u,kControllerErrorFunction:l,kIsWritable:o,isClosed:U,isDuplexNodeStream:h,isFinished:A,isIterable:_,isReadableNodeStream:c,isReadableStream:m,isReadableEnded:S,isReadableFinished:R,isReadableErrored:G,isNodeStream:f,isWebStream:b,isWritable:C,isWritableNodeStream:d,isWritableStream:p,isWritableEnded:v,isWritableFinished:w,isWritableErrored:M,isServerRequest:Y,isServerResponse:W,willEmitClose:oe,isTransformStream:g},CO}var tq;function zl(){if(tq)return Ig.exports;tq=1;const r=gd(),{AbortError:e,codes:t}=mr(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:i}=t,{kEmptyObject:a,once:o}=Sr(),{validateAbortSignal:s,validateFunction:u,validateObject:l,validateBoolean:c}=$m(),{Promise:d,PromisePrototypeThen:h,SymbolDispose:f}=_t(),{isClosed:m,isReadable:p,isReadableNodeStream:g,isReadableStream:b,isReadableFinished:_,isReadableErrored:y,isWritable:v,isWritableNodeStream:w,isWritableStream:S,isWritableFinished:R,isWritableErrored:P,isNodeStream:C,willEmitClose:A,kIsClosedPromise:M}=ol();let G;function U(I){return I.setHeader&&typeof I.abort=="function"}const z=()=>{};function W(I,q,T){var V,re;if(arguments.length===2?(T=q,q=a):q==null?q=a:l(q,"options"),u(T,"callback"),s(q.signal,"options.signal"),T=o(T),b(I)||S(I))return Y(I,q,T);if(!C(I))throw new n("stream",["ReadableStream","WritableStream","Stream"],I);const Z=(V=q.readable)!==null&&V!==void 0?V:g(I),fe=(re=q.writable)!==null&&re!==void 0?re:w(I),_e=I._writableState,Se=I._readableState,J=()=>{I.writable||L()};let F=A(I)&&g(I)===Z&&w(I)===fe,ee=R(I,!1);const L=()=>{ee=!0,I.destroyed&&(F=!1),!(F&&(!I.readable||Z))&&(!Z||te)&&T.call(I)};let te=_(I,!1);const ne=()=>{te=!0,I.destroyed&&(F=!1),!(F&&(!I.writable||fe))&&(!fe||ee)&&T.call(I)},B=K=>{T.call(I,K)};let k=m(I);const ae=()=>{k=!0;const K=P(I)||y(I);if(K&&typeof K!="boolean")return T.call(I,K);if(Z&&!te&&g(I,!0)&&!_(I,!1))return T.call(I,new i);if(fe&&!ee&&!R(I,!1))return T.call(I,new i);T.call(I)},me=()=>{k=!0;const K=P(I)||y(I);if(K&&typeof K!="boolean")return T.call(I,K);T.call(I)},pe=()=>{I.req.on("finish",L)};U(I)?(I.on("complete",L),F||I.on("abort",ae),I.req?pe():I.on("request",pe)):fe&&!_e&&(I.on("end",J),I.on("close",J)),!F&&typeof I.aborted=="boolean"&&I.on("aborted",ae),I.on("end",ne),I.on("finish",L),q.error!==!1&&I.on("error",B),I.on("close",ae),k?r.nextTick(ae):_e!=null&&_e.errorEmitted||Se!=null&&Se.errorEmitted?F||r.nextTick(me):(!Z&&(!F||p(I))&&(ee||v(I)===!1)||!fe&&(!F||v(I))&&(te||p(I)===!1)||Se&&I.req&&I.aborted)&&r.nextTick(me);const ge=()=>{T=z,I.removeListener("aborted",ae),I.removeListener("complete",L),I.removeListener("abort",ae),I.removeListener("request",pe),I.req&&I.req.removeListener("finish",L),I.removeListener("end",J),I.removeListener("close",J),I.removeListener("finish",L),I.removeListener("end",ne),I.removeListener("error",B),I.removeListener("close",ae)};if(q.signal&&!k){const K=()=>{const le=T;ge(),le.call(I,new e(void 0,{cause:q.signal.reason}))};if(q.signal.aborted)r.nextTick(K);else{G=G||Sr().addAbortListener;const le=G(q.signal,K),he=T;T=o((...se)=>{le[f](),he.apply(I,se)})}}return ge}function Y(I,q,T){let V=!1,re=z;if(q.signal)if(re=()=>{V=!0,T.call(I,new e(void 0,{cause:q.signal.reason}))},q.signal.aborted)r.nextTick(re);else{G=G||Sr().addAbortListener;const fe=G(q.signal,re),_e=T;T=o((...Se)=>{fe[f](),_e.apply(I,Se)})}const Z=(...fe)=>{V||r.nextTick(()=>T.apply(I,fe))};return h(I[M].promise,Z,Z),z}function oe(I,q){var T;let V=!1;return q===null&&(q=a),(T=q)!==null&&T!==void 0&&T.cleanup&&(c(q.cleanup,"cleanup"),V=q.cleanup),new d((re,Z)=>{const fe=W(I,q,_e=>{V&&fe(),_e?Z(_e):re()})})}return Ig.exports=W,Ig.exports.finished=oe,Ig.exports}var PO,rq;function Ef(){if(rq)return PO;rq=1;const r=gd(),{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:t},AbortError:n}=mr(),{Symbol:i}=_t(),{kIsDestroyed:a,isDestroyed:o,isFinished:s,isServerRequest:u}=ol(),l=i("kDestroy"),c=i("kConstruct");function d(A,M,G){A&&(A.stack,M&&!M.errored&&(M.errored=A),G&&!G.errored&&(G.errored=A))}function h(A,M){const G=this._readableState,U=this._writableState,z=U||G;return U!=null&&U.destroyed||G!=null&&G.destroyed?(typeof M=="function"&&M(),this):(d(A,U,G),U&&(U.destroyed=!0),G&&(G.destroyed=!0),z.constructed?f(this,A,M):this.once(l,function(W){f(this,e(W,A),M)}),this)}function f(A,M,G){let U=!1;function z(W){if(U)return;U=!0;const Y=A._readableState,oe=A._writableState;d(W,oe,Y),oe&&(oe.closed=!0),Y&&(Y.closed=!0),typeof G=="function"&&G(W),W?r.nextTick(m,A,W):r.nextTick(p,A)}try{A._destroy(M||null,z)}catch(W){z(W)}}function m(A,M){g(A,M),p(A)}function p(A){const M=A._readableState,G=A._writableState;G&&(G.closeEmitted=!0),M&&(M.closeEmitted=!0),(G!=null&&G.emitClose||M!=null&&M.emitClose)&&A.emit("close")}function g(A,M){const G=A._readableState,U=A._writableState;U!=null&&U.errorEmitted||G!=null&&G.errorEmitted||(U&&(U.errorEmitted=!0),G&&(G.errorEmitted=!0),A.emit("error",M))}function b(){const A=this._readableState,M=this._writableState;A&&(A.constructed=!0,A.closed=!1,A.closeEmitted=!1,A.destroyed=!1,A.errored=null,A.errorEmitted=!1,A.reading=!1,A.ended=A.readable===!1,A.endEmitted=A.readable===!1),M&&(M.constructed=!0,M.destroyed=!1,M.closed=!1,M.closeEmitted=!1,M.errored=null,M.errorEmitted=!1,M.finalCalled=!1,M.prefinished=!1,M.ended=M.writable===!1,M.ending=M.writable===!1,M.finished=M.writable===!1)}function _(A,M,G){const U=A._readableState,z=A._writableState;if(z!=null&&z.destroyed||U!=null&&U.destroyed)return this;U!=null&&U.autoDestroy||z!=null&&z.autoDestroy?A.destroy(M):M&&(M.stack,z&&!z.errored&&(z.errored=M),U&&!U.errored&&(U.errored=M),G?r.nextTick(g,A,M):g(A,M))}function y(A,M){if(typeof A._construct!="function")return;const G=A._readableState,U=A._writableState;G&&(G.constructed=!1),U&&(U.constructed=!1),A.once(c,M),!(A.listenerCount(c)>1)&&r.nextTick(v,A)}function v(A){let M=!1;function G(U){if(M){_(A,U??new t);return}M=!0;const z=A._readableState,W=A._writableState,Y=W||z;z&&(z.constructed=!0),W&&(W.constructed=!0),Y.destroyed?A.emit(l,U):U?_(A,U,!0):r.nextTick(w,A)}try{A._construct(U=>{r.nextTick(G,U)})}catch(U){r.nextTick(G,U)}}function w(A){A.emit(c)}function S(A){return(A==null?void 0:A.setHeader)&&typeof A.abort=="function"}function R(A){A.emit("close")}function P(A,M){A.emit("error",M),r.nextTick(R,A)}function C(A,M){!A||o(A)||(!M&&!s(A)&&(M=new n),u(A)?(A.socket=null,A.destroy(M)):S(A)?A.abort():S(A.req)?A.req.abort():typeof A.destroy=="function"?A.destroy(M):typeof A.close=="function"?A.close():M?r.nextTick(P,A,M):r.nextTick(R,A),A.destroyed||(A[a]=!0))}return PO={construct:y,destroyer:C,destroy:h,undestroy:b,errorOrDestroy:_},PO}var jO,nq;function kP(){if(nq)return jO;nq=1;const{ArrayIsArray:r,ObjectSetPrototypeOf:e}=_t(),{EventEmitter:t}=bb();function n(a){t.call(this,a)}e(n.prototype,t.prototype),e(n,t),n.prototype.pipe=function(a,o){const s=this;function u(p){a.writable&&a.write(p)===!1&&s.pause&&s.pause()}s.on("data",u);function l(){s.readable&&s.resume&&s.resume()}a.on("drain",l),!a._isStdio&&(!o||o.end!==!1)&&(s.on("end",d),s.on("close",h));let c=!1;function d(){c||(c=!0,a.end())}function h(){c||(c=!0,typeof a.destroy=="function"&&a.destroy())}function f(p){m(),t.listenerCount(this,"error")===0&&this.emit("error",p)}i(s,"error",f),i(a,"error",f);function m(){s.removeListener("data",u),a.removeListener("drain",l),s.removeListener("end",d),s.removeListener("close",h),s.removeListener("error",f),a.removeListener("error",f),s.removeListener("end",m),s.removeListener("close",m),a.removeListener("close",m)}return s.on("end",m),s.on("close",m),a.on("close",m),a.emit("pipe",s),a};function i(a,o,s){if(typeof a.prependListener=="function")return a.prependListener(o,s);!a._events||!a._events[o]?a.on(o,s):r(a._events[o])?a._events[o].unshift(s):a._events[o]=[s,a._events[o]]}return jO={Stream:n,prependListener:i},jO}var TO={exports:{}},iq;function yb(){return iq||(iq=1,function(r){const{SymbolDispose:e}=_t(),{AbortError:t,codes:n}=mr(),{isNodeStream:i,isWebStream:a,kControllerErrorFunction:o}=ol(),s=zl(),{ERR_INVALID_ARG_TYPE:u}=n;let l;const c=(d,h)=>{if(typeof d!="object"||!("aborted"in d))throw new u(h,"AbortSignal",d)};r.exports.addAbortSignal=function(h,f){if(c(h,"signal"),!i(f)&&!a(f))throw new u("stream",["ReadableStream","WritableStream","Stream"],f);return r.exports.addAbortSignalNoValidate(h,f)},r.exports.addAbortSignalNoValidate=function(d,h){if(typeof d!="object"||!("aborted"in d))return h;const f=i(h)?()=>{h.destroy(new t(void 0,{cause:d.reason}))}:()=>{h[o](new t(void 0,{cause:d.reason}))};if(d.aborted)f();else{l=l||Sr().addAbortListener;const m=l(d,f);s(h,m[e])}return h}}(TO)),TO.exports}var AO,aq;function cce(){if(aq)return AO;aq=1;const{StringPrototypeSlice:r,SymbolIterator:e,TypedArrayPrototypeSet:t,Uint8Array:n}=_t(),{Buffer:i}=Ul(),{inspect:a}=Sr();return AO=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){const u={data:s,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(s){const u={data:s,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;const s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let u=this.head,l=""+u.data;for(;(u=u.next)!==null;)l+=s+u.data;return l}concat(s){if(this.length===0)return i.alloc(0);const u=i.allocUnsafe(s>>>0);let l=this.head,c=0;for(;l;)t(u,l.data,c),c+=l.data.length,l=l.next;return u}consume(s,u){const l=this.head.data;if(s<l.length){const c=l.slice(0,s);return this.head.data=l.slice(s),c}return s===l.length?this.shift():u?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[e](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let u="",l=this.head,c=0;do{const d=l.data;if(s>d.length)u+=d,s-=d.length;else{s===d.length?(u+=d,++c,l.next?this.head=l.next:this.head=this.tail=null):(u+=r(d,0,s),this.head=l,l.data=r(d,s));break}++c}while((l=l.next)!==null);return this.length-=c,u}_getBuffer(s){const u=i.allocUnsafe(s),l=s;let c=this.head,d=0;do{const h=c.data;if(s>h.length)t(u,h,l-s),s-=h.length;else{s===h.length?(t(u,h,l-s),++d,c.next?this.head=c.next:this.head=this.tail=null):(t(u,new n(h.buffer,h.byteOffset,s),l-s),this.head=c,c.data=h.slice(s));break}++d}while((c=c.next)!==null);return this.length-=d,u}[Symbol.for("nodejs.util.inspect.custom")](s,u){return a(this,{...u,depth:0,customInspect:!1})}},AO}var MO,oq;function vb(){if(oq)return MO;oq=1;const{MathFloor:r,NumberIsInteger:e}=_t(),{validateInteger:t}=$m(),{ERR_INVALID_ARG_VALUE:n}=mr().codes;let i=16*1024,a=16;function o(c,d,h){return c.highWaterMark!=null?c.highWaterMark:d?c[h]:null}function s(c){return c?a:i}function u(c,d){t(d,"value",0),c?a=d:i=d}function l(c,d,h,f){const m=o(d,f,h);if(m!=null){if(!e(m)||m<0){const p=f?`options.${h}`:"options.highWaterMark";throw new n(p,m)}return r(m)}return s(c.objectMode)}return MO={getHighWaterMark:l,getDefaultHighWaterMark:s,setDefaultHighWaterMark:u},MO}var IO={},xg={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var sq;function dce(){return sq||(sq=1,function(r,e){var t=Ul(),n=t.Buffer;function i(o,s){for(var u in o)s[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=a);function a(o,s,u){return n(o,s,u)}a.prototype=Object.create(n.prototype),i(n,a),a.from=function(o,s,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,s,u)},a.alloc=function(o,s,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return s!==void 0?typeof u=="string"?l.fill(s,u):l.fill(s):l.fill(0),l},a.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},a.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}}(xg,xg.exports)),xg.exports}var uq;function fce(){if(uq)return IO;uq=1;var r=dce().Buffer,e=r.isEncoding||function(b){switch(b=""+b,b&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(b){if(!b)return"utf8";for(var _;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(_)return;b=(""+b).toLowerCase(),_=!0}}function n(b){var _=t(b);if(typeof _!="string"&&(r.isEncoding===e||!e(b)))throw new Error("Unknown encoding: "+b);return _||b}IO.StringDecoder=i;function i(b){this.encoding=n(b);var _;switch(this.encoding){case"utf16le":this.text=d,this.end=h,_=4;break;case"utf8":this.fillLast=u,_=4;break;case"base64":this.text=f,this.end=m,_=3;break;default:this.write=p,this.end=g;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(_)}i.prototype.write=function(b){if(b.length===0)return"";var _,y;if(this.lastNeed){if(_=this.fillLast(b),_===void 0)return"";y=this.lastNeed,this.lastNeed=0}else y=0;return y<b.length?_?_+this.text(b,y):this.text(b,y):_||""},i.prototype.end=c,i.prototype.text=l,i.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length};function a(b){return b<=127?0:b>>5===6?2:b>>4===14?3:b>>3===30?4:b>>6===2?-1:-2}function o(b,_,y){var v=_.length-1;if(v<y)return 0;var w=a(_[v]);return w>=0?(w>0&&(b.lastNeed=w-1),w):--v<y||w===-2?0:(w=a(_[v]),w>=0?(w>0&&(b.lastNeed=w-2),w):--v<y||w===-2?0:(w=a(_[v]),w>=0?(w>0&&(w===2?w=0:b.lastNeed=w-3),w):0))}function s(b,_,y){if((_[0]&192)!==128)return b.lastNeed=0,"�";if(b.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return b.lastNeed=1,"�";if(b.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return b.lastNeed=2,"�"}}function u(b){var _=this.lastTotal-this.lastNeed,y=s(this,b);if(y!==void 0)return y;if(this.lastNeed<=b.length)return b.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,_,0,b.length),this.lastNeed-=b.length}function l(b,_){var y=o(this,b,_);if(!this.lastNeed)return b.toString("utf8",_);this.lastTotal=y;var v=b.length-(y-this.lastNeed);return b.copy(this.lastChar,0,v),b.toString("utf8",_,v)}function c(b){var _=b&&b.length?this.write(b):"";return this.lastNeed?_+"�":_}function d(b,_){if((b.length-_)%2===0){var y=b.toString("utf16le",_);if(y){var v=y.charCodeAt(y.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",_,b.length-1)}function h(b){var _=b&&b.length?this.write(b):"";if(this.lastNeed){var y=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,y)}return _}function f(b,_){var y=(b.length-_)%3;return y===0?b.toString("base64",_):(this.lastNeed=3-y,this.lastTotal=3,y===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",_,b.length-y))}function m(b){var _=b&&b.length?this.write(b):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function p(b){return b.toString(this.encoding)}function g(b){return b&&b.length?this.write(b):""}return IO}var xO,lq;function Y8(){if(lq)return xO;lq=1;const r=gd(),{PromisePrototypeThen:e,SymbolAsyncIterator:t,SymbolIterator:n}=_t(),{Buffer:i}=Ul(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_NULL_VALUES:o}=mr().codes;function s(u,l,c){let d;if(typeof l=="string"||l instanceof i)return new u({objectMode:!0,...c,read(){this.push(l),this.push(null)}});let h;if(l&&l[t])h=!0,d=l[t]();else if(l&&l[n])h=!1,d=l[n]();else throw new a("iterable",["Iterable"],l);const f=new u({objectMode:!0,highWaterMark:1,...c});let m=!1;f._read=function(){m||(m=!0,g())},f._destroy=function(b,_){e(p(b),()=>r.nextTick(_,b),y=>r.nextTick(_,y||b))};async function p(b){const _=b!=null,y=typeof d.throw=="function";if(_&&y){const{value:v,done:w}=await d.throw(b);if(await v,w)return}if(typeof d.return=="function"){const{value:v}=await d.return();await v}}async function g(){for(;;){try{const{value:b,done:_}=h?await d.next():d.next();if(_)f.push(null);else{const y=b&&typeof b.then=="function"?await b:b;if(y===null)throw m=!1,new o;if(f.push(y))continue;m=!1}}catch(b){f.destroy(b)}break}}return f}return xO=s,xO}var DO,cq;function wb(){if(cq)return DO;cq=1;const r=gd(),{ArrayPrototypeIndexOf:e,NumberIsInteger:t,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:a,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:u,SafeSet:l,SymbolAsyncDispose:c,SymbolAsyncIterator:d,Symbol:h}=_t();DO=se,se.ReadableState=he;const{EventEmitter:f}=bb(),{Stream:m,prependListener:p}=kP(),{Buffer:g}=Ul(),{addAbortSignal:b}=yb(),_=zl();let y=Sr().debuglog("stream",x=>{y=x});const v=cce(),w=Ef(),{getHighWaterMark:S,getDefaultHighWaterMark:R}=vb(),{aggregateTwoErrors:P,codes:{ERR_INVALID_ARG_TYPE:C,ERR_METHOD_NOT_IMPLEMENTED:A,ERR_OUT_OF_RANGE:M,ERR_STREAM_PUSH_AFTER_EOF:G,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:U},AbortError:z}=mr(),{validateObject:W}=$m(),Y=h("kPaused"),{StringDecoder:oe}=fce(),I=Y8();s(se.prototype,m.prototype),s(se,m);const q=()=>{},{errorOrDestroy:T}=w,V=1,re=2,Z=4,fe=8,_e=16,Se=32,J=64,F=128,ee=256,L=512,te=1024,ne=2048,B=4096,k=8192,ae=16384,me=32768,pe=65536,ge=1<<17,K=1<<18;function le(x){return{enumerable:!1,get(){return(this.state&x)!==0},set(N){N?this.state|=x:this.state&=~x}}}a(he.prototype,{objectMode:le(V),ended:le(re),endEmitted:le(Z),reading:le(fe),constructed:le(_e),sync:le(Se),needReadable:le(J),emittedReadable:le(F),readableListening:le(ee),resumeScheduled:le(L),errorEmitted:le(te),emitClose:le(ne),autoDestroy:le(B),destroyed:le(k),closed:le(ae),closeEmitted:le(me),multiAwaitDrain:le(pe),readingMore:le(ge),dataEmitted:le(K)});function he(x,N,ve){typeof ve!="boolean"&&(ve=N instanceof il()),this.state=ne|B|_e|Se,x&&x.objectMode&&(this.state|=V),ve&&x&&x.readableObjectMode&&(this.state|=V),this.highWaterMark=x?S(this,x,"readableHighWaterMark",ve):R(!1),this.buffer=new v,this.length=0,this.pipes=[],this.flowing=null,this[Y]=null,x&&x.emitClose===!1&&(this.state&=~ne),x&&x.autoDestroy===!1&&(this.state&=~B),this.errored=null,this.defaultEncoding=x&&x.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,x&&x.encoding&&(this.decoder=new oe(x.encoding),this.encoding=x.encoding)}function se(x){if(!(this instanceof se))return new se(x);const N=this instanceof il();this._readableState=new he(x,this,N),x&&(typeof x.read=="function"&&(this._read=x.read),typeof x.destroy=="function"&&(this._destroy=x.destroy),typeof x.construct=="function"&&(this._construct=x.construct),x.signal&&!N&&b(x.signal,this)),m.call(this,x),w.construct(this,()=>{this._readableState.needReadable&&H(this,this._readableState)})}se.prototype.destroy=w.destroy,se.prototype._undestroy=w.undestroy,se.prototype._destroy=function(x,N){N(x)},se.prototype[f.captureRejectionSymbol]=function(x){this.destroy(x)},se.prototype[c]=function(){let x;return this.destroyed||(x=this.readableEnded?null:new z,this.destroy(x)),new u((N,ve)=>_(this,we=>we&&we!==x?ve(we):N(null)))},se.prototype.push=function(x,N){return ze(this,x,N,!1)},se.prototype.unshift=function(x,N){return ze(this,x,N,!0)};function ze(x,N,ve,we){y("readableAddChunk",N);const Re=x._readableState;let yt;if((Re.state&V)===0&&(typeof N=="string"?(ve=ve||Re.defaultEncoding,Re.encoding!==ve&&(we&&Re.encoding?N=g.from(N,ve).toString(Re.encoding):(N=g.from(N,ve),ve=""))):N instanceof g?ve="":m._isUint8Array(N)?(N=m._uint8ArrayToBuffer(N),ve=""):N!=null&&(yt=new C("chunk",["string","Buffer","Uint8Array"],N))),yt)T(x,yt);else if(N===null)Re.state&=~fe,O(x,Re);else if((Re.state&V)!==0||N&&N.length>0)if(we)if((Re.state&Z)!==0)T(x,new U);else{if(Re.destroyed||Re.errored)return!1;ht(x,Re,N,!0)}else if(Re.ended)T(x,new G);else{if(Re.destroyed||Re.errored)return!1;Re.state&=~fe,Re.decoder&&!ve?(N=Re.decoder.write(N),Re.objectMode||N.length!==0?ht(x,Re,N,!1):H(x,Re)):ht(x,Re,N,!1)}else we||(Re.state&=~fe,H(x,Re));return!Re.ended&&(Re.length<Re.highWaterMark||Re.length===0)}function ht(x,N,ve,we){N.flowing&&N.length===0&&!N.sync&&x.listenerCount("data")>0?((N.state&pe)!==0?N.awaitDrainWriters.clear():N.awaitDrainWriters=null,N.dataEmitted=!0,x.emit("data",ve)):(N.length+=N.objectMode?1:ve.length,we?N.buffer.unshift(ve):N.buffer.push(ve),(N.state&J)!==0&&E(x)),H(x,N)}se.prototype.isPaused=function(){const x=this._readableState;return x[Y]===!0||x.flowing===!1},se.prototype.setEncoding=function(x){const N=new oe(x);this._readableState.decoder=N,this._readableState.encoding=this._readableState.decoder.encoding;const ve=this._readableState.buffer;let we="";for(const Re of ve)we+=N.write(Re);return ve.clear(),we!==""&&ve.push(we),this._readableState.length=we.length,this};const He=1073741824;function Lt(x){if(x>He)throw new M("size","<= 1GiB",x);return x--,x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,x|=x>>>16,x++,x}function j(x,N){return x<=0||N.length===0&&N.ended?0:(N.state&V)!==0?1:n(x)?N.flowing&&N.length?N.buffer.first().length:N.length:x<=N.length?x:N.ended?N.length:0}se.prototype.read=function(x){y("read",x),x===void 0?x=NaN:t(x)||(x=i(x,10));const N=this._readableState,ve=x;if(x>N.highWaterMark&&(N.highWaterMark=Lt(x)),x!==0&&(N.state&=~F),x===0&&N.needReadable&&((N.highWaterMark!==0?N.length>=N.highWaterMark:N.length>0)||N.ended))return y("read: emitReadable",N.length,N.ended),N.length===0&&N.ended?Kr(this):E(this),null;if(x=j(x,N),x===0&&N.ended)return N.length===0&&Kr(this),null;let we=(N.state&J)!==0;if(y("need readable",we),(N.length===0||N.length-x<N.highWaterMark)&&(we=!0,y("length less than watermark",we)),N.ended||N.reading||N.destroyed||N.errored||!N.constructed)we=!1,y("reading, ended or constructing",we);else if(we){y("do read"),N.state|=fe|Se,N.length===0&&(N.state|=J);try{this._read(N.highWaterMark)}catch(yt){T(this,yt)}N.state&=~Se,N.reading||(x=j(ve,N))}let Re;return x>0?Re=Fe(x,N):Re=null,Re===null?(N.needReadable=N.length<=N.highWaterMark,x=0):(N.length-=x,N.multiAwaitDrain?N.awaitDrainWriters.clear():N.awaitDrainWriters=null),N.length===0&&(N.ended||(N.needReadable=!0),ve!==x&&N.ended&&Kr(this)),Re!==null&&!N.errorEmitted&&!N.closeEmitted&&(N.dataEmitted=!0,this.emit("data",Re)),Re};function O(x,N){if(y("onEofChunk"),!N.ended){if(N.decoder){const ve=N.decoder.end();ve&&ve.length&&(N.buffer.push(ve),N.length+=N.objectMode?1:ve.length)}N.ended=!0,N.sync?E(x):(N.needReadable=!1,N.emittedReadable=!0,D(x))}}function E(x){const N=x._readableState;y("emitReadable",N.needReadable,N.emittedReadable),N.needReadable=!1,N.emittedReadable||(y("emitReadable",N.flowing),N.emittedReadable=!0,r.nextTick(D,x))}function D(x){const N=x._readableState;y("emitReadable_",N.destroyed,N.length,N.ended),!N.destroyed&&!N.errored&&(N.length||N.ended)&&(x.emit("readable"),N.emittedReadable=!1),N.needReadable=!N.flowing&&!N.ended&&N.length<=N.highWaterMark,Ce(x)}function H(x,N){!N.readingMore&&N.constructed&&(N.readingMore=!0,r.nextTick(ie,x,N))}function ie(x,N){for(;!N.reading&&!N.ended&&(N.length<N.highWaterMark||N.flowing&&N.length===0);){const ve=N.length;if(y("maybeReadMore read 0"),x.read(0),ve===N.length)break}N.readingMore=!1}se.prototype._read=function(x){throw new A("_read()")},se.prototype.pipe=function(x,N){const ve=this,we=this._readableState;we.pipes.length===1&&(we.multiAwaitDrain||(we.multiAwaitDrain=!0,we.awaitDrainWriters=new l(we.awaitDrainWriters?[we.awaitDrainWriters]:[]))),we.pipes.push(x),y("pipe count=%d opts=%j",we.pipes.length,N);const yt=(!N||N.end!==!1)&&x!==r.stdout&&x!==r.stderr?Hl:Wl;we.endEmitted?r.nextTick(yt):ve.once("end",yt),x.on("unpipe",Gt);function Gt(on,Jt){y("onunpipe"),on===ve&&Jt&&Jt.hasUnpiped===!1&&(Jt.hasUnpiped=!0,Fm())}function Hl(){y("onend"),x.end()}let an,vd=!1;function Fm(){y("cleanup"),x.removeListener("close",Kl),x.removeListener("finish",Od),an&&x.removeListener("drain",an),x.removeListener("error",Sd),x.removeListener("unpipe",Gt),ve.removeListener("end",Hl),ve.removeListener("end",Wl),ve.removeListener("data",wd),vd=!0,an&&we.awaitDrainWriters&&(!x._writableState||x._writableState.needDrain)&&an()}function jf(){vd||(we.pipes.length===1&&we.pipes[0]===x?(y("false write response, pause",0),we.awaitDrainWriters=x,we.multiAwaitDrain=!1):we.pipes.length>1&&we.pipes.includes(x)&&(y("false write response, pause",we.awaitDrainWriters.size),we.awaitDrainWriters.add(x)),ve.pause()),an||(an=de(ve,x),x.on("drain",an))}ve.on("data",wd);function wd(on){y("ondata");const Jt=x.write(on);y("dest.write",Jt),Jt===!1&&jf()}function Sd(on){if(y("onerror",on),Wl(),x.removeListener("error",Sd),x.listenerCount("error")===0){const Jt=x._writableState||x._readableState;Jt&&!Jt.errorEmitted?T(x,on):x.emit("error",on)}}p(x,"error",Sd);function Kl(){x.removeListener("finish",Od),Wl()}x.once("close",Kl);function Od(){y("onfinish"),x.removeListener("close",Kl),Wl()}x.once("finish",Od);function Wl(){y("unpipe"),ve.unpipe(x)}return x.emit("pipe",ve),x.writableNeedDrain===!0?jf():we.flowing||(y("pipe resume"),ve.resume()),x};function de(x,N){return function(){const we=x._readableState;we.awaitDrainWriters===N?(y("pipeOnDrain",1),we.awaitDrainWriters=null):we.multiAwaitDrain&&(y("pipeOnDrain",we.awaitDrainWriters.size),we.awaitDrainWriters.delete(N)),(!we.awaitDrainWriters||we.awaitDrainWriters.size===0)&&x.listenerCount("data")&&x.resume()}}se.prototype.unpipe=function(x){const N=this._readableState,ve={hasUnpiped:!1};if(N.pipes.length===0)return this;if(!x){const Re=N.pipes;N.pipes=[],this.pause();for(let yt=0;yt<Re.length;yt++)Re[yt].emit("unpipe",this,{hasUnpiped:!1});return this}const we=e(N.pipes,x);return we===-1?this:(N.pipes.splice(we,1),N.pipes.length===0&&this.pause(),x.emit("unpipe",this,ve),this)},se.prototype.on=function(x,N){const ve=m.prototype.on.call(this,x,N),we=this._readableState;return x==="data"?(we.readableListening=this.listenerCount("readable")>0,we.flowing!==!1&&this.resume()):x==="readable"&&!we.endEmitted&&!we.readableListening&&(we.readableListening=we.needReadable=!0,we.flowing=!1,we.emittedReadable=!1,y("on readable",we.length,we.reading),we.length?E(this):we.reading||r.nextTick(it,this)),ve},se.prototype.addListener=se.prototype.on,se.prototype.removeListener=function(x,N){const ve=m.prototype.removeListener.call(this,x,N);return x==="readable"&&r.nextTick(qe,this),ve},se.prototype.off=se.prototype.removeListener,se.prototype.removeAllListeners=function(x){const N=m.prototype.removeAllListeners.apply(this,arguments);return(x==="readable"||x===void 0)&&r.nextTick(qe,this),N};function qe(x){const N=x._readableState;N.readableListening=x.listenerCount("readable")>0,N.resumeScheduled&&N[Y]===!1?N.flowing=!0:x.listenerCount("data")>0?x.resume():N.readableListening||(N.flowing=null)}function it(x){y("readable nexttick read 0"),x.read(0)}se.prototype.resume=function(){const x=this._readableState;return x.flowing||(y("resume"),x.flowing=!x.readableListening,X(this,x)),x[Y]=!1,this};function X(x,N){N.resumeScheduled||(N.resumeScheduled=!0,r.nextTick(Q,x,N))}function Q(x,N){y("resume",N.reading),N.reading||x.read(0),N.resumeScheduled=!1,x.emit("resume"),Ce(x),N.flowing&&!N.reading&&x.read(0)}se.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Y]=!0,this};function Ce(x){const N=x._readableState;for(y("flow",N.flowing);N.flowing&&x.read()!==null;);}se.prototype.wrap=function(x){let N=!1;x.on("data",we=>{!this.push(we)&&x.pause&&(N=!0,x.pause())}),x.on("end",()=>{this.push(null)}),x.on("error",we=>{T(this,we)}),x.on("close",()=>{this.destroy()}),x.on("destroy",()=>{this.destroy()}),this._read=()=>{N&&x.resume&&(N=!1,x.resume())};const ve=o(x);for(let we=1;we<ve.length;we++){const Re=ve[we];this[Re]===void 0&&typeof x[Re]=="function"&&(this[Re]=x[Re].bind(x))}return this},se.prototype[d]=function(){return at(this)},se.prototype.iterator=function(x){return x!==void 0&&W(x,"options"),at(this,x)};function at(x,N){typeof x.read!="function"&&(x=se.wrap(x,{objectMode:!0}));const ve=dt(x,N);return ve.stream=x,ve}async function*dt(x,N){let ve=q;function we(Gt){this===x?(ve(),ve=q):ve=Gt}x.on("readable",we);let Re;const yt=_(x,{writable:!1},Gt=>{Re=Gt?P(Re,Gt):null,ve(),ve=q});try{for(;;){const Gt=x.destroyed?null:x.read();if(Gt!==null)yield Gt;else{if(Re)throw Re;if(Re===null)return;await new u(we)}}}catch(Gt){throw Re=P(Re,Gt),Re}finally{(Re||(N==null?void 0:N.destroyOnReturn)!==!1)&&(Re===void 0||x._readableState.autoDestroy)?w.destroyer(x,null):(x.off("readable",we),yt())}}a(se.prototype,{readable:{__proto__:null,get(){const x=this._readableState;return!!x&&x.readable!==!1&&!x.destroyed&&!x.errorEmitted&&!x.endEmitted},set(x){this._readableState&&(this._readableState.readable=!!x)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(x){this._readableState&&(this._readableState.flowing=x)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(x){this._readableState&&(this._readableState.destroyed=x)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(he.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Y]!==!1},set(x){this[Y]=!!x}}}),se._fromList=Fe;function Fe(x,N){if(N.length===0)return null;let ve;return N.objectMode?ve=N.buffer.shift():!x||x>=N.length?(N.decoder?ve=N.buffer.join(""):N.buffer.length===1?ve=N.buffer.first():ve=N.buffer.concat(N.length),N.buffer.clear()):ve=N.buffer.consume(x,N.decoder),ve}function Kr(x){const N=x._readableState;y("endReadable",N.endEmitted),N.endEmitted||(N.ended=!0,r.nextTick(Uu,N,x))}function Uu(x,N){if(y("endReadableNT",x.endEmitted,x.length),!x.errored&&!x.closeEmitted&&!x.endEmitted&&x.length===0){if(x.endEmitted=!0,N.emit("end"),N.writable&&N.allowHalfOpen===!1)r.nextTick(tr,N);else if(x.autoDestroy){const ve=N._writableState;(!ve||ve.autoDestroy&&(ve.finished||ve.writable===!1))&&N.destroy()}}}function tr(x){x.writable&&!x.writableEnded&&!x.destroyed&&x.end()}se.from=function(x,N){return I(se,x,N)};let Wr;function yd(){return Wr===void 0&&(Wr={}),Wr}return se.fromWeb=function(x,N){return yd().newStreamReadableFromReadableStream(x,N)},se.toWeb=function(x,N){return yd().newReadableStreamFromStreamReadable(x,N)},se.wrap=function(x,N){var ve,we;return new se({objectMode:(ve=(we=x.readableObjectMode)!==null&&we!==void 0?we:x.objectMode)!==null&&ve!==void 0?ve:!0,...N,destroy(Re,yt){w.destroyer(x,Re),yt(Re)}}).wrap(x)},DO}var $O,dq;function VP(){if(dq)return $O;dq=1;const r=gd(),{ArrayPrototypeSlice:e,Error:t,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:a,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:u,SymbolHasInstance:l}=_t();$O=W,W.WritableState=U;const{EventEmitter:c}=bb(),d=kP().Stream,{Buffer:h}=Ul(),f=Ef(),{addAbortSignal:m}=yb(),{getHighWaterMark:p,getDefaultHighWaterMark:g}=vb(),{ERR_INVALID_ARG_TYPE:b,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:y,ERR_STREAM_CANNOT_PIPE:v,ERR_STREAM_DESTROYED:w,ERR_STREAM_ALREADY_FINISHED:S,ERR_STREAM_NULL_VALUES:R,ERR_STREAM_WRITE_AFTER_END:P,ERR_UNKNOWN_ENCODING:C}=mr().codes,{errorOrDestroy:A}=f;o(W.prototype,d.prototype),o(W,d);function M(){}const G=u("kOnFinished");function U(B,k,ae){typeof ae!="boolean"&&(ae=k instanceof il()),this.objectMode=!!(B&&B.objectMode),ae&&(this.objectMode=this.objectMode||!!(B&&B.writableObjectMode)),this.highWaterMark=B?p(this,B,"writableHighWaterMark",ae):g(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const me=!!(B&&B.decodeStrings===!1);this.decodeStrings=!me,this.defaultEncoding=B&&B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=T.bind(void 0,k),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,z(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!B||B.emitClose!==!1,this.autoDestroy=!B||B.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[G]=[]}function z(B){B.buffered=[],B.bufferedIndex=0,B.allBuffers=!0,B.allNoop=!0}U.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},i(U.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function W(B){const k=this instanceof il();if(!k&&!n(W,this))return new W(B);this._writableState=new U(B,this,k),B&&(typeof B.write=="function"&&(this._write=B.write),typeof B.writev=="function"&&(this._writev=B.writev),typeof B.destroy=="function"&&(this._destroy=B.destroy),typeof B.final=="function"&&(this._final=B.final),typeof B.construct=="function"&&(this._construct=B.construct),B.signal&&m(B.signal,this)),d.call(this,B),f.construct(this,()=>{const ae=this._writableState;ae.writing||fe(this,ae),F(this,ae)})}i(W,l,{__proto__:null,value:function(B){return n(this,B)?!0:this!==W?!1:B&&B._writableState instanceof U}}),W.prototype.pipe=function(){A(this,new v)};function Y(B,k,ae,me){const pe=B._writableState;if(typeof ae=="function")me=ae,ae=pe.defaultEncoding;else{if(!ae)ae=pe.defaultEncoding;else if(ae!=="buffer"&&!h.isEncoding(ae))throw new C(ae);typeof me!="function"&&(me=M)}if(k===null)throw new R;if(!pe.objectMode)if(typeof k=="string")pe.decodeStrings!==!1&&(k=h.from(k,ae),ae="buffer");else if(k instanceof h)ae="buffer";else if(d._isUint8Array(k))k=d._uint8ArrayToBuffer(k),ae="buffer";else throw new b("chunk",["string","Buffer","Uint8Array"],k);let ge;return pe.ending?ge=new P:pe.destroyed&&(ge=new w("write")),ge?(r.nextTick(me,ge),A(B,ge,!0),ge):(pe.pendingcb++,oe(B,pe,k,ae,me))}W.prototype.write=function(B,k,ae){return Y(this,B,k,ae)===!0},W.prototype.cork=function(){this._writableState.corked++},W.prototype.uncork=function(){const B=this._writableState;B.corked&&(B.corked--,B.writing||fe(this,B))},W.prototype.setDefaultEncoding=function(k){if(typeof k=="string"&&(k=s(k)),!h.isEncoding(k))throw new C(k);return this._writableState.defaultEncoding=k,this};function oe(B,k,ae,me,pe){const ge=k.objectMode?1:ae.length;k.length+=ge;const K=k.length<k.highWaterMark;return K||(k.needDrain=!0),k.writing||k.corked||k.errored||!k.constructed?(k.buffered.push({chunk:ae,encoding:me,callback:pe}),k.allBuffers&&me!=="buffer"&&(k.allBuffers=!1),k.allNoop&&pe!==M&&(k.allNoop=!1)):(k.writelen=ge,k.writecb=pe,k.writing=!0,k.sync=!0,B._write(ae,me,k.onwrite),k.sync=!1),K&&!k.errored&&!k.destroyed}function I(B,k,ae,me,pe,ge,K){k.writelen=me,k.writecb=K,k.writing=!0,k.sync=!0,k.destroyed?k.onwrite(new w("write")):ae?B._writev(pe,k.onwrite):B._write(pe,ge,k.onwrite),k.sync=!1}function q(B,k,ae,me){--k.pendingcb,me(ae),Z(k),A(B,ae)}function T(B,k){const ae=B._writableState,me=ae.sync,pe=ae.writecb;if(typeof pe!="function"){A(B,new y);return}ae.writing=!1,ae.writecb=null,ae.length-=ae.writelen,ae.writelen=0,k?(k.stack,ae.errored||(ae.errored=k),B._readableState&&!B._readableState.errored&&(B._readableState.errored=k),me?r.nextTick(q,B,ae,k,pe):q(B,ae,k,pe)):(ae.buffered.length>ae.bufferedIndex&&fe(B,ae),me?ae.afterWriteTickInfo!==null&&ae.afterWriteTickInfo.cb===pe?ae.afterWriteTickInfo.count++:(ae.afterWriteTickInfo={count:1,cb:pe,stream:B,state:ae},r.nextTick(V,ae.afterWriteTickInfo)):re(B,ae,1,pe))}function V({stream:B,state:k,count:ae,cb:me}){return k.afterWriteTickInfo=null,re(B,k,ae,me)}function re(B,k,ae,me){for(!k.ending&&!B.destroyed&&k.length===0&&k.needDrain&&(k.needDrain=!1,B.emit("drain"));ae-- >0;)k.pendingcb--,me();k.destroyed&&Z(k),F(B,k)}function Z(B){if(B.writing)return;for(let pe=B.bufferedIndex;pe<B.buffered.length;++pe){var k;const{chunk:ge,callback:K}=B.buffered[pe],le=B.objectMode?1:ge.length;B.length-=le,K((k=B.errored)!==null&&k!==void 0?k:new w("write"))}const ae=B[G].splice(0);for(let pe=0;pe<ae.length;pe++){var me;ae[pe]((me=B.errored)!==null&&me!==void 0?me:new w("end"))}z(B)}function fe(B,k){if(k.corked||k.bufferProcessing||k.destroyed||!k.constructed)return;const{buffered:ae,bufferedIndex:me,objectMode:pe}=k,ge=ae.length-me;if(!ge)return;let K=me;if(k.bufferProcessing=!0,ge>1&&B._writev){k.pendingcb-=ge-1;const le=k.allNoop?M:se=>{for(let ze=K;ze<ae.length;++ze)ae[ze].callback(se)},he=k.allNoop&&K===0?ae:e(ae,K);he.allBuffers=k.allBuffers,I(B,k,!0,k.length,he,"",le),z(k)}else{do{const{chunk:le,encoding:he,callback:se}=ae[K];ae[K++]=null;const ze=pe?1:le.length;I(B,k,!1,ze,le,he,se)}while(K<ae.length&&!k.writing);K===ae.length?z(k):K>256?(ae.splice(0,K),k.bufferedIndex=0):k.bufferedIndex=K}k.bufferProcessing=!1}W.prototype._write=function(B,k,ae){if(this._writev)this._writev([{chunk:B,encoding:k}],ae);else throw new _("_write()")},W.prototype._writev=null,W.prototype.end=function(B,k,ae){const me=this._writableState;typeof B=="function"?(ae=B,B=null,k=null):typeof k=="function"&&(ae=k,k=null);let pe;if(B!=null){const ge=Y(this,B,k);ge instanceof t&&(pe=ge)}return me.corked&&(me.corked=1,this.uncork()),pe||(!me.errored&&!me.ending?(me.ending=!0,F(this,me,!0),me.ended=!0):me.finished?pe=new S("end"):me.destroyed&&(pe=new w("end"))),typeof ae=="function"&&(pe||me.finished?r.nextTick(ae,pe):me[G].push(ae)),this};function _e(B){return B.ending&&!B.destroyed&&B.constructed&&B.length===0&&!B.errored&&B.buffered.length===0&&!B.finished&&!B.writing&&!B.errorEmitted&&!B.closeEmitted}function Se(B,k){let ae=!1;function me(pe){if(ae){A(B,pe??y());return}if(ae=!0,k.pendingcb--,pe){const ge=k[G].splice(0);for(let K=0;K<ge.length;K++)ge[K](pe);A(B,pe,k.sync)}else _e(k)&&(k.prefinished=!0,B.emit("prefinish"),k.pendingcb++,r.nextTick(ee,B,k))}k.sync=!0,k.pendingcb++;try{B._final(me)}catch(pe){me(pe)}k.sync=!1}function J(B,k){!k.prefinished&&!k.finalCalled&&(typeof B._final=="function"&&!k.destroyed?(k.finalCalled=!0,Se(B,k)):(k.prefinished=!0,B.emit("prefinish")))}function F(B,k,ae){_e(k)&&(J(B,k),k.pendingcb===0&&(ae?(k.pendingcb++,r.nextTick((me,pe)=>{_e(pe)?ee(me,pe):pe.pendingcb--},B,k)):_e(k)&&(k.pendingcb++,ee(B,k))))}function ee(B,k){k.pendingcb--,k.finished=!0;const ae=k[G].splice(0);for(let me=0;me<ae.length;me++)ae[me]();if(B.emit("finish"),k.autoDestroy){const me=B._readableState;(!me||me.autoDestroy&&(me.endEmitted||me.readable===!1))&&B.destroy()}}a(W.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(B){this._writableState&&(this._writableState.destroyed=B)}},writable:{__proto__:null,get(){const B=this._writableState;return!!B&&B.writable!==!1&&!B.destroyed&&!B.errored&&!B.ending&&!B.ended},set(B){this._writableState&&(this._writableState.writable=!!B)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const B=this._writableState;return B?!B.destroyed&&!B.ending&&B.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const L=f.destroy;W.prototype.destroy=function(B,k){const ae=this._writableState;return!ae.destroyed&&(ae.bufferedIndex<ae.buffered.length||ae[G].length)&&r.nextTick(Z,ae),L.call(this,B,k),this},W.prototype._undestroy=f.undestroy,W.prototype._destroy=function(B,k){k(B)},W.prototype[c.captureRejectionSymbol]=function(B){this.destroy(B)};let te;function ne(){return te===void 0&&(te={}),te}return W.fromWeb=function(B,k){return ne().newStreamWritableFromWritableStream(B,k)},W.toWeb=function(B){return ne().newWritableStreamFromStreamWritable(B)},$O}var NO,fq;function pce(){if(fq)return NO;fq=1;const r=gd(),e=Ul(),{isReadable:t,isWritable:n,isIterable:i,isNodeStream:a,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:u,isReadableStream:l,isWritableStream:c}=ol(),d=zl(),{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:m}}=mr(),{destroyer:p}=Ef(),g=il(),b=wb(),_=VP(),{createDeferredPromise:y}=Sr(),v=Y8(),w=globalThis.Blob||e.Blob,S=typeof w<"u"?function(U){return U instanceof w}:function(U){return!1},R=globalThis.AbortController||fm().AbortController,{FunctionPrototypeCall:P}=_t();class C extends g{constructor(U){super(U),(U==null?void 0:U.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(U==null?void 0:U.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}NO=function G(U,z){if(u(U))return U;if(o(U))return M({readable:U});if(s(U))return M({writable:U});if(a(U))return M({writable:!1,readable:!1});if(l(U))return M({readable:b.fromWeb(U)});if(c(U))return M({writable:_.fromWeb(U)});if(typeof U=="function"){const{value:Y,write:oe,final:I,destroy:q}=A(U);if(i(Y))return v(C,Y,{objectMode:!0,write:oe,final:I,destroy:q});const T=Y==null?void 0:Y.then;if(typeof T=="function"){let V;const re=P(T,Y,Z=>{if(Z!=null)throw new m("nully","body",Z)},Z=>{p(V,Z)});return V=new C({objectMode:!0,readable:!1,write:oe,final(Z){I(async()=>{try{await re,r.nextTick(Z,null)}catch(fe){r.nextTick(Z,fe)}})},destroy:q})}throw new m("Iterable, AsyncIterable or AsyncFunction",z,Y)}if(S(U))return G(U.arrayBuffer());if(i(U))return v(C,U,{objectMode:!0,writable:!1});if(l(U==null?void 0:U.readable)&&c(U==null?void 0:U.writable))return C.fromWeb(U);if(typeof(U==null?void 0:U.writable)=="object"||typeof(U==null?void 0:U.readable)=="object"){const Y=U!=null&&U.readable?o(U==null?void 0:U.readable)?U==null?void 0:U.readable:G(U.readable):void 0,oe=U!=null&&U.writable?s(U==null?void 0:U.writable)?U==null?void 0:U.writable:G(U.writable):void 0;return M({readable:Y,writable:oe})}const W=U==null?void 0:U.then;if(typeof W=="function"){let Y;return P(W,U,oe=>{oe!=null&&Y.push(oe),Y.push(null)},oe=>{p(Y,oe)}),Y=new C({objectMode:!0,writable:!1,read(){}})}throw new f(z,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],U)};function A(G){let{promise:U,resolve:z}=y();const W=new R,Y=W.signal;return{value:G(async function*(){for(;;){const I=U;U=null;const{chunk:q,done:T,cb:V}=await I;if(r.nextTick(V),T)return;if(Y.aborted)throw new h(void 0,{cause:Y.reason});({promise:U,resolve:z}=y()),yield q}}(),{signal:Y}),write(I,q,T){const V=z;z=null,V({chunk:I,done:!1,cb:T})},final(I){const q=z;z=null,q({done:!0,cb:I})},destroy(I,q){W.abort(),q(I)}}}function M(G){const U=G.readable&&typeof G.readable.read!="function"?b.wrap(G.readable):G.readable,z=G.writable;let W=!!t(U),Y=!!n(z),oe,I,q,T,V;function re(Z){const fe=T;T=null,fe?fe(Z):Z&&V.destroy(Z)}return V=new C({readableObjectMode:!!(U!=null&&U.readableObjectMode),writableObjectMode:!!(z!=null&&z.writableObjectMode),readable:W,writable:Y}),Y&&(d(z,Z=>{Y=!1,Z&&p(U,Z),re(Z)}),V._write=function(Z,fe,_e){z.write(Z,fe)?_e():oe=_e},V._final=function(Z){z.end(),I=Z},z.on("drain",function(){if(oe){const Z=oe;oe=null,Z()}}),z.on("finish",function(){if(I){const Z=I;I=null,Z()}})),W&&(d(U,Z=>{W=!1,Z&&p(U,Z),re(Z)}),U.on("readable",function(){if(q){const Z=q;q=null,Z()}}),U.on("end",function(){V.push(null)}),V._read=function(){for(;;){const Z=U.read();if(Z===null){q=V._read;return}if(!V.push(Z))return}}),V._destroy=function(Z,fe){!Z&&T!==null&&(Z=new h),q=null,oe=null,I=null,T===null?fe(Z):(T=fe,p(z,Z),p(U,Z))},V}return NO}var qO,pq;function il(){if(pq)return qO;pq=1;const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:t,ObjectSetPrototypeOf:n}=_t();qO=o;const i=wb(),a=VP();n(o.prototype,i.prototype),n(o,i);{const c=t(a.prototype);for(let d=0;d<c.length;d++){const h=c[d];o.prototype[h]||(o.prototype[h]=a.prototype[h])}}function o(c){if(!(this instanceof o))return new o(c);i.call(this,c),a.call(this,c),c?(this.allowHalfOpen=c.allowHalfOpen!==!1,c.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),c.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(o.prototype,{writable:{__proto__:null,...e(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(a.prototype,"writableLength")},writableFinished:{__proto__:null,...e(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(c){this._readableState&&this._writableState&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}}});let s;function u(){return s===void 0&&(s={}),s}o.fromWeb=function(c,d){return u().newStreamDuplexFromReadableWritablePair(c,d)},o.toWeb=function(c){return u().newReadableWritablePairFromDuplex(c)};let l;return o.from=function(c){return l||(l=pce()),l(c,"body")},qO}var BO,hq;function eH(){if(hq)return BO;hq=1;const{ObjectSetPrototypeOf:r,Symbol:e}=_t();BO=o;const{ERR_METHOD_NOT_IMPLEMENTED:t}=mr().codes,n=il(),{getHighWaterMark:i}=vb();r(o.prototype,n.prototype),r(o,n);const a=e("kCallback");function o(l){if(!(this instanceof o))return new o(l);const c=l?i(this,l,"readableHighWaterMark",!0):null;c===0&&(l={...l,highWaterMark:null,readableHighWaterMark:c,writableHighWaterMark:l.writableHighWaterMark||0}),n.call(this,l),this._readableState.sync=!1,this[a]=null,l&&(typeof l.transform=="function"&&(this._transform=l.transform),typeof l.flush=="function"&&(this._flush=l.flush)),this.on("prefinish",u)}function s(l){typeof this._flush=="function"&&!this.destroyed?this._flush((c,d)=>{if(c){l?l(c):this.destroy(c);return}d!=null&&this.push(d),this.push(null),l&&l()}):(this.push(null),l&&l())}function u(){this._final!==s&&s.call(this)}return o.prototype._final=s,o.prototype._transform=function(l,c,d){throw new t("_transform()")},o.prototype._write=function(l,c,d){const h=this._readableState,f=this._writableState,m=h.length;this._transform(l,c,(p,g)=>{if(p){d(p);return}g!=null&&this.push(g),f.ended||m===h.length||h.length<h.highWaterMark?d():this[a]=d})},o.prototype._read=function(){if(this[a]){const l=this[a];this[a]=null,l()}},BO}var UO,mq;function tH(){if(mq)return UO;mq=1;const{ObjectSetPrototypeOf:r}=_t();UO=t;const e=eH();r(t.prototype,e.prototype),r(t,e);function t(n){if(!(this instanceof t))return new t(n);e.call(this,n)}return t.prototype._transform=function(n,i,a){a(null,n)},UO}var zO,gq;function HP(){if(gq)return zO;gq=1;const r=gd(),{ArrayIsArray:e,Promise:t,SymbolAsyncIterator:n,SymbolDispose:i}=_t(),a=zl(),{once:o}=Sr(),s=Ef(),u=il(),{aggregateTwoErrors:l,codes:{ERR_INVALID_ARG_TYPE:c,ERR_INVALID_RETURN_VALUE:d,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:f,ERR_STREAM_PREMATURE_CLOSE:m},AbortError:p}=mr(),{validateFunction:g,validateAbortSignal:b}=$m(),{isIterable:_,isReadable:y,isReadableNodeStream:v,isNodeStream:w,isTransformStream:S,isWebStream:R,isReadableStream:P,isReadableFinished:C}=ol(),A=globalThis.AbortController||fm().AbortController;let M,G,U;function z(Z,fe,_e){let Se=!1;Z.on("close",()=>{Se=!0});const J=a(Z,{readable:fe,writable:_e},F=>{Se=!F});return{destroy:F=>{Se||(Se=!0,s.destroyer(Z,F||new f("pipe")))},cleanup:J}}function W(Z){return g(Z[Z.length-1],"streams[stream.length - 1]"),Z.pop()}function Y(Z){if(_(Z))return Z;if(v(Z))return oe(Z);throw new c("val",["Readable","Iterable","AsyncIterable"],Z)}async function*oe(Z){G||(G=wb()),yield*G.prototype[n].call(Z)}async function I(Z,fe,_e,{end:Se}){let J,F=null;const ee=ne=>{if(ne&&(J=ne),F){const B=F;F=null,B()}},L=()=>new t((ne,B)=>{J?B(J):F=()=>{J?B(J):ne()}});fe.on("drain",ee);const te=a(fe,{readable:!1},ee);try{fe.writableNeedDrain&&await L();for await(const ne of Z)fe.write(ne)||await L();Se&&(fe.end(),await L()),_e()}catch(ne){_e(J!==ne?l(J,ne):ne)}finally{te(),fe.off("drain",ee)}}async function q(Z,fe,_e,{end:Se}){S(fe)&&(fe=fe.writable);const J=fe.getWriter();try{for await(const F of Z)await J.ready,J.write(F).catch(()=>{});await J.ready,Se&&await J.close(),_e()}catch(F){try{await J.abort(F),_e(F)}catch(ee){_e(ee)}}}function T(...Z){return V(Z,o(W(Z)))}function V(Z,fe,_e){if(Z.length===1&&e(Z[0])&&(Z=Z[0]),Z.length<2)throw new h("streams");const Se=new A,J=Se.signal,F=_e==null?void 0:_e.signal,ee=[];b(F,"options.signal");function L(){pe(new p)}U=U||Sr().addAbortListener;let te;F&&(te=U(F,L));let ne,B;const k=[];let ae=0;function me(he){pe(he,--ae===0)}function pe(he,se){var ze;if(he&&(!ne||ne.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ne=he),!(!ne&&!se)){for(;k.length;)k.shift()(ne);(ze=te)===null||ze===void 0||ze[i](),Se.abort(),se&&(ne||ee.forEach(ht=>ht()),r.nextTick(fe,ne,B))}}let ge;for(let he=0;he<Z.length;he++){const se=Z[he],ze=he<Z.length-1,ht=he>0,He=ze||(_e==null?void 0:_e.end)!==!1,Lt=he===Z.length-1;if(w(se)){let j=function(O){O&&O.name!=="AbortError"&&O.code!=="ERR_STREAM_PREMATURE_CLOSE"&&me(O)};if(He){const{destroy:O,cleanup:E}=z(se,ze,ht);k.push(O),y(se)&&Lt&&ee.push(E)}se.on("error",j),y(se)&&Lt&&ee.push(()=>{se.removeListener("error",j)})}if(he===0)if(typeof se=="function"){if(ge=se({signal:J}),!_(ge))throw new d("Iterable, AsyncIterable or Stream","source",ge)}else _(se)||v(se)||S(se)?ge=se:ge=u.from(se);else if(typeof se=="function"){if(S(ge)){var K;ge=Y((K=ge)===null||K===void 0?void 0:K.readable)}else ge=Y(ge);if(ge=se(ge,{signal:J}),ze){if(!_(ge,!0))throw new d("AsyncIterable",`transform[${he-1}]`,ge)}else{var le;M||(M=tH());const j=new M({objectMode:!0}),O=(le=ge)===null||le===void 0?void 0:le.then;if(typeof O=="function")ae++,O.call(ge,H=>{B=H,H!=null&&j.write(H),He&&j.end(),r.nextTick(me)},H=>{j.destroy(H),r.nextTick(me,H)});else if(_(ge,!0))ae++,I(ge,j,me,{end:He});else if(P(ge)||S(ge)){const H=ge.readable||ge;ae++,I(H,j,me,{end:He})}else throw new d("AsyncIterable or Promise","destination",ge);ge=j;const{destroy:E,cleanup:D}=z(ge,!1,!0);k.push(E),Lt&&ee.push(D)}}else if(w(se)){if(v(ge)){ae+=2;const j=re(ge,se,me,{end:He});y(se)&&Lt&&ee.push(j)}else if(S(ge)||P(ge)){const j=ge.readable||ge;ae++,I(j,se,me,{end:He})}else if(_(ge))ae++,I(ge,se,me,{end:He});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ge);ge=se}else if(R(se)){if(v(ge))ae++,q(Y(ge),se,me,{end:He});else if(P(ge)||_(ge))ae++,q(ge,se,me,{end:He});else if(S(ge))ae++,q(ge.readable,se,me,{end:He});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ge);ge=se}else ge=u.from(se)}return(J!=null&&J.aborted||F!=null&&F.aborted)&&r.nextTick(L),ge}function re(Z,fe,_e,{end:Se}){let J=!1;if(fe.on("close",()=>{J||_e(new m)}),Z.pipe(fe,{end:!1}),Se){let F=function(){J=!0,fe.end()};C(Z)?r.nextTick(F):Z.once("end",F)}else _e();return a(Z,{readable:!0,writable:!1},F=>{const ee=Z._readableState;F&&F.code==="ERR_STREAM_PREMATURE_CLOSE"&&ee&&ee.ended&&!ee.errored&&!ee.errorEmitted?Z.once("end",_e).once("error",_e):_e(F)}),a(fe,{readable:!1,writable:!0},_e)}return zO={pipelineImpl:V,pipeline:T},zO}var LO,_q;function rH(){if(_q)return LO;_q=1;const{pipeline:r}=HP(),e=il(),{destroyer:t}=Ef(),{isNodeStream:n,isReadable:i,isWritable:a,isWebStream:o,isTransformStream:s,isWritableStream:u,isReadableStream:l}=ol(),{AbortError:c,codes:{ERR_INVALID_ARG_VALUE:d,ERR_MISSING_ARGS:h}}=mr(),f=zl();return LO=function(...p){if(p.length===0)throw new h("streams");if(p.length===1)return e.from(p[0]);const g=[...p];if(typeof p[0]=="function"&&(p[0]=e.from(p[0])),typeof p[p.length-1]=="function"){const M=p.length-1;p[M]=e.from(p[M])}for(let M=0;M<p.length;++M)if(!(!n(p[M])&&!o(p[M]))){if(M<p.length-1&&!(i(p[M])||l(p[M])||s(p[M])))throw new d(`streams[${M}]`,g[M],"must be readable");if(M>0&&!(a(p[M])||u(p[M])||s(p[M])))throw new d(`streams[${M}]`,g[M],"must be writable")}let b,_,y,v,w;function S(M){const G=v;v=null,G?G(M):M?w.destroy(M):!A&&!C&&w.destroy()}const R=p[0],P=r(p,S),C=!!(a(R)||u(R)||s(R)),A=!!(i(P)||l(P)||s(P));if(w=new e({writableObjectMode:!!(R!=null&&R.writableObjectMode),readableObjectMode:!!(P!=null&&P.readableObjectMode),writable:C,readable:A}),C){if(n(R))w._write=function(G,U,z){R.write(G,U)?z():b=z},w._final=function(G){R.end(),_=G},R.on("drain",function(){if(b){const G=b;b=null,G()}});else if(o(R)){const U=(s(R)?R.writable:R).getWriter();w._write=async function(z,W,Y){try{await U.ready,U.write(z).catch(()=>{}),Y()}catch(oe){Y(oe)}},w._final=async function(z){try{await U.ready,U.close().catch(()=>{}),_=z}catch(W){z(W)}}}const M=s(P)?P.readable:P;f(M,()=>{if(_){const G=_;_=null,G()}})}if(A){if(n(P))P.on("readable",function(){if(y){const M=y;y=null,M()}}),P.on("end",function(){w.push(null)}),w._read=function(){for(;;){const M=P.read();if(M===null){y=w._read;return}if(!w.push(M))return}};else if(o(P)){const G=(s(P)?P.readable:P).getReader();w._read=async function(){for(;;)try{const{value:U,done:z}=await G.read();if(!w.push(U))return;if(z){w.push(null);return}}catch{return}}}}return w._destroy=function(M,G){!M&&v!==null&&(M=new c),y=null,b=null,_=null,v===null?G(M):(v=G,n(P)&&t(P,M))},w},LO}var bq;function hce(){if(bq)return Mg;bq=1;const r=globalThis.AbortController||fm().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:t,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:i},AbortError:a}=mr(),{validateAbortSignal:o,validateInteger:s,validateObject:u}=$m(),l=_t().Symbol("kWeak"),c=_t().Symbol("kResistStopPropagation"),{finished:d}=zl(),h=rH(),{addAbortSignalNoValidate:f}=yb(),{isWritable:m,isNodeStream:p}=ol(),{deprecate:g}=Sr(),{ArrayPrototypePush:b,Boolean:_,MathFloor:y,Number:v,NumberIsNaN:w,Promise:S,PromiseReject:R,PromiseResolve:P,PromisePrototypeThen:C,Symbol:A}=_t(),M=A("kEmpty"),G=A("kEof");function U(F,ee){if(ee!=null&&u(ee,"options"),(ee==null?void 0:ee.signal)!=null&&o(ee.signal,"options.signal"),p(F)&&!m(F))throw new e("stream",F,"must be writable");const L=h(this,F);return ee!=null&&ee.signal&&f(ee.signal,L),L}function z(F,ee){if(typeof F!="function")throw new t("fn",["Function","AsyncFunction"],F);ee!=null&&u(ee,"options"),(ee==null?void 0:ee.signal)!=null&&o(ee.signal,"options.signal");let L=1;(ee==null?void 0:ee.concurrency)!=null&&(L=y(ee.concurrency));let te=L-1;return(ee==null?void 0:ee.highWaterMark)!=null&&(te=y(ee.highWaterMark)),s(L,"options.concurrency",1),s(te,"options.highWaterMark",0),te+=L,(async function*(){const B=Sr().AbortSignalAny([ee==null?void 0:ee.signal].filter(_)),k=this,ae=[],me={signal:B};let pe,ge,K=!1,le=0;function he(){K=!0,se()}function se(){le-=1,ze()}function ze(){ge&&!K&&le<L&&ae.length<te&&(ge(),ge=null)}async function ht(){try{for await(let He of k){if(K)return;if(B.aborted)throw new a;try{if(He=F(He,me),He===M)continue;He=P(He)}catch(Lt){He=R(Lt)}le+=1,C(He,se,he),ae.push(He),pe&&(pe(),pe=null),!K&&(ae.length>=te||le>=L)&&await new S(Lt=>{ge=Lt})}ae.push(G)}catch(He){const Lt=R(He);C(Lt,se,he),ae.push(Lt)}finally{K=!0,pe&&(pe(),pe=null)}}ht();try{for(;;){for(;ae.length>0;){const He=await ae[0];if(He===G)return;if(B.aborted)throw new a;He!==M&&(yield He),ae.shift(),ze()}await new S(He=>{pe=He})}}finally{K=!0,ge&&(ge(),ge=null)}}).call(this)}function W(F=void 0){return F!=null&&u(F,"options"),(F==null?void 0:F.signal)!=null&&o(F.signal,"options.signal"),(async function*(){let L=0;for await(const ne of this){var te;if(F!=null&&(te=F.signal)!==null&&te!==void 0&&te.aborted)throw new a({cause:F.signal.reason});yield[L++,ne]}}).call(this)}async function Y(F,ee=void 0){for await(const L of T.call(this,F,ee))return!0;return!1}async function oe(F,ee=void 0){if(typeof F!="function")throw new t("fn",["Function","AsyncFunction"],F);return!await Y.call(this,async(...L)=>!await F(...L),ee)}async function I(F,ee){for await(const L of T.call(this,F,ee))return L}async function q(F,ee){if(typeof F!="function")throw new t("fn",["Function","AsyncFunction"],F);async function L(te,ne){return await F(te,ne),M}for await(const te of z.call(this,L,ee));}function T(F,ee){if(typeof F!="function")throw new t("fn",["Function","AsyncFunction"],F);async function L(te,ne){return await F(te,ne)?te:M}return z.call(this,L,ee)}class V extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function re(F,ee,L){var te;if(typeof F!="function")throw new t("reducer",["Function","AsyncFunction"],F);L!=null&&u(L,"options"),(L==null?void 0:L.signal)!=null&&o(L.signal,"options.signal");let ne=arguments.length>1;if(L!=null&&(te=L.signal)!==null&&te!==void 0&&te.aborted){const pe=new a(void 0,{cause:L.signal.reason});throw this.once("error",()=>{}),await d(this.destroy(pe)),pe}const B=new r,k=B.signal;if(L!=null&&L.signal){const pe={once:!0,[l]:this,[c]:!0};L.signal.addEventListener("abort",()=>B.abort(),pe)}let ae=!1;try{for await(const pe of this){var me;if(ae=!0,L!=null&&(me=L.signal)!==null&&me!==void 0&&me.aborted)throw new a;ne?ee=await F(ee,pe,{signal:k}):(ee=pe,ne=!0)}if(!ae&&!ne)throw new V}finally{B.abort()}return ee}async function Z(F){F!=null&&u(F,"options"),(F==null?void 0:F.signal)!=null&&o(F.signal,"options.signal");const ee=[];for await(const te of this){var L;if(F!=null&&(L=F.signal)!==null&&L!==void 0&&L.aborted)throw new a(void 0,{cause:F.signal.reason});b(ee,te)}return ee}function fe(F,ee){const L=z.call(this,F,ee);return(async function*(){for await(const ne of L)yield*ne}).call(this)}function _e(F){if(F=v(F),w(F))return 0;if(F<0)throw new i("number",">= 0",F);return F}function Se(F,ee=void 0){return ee!=null&&u(ee,"options"),(ee==null?void 0:ee.signal)!=null&&o(ee.signal,"options.signal"),F=_e(F),(async function*(){var te;if(ee!=null&&(te=ee.signal)!==null&&te!==void 0&&te.aborted)throw new a;for await(const B of this){var ne;if(ee!=null&&(ne=ee.signal)!==null&&ne!==void 0&&ne.aborted)throw new a;F--<=0&&(yield B)}}).call(this)}function J(F,ee=void 0){return ee!=null&&u(ee,"options"),(ee==null?void 0:ee.signal)!=null&&o(ee.signal,"options.signal"),F=_e(F),(async function*(){var te;if(ee!=null&&(te=ee.signal)!==null&&te!==void 0&&te.aborted)throw new a;for await(const B of this){var ne;if(ee!=null&&(ne=ee.signal)!==null&&ne!==void 0&&ne.aborted)throw new a;if(F-- >0&&(yield B),F<=0)return}}).call(this)}return Mg.streamReturningOperators={asIndexedPairs:g(W,"readable.asIndexedPairs will be removed in a future version."),drop:Se,filter:T,flatMap:fe,map:z,take:J,compose:U},Mg.promiseReturningOperators={every:oe,forEach:q,reduce:re,toArray:Z,some:Y,find:I},Mg}var FO,yq;function nH(){if(yq)return FO;yq=1;const{ArrayPrototypePop:r,Promise:e}=_t(),{isIterable:t,isNodeStream:n,isWebStream:i}=ol(),{pipelineImpl:a}=HP(),{finished:o}=zl();iH();function s(...u){return new e((l,c)=>{let d,h;const f=u[u.length-1];if(f&&typeof f=="object"&&!n(f)&&!t(f)&&!i(f)){const m=r(u);d=m.signal,h=m.end}a(u,(m,p)=>{m?c(m):l(p)},{signal:d,end:h})})}return FO={finished:o,pipeline:s},FO}var vq;function iH(){if(vq)return bO.exports;vq=1;const{Buffer:r}=Ul(),{ObjectDefineProperty:e,ObjectKeys:t,ReflectApply:n}=_t(),{promisify:{custom:i}}=Sr(),{streamReturningOperators:a,promiseReturningOperators:o}=hce(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=mr(),u=rH(),{setDefaultHighWaterMark:l,getDefaultHighWaterMark:c}=vb(),{pipeline:d}=HP(),{destroyer:h}=Ef(),f=zl(),m=nH(),p=ol(),g=bO.exports=kP().Stream;g.isDestroyed=p.isDestroyed,g.isDisturbed=p.isDisturbed,g.isErrored=p.isErrored,g.isReadable=p.isReadable,g.isWritable=p.isWritable,g.Readable=wb();for(const _ of t(a)){let v=function(...w){if(new.target)throw s();return g.Readable.from(n(y,this,w))};const y=a[_];e(v,"name",{__proto__:null,value:y.name}),e(v,"length",{__proto__:null,value:y.length}),e(g.Readable.prototype,_,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}for(const _ of t(o)){let v=function(...w){if(new.target)throw s();return n(y,this,w)};const y=o[_];e(v,"name",{__proto__:null,value:y.name}),e(v,"length",{__proto__:null,value:y.length}),e(g.Readable.prototype,_,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}g.Writable=VP(),g.Duplex=il(),g.Transform=eH(),g.PassThrough=tH(),g.pipeline=d;const{addAbortSignal:b}=yb();return g.addAbortSignal=b,g.finished=f,g.destroy=h,g.compose=u,g.setDefaultHighWaterMark=l,g.getDefaultHighWaterMark=c,e(g,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return m}}),e(d,i,{__proto__:null,enumerable:!0,get(){return m.pipeline}}),e(f,i,{__proto__:null,enumerable:!0,get(){return m.finished}}),g.Stream=g,g._isUint8Array=function(y){return y instanceof Uint8Array},g._uint8ArrayToBuffer=function(y){return r.from(y.buffer,y.byteOffset,y.byteLength)},bO.exports}var wq;function Yg(){return wq||(wq=1,function(r){const e=iH(),t=nH(),n=e.Readable.destroy;r.exports=e.Readable,r.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,r.exports._isUint8Array=e._isUint8Array,r.exports.isDisturbed=e.isDisturbed,r.exports.isErrored=e.isErrored,r.exports.isReadable=e.isReadable,r.exports.Readable=e.Readable,r.exports.Writable=e.Writable,r.exports.Duplex=e.Duplex,r.exports.Transform=e.Transform,r.exports.PassThrough=e.PassThrough,r.exports.addAbortSignal=e.addAbortSignal,r.exports.finished=e.finished,r.exports.destroy=e.destroy,r.exports.destroy=n,r.exports.pipeline=e.pipeline,r.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return t}}),r.exports.Stream=e.Stream,r.exports.default=r.exports}(_O)),_O.exports}var Cn={},kO={},Hu={},bc={},VO,Sq;function Rf(){return Sq||(Sq=1,VO=TypeError),VO}const mce=pd($ue);var HO,Oq;function Sb(){if(Oq)return HO;Oq=1;var r=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=r&&e&&typeof e.get=="function"?e.get:null,n=r&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,a=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,o=i&&a&&typeof a.get=="function"?a.get:null,s=i&&Set.prototype.forEach,u=typeof WeakMap=="function"&&WeakMap.prototype,l=u?WeakMap.prototype.has:null,c=typeof WeakSet=="function"&&WeakSet.prototype,d=c?WeakSet.prototype.has:null,h=typeof WeakRef=="function"&&WeakRef.prototype,f=h?WeakRef.prototype.deref:null,m=Boolean.prototype.valueOf,p=Object.prototype.toString,g=Function.prototype.toString,b=String.prototype.match,_=String.prototype.slice,y=String.prototype.replace,v=String.prototype.toUpperCase,w=String.prototype.toLowerCase,S=RegExp.prototype.test,R=Array.prototype.concat,P=Array.prototype.join,C=Array.prototype.slice,A=Math.floor,M=typeof BigInt=="function"?BigInt.prototype.valueOf:null,G=Object.getOwnPropertySymbols,U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,z=typeof Symbol=="function"&&typeof Symbol.iterator=="object",W=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===z||!0)?Symbol.toStringTag:null,Y=Object.prototype.propertyIsEnumerable,oe=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(X){return X.__proto__}:null);function I(X,Q){if(X===1/0||X===-1/0||X!==X||X&&X>-1e3&&X<1e3||S.call(/e/,Q))return Q;var Ce=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof X=="number"){var at=X<0?-A(-X):A(X);if(at!==X){var dt=String(at),Fe=_.call(Q,dt.length+1);return y.call(dt,Ce,"$&_")+"."+y.call(y.call(Fe,/([0-9]{3})/g,"$&_"),/_$/,"")}}return y.call(Q,Ce,"$&_")}var q=mce,T=q.custom,V=k(T)?T:null,re={__proto__:null,double:'"',single:"'"},Z={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};HO=function X(Q,Ce,at,dt){var Fe=Ce||{};if(pe(Fe,"quoteStyle")&&!pe(re,Fe.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(pe(Fe,"maxStringLength")&&(typeof Fe.maxStringLength=="number"?Fe.maxStringLength<0&&Fe.maxStringLength!==1/0:Fe.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Kr=pe(Fe,"customInspect")?Fe.customInspect:!0;if(typeof Kr!="boolean"&&Kr!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(pe(Fe,"indent")&&Fe.indent!==null&&Fe.indent!=="	"&&!(parseInt(Fe.indent,10)===Fe.indent&&Fe.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(pe(Fe,"numericSeparator")&&typeof Fe.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Uu=Fe.numericSeparator;if(typeof Q>"u")return"undefined";if(Q===null)return"null";if(typeof Q=="boolean")return Q?"true":"false";if(typeof Q=="string")return j(Q,Fe);if(typeof Q=="number"){if(Q===0)return 1/0/Q>0?"0":"-0";var tr=String(Q);return Uu?I(Q,tr):tr}if(typeof Q=="bigint"){var Wr=String(Q)+"n";return Uu?I(Q,Wr):Wr}var yd=typeof Fe.depth>"u"?5:Fe.depth;if(typeof at>"u"&&(at=0),at>=yd&&yd>0&&typeof Q=="object")return J(Q)?"[Array]":"[Object]";var x=de(Fe,at);if(typeof dt>"u")dt=[];else if(le(dt,Q)>=0)return"[Circular]";function N(Jt,km,bW){if(km&&(dt=C.call(dt),dt.push(km)),bW){var j1={depth:Fe.depth};return pe(Fe,"quoteStyle")&&(j1.quoteStyle=Fe.quoteStyle),X(Jt,j1,at+1,dt)}return X(Jt,Fe,at+1,dt)}if(typeof Q=="function"&&!ee(Q)){var ve=K(Q),we=it(Q,N);return"[Function"+(ve?": "+ve:" (anonymous)")+"]"+(we.length>0?" { "+P.call(we,", ")+" }":"")}if(k(Q)){var Re=z?y.call(String(Q),/^(Symbol\(.*\))_[^)]*$/,"$1"):U.call(Q);return typeof Q=="object"&&!z?E(Re):Re}if(Lt(Q)){for(var yt="<"+w.call(String(Q.nodeName)),Gt=Q.attributes||[],Hl=0;Hl<Gt.length;Hl++)yt+=" "+Gt[Hl].name+"="+fe(_e(Gt[Hl].value),"double",Fe);return yt+=">",Q.childNodes&&Q.childNodes.length&&(yt+="..."),yt+="</"+w.call(String(Q.nodeName))+">",yt}if(J(Q)){if(Q.length===0)return"[]";var an=it(Q,N);return x&&!ie(an)?"["+qe(an,x)+"]":"[ "+P.call(an,", ")+" ]"}if(L(Q)){var vd=it(Q,N);return!("cause"in Error.prototype)&&"cause"in Q&&!Y.call(Q,"cause")?"{ ["+String(Q)+"] "+P.call(R.call("[cause]: "+N(Q.cause),vd),", ")+" }":vd.length===0?"["+String(Q)+"]":"{ ["+String(Q)+"] "+P.call(vd,", ")+" }"}if(typeof Q=="object"&&Kr){if(V&&typeof Q[V]=="function"&&q)return q(Q,{depth:yd-at});if(Kr!=="symbol"&&typeof Q.inspect=="function")return Q.inspect()}if(he(Q)){var Fm=[];return n&&n.call(Q,function(Jt,km){Fm.push(N(km,Q,!0)+" => "+N(Jt,Q))}),H("Map",t.call(Q),Fm,x)}if(ht(Q)){var jf=[];return s&&s.call(Q,function(Jt){jf.push(N(Jt,Q))}),H("Set",o.call(Q),jf,x)}if(se(Q))return D("WeakMap");if(He(Q))return D("WeakSet");if(ze(Q))return D("WeakRef");if(ne(Q))return E(N(Number(Q)));if(ae(Q))return E(N(M.call(Q)));if(B(Q))return E(m.call(Q));if(te(Q))return E(N(String(Q)));if(typeof window<"u"&&Q===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Q===globalThis||typeof ef<"u"&&Q===ef)return"{ [object globalThis] }";if(!F(Q)&&!ee(Q)){var wd=it(Q,N),Sd=oe?oe(Q)===Object.prototype:Q instanceof Object||Q.constructor===Object,Kl=Q instanceof Object?"":"null prototype",Od=!Sd&&W&&Object(Q)===Q&&W in Q?_.call(ge(Q),8,-1):Kl?"Object":"",Wl=Sd||typeof Q.constructor!="function"?"":Q.constructor.name?Q.constructor.name+" ":"",on=Wl+(Od||Kl?"["+P.call(R.call([],Od||[],Kl||[]),": ")+"] ":"");return wd.length===0?on+"{}":x?on+"{"+qe(wd,x)+"}":on+"{ "+P.call(wd,", ")+" }"}return String(Q)};function fe(X,Q,Ce){var at=Ce.quoteStyle||Q,dt=re[at];return dt+X+dt}function _e(X){return y.call(String(X),/"/g,"&quot;")}function Se(X){return!W||!(typeof X=="object"&&(W in X||typeof X[W]<"u"))}function J(X){return ge(X)==="[object Array]"&&Se(X)}function F(X){return ge(X)==="[object Date]"&&Se(X)}function ee(X){return ge(X)==="[object RegExp]"&&Se(X)}function L(X){return ge(X)==="[object Error]"&&Se(X)}function te(X){return ge(X)==="[object String]"&&Se(X)}function ne(X){return ge(X)==="[object Number]"&&Se(X)}function B(X){return ge(X)==="[object Boolean]"&&Se(X)}function k(X){if(z)return X&&typeof X=="object"&&X instanceof Symbol;if(typeof X=="symbol")return!0;if(!X||typeof X!="object"||!U)return!1;try{return U.call(X),!0}catch{}return!1}function ae(X){if(!X||typeof X!="object"||!M)return!1;try{return M.call(X),!0}catch{}return!1}var me=Object.prototype.hasOwnProperty||function(X){return X in this};function pe(X,Q){return me.call(X,Q)}function ge(X){return p.call(X)}function K(X){if(X.name)return X.name;var Q=b.call(g.call(X),/^function\s*([\w$]+)/);return Q?Q[1]:null}function le(X,Q){if(X.indexOf)return X.indexOf(Q);for(var Ce=0,at=X.length;Ce<at;Ce++)if(X[Ce]===Q)return Ce;return-1}function he(X){if(!t||!X||typeof X!="object")return!1;try{t.call(X);try{o.call(X)}catch{return!0}return X instanceof Map}catch{}return!1}function se(X){if(!l||!X||typeof X!="object")return!1;try{l.call(X,l);try{d.call(X,d)}catch{return!0}return X instanceof WeakMap}catch{}return!1}function ze(X){if(!f||!X||typeof X!="object")return!1;try{return f.call(X),!0}catch{}return!1}function ht(X){if(!o||!X||typeof X!="object")return!1;try{o.call(X);try{t.call(X)}catch{return!0}return X instanceof Set}catch{}return!1}function He(X){if(!d||!X||typeof X!="object")return!1;try{d.call(X,d);try{l.call(X,l)}catch{return!0}return X instanceof WeakSet}catch{}return!1}function Lt(X){return!X||typeof X!="object"?!1:typeof HTMLElement<"u"&&X instanceof HTMLElement?!0:typeof X.nodeName=="string"&&typeof X.getAttribute=="function"}function j(X,Q){if(X.length>Q.maxStringLength){var Ce=X.length-Q.maxStringLength,at="... "+Ce+" more character"+(Ce>1?"s":"");return j(_.call(X,0,Q.maxStringLength),Q)+at}var dt=Z[Q.quoteStyle||"single"];dt.lastIndex=0;var Fe=y.call(y.call(X,dt,"\\$1"),/[\x00-\x1f]/g,O);return fe(Fe,"single",Q)}function O(X){var Q=X.charCodeAt(0),Ce={8:"b",9:"t",10:"n",12:"f",13:"r"}[Q];return Ce?"\\"+Ce:"\\x"+(Q<16?"0":"")+v.call(Q.toString(16))}function E(X){return"Object("+X+")"}function D(X){return X+" { ? }"}function H(X,Q,Ce,at){var dt=at?qe(Ce,at):P.call(Ce,", ");return X+" ("+Q+") {"+dt+"}"}function ie(X){for(var Q=0;Q<X.length;Q++)if(le(X[Q],`
`)>=0)return!1;return!0}function de(X,Q){var Ce;if(X.indent==="	")Ce="	";else if(typeof X.indent=="number"&&X.indent>0)Ce=P.call(Array(X.indent+1)," ");else return null;return{base:Ce,prev:P.call(Array(Q+1),Ce)}}function qe(X,Q){if(X.length===0)return"";var Ce=`
`+Q.prev+Q.base;return Ce+P.call(X,","+Ce)+`
`+Q.prev}function it(X,Q){var Ce=J(X),at=[];if(Ce){at.length=X.length;for(var dt=0;dt<X.length;dt++)at[dt]=pe(X,dt)?Q(X[dt],X):""}var Fe=typeof G=="function"?G(X):[],Kr;if(z){Kr={};for(var Uu=0;Uu<Fe.length;Uu++)Kr["$"+Fe[Uu]]=Fe[Uu]}for(var tr in X)pe(X,tr)&&(Ce&&String(Number(tr))===tr&&tr<X.length||z&&Kr["$"+tr]instanceof Symbol||(S.call(/[^\w$]/,tr)?at.push(Q(tr,X)+": "+Q(X[tr],X)):at.push(tr+": "+Q(X[tr],X))));if(typeof G=="function")for(var Wr=0;Wr<Fe.length;Wr++)Y.call(X,Fe[Wr])&&at.push("["+Q(Fe[Wr])+"]: "+Q(X[Fe[Wr]],X));return at}return HO}var KO,Eq;function gce(){if(Eq)return KO;Eq=1;var r=Sb(),e=Rf(),t=function(s,u,l){for(var c=s,d;(d=c.next)!=null;c=d)if(d.key===u)return c.next=d.next,l||(d.next=s.next,s.next=d),d},n=function(s,u){if(s){var l=t(s,u);return l&&l.value}},i=function(s,u,l){var c=t(s,u);c?c.value=l:s.next={key:u,next:s.next,value:l}},a=function(s,u){return s?!!t(s,u):!1},o=function(s,u){if(s)return t(s,u,!0)};return KO=function(){var u,l={assert:function(c){if(!l.has(c))throw new e("Side channel does not contain "+r(c))},delete:function(c){var d=u&&u.next,h=o(u,c);return h&&d&&d===h&&(u=void 0),!!h},get:function(c){return n(u,c)},has:function(c){return a(u,c)},set:function(c,d){u||(u={next:void 0}),i(u,c,d)}};return l},KO}var WO,Rq;function aH(){return Rq||(Rq=1,WO=Object),WO}var GO,Cq;function _ce(){return Cq||(Cq=1,GO=Error),GO}var JO,Pq;function bce(){return Pq||(Pq=1,JO=EvalError),JO}var XO,jq;function yce(){return jq||(jq=1,XO=RangeError),XO}var ZO,Tq;function vce(){return Tq||(Tq=1,ZO=ReferenceError),ZO}var QO,Aq;function wce(){return Aq||(Aq=1,QO=SyntaxError),QO}var YO,Mq;function Sce(){return Mq||(Mq=1,YO=URIError),YO}var eE,Iq;function Oce(){return Iq||(Iq=1,eE=Math.abs),eE}var tE,xq;function Ece(){return xq||(xq=1,tE=Math.floor),tE}var rE,Dq;function Rce(){return Dq||(Dq=1,rE=Math.max),rE}var nE,$q;function Cce(){return $q||($q=1,nE=Math.min),nE}var iE,Nq;function Pce(){return Nq||(Nq=1,iE=Math.pow),iE}var aE,qq;function jce(){return qq||(qq=1,aE=Math.round),aE}var oE,Bq;function Tce(){return Bq||(Bq=1,oE=Number.isNaN||function(e){return e!==e}),oE}var sE,Uq;function Ace(){if(Uq)return sE;Uq=1;var r=Tce();return sE=function(t){return r(t)||t===0?t:t<0?-1:1},sE}var uE,zq;function Mce(){return zq||(zq=1,uE=Object.getOwnPropertyDescriptor),uE}var lE,Lq;function oH(){if(Lq)return lE;Lq=1;var r=Mce();if(r)try{r([],"length")}catch{r=null}return lE=r,lE}var cE,Fq;function Ice(){if(Fq)return cE;Fq=1;var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}return cE=r,cE}var dE,kq;function xce(){return kq||(kq=1,dE=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,t);if(s.value!==i||s.enumerable!==!0)return!1}return!0}),dE}var fE,Vq;function Dce(){if(Vq)return fE;Vq=1;var r=typeof Symbol<"u"&&Symbol,e=xce();return fE=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},fE}var pE,Hq;function sH(){return Hq||(Hq=1,pE=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),pE}var hE,Kq;function uH(){if(Kq)return hE;Kq=1;var r=aH();return hE=r.getPrototypeOf||null,hE}var mE,Wq;function $ce(){if(Wq)return mE;Wq=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(u,l){for(var c=[],d=0;d<u.length;d+=1)c[d]=u[d];for(var h=0;h<l.length;h+=1)c[h+u.length]=l[h];return c},a=function(u,l){for(var c=[],d=l,h=0;d<u.length;d+=1,h+=1)c[h]=u[d];return c},o=function(s,u){for(var l="",c=0;c<s.length;c+=1)l+=s[c],c+1<s.length&&(l+=u);return l};return mE=function(u){var l=this;if(typeof l!="function"||e.apply(l)!==n)throw new TypeError(r+l);for(var c=a(arguments,1),d,h=function(){if(this instanceof d){var b=l.apply(this,i(c,arguments));return Object(b)===b?b:this}return l.apply(u,i(c,arguments))},f=t(0,l.length-c.length),m=[],p=0;p<f;p++)m[p]="$"+p;if(d=Function("binder","return function ("+o(m,",")+"){ return binder.apply(this,arguments); }")(h),l.prototype){var g=function(){};g.prototype=l.prototype,d.prototype=new g,g.prototype=null}return d},mE}var gE,Gq;function Ob(){if(Gq)return gE;Gq=1;var r=$ce();return gE=Function.prototype.bind||r,gE}var _E,Jq;function KP(){return Jq||(Jq=1,_E=Function.prototype.call),_E}var bE,Xq;function lH(){return Xq||(Xq=1,bE=Function.prototype.apply),bE}var yE,Zq;function Nce(){return Zq||(Zq=1,yE=typeof Reflect<"u"&&Reflect&&Reflect.apply),yE}var vE,Qq;function qce(){if(Qq)return vE;Qq=1;var r=Ob(),e=lH(),t=KP(),n=Nce();return vE=n||r.call(t,e),vE}var wE,Yq;function cH(){if(Yq)return wE;Yq=1;var r=Ob(),e=Rf(),t=KP(),n=qce();return wE=function(a){if(a.length<1||typeof a[0]!="function")throw new e("a function is required");return n(r,t,a)},wE}var SE,eB;function Bce(){if(eB)return SE;eB=1;var r=cH(),e=oH(),t;try{t=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var n=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,a=i.getPrototypeOf;return SE=n&&typeof n.get=="function"?r([n.get]):typeof a=="function"?function(s){return a(s==null?s:i(s))}:!1,SE}var OE,tB;function Uce(){if(tB)return OE;tB=1;var r=sH(),e=uH(),t=Bce();return OE=r?function(i){return r(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,OE}var EE,rB;function zce(){if(rB)return EE;rB=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Ob();return EE=t.call(r,e),EE}var RE,nB;function WP(){if(nB)return RE;nB=1;var r,e=aH(),t=_ce(),n=bce(),i=yce(),a=vce(),o=wce(),s=Rf(),u=Sce(),l=Oce(),c=Ece(),d=Rce(),h=Cce(),f=Pce(),m=jce(),p=Ace(),g=Function,b=function(ee){try{return g('"use strict"; return ('+ee+").constructor;")()}catch{}},_=oH(),y=Ice(),v=function(){throw new s},w=_?function(){try{return arguments.callee,v}catch{try{return _(arguments,"callee").get}catch{return v}}}():v,S=Dce()(),R=Uce(),P=uH(),C=sH(),A=lH(),M=KP(),G={},U=typeof Uint8Array>"u"||!R?r:R(Uint8Array),z={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":S&&R?R([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":G,"%AsyncGenerator%":G,"%AsyncGeneratorFunction%":G,"%AsyncIteratorPrototype%":G,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?r:Float16Array,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":g,"%GeneratorFunction%":G,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":S&&R?R(R([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!S||!R?r:R(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":_,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":i,"%ReferenceError%":a,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!S||!R?r:R(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":S&&R?R(""[Symbol.iterator]()):r,"%Symbol%":S?Symbol:r,"%SyntaxError%":o,"%ThrowTypeError%":w,"%TypedArray%":U,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet,"%Function.prototype.call%":M,"%Function.prototype.apply%":A,"%Object.defineProperty%":y,"%Object.getPrototypeOf%":P,"%Math.abs%":l,"%Math.floor%":c,"%Math.max%":d,"%Math.min%":h,"%Math.pow%":f,"%Math.round%":m,"%Math.sign%":p,"%Reflect.getPrototypeOf%":C};if(R)try{null.error}catch(ee){var W=R(R(ee));z["%Error.prototype%"]=W}var Y=function ee(L){var te;if(L==="%AsyncFunction%")te=b("async function () {}");else if(L==="%GeneratorFunction%")te=b("function* () {}");else if(L==="%AsyncGeneratorFunction%")te=b("async function* () {}");else if(L==="%AsyncGenerator%"){var ne=ee("%AsyncGeneratorFunction%");ne&&(te=ne.prototype)}else if(L==="%AsyncIteratorPrototype%"){var B=ee("%AsyncGenerator%");B&&R&&(te=R(B.prototype))}return z[L]=te,te},oe={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},I=Ob(),q=zce(),T=I.call(M,Array.prototype.concat),V=I.call(A,Array.prototype.splice),re=I.call(M,String.prototype.replace),Z=I.call(M,String.prototype.slice),fe=I.call(M,RegExp.prototype.exec),_e=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Se=/\\(\\)?/g,J=function(L){var te=Z(L,0,1),ne=Z(L,-1);if(te==="%"&&ne!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(ne==="%"&&te!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var B=[];return re(L,_e,function(k,ae,me,pe){B[B.length]=me?re(pe,Se,"$1"):ae||k}),B},F=function(L,te){var ne=L,B;if(q(oe,ne)&&(B=oe[ne],ne="%"+B[0]+"%"),q(z,ne)){var k=z[ne];if(k===G&&(k=Y(ne)),typeof k>"u"&&!te)throw new s("intrinsic "+L+" exists, but is not available. Please file an issue!");return{alias:B,name:ne,value:k}}throw new o("intrinsic "+L+" does not exist!")};return RE=function(L,te){if(typeof L!="string"||L.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof te!="boolean")throw new s('"allowMissing" argument must be a boolean');if(fe(/^%?[^%]*%?$/,L)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ne=J(L),B=ne.length>0?ne[0]:"",k=F("%"+B+"%",te),ae=k.name,me=k.value,pe=!1,ge=k.alias;ge&&(B=ge[0],V(ne,T([0,1],ge)));for(var K=1,le=!0;K<ne.length;K+=1){var he=ne[K],se=Z(he,0,1),ze=Z(he,-1);if((se==='"'||se==="'"||se==="`"||ze==='"'||ze==="'"||ze==="`")&&se!==ze)throw new o("property names with quotes must have matching quotes");if((he==="constructor"||!le)&&(pe=!0),B+="."+he,ae="%"+B+"%",q(z,ae))me=z[ae];else if(me!=null){if(!(he in me)){if(!te)throw new s("base intrinsic for "+L+" exists, but the property is not available.");return}if(_&&K+1>=ne.length){var ht=_(me,he);le=!!ht,le&&"get"in ht&&!("originalValue"in ht.get)?me=ht.get:me=me[he]}else le=q(me,he),me=me[he];le&&!pe&&(z[ae]=me)}}return me},RE}var CE,iB;function dH(){if(iB)return CE;iB=1;var r=WP(),e=cH(),t=e([r("%String.prototype.indexOf%")]);return CE=function(i,a){var o=r(i,!!a);return typeof o=="function"&&t(i,".prototype.")>-1?e([o]):o},CE}var PE,aB;function fH(){if(aB)return PE;aB=1;var r=WP(),e=dH(),t=Sb(),n=Rf(),i=r("%Map%",!0),a=e("Map.prototype.get",!0),o=e("Map.prototype.set",!0),s=e("Map.prototype.has",!0),u=e("Map.prototype.delete",!0),l=e("Map.prototype.size",!0);return PE=!!i&&function(){var d,h={assert:function(f){if(!h.has(f))throw new n("Side channel does not contain "+t(f))},delete:function(f){if(d){var m=u(d,f);return l(d)===0&&(d=void 0),m}return!1},get:function(f){if(d)return a(d,f)},has:function(f){return d?s(d,f):!1},set:function(f,m){d||(d=new i),o(d,f,m)}};return h},PE}var jE,oB;function Lce(){if(oB)return jE;oB=1;var r=WP(),e=dH(),t=Sb(),n=fH(),i=Rf(),a=r("%WeakMap%",!0),o=e("WeakMap.prototype.get",!0),s=e("WeakMap.prototype.set",!0),u=e("WeakMap.prototype.has",!0),l=e("WeakMap.prototype.delete",!0);return jE=a?function(){var d,h,f={assert:function(m){if(!f.has(m))throw new i("Side channel does not contain "+t(m))},delete:function(m){if(a&&m&&(typeof m=="object"||typeof m=="function")){if(d)return l(d,m)}else if(n&&h)return h.delete(m);return!1},get:function(m){return a&&m&&(typeof m=="object"||typeof m=="function")&&d?o(d,m):h&&h.get(m)},has:function(m){return a&&m&&(typeof m=="object"||typeof m=="function")&&d?u(d,m):!!h&&h.has(m)},set:function(m,p){a&&m&&(typeof m=="object"||typeof m=="function")?(d||(d=new a),s(d,m,p)):n&&(h||(h=n()),h.set(m,p))}};return f}:n,jE}var TE,sB;function Fce(){if(sB)return TE;sB=1;var r=Rf(),e=Sb(),t=gce(),n=fH(),i=Lce(),a=i||n||t;return TE=function(){var s,u={assert:function(l){if(!u.has(l))throw new r("Side channel does not contain "+e(l))},delete:function(l){return!!s&&s.delete(l)},get:function(l){return s&&s.get(l)},has:function(l){return!!s&&s.has(l)},set:function(l,c){s||(s=a()),s.set(l,c)}};return u},TE}var AE,uB;function GP(){if(uB)return AE;uB=1;var r=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return AE={default:t.RFC3986,formatters:{RFC1738:function(n){return r.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},AE}var ME,lB;function pH(){if(lB)return ME;lB=1;var r=GP(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n=function(){for(var p=[],g=0;g<256;++g)p.push("%"+((g<16?"0":"")+g.toString(16)).toUpperCase());return p}(),i=function(g){for(;g.length>1;){var b=g.pop(),_=b.obj[b.prop];if(t(_)){for(var y=[],v=0;v<_.length;++v)typeof _[v]<"u"&&y.push(_[v]);b.obj[b.prop]=y}}},a=function(g,b){for(var _=b&&b.plainObjects?Object.create(null):{},y=0;y<g.length;++y)typeof g[y]<"u"&&(_[y]=g[y]);return _},o=function p(g,b,_){if(!b)return g;if(typeof b!="object"){if(t(g))g.push(b);else if(g&&typeof g=="object")(_&&(_.plainObjects||_.allowPrototypes)||!e.call(Object.prototype,b))&&(g[b]=!0);else return[g,b];return g}if(!g||typeof g!="object")return[g].concat(b);var y=g;return t(g)&&!t(b)&&(y=a(g,_)),t(g)&&t(b)?(b.forEach(function(v,w){if(e.call(g,w)){var S=g[w];S&&typeof S=="object"&&v&&typeof v=="object"?g[w]=p(S,v,_):g.push(v)}else g[w]=v}),g):Object.keys(b).reduce(function(v,w){var S=b[w];return e.call(v,w)?v[w]=p(v[w],S,_):v[w]=S,v},y)},s=function(g,b){return Object.keys(b).reduce(function(_,y){return _[y]=b[y],_},g)},u=function(p,g,b){var _=p.replace(/\+/g," ");if(b==="iso-8859-1")return _.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(_)}catch{return _}},l=function(g,b,_,y,v){if(g.length===0)return g;var w=g;if(typeof g=="symbol"?w=Symbol.prototype.toString.call(g):typeof g!="string"&&(w=String(g)),_==="iso-8859-1")return escape(w).replace(/%u[0-9a-f]{4}/gi,function(C){return"%26%23"+parseInt(C.slice(2),16)+"%3B"});for(var S="",R=0;R<w.length;++R){var P=w.charCodeAt(R);if(P===45||P===46||P===95||P===126||P>=48&&P<=57||P>=65&&P<=90||P>=97&&P<=122||v===r.RFC1738&&(P===40||P===41)){S+=w.charAt(R);continue}if(P<128){S=S+n[P];continue}if(P<2048){S=S+(n[192|P>>6]+n[128|P&63]);continue}if(P<55296||P>=57344){S=S+(n[224|P>>12]+n[128|P>>6&63]+n[128|P&63]);continue}R+=1,P=65536+((P&1023)<<10|w.charCodeAt(R)&1023),S+=n[240|P>>18]+n[128|P>>12&63]+n[128|P>>6&63]+n[128|P&63]}return S},c=function(g){for(var b=[{obj:{o:g},prop:"o"}],_=[],y=0;y<b.length;++y)for(var v=b[y],w=v.obj[v.prop],S=Object.keys(w),R=0;R<S.length;++R){var P=S[R],C=w[P];typeof C=="object"&&C!==null&&_.indexOf(C)===-1&&(b.push({obj:w,prop:P}),_.push(C))}return i(b),g},d=function(g){return Object.prototype.toString.call(g)==="[object RegExp]"},h=function(g){return!g||typeof g!="object"?!1:!!(g.constructor&&g.constructor.isBuffer&&g.constructor.isBuffer(g))},f=function(g,b){return[].concat(g,b)},m=function(g,b){if(t(g)){for(var _=[],y=0;y<g.length;y+=1)_.push(b(g[y]));return _}return b(g)};return ME={arrayToObject:a,assign:s,combine:f,compact:c,decode:u,encode:l,isBuffer:h,isRegExp:d,maybeMap:m,merge:o},ME}var IE,cB;function kce(){if(cB)return IE;cB=1;var r=Fce(),e=pH(),t=GP(),n=Object.prototype.hasOwnProperty,i={brackets:function(g){return g+"[]"},comma:"comma",indices:function(g,b){return g+"["+b+"]"},repeat:function(g){return g}},a=Array.isArray,o=Array.prototype.push,s=function(p,g){o.apply(p,a(g)?g:[g])},u=Date.prototype.toISOString,l=t.default,c={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:e.encode,encodeValuesOnly:!1,format:l,formatter:t.formatters[l],indices:!1,serializeDate:function(g){return u.call(g)},skipNulls:!1,strictNullHandling:!1},d=function(g){return typeof g=="string"||typeof g=="number"||typeof g=="boolean"||typeof g=="symbol"||typeof g=="bigint"},h={},f=function p(g,b,_,y,v,w,S,R,P,C,A,M,G,U,z,W){for(var Y=g,oe=W,I=0,q=!1;(oe=oe.get(h))!==void 0&&!q;){var T=oe.get(g);if(I+=1,typeof T<"u"){if(T===I)throw new RangeError("Cyclic object value");q=!0}typeof oe.get(h)>"u"&&(I=0)}if(typeof R=="function"?Y=R(b,Y):Y instanceof Date?Y=A(Y):_==="comma"&&a(Y)&&(Y=e.maybeMap(Y,function(te){return te instanceof Date?A(te):te})),Y===null){if(v)return S&&!U?S(b,c.encoder,z,"key",M):b;Y=""}if(d(Y)||e.isBuffer(Y)){if(S){var V=U?b:S(b,c.encoder,z,"key",M);return[G(V)+"="+G(S(Y,c.encoder,z,"value",M))]}return[G(b)+"="+G(String(Y))]}var re=[];if(typeof Y>"u")return re;var Z;if(_==="comma"&&a(Y))U&&S&&(Y=e.maybeMap(Y,S)),Z=[{value:Y.length>0?Y.join(",")||null:void 0}];else if(a(R))Z=R;else{var fe=Object.keys(Y);Z=P?fe.sort(P):fe}for(var _e=y&&a(Y)&&Y.length===1?b+"[]":b,Se=0;Se<Z.length;++Se){var J=Z[Se],F=typeof J=="object"&&typeof J.value<"u"?J.value:Y[J];if(!(w&&F===null)){var ee=a(Y)?typeof _=="function"?_(_e,J):_e:_e+(C?"."+J:"["+J+"]");W.set(g,I);var L=r();L.set(h,W),s(re,p(F,ee,_,y,v,w,_==="comma"&&U&&a(Y)?null:S,R,P,C,A,M,G,U,z,L))}}return re},m=function(g){if(!g)return c;if(g.encoder!==null&&typeof g.encoder<"u"&&typeof g.encoder!="function")throw new TypeError("Encoder has to be a function.");var b=g.charset||c.charset;if(typeof g.charset<"u"&&g.charset!=="utf-8"&&g.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var _=t.default;if(typeof g.format<"u"){if(!n.call(t.formatters,g.format))throw new TypeError("Unknown format option provided.");_=g.format}var y=t.formatters[_],v=c.filter;return(typeof g.filter=="function"||a(g.filter))&&(v=g.filter),{addQueryPrefix:typeof g.addQueryPrefix=="boolean"?g.addQueryPrefix:c.addQueryPrefix,allowDots:typeof g.allowDots>"u"?c.allowDots:!!g.allowDots,charset:b,charsetSentinel:typeof g.charsetSentinel=="boolean"?g.charsetSentinel:c.charsetSentinel,delimiter:typeof g.delimiter>"u"?c.delimiter:g.delimiter,encode:typeof g.encode=="boolean"?g.encode:c.encode,encoder:typeof g.encoder=="function"?g.encoder:c.encoder,encodeValuesOnly:typeof g.encodeValuesOnly=="boolean"?g.encodeValuesOnly:c.encodeValuesOnly,filter:v,format:_,formatter:y,serializeDate:typeof g.serializeDate=="function"?g.serializeDate:c.serializeDate,skipNulls:typeof g.skipNulls=="boolean"?g.skipNulls:c.skipNulls,sort:typeof g.sort=="function"?g.sort:null,strictNullHandling:typeof g.strictNullHandling=="boolean"?g.strictNullHandling:c.strictNullHandling}};return IE=function(p,g){var b=p,_=m(g),y,v;typeof _.filter=="function"?(v=_.filter,b=v("",b)):a(_.filter)&&(v=_.filter,y=v);var w=[];if(typeof b!="object"||b===null)return"";var S;g&&g.arrayFormat in i?S=g.arrayFormat:g&&"indices"in g?S=g.indices?"indices":"repeat":S="indices";var R=i[S];if(g&&"commaRoundTrip"in g&&typeof g.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var P=R==="comma"&&g&&g.commaRoundTrip;y||(y=Object.keys(b)),_.sort&&y.sort(_.sort);for(var C=r(),A=0;A<y.length;++A){var M=y[A];_.skipNulls&&b[M]===null||s(w,f(b[M],M,R,P,_.strictNullHandling,_.skipNulls,_.encode?_.encoder:null,_.filter,_.sort,_.allowDots,_.serializeDate,_.format,_.formatter,_.encodeValuesOnly,_.charset,C))}var G=w.join(_.delimiter),U=_.addQueryPrefix===!0?"?":"";return _.charsetSentinel&&(_.charset==="iso-8859-1"?U+="utf8=%26%2310003%3B&":U+="utf8=%E2%9C%93&"),G.length>0?U+G:""},IE}var xE,dB;function Vce(){if(dB)return xE;dB=1;var r=pH(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},i=function(h){return h.replace(/&#(\d+);/g,function(f,m){return String.fromCharCode(parseInt(m,10))})},a=function(h,f){return h&&typeof h=="string"&&f.comma&&h.indexOf(",")>-1?h.split(","):h},o="utf8=%26%2310003%3B",s="utf8=%E2%9C%93",u=function(f,m){var p={__proto__:null},g=m.ignoreQueryPrefix?f.replace(/^\?/,""):f,b=m.parameterLimit===1/0?void 0:m.parameterLimit,_=g.split(m.delimiter,b),y=-1,v,w=m.charset;if(m.charsetSentinel)for(v=0;v<_.length;++v)_[v].indexOf("utf8=")===0&&(_[v]===s?w="utf-8":_[v]===o&&(w="iso-8859-1"),y=v,v=_.length);for(v=0;v<_.length;++v)if(v!==y){var S=_[v],R=S.indexOf("]="),P=R===-1?S.indexOf("="):R+1,C,A;P===-1?(C=m.decoder(S,n.decoder,w,"key"),A=m.strictNullHandling?null:""):(C=m.decoder(S.slice(0,P),n.decoder,w,"key"),A=r.maybeMap(a(S.slice(P+1),m),function(M){return m.decoder(M,n.decoder,w,"value")})),A&&m.interpretNumericEntities&&w==="iso-8859-1"&&(A=i(A)),S.indexOf("[]=")>-1&&(A=t(A)?[A]:A),e.call(p,C)?p[C]=r.combine(p[C],A):p[C]=A}return p},l=function(h,f,m,p){for(var g=p?f:a(f,m),b=h.length-1;b>=0;--b){var _,y=h[b];if(y==="[]"&&m.parseArrays)_=[].concat(g);else{_=m.plainObjects?Object.create(null):{};var v=y.charAt(0)==="["&&y.charAt(y.length-1)==="]"?y.slice(1,-1):y,w=parseInt(v,10);!m.parseArrays&&v===""?_={0:g}:!isNaN(w)&&y!==v&&String(w)===v&&w>=0&&m.parseArrays&&w<=m.arrayLimit?(_=[],_[w]=g):v!=="__proto__"&&(_[v]=g)}g=_}return g},c=function(f,m,p,g){if(f){var b=p.allowDots?f.replace(/\.([^.[]+)/g,"[$1]"):f,_=/(\[[^[\]]*])/,y=/(\[[^[\]]*])/g,v=p.depth>0&&_.exec(b),w=v?b.slice(0,v.index):b,S=[];if(w){if(!p.plainObjects&&e.call(Object.prototype,w)&&!p.allowPrototypes)return;S.push(w)}for(var R=0;p.depth>0&&(v=y.exec(b))!==null&&R<p.depth;){if(R+=1,!p.plainObjects&&e.call(Object.prototype,v[1].slice(1,-1))&&!p.allowPrototypes)return;S.push(v[1])}return v&&S.push("["+b.slice(v.index)+"]"),l(S,m,p,g)}},d=function(f){if(!f)return n;if(f.decoder!==null&&f.decoder!==void 0&&typeof f.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof f.charset<"u"&&f.charset!=="utf-8"&&f.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var m=typeof f.charset>"u"?n.charset:f.charset;return{allowDots:typeof f.allowDots>"u"?n.allowDots:!!f.allowDots,allowPrototypes:typeof f.allowPrototypes=="boolean"?f.allowPrototypes:n.allowPrototypes,allowSparse:typeof f.allowSparse=="boolean"?f.allowSparse:n.allowSparse,arrayLimit:typeof f.arrayLimit=="number"?f.arrayLimit:n.arrayLimit,charset:m,charsetSentinel:typeof f.charsetSentinel=="boolean"?f.charsetSentinel:n.charsetSentinel,comma:typeof f.comma=="boolean"?f.comma:n.comma,decoder:typeof f.decoder=="function"?f.decoder:n.decoder,delimiter:typeof f.delimiter=="string"||r.isRegExp(f.delimiter)?f.delimiter:n.delimiter,depth:typeof f.depth=="number"||f.depth===!1?+f.depth:n.depth,ignoreQueryPrefix:f.ignoreQueryPrefix===!0,interpretNumericEntities:typeof f.interpretNumericEntities=="boolean"?f.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof f.parameterLimit=="number"?f.parameterLimit:n.parameterLimit,parseArrays:f.parseArrays!==!1,plainObjects:typeof f.plainObjects=="boolean"?f.plainObjects:n.plainObjects,strictNullHandling:typeof f.strictNullHandling=="boolean"?f.strictNullHandling:n.strictNullHandling}};return xE=function(h,f){var m=d(f);if(h===""||h===null||typeof h>"u")return m.plainObjects?Object.create(null):{};for(var p=typeof h=="string"?u(h,m):h,g=m.plainObjects?Object.create(null):{},b=Object.keys(p),_=0;_<b.length;++_){var y=b[_],v=c(y,p[y],m,typeof h=="string");g=r.merge(g,v,m)}return m.allowSparse===!0?g:r.compact(g)},xE}var DE,fB;function Hce(){if(fB)return DE;fB=1;var r=kce(),e=Vce(),t=GP();return DE={formats:t,parse:e,stringify:r},DE}var pB;function Kce(){if(pB)return bc;pB=1;var r=bc&&bc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(bc,"__esModule",{value:!0}),bc.createRequestUrl=void 0;const e=r(Hce());function t(n,i){return Object.keys(i??{}).length>0?`${n}?${e.default.stringify(i,{arrayFormat:"repeat"})}`:n}return bc.createRequestUrl=t,bc}var Tr={},$E={},Up={},hB;function Wce(){if(hB)return Up;hB=1;var r,e,t,n,i;Object.defineProperty(Up,"__esModule",{value:!0}),Up.RUNTIME=void 0;const a=typeof window<"u"&&typeof window.document<"u",o=typeof self=="object"&&typeof(self==null?void 0:self.importScripts)=="function"&&(((r=self.constructor)===null||r===void 0?void 0:r.name)==="DedicatedWorkerGlobalScope"||((e=self.constructor)===null||e===void 0?void 0:e.name)==="ServiceWorkerGlobalScope"||((t=self.constructor)===null||t===void 0?void 0:t.name)==="SharedWorkerGlobalScope"),s=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",u=typeof Bun<"u"&&typeof Bun.version<"u",l=typeof process<"u"&&!!process.version&&!!(!((n=process.versions)===null||n===void 0)&&n.node)&&!s&&!u,c=typeof navigator<"u"&&(navigator==null?void 0:navigator.product)==="ReactNative",d=typeof globalThis<"u"&&((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0?void 0:i.userAgent)==="Cloudflare-Workers";Up.RUNTIME=h();function h(){return a?{type:"browser",version:window.navigator.userAgent}:d?{type:"workerd"}:o?{type:"web-worker"}:s?{type:"deno",version:Deno.version.deno}:u?{type:"bun",version:Bun.version}:l?{type:"node",version:process.versions.node,parsedVersion:Number(process.versions.node.split(".")[0])}:c?{type:"react-native"}:{type:"unknown"}}return Up}var mB;function Nm(){return mB||(mB=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RUNTIME=void 0;var e=Wce();Object.defineProperty(r,"RUNTIME",{enumerable:!0,get:function(){return e.RUNTIME}})}($E)),$E}var Dg={exports:{}},gB;function _B(){return gB||(gB=1,function(r,e){var t=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof ef<"u")return ef;throw new Error("unable to locate global object")},n=t();r.exports=e=n.fetch,n.fetch&&(e.default=n.fetch.bind(n)),e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response}(Dg,Dg.exports)),Dg.exports}var bB;function Gce(){if(bB)return Tr;bB=1;var r=Tr&&Tr.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Tr&&Tr.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Tr&&Tr.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s},n=Tr&&Tr.__awaiter||function(o,s,u,l){function c(d){return d instanceof u?d:new u(function(h){h(d)})}return new(u||(u=Promise))(function(d,h){function f(g){try{p(l.next(g))}catch(b){h(b)}}function m(g){try{p(l.throw(g))}catch(b){h(b)}}function p(g){g.done?d(g.value):c(g.value).then(f,m)}p((l=l.apply(o,s||[])).next())})};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.getFetchFn=void 0;const i=Nm();function a(){return n(this,void 0,void 0,function*(){return i.RUNTIME.type==="node"&&i.RUNTIME.parsedVersion!=null&&i.RUNTIME.parsedVersion>=18?fetch:i.RUNTIME.type==="node"?(yield Promise.resolve().then(()=>t(_B()))).default:typeof fetch=="function"?fetch:(yield Promise.resolve().then(()=>t(_B()))).default})}return Tr.getFetchFn=a,Tr}var yc={},yB;function Jce(){if(yB)return yc;yB=1;var r=yc&&yc.__awaiter||function(t,n,i,a){function o(s){return s instanceof i?s:new i(function(u){u(s)})}return new(i||(i=Promise))(function(s,u){function l(h){try{d(a.next(h))}catch(f){u(f)}}function c(h){try{d(a.throw(h))}catch(f){u(f)}}function d(h){h.done?s(h.value):o(h.value).then(l,c)}d((a=a.apply(t,n||[])).next())})};Object.defineProperty(yc,"__esModule",{value:!0}),yc.getRequestBody=void 0;function e({body:t,type:n}){return r(this,void 0,void 0,function*(){return n.includes("json")?JSON.stringify(t):t})}return yc.getRequestBody=e,yc}var vc={},Ar={},wc={},vB;function Xce(){if(vB)return wc;vB=1;var r=wc&&wc.__awaiter||function(t,n,i,a){function o(s){return s instanceof i?s:new i(function(u){u(s)})}return new(i||(i=Promise))(function(s,u){function l(h){try{d(a.next(h))}catch(f){u(f)}}function c(h){try{d(a.throw(h))}catch(f){u(f)}}function d(h){h.done?s(h.value):o(h.value).then(l,c)}d((a=a.apply(t,n||[])).next())})};Object.defineProperty(wc,"__esModule",{value:!0}),wc.Node18UniversalStreamWrapper=void 0;let e=class ed{constructor(n){this.readableStream=n,this.reader=this.readableStream.getReader(),this.events={data:[],end:[],error:[],readable:[],close:[],pause:[],resume:[]},this.paused=!1,this.resumeCallback=null,this.encoding=null}on(n,i){var a;(a=this.events[n])===null||a===void 0||a.push(i)}off(n,i){var a;this.events[n]=(a=this.events[n])===null||a===void 0?void 0:a.filter(o=>o!==i)}pipe(n){return this.on("data",i=>r(this,void 0,void 0,function*(){if(n instanceof ed)n._write(i);else if(n instanceof WritableStream){const a=n.getWriter();a.write(i).then(()=>a.releaseLock())}else n.write(i)})),this.on("end",()=>r(this,void 0,void 0,function*(){n instanceof ed?n._end():n instanceof WritableStream?n.getWriter().close():n.end()})),this.on("error",i=>r(this,void 0,void 0,function*(){n instanceof ed?n._error(i):n instanceof WritableStream?n.getWriter().abort(i):n.destroy(i)})),this._startReading(),n}pipeTo(n){return this.pipe(n)}unpipe(n){this.off("data",i=>r(this,void 0,void 0,function*(){if(n instanceof ed)n._write(i);else if(n instanceof WritableStream){const a=n.getWriter();a.write(i).then(()=>a.releaseLock())}else n.write(i)})),this.off("end",()=>r(this,void 0,void 0,function*(){n instanceof ed?n._end():n instanceof WritableStream?n.getWriter().close():n.end()})),this.off("error",i=>r(this,void 0,void 0,function*(){n instanceof ed?n._error(i):n instanceof WritableStream?n.getWriter().abort(i):n.destroy(i)}))}destroy(n){this.reader.cancel(n).then(()=>{this._emit("close")}).catch(i=>{this._emit("error",i)})}pause(){this.paused=!0,this._emit("pause")}resume(){this.paused&&(this.paused=!1,this._emit("resume"),this.resumeCallback&&(this.resumeCallback(),this.resumeCallback=null))}get isPaused(){return this.paused}read(){return r(this,void 0,void 0,function*(){this.paused&&(yield new Promise(a=>{this.resumeCallback=a}));const{done:n,value:i}=yield this.reader.read();if(!n)return i})}setEncoding(n){this.encoding=n}text(){return r(this,void 0,void 0,function*(){const n=[];for(;;){const{done:a,value:o}=yield this.reader.read();if(a)break;o&&n.push(o)}return new TextDecoder(this.encoding||"utf-8").decode(yield new Blob(n).arrayBuffer())})}json(){return r(this,void 0,void 0,function*(){const n=yield this.text();return JSON.parse(n)})}_write(n){this._emit("data",n)}_end(){this._emit("end")}_error(n){this._emit("error",n)}_emit(n,i){if(this.events[n])for(const a of this.events[n]||[])a(i)}_startReading(){return r(this,void 0,void 0,function*(){try{for(this._emit("readable");;){this.paused&&(yield new Promise(a=>{this.resumeCallback=a}));const{done:n,value:i}=yield this.reader.read();if(n){this._emit("end"),this._emit("close");break}i&&this._emit("data",i)}}catch(n){this._emit("error",n)}})}[Symbol.asyncIterator](){return{next:()=>r(this,void 0,void 0,function*(){this.paused&&(yield new Promise(a=>{this.resumeCallback=a}));const{done:n,value:i}=yield this.reader.read();return n?{done:!0,value:void 0}:{done:!1,value:i}}),[Symbol.asyncIterator](){return this}}}};return wc.Node18UniversalStreamWrapper=e,wc}var Sc={},wB;function Zce(){if(wB)return Sc;wB=1;var r=Sc&&Sc.__awaiter||function(t,n,i,a){function o(s){return s instanceof i?s:new i(function(u){u(s)})}return new(i||(i=Promise))(function(s,u){function l(h){try{d(a.next(h))}catch(f){u(f)}}function c(h){try{d(a.throw(h))}catch(f){u(f)}}function d(h){h.done?s(h.value):o(h.value).then(l,c)}d((a=a.apply(t,n||[])).next())})};Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.UndiciStreamWrapper=void 0;let e=class td{constructor(n){this.readableStream=n,this.reader=this.readableStream.getReader(),this.events={data:[],end:[],error:[],readable:[],close:[],pause:[],resume:[]},this.paused=!1,this.resumeCallback=null,this.encoding=null}on(n,i){var a;(a=this.events[n])===null||a===void 0||a.push(i)}off(n,i){var a;this.events[n]=(a=this.events[n])===null||a===void 0?void 0:a.filter(o=>o!==i)}pipe(n){return this.on("data",i=>{if(n instanceof td)n._write(i);else{const a=n.getWriter();a.write(i).then(()=>a.releaseLock())}}),this.on("end",()=>{n instanceof td?n._end():n.getWriter().close()}),this.on("error",i=>{n instanceof td?n._error(i):n.getWriter().abort(i)}),this._startReading(),n}pipeTo(n){return this.pipe(n)}unpipe(n){this.off("data",i=>{if(n instanceof td)n._write(i);else{const a=n.getWriter();a.write(i).then(()=>a.releaseLock())}}),this.off("end",()=>{n instanceof td?n._end():n.getWriter().close()}),this.off("error",i=>{n instanceof td?n._error(i):n.getWriter().abort(i)})}destroy(n){this.reader.cancel(n).then(()=>{this._emit("close")}).catch(i=>{this._emit("error",i)})}pause(){this.paused=!0,this._emit("pause")}resume(){this.paused&&(this.paused=!1,this._emit("resume"),this.resumeCallback&&(this.resumeCallback(),this.resumeCallback=null))}get isPaused(){return this.paused}read(){return r(this,void 0,void 0,function*(){this.paused&&(yield new Promise(a=>{this.resumeCallback=a}));const{done:n,value:i}=yield this.reader.read();if(!n)return i})}setEncoding(n){this.encoding=n}text(){return r(this,void 0,void 0,function*(){const n=[];for(;;){const{done:a,value:o}=yield this.reader.read();if(a)break;o&&n.push(o)}return new TextDecoder(this.encoding||"utf-8").decode(yield new Blob(n).arrayBuffer())})}json(){return r(this,void 0,void 0,function*(){const n=yield this.text();return JSON.parse(n)})}_write(n){this._emit("data",n)}_end(){this._emit("end")}_error(n){this._emit("error",n)}_emit(n,i){if(this.events[n])for(const a of this.events[n]||[])a(i)}_startReading(){return r(this,void 0,void 0,function*(){try{for(this._emit("readable");;){this.paused&&(yield new Promise(a=>{this.resumeCallback=a}));const{done:n,value:i}=yield this.reader.read();if(n){this._emit("end"),this._emit("close");break}i&&this._emit("data",i)}}catch(n){this._emit("error",n)}})}[Symbol.asyncIterator](){return{next:()=>r(this,void 0,void 0,function*(){this.paused&&(yield new Promise(a=>{this.resumeCallback=a}));const{done:n,value:i}=yield this.reader.read();return n?{done:!0,value:void 0}:{done:!1,value:i}}),[Symbol.asyncIterator](){return this}}}};return Sc.UndiciStreamWrapper=e,Sc}var Ku={},SB;function Qce(){if(SB)return Ku;SB=1;var r=Ku&&Ku.__awaiter||function(n,i,a,o){function s(u){return u instanceof a?u:new a(function(l){l(u)})}return new(a||(a=Promise))(function(u,l){function c(f){try{h(o.next(f))}catch(m){l(m)}}function d(f){try{h(o.throw(f))}catch(m){l(m)}}function h(f){f.done?u(f.value):s(f.value).then(c,d)}h((o=o.apply(n,i||[])).next())})},e=Ku&&Ku.__asyncValues||function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],a;return i?i.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a);function o(u){a[u]=n[u]&&function(l){return new Promise(function(c,d){l=n[u](l),s(c,d,l.done,l.value)})}}function s(u,l,c,d){Promise.resolve(d).then(function(h){u({value:h,done:c})},l)}};Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.NodePre18StreamWrapper=void 0;let t=class{constructor(i){this.readableStream=i}on(i,a){this.readableStream.on(i,a)}off(i,a){this.readableStream.off(i,a)}pipe(i){return this.readableStream.pipe(i),i}pipeTo(i){return this.pipe(i)}unpipe(i){i?this.readableStream.unpipe(i):this.readableStream.unpipe()}destroy(i){this.readableStream.destroy(i)}pause(){this.readableStream.pause()}resume(){this.readableStream.resume()}get isPaused(){return this.readableStream.isPaused()}read(){return r(this,void 0,void 0,function*(){return new Promise((i,a)=>{const o=this.readableStream.read();o?i(o):(this.readableStream.once("readable",()=>{const s=this.readableStream.read();i(s)}),this.readableStream.once("error",a))})})}setEncoding(i){this.readableStream.setEncoding(i),this.encoding=i}text(){var i,a;return r(this,void 0,void 0,function*(){const o=[],s=new TextEncoder;this.readableStream.setEncoding(this.encoding||"utf-8");try{for(var u=e(this.readableStream),l;l=yield u.next(),!l.done;){const d=l.value;o.push(s.encode(d))}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=u.return)&&(yield a.call(u))}finally{if(i)throw i.error}}return new TextDecoder(this.encoding||"utf-8").decode(Buffer.concat(o))})}json(){return r(this,void 0,void 0,function*(){const i=yield this.text();return JSON.parse(i)})}[Symbol.asyncIterator](){const a=this.readableStream[Symbol.asyncIterator]();return{next(){return r(this,void 0,void 0,function*(){const{value:o,done:s}=yield a.next();return{value:o,done:s}})},[Symbol.asyncIterator](){return this}}}};return Ku.NodePre18StreamWrapper=t,Ku}var OB;function Yce(){if(OB)return Ar;OB=1;var r=Ar&&Ar.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Ar&&Ar.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Ar&&Ar.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s},n=Ar&&Ar.__awaiter||function(o,s,u,l){function c(d){return d instanceof u?d:new u(function(h){h(d)})}return new(u||(u=Promise))(function(d,h){function f(g){try{p(l.next(g))}catch(b){h(b)}}function m(g){try{p(l.throw(g))}catch(b){h(b)}}function p(g){g.done?d(g.value):c(g.value).then(f,m)}p((l=l.apply(o,s||[])).next())})};Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.chooseStreamWrapper=void 0;const i=Nm();function a(o){return n(this,void 0,void 0,function*(){return i.RUNTIME.type==="node"&&i.RUNTIME.parsedVersion!=null&&i.RUNTIME.parsedVersion>=18?new(yield Promise.resolve().then(()=>t(Xce()))).Node18UniversalStreamWrapper(o):i.RUNTIME.type!=="node"&&typeof fetch=="function"?new(yield Promise.resolve().then(()=>t(Zce()))).UndiciStreamWrapper(o):new(yield Promise.resolve().then(()=>t(Qce()))).NodePre18StreamWrapper(o)})}return Ar.chooseStreamWrapper=a,Ar}var EB;function ede(){if(EB)return vc;EB=1;var r=vc&&vc.__awaiter||function(n,i,a,o){function s(u){return u instanceof a?u:new a(function(l){l(u)})}return new(a||(a=Promise))(function(u,l){function c(f){try{h(o.next(f))}catch(m){l(m)}}function d(f){try{h(o.throw(f))}catch(m){l(m)}}function h(f){f.done?u(f.value):s(f.value).then(c,d)}h((o=o.apply(n,i||[])).next())})};Object.defineProperty(vc,"__esModule",{value:!0}),vc.getResponseBody=void 0;const e=Yce();function t(n,i){return r(this,void 0,void 0,function*(){if(n.body!=null&&i==="blob")return yield n.blob();if(n.body!=null&&i==="arrayBuffer")return yield n.arrayBuffer();if(n.body!=null&&i==="sse")return n.body;if(n.body!=null&&i==="streaming")return(0,e.chooseStreamWrapper)(n.body);if(n.body!=null&&i==="text")return yield n.text();{const a=yield n.text();if(a.length>0)try{return JSON.parse(a)}catch{return{ok:!1,error:{reason:"non-json",statusCode:n.status,rawBody:a}}}else return}})}return vc.getResponseBody=t,vc}var Oc={},Ec={},RB;function tde(){if(RB)return Ec;RB=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.anySignal=Ec.getTimeoutSignal=void 0;const r="timeout";function e(n){const i=new AbortController,a=setTimeout(()=>i.abort(r),n);return{signal:i.signal,abortId:a}}Ec.getTimeoutSignal=e;function t(...n){const i=n.length===1&&Array.isArray(n[0])?n[0]:n,a=new AbortController;for(const o of i){if(o.aborted){a.abort(o==null?void 0:o.reason);break}o.addEventListener("abort",()=>a.abort(o==null?void 0:o.reason),{signal:a.signal})}return a.signal}return Ec.anySignal=t,Ec}var CB;function rde(){if(CB)return Oc;CB=1;var r=Oc&&Oc.__awaiter||function(n,i,a,o){function s(u){return u instanceof a?u:new a(function(l){l(u)})}return new(a||(a=Promise))(function(u,l){function c(f){try{h(o.next(f))}catch(m){l(m)}}function d(f){try{h(o.throw(f))}catch(m){l(m)}}function h(f){f.done?u(f.value):s(f.value).then(c,d)}h((o=o.apply(n,i||[])).next())})};Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.makeRequest=void 0;const e=tde(),t=(n,i,a,o,s,u,l,c,d)=>r(void 0,void 0,void 0,function*(){const h=[];let f;if(u!=null){const{signal:g,abortId:b}=(0,e.getTimeoutSignal)(u);f=b,h.push(g)}l!=null&&h.push(l);let m=(0,e.anySignal)(h);const p=yield n(i,{method:a,headers:o,body:s,signal:m,credentials:c?"include":void 0,duplex:d});return f!=null&&clearTimeout(f),p});return Oc.makeRequest=t,Oc}var Rc={},PB;function nde(){if(PB)return Rc;PB=1;var r=Rc&&Rc.__awaiter||function(s,u,l,c){function d(h){return h instanceof l?h:new l(function(f){f(h)})}return new(l||(l=Promise))(function(h,f){function m(b){try{g(c.next(b))}catch(_){f(_)}}function p(b){try{g(c.throw(b))}catch(_){f(_)}}function g(b){b.done?h(b.value):d(b.value).then(m,p)}g((c=c.apply(s,u||[])).next())})};Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.requestWithRetries=void 0;const e=1e3,t=6e4,n=2,i=.2;function a(s){const u=1+(Math.random()*2-1)*i;return s*u}function o(s,u=n){return r(this,void 0,void 0,function*(){let l=yield s();for(let c=0;c<u&&([408,409,429].includes(l.status)||l.status>=500);++c){const d=Math.min(e*Math.pow(2,c),t),h=a(d);yield new Promise(f=>setTimeout(f,h)),l=yield s()}return l})}return Rc.requestWithRetries=o,Rc}var jB;function ide(){if(jB)return Hu;jB=1;var r=Hu&&Hu.__awaiter||function(u,l,c,d){function h(f){return f instanceof c?f:new c(function(m){m(f)})}return new(c||(c=Promise))(function(f,m){function p(_){try{b(d.next(_))}catch(y){m(y)}}function g(_){try{b(d.throw(_))}catch(y){m(y)}}function b(_){_.done?f(_.value):h(_.value).then(p,g)}b((d=d.apply(u,l||[])).next())})};Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.fetcher=Hu.fetcherImpl=void 0;const e=Kce(),t=Gce(),n=Jce(),i=ede(),a=rde(),o=nde();function s(u){return r(this,void 0,void 0,function*(){const l={};if(u.body!==void 0&&u.contentType!=null&&(l["Content-Type"]=u.contentType),u.headers!=null)for(const[f,m]of Object.entries(u.headers))m!=null&&(l[f]=m);const c=(0,e.createRequestUrl)(u.url,u.queryParameters);let d=yield(0,n.getRequestBody)({body:u.body,type:u.requestType==="json"?"json":"other"});const h=yield(0,t.getFetchFn)();try{const f=yield(0,o.requestWithRetries)(()=>r(this,void 0,void 0,function*(){return(0,a.makeRequest)(h,c,u.method,l,d,u.timeoutMs,u.abortSignal,u.withCredentials,u.duplex)}),u.maxRetries);let m=yield(0,i.getResponseBody)(f,u.responseType);return f.status>=200&&f.status<400?{ok:!0,body:m,headers:f.headers}:{ok:!1,error:{reason:"status-code",statusCode:f.status,body:m}}}catch(f){return u.abortSignal!=null&&u.abortSignal.aborted?{ok:!1,error:{reason:"unknown",errorMessage:"The user aborted a request"}}:f instanceof Error&&f.name==="AbortError"?{ok:!1,error:{reason:"timeout"}}:f instanceof Error?{ok:!1,error:{reason:"unknown",errorMessage:f.message}}:{ok:!1,error:{reason:"unknown",errorMessage:JSON.stringify(f)}}}})}return Hu.fetcherImpl=s,Hu.fetcher=s,Hu}var zp={},TB;function ade(){if(TB)return zp;TB=1,Object.defineProperty(zp,"__esModule",{value:!0}),zp.getHeader=void 0;function r(e,t){for(const[n,i]of Object.entries(e))if(n.toLowerCase()===t.toLowerCase())return i}return zp.getHeader=r,zp}var Cc={},AB;function ode(){if(AB)return Cc;AB=1;var r=Cc&&Cc.__awaiter||function(e,t,n,i){function a(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function u(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):a(d.value).then(u,l)}c((i=i.apply(e,t||[])).next())})};return Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.Supplier=void 0,Cc.Supplier={get:e=>r(void 0,void 0,void 0,function*(){return typeof e=="function"?e():e})},Cc}var MB;function sde(){return MB||(MB=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Supplier=r.getHeader=r.fetcher=void 0;var e=ide();Object.defineProperty(r,"fetcher",{enumerable:!0,get:function(){return e.fetcher}});var t=ade();Object.defineProperty(r,"getHeader",{enumerable:!0,get:function(){return t.getHeader}});var n=ode();Object.defineProperty(r,"Supplier",{enumerable:!0,get:function(){return n.Supplier}})}(kO)),kO}var NE={},Lp={},e_={exports:{}},ude=e_.exports,IB;function lde(){return IB||(IB=1,function(r,e){(function(t,n){r.exports=n()})(typeof self<"u"?self:typeof window<"u"?window:typeof ef<"u"?ef:ude,function(){var t="3.7.2",n=t,i=typeof atob=="function",a=typeof btoa=="function",o=typeof Buffer=="function",s=typeof TextDecoder=="function"?new TextDecoder:void 0,u=typeof TextEncoder=="function"?new TextEncoder:void 0,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=Array.prototype.slice.call(l),d=function(J){var F={};return J.forEach(function(ee,L){return F[ee]=L}),F}(c),h=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,f=String.fromCharCode.bind(String),m=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(J,F){return F===void 0&&(F=function(ee){return ee}),new Uint8Array(Array.prototype.slice.call(J,0).map(F))},p=function(J){return J.replace(/=/g,"").replace(/[+\/]/g,function(F){return F=="+"?"-":"_"})},g=function(J){return J.replace(/[^A-Za-z0-9\+\/]/g,"")},b=function(J){for(var F,ee,L,te,ne="",B=J.length%3,k=0;k<J.length;){if((ee=J.charCodeAt(k++))>255||(L=J.charCodeAt(k++))>255||(te=J.charCodeAt(k++))>255)throw new TypeError("invalid character found");F=ee<<16|L<<8|te,ne+=c[F>>18&63]+c[F>>12&63]+c[F>>6&63]+c[F&63]}return B?ne.slice(0,B-3)+"===".substring(B):ne},_=a?function(J){return btoa(J)}:o?function(J){return Buffer.from(J,"binary").toString("base64")}:b,y=o?function(J){return Buffer.from(J).toString("base64")}:function(J){for(var F=4096,ee=[],L=0,te=J.length;L<te;L+=F)ee.push(f.apply(null,J.subarray(L,L+F)));return _(ee.join(""))},v=function(J,F){return F===void 0&&(F=!1),F?p(y(J)):y(J)},w=function(J){if(J.length<2){var F=J.charCodeAt(0);return F<128?J:F<2048?f(192|F>>>6)+f(128|F&63):f(224|F>>>12&15)+f(128|F>>>6&63)+f(128|F&63)}else{var F=65536+(J.charCodeAt(0)-55296)*1024+(J.charCodeAt(1)-56320);return f(240|F>>>18&7)+f(128|F>>>12&63)+f(128|F>>>6&63)+f(128|F&63)}},S=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,R=function(J){return J.replace(S,w)},P=o?function(J){return Buffer.from(J,"utf8").toString("base64")}:u?function(J){return y(u.encode(J))}:function(J){return _(R(J))},C=function(J,F){return F===void 0&&(F=!1),F?p(P(J)):P(J)},A=function(J){return C(J,!0)},M=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,G=function(J){switch(J.length){case 4:var F=(7&J.charCodeAt(0))<<18|(63&J.charCodeAt(1))<<12|(63&J.charCodeAt(2))<<6|63&J.charCodeAt(3),ee=F-65536;return f((ee>>>10)+55296)+f((ee&1023)+56320);case 3:return f((15&J.charCodeAt(0))<<12|(63&J.charCodeAt(1))<<6|63&J.charCodeAt(2));default:return f((31&J.charCodeAt(0))<<6|63&J.charCodeAt(1))}},U=function(J){return J.replace(M,G)},z=function(J){if(J=J.replace(/\s+/g,""),!h.test(J))throw new TypeError("malformed base64.");J+="==".slice(2-(J.length&3));for(var F,ee="",L,te,ne=0;ne<J.length;)F=d[J.charAt(ne++)]<<18|d[J.charAt(ne++)]<<12|(L=d[J.charAt(ne++)])<<6|(te=d[J.charAt(ne++)]),ee+=L===64?f(F>>16&255):te===64?f(F>>16&255,F>>8&255):f(F>>16&255,F>>8&255,F&255);return ee},W=i?function(J){return atob(g(J))}:o?function(J){return Buffer.from(J,"base64").toString("binary")}:z,Y=o?function(J){return m(Buffer.from(J,"base64"))}:function(J){return m(W(J),function(F){return F.charCodeAt(0)})},oe=function(J){return Y(q(J))},I=o?function(J){return Buffer.from(J,"base64").toString("utf8")}:s?function(J){return s.decode(Y(J))}:function(J){return U(W(J))},q=function(J){return g(J.replace(/[-_]/g,function(F){return F=="-"?"+":"/"}))},T=function(J){return I(q(J))},V=function(J){if(typeof J!="string")return!1;var F=J.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(F)||!/[^\s0-9a-zA-Z\-_]/.test(F)},re=function(J){return{value:J,enumerable:!1,writable:!0,configurable:!0}},Z=function(){var J=function(F,ee){return Object.defineProperty(String.prototype,F,re(ee))};J("fromBase64",function(){return T(this)}),J("toBase64",function(F){return C(this,F)}),J("toBase64URI",function(){return C(this,!0)}),J("toBase64URL",function(){return C(this,!0)}),J("toUint8Array",function(){return oe(this)})},fe=function(){var J=function(F,ee){return Object.defineProperty(Uint8Array.prototype,F,re(ee))};J("toBase64",function(F){return v(this,F)}),J("toBase64URI",function(){return v(this,!0)}),J("toBase64URL",function(){return v(this,!0)})},_e=function(){Z(),fe()},Se={version:t,VERSION:n,atob:W,atobPolyfill:z,btoa:_,btoaPolyfill:b,fromBase64:T,toBase64:C,encode:C,encodeURI:A,encodeURL:A,utob:R,btou:U,decode:T,isValid:V,fromUint8Array:v,toUint8Array:oe,extendString:Z,extendUint8Array:fe,extendBuiltins:_e};return Se.Base64={},Object.keys(Se).forEach(function(J){return Se.Base64[J]=Se[J]}),Se})}(e_)),e_.exports}var xB;function cde(){if(xB)return Lp;xB=1,Object.defineProperty(Lp,"__esModule",{value:!0}),Lp.BasicAuth=void 0;const r=lde(),e=/^Basic /i;return Lp.BasicAuth={toAuthorizationHeader:t=>t==null?void 0:`Basic ${r.Base64.encode(`${t.username}:${t.password}`)}`,fromAuthorizationHeader:t=>{const n=t.replace(e,""),i=r.Base64.decode(n),[a,o]=i.split(":",2);if(a==null||o==null)throw new Error("Invalid basic auth");return{username:a,password:o}}},Lp}var Fp={},DB;function dde(){if(DB)return Fp;DB=1,Object.defineProperty(Fp,"__esModule",{value:!0}),Fp.BearerToken=void 0;const r=/^Bearer /i;return Fp.BearerToken={toAuthorizationHeader:e=>{if(e!=null)return`Bearer ${e}`},fromAuthorizationHeader:e=>e.replace(r,"").trim()},Fp}var $B;function fde(){return $B||($B=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.BearerToken=r.BasicAuth=void 0;var e=cde();Object.defineProperty(r,"BasicAuth",{enumerable:!0,get:function(){return e.BasicAuth}});var t=dde();Object.defineProperty(r,"BearerToken",{enumerable:!0,get:function(){return t.BearerToken}})}(NE)),NE}var qE={},ir={},NB;function hH(){if(NB)return ir;NB=1;var r=ir&&ir.__awaiter||function(u,l,c,d){function h(f){return f instanceof c?f:new c(function(m){m(f)})}return new(c||(c=Promise))(function(f,m){function p(_){try{b(d.next(_))}catch(y){m(y)}}function g(_){try{b(d.throw(_))}catch(y){m(y)}}function b(_){_.done?f(_.value):h(_.value).then(p,g)}b((d=d.apply(u,l||[])).next())})},e=ir&&ir.__asyncValues||function(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=u[Symbol.asyncIterator],c;return l?l.call(u):(u=typeof __values=="function"?__values(u):u[Symbol.iterator](),c={},d("next"),d("throw"),d("return"),c[Symbol.asyncIterator]=function(){return this},c);function d(f){c[f]=u[f]&&function(m){return new Promise(function(p,g){m=u[f](m),h(p,g,m.done,m.value)})}}function h(f,m,p,g){Promise.resolve(g).then(function(b){f({value:b,done:p})},m)}},t=ir&&ir.__await||function(u){return this instanceof t?(this.v=u,this):new t(u)},n=ir&&ir.__asyncGenerator||function(u,l,c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=c.apply(u,l||[]),h,f=[];return h={},m("next"),m("throw"),m("return"),h[Symbol.asyncIterator]=function(){return this},h;function m(v){d[v]&&(h[v]=function(w){return new Promise(function(S,R){f.push([v,w,S,R])>1||p(v,w)})})}function p(v,w){try{g(d[v](w))}catch(S){y(f[0][3],S)}}function g(v){v.value instanceof t?Promise.resolve(v.value.v).then(b,_):y(f[0][2],v)}function b(v){p("next",v)}function _(v){p("throw",v)}function y(v,w){v(w),f.shift(),f.length&&p(f[0][0],f[0][1])}};Object.defineProperty(ir,"__esModule",{value:!0}),ir.readableStreamAsyncIterable=ir.Stream=void 0;const i=Nm(),a="data:";class o{constructor({stream:l,parse:c,eventShape:d,signal:h}){this.controller=new AbortController,this.stream=l,this.parse=c,d.type==="sse"?(this.prefix=a,this.messageTerminator=`
`,this.streamTerminator=d.streamTerminator):this.messageTerminator=d.messageTerminator,h==null||h.addEventListener("abort",()=>this.controller.abort())}iterMessages(){return n(this,arguments,function*(){var c,d;this.controller.signal;const h=s(this.stream);let f="",m=!1;try{for(var p=e(h),g;g=yield t(p.next()),!g.done;){const b=g.value;f+=this.decodeChunk(b);let _;for(;(_=f.indexOf(this.messageTerminator))>=0;){let y=f.slice(0,_+1);if(f=f.slice(_+1),y.length===0)continue;if(!m&&this.prefix!=null){const w=y.indexOf(this.prefix);if(w===-1)continue;m=!0,y=y.slice(w+this.prefix.length)}if(this.streamTerminator!=null&&y.includes(this.streamTerminator))return yield t(void 0);const v=yield t(this.parse(JSON.parse(y)));yield yield t(v),m=!1}}}catch(b){c={error:b}}finally{try{g&&!g.done&&(d=p.return)&&(yield t(d.call(p)))}finally{if(c)throw c.error}}})}[Symbol.asyncIterator](){return n(this,arguments,function*(){var c,d;try{for(var h=e(this.iterMessages()),f;f=yield t(h.next()),!f.done;){const m=f.value;yield yield t(m)}}catch(m){c={error:m}}finally{try{f&&!f.done&&(d=h.return)&&(yield t(d.call(h)))}finally{if(c)throw c.error}}})}decodeChunk(l){let c="";if(typeof TextDecoder<"u"){const d=new TextDecoder("utf8");c+=d.decode(l)}else i.RUNTIME.type==="node"&&typeof l<"u"&&(c+=Buffer.isBuffer(l)?l:Buffer.from(l));return c}}ir.Stream=o;function s(u){if(u[Symbol.asyncIterator])return u;const l=u.getReader();return{next(){return r(this,void 0,void 0,function*(){try{const c=yield l.read();return c!=null&&c.done&&l.releaseLock(),c}catch(c){throw l.releaseLock(),c}})},return(){return r(this,void 0,void 0,function*(){const c=l.cancel();return l.releaseLock(),yield c,{done:!0,value:void 0}})},[Symbol.asyncIterator](){return this}}}return ir.readableStreamAsyncIterable=s,ir}var qB;function pde(){return qB||(qB=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Stream=void 0;var e=hH();Object.defineProperty(r,"Stream",{enumerable:!0,get:function(){return e.Stream}})}(qE)),qE}var Pc={},At={},BE,BB;function hde(){if(BB)return BE;BB=1;var r=Object.defineProperty,e=Object.getOwnPropertyDescriptor,t=Object.getOwnPropertyNames,n=Object.prototype.hasOwnProperty,i=(h,f)=>{for(var m in f)r(h,m,{get:f[m],enumerable:!0})},a=(h,f,m,p)=>{if(f&&typeof f=="object"||typeof f=="function")for(let g of t(f))!n.call(h,g)&&g!==m&&r(h,g,{get:()=>f[g],enumerable:!(p=e(f,g))||p.enumerable});return h},o=h=>a(r({},"__esModule",{value:!0}),h),s={};i(s,{Blob:()=>c,File:()=>d,FormData:()=>l}),BE=o(s);var u=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:window}(),{FormData:l,Blob:c,File:d}=u;return BE}var UE,UB;function mde(){if(UB)return UE;UB=1;var r=Object.defineProperty,e=Object.getOwnPropertyDescriptor,t=Object.getOwnPropertyNames,n=Object.prototype.hasOwnProperty,i=L=>{throw TypeError(L)},a=(L,te)=>{for(var ne in te)r(L,ne,{get:te[ne],enumerable:!0})},o=(L,te,ne,B)=>{if(te&&typeof te=="object"||typeof te=="function")for(let k of t(te))!n.call(L,k)&&k!==ne&&r(L,k,{get:()=>te[k],enumerable:!(B=e(te,k))||B.enumerable});return L},s=L=>o(r({},"__esModule",{value:!0}),L),u=(L,te,ne)=>te.has(L)||i("Cannot "+ne),l=(L,te,ne)=>(u(L,te,"read from private field"),ne?ne.call(L):te.get(L)),c=(L,te,ne)=>te.has(L)?i("Cannot add the same private member more than once"):te instanceof WeakSet?te.add(L):te.set(L,ne),d=(L,te,ne,B)=>(u(L,te,"write to private field"),te.set(L,ne),ne),h=(L,te,ne)=>(u(L,te,"access private method"),ne),f={};a(f,{FormDataEncoder:()=>ee,isFile:()=>C,isFormData:()=>A}),UE=s(f);var m=65536;function*p(L){if(L.byteLength<=m){yield L;return}let te=0;for(;te<L.byteLength;){const ne=Math.min(L.byteLength-te,m),B=L.buffer.slice(te,te+ne);te+=B.byteLength,yield new Uint8Array(B)}}var g="abcdefghijklmnopqrstuvwxyz0123456789";function b(){let L=16,te="";for(;L--;)te+=g[Math.random()*g.length<<0];return te}var _=L=>String(L).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),y=L=>typeof L=="function",v=L=>!!L&&typeof L=="object"&&!Array.isArray(L)&&y(L.getReader),w=L=>y(L[Symbol.asyncIterator]);async function*S(L){const te=L.getReader();for(;;){const{done:ne,value:B}=await te.read();if(ne)break;yield B}}async function*R(L){for await(const te of L)yield*p(te)}var P=L=>{if(w(L))return R(L);if(v(L))return R(S(L));throw new TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")},C=L=>!!(L&&typeof L=="object"&&y(L.constructor)&&L[Symbol.toStringTag]==="File"&&y(L.stream)&&L.name!=null),A=L=>!!(L&&y(L.constructor)&&L[Symbol.toStringTag]==="FormData"&&y(L.append)&&y(L.getAll)&&y(L.entries)&&y(L[Symbol.iterator])),M=L=>Object.prototype.toString.call(L).slice(8,-1).toLowerCase();function G(L){var ne,B;if(M(L)!=="object")return!1;const te=Object.getPrototypeOf(L);return te==null?!0:((B=(ne=te.constructor)==null?void 0:ne.toString)==null?void 0:B.call(ne))===Object.toString()}var U=L=>String(L).replace(/\r|\n/g,(te,ne,B)=>te==="\r"&&B[ne+1]!==`
`||te===`
`&&B[ne-1]!=="\r"?`\r
`:te);function z(L,te){if(typeof te=="string"){for(const[ne,B]of Object.entries(L))if(te.toLowerCase()===ne.toLowerCase())return B}}var W=L=>new Proxy(L,{get:(te,ne)=>z(te,ne),has:(te,ne)=>z(te,ne)!==void 0}),Y={enableAdditionalHeaders:!1},oe={writable:!1,configurable:!1},I,q,T,V,re,Z,fe,_e,Se,J,F,ee=class{constructor(L,te,ne){if(c(this,Se),c(this,I,`\r
`),c(this,q),c(this,T),c(this,V,"-".repeat(2)),c(this,re,new TextEncoder),c(this,Z),c(this,fe),c(this,_e),!A(L))throw new TypeError("Expected first argument to be a FormData instance.");let B;if(G(te)?ne=te:B=te,B||(B=`form-data-encoder-${b()}`),typeof B!="string")throw new TypeError("Expected boundary argument to be a string.");if(ne&&!G(ne))throw new TypeError("Expected options argument to be an object.");d(this,fe,Array.from(L.entries())),d(this,_e,{...Y,...ne}),d(this,q,l(this,re).encode(l(this,I))),d(this,T,l(this,q).byteLength),this.boundary=B,this.contentType=`multipart/form-data; boundary=${this.boundary}`,d(this,Z,l(this,re).encode(`${l(this,V)}${this.boundary}${l(this,V)}${l(this,I).repeat(2)}`));const k={"Content-Type":this.contentType},ae=h(this,Se,F).call(this);ae&&(this.contentLength=ae,k["Content-Length"]=ae),this.headers=W(Object.freeze(k)),Object.defineProperties(this,{boundary:oe,contentType:oe,contentLength:oe,headers:oe})}*values(){for(const[L,te]of l(this,fe)){const ne=C(te)?te:l(this,re).encode(U(te));yield h(this,Se,J).call(this,L,ne),yield ne,yield l(this,q)}yield l(this,Z)}async*encode(){for(const L of this.values())C(L)?yield*P(L.stream()):yield*p(L)}[Symbol.iterator](){return this.values()}[Symbol.asyncIterator](){return this.encode()}};return I=new WeakMap,q=new WeakMap,T=new WeakMap,V=new WeakMap,re=new WeakMap,Z=new WeakMap,fe=new WeakMap,_e=new WeakMap,Se=new WeakSet,J=function(L,te){let ne="";if(ne+=`${l(this,V)}${this.boundary}${l(this,I)}`,ne+=`Content-Disposition: form-data; name="${_(L)}"`,C(te)&&(ne+=`; filename="${_(te.name)}"${l(this,I)}`,ne+=`Content-Type: ${te.type||"application/octet-stream"}`),l(this,_e).enableAdditionalHeaders===!0){const B=C(te)?te.size:te.byteLength;B!=null&&!isNaN(B)&&(ne+=`${l(this,I)}Content-Length: ${B}`)}return l(this,re).encode(`${ne}${l(this,I).repeat(2)}`)},F=function(){let L=0;for(const[te,ne]of l(this,fe)){const B=C(ne)?ne:l(this,re).encode(U(ne)),k=C(B)?B.size:B.byteLength;if(k==null||isNaN(k))return;L+=h(this,Se,J).call(this,te,B).byteLength,L+=k,L+=l(this,T)}return String(L+l(this,Z).byteLength)},UE}var zE,zB;function gde(){return zB||(zB=1,zE=typeof self=="object"?self.FormData:window.FormData),zE}var LB;function _de(){if(LB)return At;LB=1;var r=At&&At.__createBinding||(Object.create?function(c,d,h,f){f===void 0&&(f=h);var m=Object.getOwnPropertyDescriptor(d,h);(!m||("get"in m?!d.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(c,f,m)}:function(c,d,h,f){f===void 0&&(f=h),c[f]=d[h]}),e=At&&At.__setModuleDefault||(Object.create?function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}:function(c,d){c.default=d}),t=At&&At.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var h in c)h!=="default"&&Object.prototype.hasOwnProperty.call(c,h)&&r(d,c,h);return e(d,c),d},n=At&&At.__awaiter||function(c,d,h,f){function m(p){return p instanceof h?p:new h(function(g){g(p)})}return new(h||(h=Promise))(function(p,g){function b(v){try{y(f.next(v))}catch(w){g(w)}}function _(v){try{y(f.throw(v))}catch(w){g(w)}}function y(v){v.done?p(v.value):m(v.value).then(b,_)}y((f=f.apply(c,d||[])).next())})};Object.defineProperty(At,"__esModule",{value:!0}),At.WebFormData=At.Node16FormData=At.Node18FormData=At.newFormData=void 0;const i=Nm();function a(c){return typeof c=="object"&&c!=null&&"name"in c}function o(){return n(this,void 0,void 0,function*(){let c;return i.RUNTIME.type==="node"&&i.RUNTIME.parsedVersion!=null&&i.RUNTIME.parsedVersion>=18?c=new s:i.RUNTIME.type==="node"?c=new u:c=new l,yield c.setup(),c})}At.newFormData=o;class s{setup(){return n(this,void 0,void 0,function*(){this.fd=new(yield Promise.resolve().then(()=>t(hde()))).FormData})}append(d,h){var f;(f=this.fd)===null||f===void 0||f.append(d,h)}appendFile(d,h,f){var m,p;return n(this,void 0,void 0,function*(){f==null&&a(h)&&(f=h.name),h instanceof(yield Promise.resolve().then(()=>t(Yg()))).Readable?(m=this.fd)===null||m===void 0||m.append(d,{type:void 0,name:f,[Symbol.toStringTag]:"File",stream(){return h}}):(p=this.fd)===null||p===void 0||p.append(d,h,f)})}getRequest(){return n(this,void 0,void 0,function*(){const d=new(yield Promise.resolve().then(()=>t(mde()))).FormDataEncoder(this.fd);return{body:yield(yield Promise.resolve().then(()=>t(Yg()))).Readable.from(d),headers:d.headers,duplex:"half"}})}}At.Node18FormData=s;class u{setup(){return n(this,void 0,void 0,function*(){this.fd=new(yield Promise.resolve().then(()=>t(gde()))).default})}append(d,h){var f;(f=this.fd)===null||f===void 0||f.append(d,h)}appendFile(d,h,f){var m,p;return n(this,void 0,void 0,function*(){f==null&&a(h)&&(f=h.name);let g;h instanceof(yield Promise.resolve().then(()=>t(Yg()))).Readable?g=h:g=Buffer.from(yield h.arrayBuffer()),f==null?(m=this.fd)===null||m===void 0||m.append(d,g):(p=this.fd)===null||p===void 0||p.append(d,g,{filename:f})})}getRequest(){return{body:this.fd,headers:this.fd?this.fd.getHeaders():{}}}}At.Node16FormData=u;class l{setup(){return n(this,void 0,void 0,function*(){this.fd=new FormData})}append(d,h){var f;(f=this.fd)===null||f===void 0||f.append(d,h)}appendFile(d,h,f){var m;return n(this,void 0,void 0,function*(){f==null&&a(h)&&(f=h.name),(m=this.fd)===null||m===void 0||m.append(d,new Blob([h]),f)})}getRequest(){return{body:this.fd,headers:{}}}}return At.WebFormData=l,At}var FB;function bde(){return FB||(FB=1,function(r){var e=Pc&&Pc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Pc&&Pc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(_de(),r)}(Pc)),Pc}var jc={},Tc={},LE={},kp={},Vp={},kB;function Wt(){return kB||(kB=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.SchemaType=void 0,Vp.SchemaType={BIGINT:"bigint",DATE:"date",ENUM:"enum",LIST:"list",STRING_LITERAL:"stringLiteral",BOOLEAN_LITERAL:"booleanLiteral",OBJECT:"object",ANY:"any",BOOLEAN:"boolean",NUMBER:"number",STRING:"string",UNKNOWN:"unknown",RECORD:"record",SET:"set",UNION:"union",UNDISCRIMINATED_UNION:"undiscriminatedUnion",OPTIONAL:"optional"}),Vp}var Hp={},VB;function Cr(){if(VB)return Hp;VB=1,Object.defineProperty(Hp,"__esModule",{value:!0}),Hp.getErrorMessageForIncorrectType=void 0;function r(t,n){return`Expected ${n}. Received ${e(t)}.`}Hp.getErrorMessageForIncorrectType=r;function e(t){if(Array.isArray(t))return"list";if(t===null)return"null";if(t instanceof BigInt)return"BigInt";switch(typeof t){case"string":return`"${t}"`;case"bigint":case"number":case"boolean":case"undefined":return`${t}`}return typeof t}return Hp}var Kp={},HB;function sl(){if(HB)return Kp;HB=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.maybeSkipValidation=void 0;function r(t){return Object.assign(Object.assign({},t),{json:e(t.json),parse:e(t.parse)})}Kp.maybeSkipValidation=r;function e(t){return(n,i)=>{const a=t(n,i),{skipValidation:o=!1}=i??{};return!a.ok&&o?(console.warn(["Failed to validate.",...a.errors.map(s=>"  - "+(s.path.length>0?`${s.path.join(".")}: ${s.message}`:s.message))].join(`
`)),{ok:!0,value:n}):a}}return Kp}var FE={},Wu={},Wp={},Gp={},KB;function mH(){if(KB)return Gp;KB=1,Object.defineProperty(Gp,"__esModule",{value:!0}),Gp.stringifyValidationError=void 0;function r(e){return e.path.length===0?e.message:`${e.path.join(" -> ")}: ${e.message}`}return Gp.stringifyValidationError=r,Gp}var WB;function _H(){if(WB)return Wp;WB=1,Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.JsonError=void 0;const r=mH();let e=class gH extends Error{constructor(n){super(n.map(r.stringifyValidationError).join("; ")),this.errors=n,Object.setPrototypeOf(this,gH.prototype)}};return Wp.JsonError=e,Wp}var Jp={},GB;function yH(){if(GB)return Jp;GB=1,Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.ParseError=void 0;const r=mH();let e=class bH extends Error{constructor(n){super(n.map(r.stringifyValidationError).join("; ")),this.errors=n,Object.setPrototypeOf(this,bH.prototype)}};return Jp.ParseError=e,Jp}var JB;function yde(){if(JB)return Wu;JB=1,Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.transform=Wu.optional=Wu.getSchemaUtils=void 0;const r=Wt(),e=_H(),t=yH();function n(o){return{optional:()=>i(o),transform:s=>a(o,s),parseOrThrow:(s,u)=>{const l=o.parse(s,u);if(l.ok)return l.value;throw new t.ParseError(l.errors)},jsonOrThrow:(s,u)=>{const l=o.json(s,u);if(l.ok)return l.value;throw new e.JsonError(l.errors)}}}Wu.getSchemaUtils=n;function i(o){const s={parse:(u,l)=>u==null?{ok:!0,value:void 0}:o.parse(u,l),json:(u,l)=>l!=null&&l.omitUndefined&&u===void 0?{ok:!0,value:void 0}:u==null?{ok:!0,value:null}:o.json(u,l),getType:()=>r.SchemaType.OPTIONAL};return Object.assign(Object.assign({},s),n(s))}Wu.optional=i;function a(o,s){const u={parse:(l,c)=>{const d=o.parse(l,c);return d.ok?{ok:!0,value:s.transform(d.value)}:d},json:(l,c)=>{const d=s.untransform(l);return o.json(d,c)},getType:()=>o.getType()};return Object.assign(Object.assign({},u),n(u))}return Wu.transform=a,Wu}var XB;function Lr(){return XB||(XB=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ParseError=r.JsonError=r.transform=r.optional=r.getSchemaUtils=void 0;var e=yde();Object.defineProperty(r,"getSchemaUtils",{enumerable:!0,get:function(){return e.getSchemaUtils}}),Object.defineProperty(r,"optional",{enumerable:!0,get:function(){return e.optional}}),Object.defineProperty(r,"transform",{enumerable:!0,get:function(){return e.transform}});var t=_H();Object.defineProperty(r,"JsonError",{enumerable:!0,get:function(){return t.JsonError}});var n=yH();Object.defineProperty(r,"ParseError",{enumerable:!0,get:function(){return n.ParseError}})}(FE)),FE}var ZB;function vde(){if(ZB)return kp;ZB=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.bigint=void 0;const r=Wt(),e=Cr(),t=sl(),n=Lr();function i(){const a={parse:(o,{breadcrumbsPrefix:s=[]}={})=>typeof o!="string"?{ok:!1,errors:[{path:s,message:(0,e.getErrorMessageForIncorrectType)(o,"string")}]}:{ok:!0,value:BigInt(o)},json:(o,{breadcrumbsPrefix:s=[]}={})=>typeof o=="bigint"?{ok:!0,value:o.toString()}:{ok:!1,errors:[{path:s,message:(0,e.getErrorMessageForIncorrectType)(o,"bigint")}]},getType:()=>r.SchemaType.BIGINT};return Object.assign(Object.assign({},(0,t.maybeSkipValidation)(a)),(0,n.getSchemaUtils)(a))}return kp.bigint=i,kp}var QB;function wde(){return QB||(QB=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.bigint=void 0;var e=vde();Object.defineProperty(r,"bigint",{enumerable:!0,get:function(){return e.bigint}})}(LE)),LE}var kE={},Xp={},YB;function Sde(){if(YB)return Xp;YB=1,Object.defineProperty(Xp,"__esModule",{value:!0}),Xp.date=void 0;const r=Wt(),e=Cr(),t=sl(),n=Lr(),i=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([.,]\d+(?!:))?)?(\17[0-5]\d([.,]\d+)?)?([zZ]|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;function a(){const o={parse:(s,{breadcrumbsPrefix:u=[]}={})=>typeof s!="string"?{ok:!1,errors:[{path:u,message:(0,e.getErrorMessageForIncorrectType)(s,"string")}]}:i.test(s)?{ok:!0,value:new Date(s)}:{ok:!1,errors:[{path:u,message:(0,e.getErrorMessageForIncorrectType)(s,"ISO 8601 date string")}]},json:(s,{breadcrumbsPrefix:u=[]}={})=>s instanceof Date?{ok:!0,value:s.toISOString()}:{ok:!1,errors:[{path:u,message:(0,e.getErrorMessageForIncorrectType)(s,"Date object")}]},getType:()=>r.SchemaType.DATE};return Object.assign(Object.assign({},(0,t.maybeSkipValidation)(o)),(0,n.getSchemaUtils)(o))}return Xp.date=a,Xp}var eU;function Ode(){return eU||(eU=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.date=void 0;var e=Sde();Object.defineProperty(r,"date",{enumerable:!0,get:function(){return e.date}})}(kE)),kE}var VE={},Zp={},Qp={},tU;function Ll(){if(tU)return Qp;tU=1,Object.defineProperty(Qp,"__esModule",{value:!0}),Qp.createIdentitySchemaCreator=void 0;const r=Lr(),e=sl();function t(n,i){return()=>{const a={parse:i,json:i,getType:()=>n};return Object.assign(Object.assign({},(0,e.maybeSkipValidation)(a)),(0,r.getSchemaUtils)(a))}}return Qp.createIdentitySchemaCreator=t,Qp}var rU;function Ede(){if(rU)return Zp;rU=1,Object.defineProperty(Zp,"__esModule",{value:!0}),Zp.enum_=void 0;const r=Wt(),e=Ll(),t=Cr();function n(i){const a=new Set(i);return(0,e.createIdentitySchemaCreator)(r.SchemaType.ENUM,(s,{allowUnrecognizedEnumValues:u,breadcrumbsPrefix:l=[]}={})=>typeof s!="string"?{ok:!1,errors:[{path:l,message:(0,t.getErrorMessageForIncorrectType)(s,"string")}]}:!a.has(s)&&!u?{ok:!1,errors:[{path:l,message:(0,t.getErrorMessageForIncorrectType)(s,"enum")}]}:{ok:!0,value:s})()}return Zp.enum_=n,Zp}var nU;function vH(){return nU||(nU=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.enum_=void 0;var e=Ede();Object.defineProperty(r,"enum_",{enumerable:!0,get:function(){return e.enum_}})}(VE)),VE}var HE={},Gu={},iU;function wH(){if(iU)return Gu;iU=1,Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.getMemoizedSchema=Gu.constructLazyBaseSchema=Gu.lazy=void 0;const r=Lr();function e(i){const a=t(i);return Object.assign(Object.assign({},a),(0,r.getSchemaUtils)(a))}Gu.lazy=e;function t(i){return{parse:(a,o)=>n(i).parse(a,o),json:(a,o)=>n(i).json(a,o),getType:()=>n(i).getType()}}Gu.constructLazyBaseSchema=t;function n(i){const a=i;return a.__zurg_memoized==null&&(a.__zurg_memoized=i()),a.__zurg_memoized}return Gu.getMemoizedSchema=n,Gu}var Yp={},KE={},Ac={},eh={},aU;function SH(){if(aU)return eh;aU=1,Object.defineProperty(eh,"__esModule",{value:!0}),eh.entries=void 0;function r(e){return Object.entries(e)}return eh.entries=r,eh}var th={},oU;function OH(){if(oU)return th;oU=1,Object.defineProperty(th,"__esModule",{value:!0}),th.filterObject=void 0;function r(e,t){const n=new Set(t);return Object.entries(e).reduce((i,[a,o])=>(n.has(a)&&(i[a]=o),i),{})}return th.filterObject=r,th}var rh={},sU;function Eb(){if(sU)return rh;sU=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.isPlainObject=void 0;function r(e){if(typeof e!="object"||e===null)return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}return rh.isPlainObject=r,rh}var nh={},uU;function EH(){if(uU)return nh;uU=1,Object.defineProperty(nh,"__esModule",{value:!0}),nh.keys=void 0;function r(e){return Object.keys(e)}return nh.keys=r,nh}var ih={},lU;function Rde(){if(lU)return ih;lU=1,Object.defineProperty(ih,"__esModule",{value:!0}),ih.partition=void 0;function r(e,t){const n=[],i=[];for(const a of e)t(a)?n.push(a):i.push(a);return[n,i]}return ih.partition=r,ih}var WE={},Mc={},cU;function Cde(){if(cU)return Mc;cU=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.withParsedProperties=Mc.getObjectLikeUtils=void 0;const r=OH(),e=Cr(),t=Eb(),n=Lr();function i(o){return{withParsedProperties:s=>a(o,s)}}Mc.getObjectLikeUtils=i;function a(o,s){const u={parse:(l,c)=>{const d=o.parse(l,c);if(!d.ok)return d;const h=Object.entries(s).reduce((f,[m,p])=>Object.assign(Object.assign({},f),{[m]:typeof p=="function"?p(d.value):p}),{});return{ok:!0,value:Object.assign(Object.assign({},d.value),h)}},json:(l,c)=>{var d;if(!(0,t.isPlainObject)(l))return{ok:!1,errors:[{path:(d=c==null?void 0:c.breadcrumbsPrefix)!==null&&d!==void 0?d:[],message:(0,e.getErrorMessageForIncorrectType)(l,"object")}]};const h=new Set(Object.keys(s)),f=(0,r.filterObject)(l,Object.keys(l).filter(m=>!h.has(m)));return o.json(f,c)},getType:()=>o.getType()};return Object.assign(Object.assign(Object.assign({},u),(0,n.getSchemaUtils)(u)),i(u))}return Mc.withParsedProperties=a,Mc}var dU;function Rb(){return dU||(dU=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.withParsedProperties=r.getObjectLikeUtils=void 0;var e=Cde();Object.defineProperty(r,"getObjectLikeUtils",{enumerable:!0,get:function(){return e.getObjectLikeUtils}}),Object.defineProperty(r,"withParsedProperties",{enumerable:!0,get:function(){return e.withParsedProperties}})}(WE)),WE}var Ic={},fU;function RH(){if(fU)return Ic;fU=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.isProperty=Ic.property=void 0;function r(t,n){return{rawKey:t,valueSchema:n,isProperty:!0}}Ic.property=r;function e(t){return t.isProperty}return Ic.isProperty=e,Ic}var pU;function CH(){if(pU)return Ac;pU=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.getObjectUtils=Ac.object=void 0;const r=Wt(),e=SH(),t=OH(),n=Cr(),i=Eb(),a=EH(),o=sl(),s=Rde(),u=Rb(),l=Lr(),c=RH();function d(b){const _={_getRawProperties:()=>Object.entries(b).map(([y,v])=>(0,c.isProperty)(v)?v.rawKey:y),_getParsedProperties:()=>(0,a.keys)(b),parse:(y,v)=>{const w={},S=[];for(const[R,P]of(0,e.entries)(b)){const C=(0,c.isProperty)(P)?P.rawKey:R,A=(0,c.isProperty)(P)?P.valueSchema:P,M={rawKey:C,parsedKey:R,valueSchema:A};w[C]=M,p(A)&&S.push(C)}return h({value:y,requiredKeys:S,getProperty:R=>{const P=w[R];if(P!=null)return{transformedKey:P.parsedKey,transform:C=>{var A;return P.valueSchema.parse(C,Object.assign(Object.assign({},v),{breadcrumbsPrefix:[...(A=v==null?void 0:v.breadcrumbsPrefix)!==null&&A!==void 0?A:[],R]}))}}},unrecognizedObjectKeys:v==null?void 0:v.unrecognizedObjectKeys,skipValidation:v==null?void 0:v.skipValidation,breadcrumbsPrefix:v==null?void 0:v.breadcrumbsPrefix,omitUndefined:v==null?void 0:v.omitUndefined})},json:(y,v)=>{const w=[];for(const[S,R]of(0,e.entries)(b)){const P=(0,c.isProperty)(R)?R.valueSchema:R;p(P)&&w.push(S)}return h({value:y,requiredKeys:w,getProperty:S=>{const R=b[S];if(R!=null)return(0,c.isProperty)(R)?{transformedKey:R.rawKey,transform:P=>{var C;return R.valueSchema.json(P,Object.assign(Object.assign({},v),{breadcrumbsPrefix:[...(C=v==null?void 0:v.breadcrumbsPrefix)!==null&&C!==void 0?C:[],S]}))}}:{transformedKey:S,transform:P=>{var C;return R.json(P,Object.assign(Object.assign({},v),{breadcrumbsPrefix:[...(C=v==null?void 0:v.breadcrumbsPrefix)!==null&&C!==void 0?C:[],S]}))}}},unrecognizedObjectKeys:v==null?void 0:v.unrecognizedObjectKeys,skipValidation:v==null?void 0:v.skipValidation,breadcrumbsPrefix:v==null?void 0:v.breadcrumbsPrefix,omitUndefined:v==null?void 0:v.omitUndefined})},getType:()=>r.SchemaType.OBJECT};return Object.assign(Object.assign(Object.assign(Object.assign({},(0,o.maybeSkipValidation)(_)),(0,l.getSchemaUtils)(_)),(0,u.getObjectLikeUtils)(_)),f(_))}Ac.object=d;function h({value:b,requiredKeys:_,getProperty:y,unrecognizedObjectKeys:v="fail",skipValidation:w=!1,breadcrumbsPrefix:S=[]}){if(!(0,i.isPlainObject)(b))return{ok:!1,errors:[{path:S,message:(0,n.getErrorMessageForIncorrectType)(b,"object")}]};const R=new Set(_),P=[],C={};for(const[A,M]of Object.entries(b)){const G=y(A);if(G!=null){R.delete(A);const U=G.transform(M);U.ok?C[G.transformedKey]=U.value:(C[A]=M,P.push(...U.errors))}else switch(v){case"fail":P.push({path:[...S,A],message:`Unexpected key "${A}"`});break;case"strip":break;case"passthrough":C[A]=M;break}}return P.push(..._.filter(A=>R.has(A)).map(A=>({path:S,message:`Missing required key "${A}"`}))),P.length===0||w?{ok:!0,value:C}:{ok:!1,errors:P}}function f(b){return{extend:_=>{const y={_getParsedProperties:()=>[...b._getParsedProperties(),..._._getParsedProperties()],_getRawProperties:()=>[...b._getRawProperties(),..._._getRawProperties()],parse:(v,w)=>m({extensionKeys:_._getRawProperties(),value:v,transformBase:S=>b.parse(S,w),transformExtension:S=>_.parse(S,w)}),json:(v,w)=>m({extensionKeys:_._getParsedProperties(),value:v,transformBase:S=>b.json(S,w),transformExtension:S=>_.json(S,w)}),getType:()=>r.SchemaType.OBJECT};return Object.assign(Object.assign(Object.assign(Object.assign({},y),(0,l.getSchemaUtils)(y)),(0,u.getObjectLikeUtils)(y)),f(y))},passthrough:()=>{const _={_getParsedProperties:()=>b._getParsedProperties(),_getRawProperties:()=>b._getRawProperties(),parse:(y,v)=>{const w=b.parse(y,Object.assign(Object.assign({},v),{unrecognizedObjectKeys:"passthrough"}));return w.ok?{ok:!0,value:Object.assign(Object.assign({},y),w.value)}:w},json:(y,v)=>{const w=b.json(y,Object.assign(Object.assign({},v),{unrecognizedObjectKeys:"passthrough"}));return w.ok?{ok:!0,value:Object.assign(Object.assign({},y),w.value)}:w},getType:()=>r.SchemaType.OBJECT};return Object.assign(Object.assign(Object.assign(Object.assign({},_),(0,l.getSchemaUtils)(_)),(0,u.getObjectLikeUtils)(_)),f(_))}}}Ac.getObjectUtils=f;function m({extensionKeys:b,value:_,transformBase:y,transformExtension:v}){const w=new Set(b),[S,R]=(0,s.partition)((0,a.keys)(_),A=>w.has(A)),P=y((0,t.filterObject)(_,R)),C=v((0,t.filterObject)(_,S));return P.ok&&C.ok?{ok:!0,value:Object.assign(Object.assign({},P.value),C.value)}:{ok:!1,errors:[...P.ok?[]:P.errors,...C.ok?[]:C.errors]}}function p(b){return!g(b)}function g(b){switch(b.getType()){case r.SchemaType.ANY:case r.SchemaType.UNKNOWN:case r.SchemaType.OPTIONAL:return!0;default:return!1}}return Ac}var ah={},hU;function Pde(){if(hU)return ah;hU=1,Object.defineProperty(ah,"__esModule",{value:!0}),ah.objectWithoutOptionalProperties=void 0;const r=CH();function e(t){return(0,r.object)(t)}return ah.objectWithoutOptionalProperties=e,ah}var mU;function PH(){return mU||(mU=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.property=r.isProperty=r.objectWithoutOptionalProperties=r.object=r.getObjectUtils=void 0;var e=CH();Object.defineProperty(r,"getObjectUtils",{enumerable:!0,get:function(){return e.getObjectUtils}}),Object.defineProperty(r,"object",{enumerable:!0,get:function(){return e.object}});var t=Pde();Object.defineProperty(r,"objectWithoutOptionalProperties",{enumerable:!0,get:function(){return t.objectWithoutOptionalProperties}});var n=RH();Object.defineProperty(r,"isProperty",{enumerable:!0,get:function(){return n.isProperty}}),Object.defineProperty(r,"property",{enumerable:!0,get:function(){return n.property}})}(KE)),KE}var gU;function jde(){if(gU)return Yp;gU=1,Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.lazyObject=void 0;const r=PH(),e=Rb(),t=Lr(),n=wH();function i(a){const o=Object.assign(Object.assign({},(0,n.constructLazyBaseSchema)(a)),{_getRawProperties:()=>(0,n.getMemoizedSchema)(a)._getRawProperties(),_getParsedProperties:()=>(0,n.getMemoizedSchema)(a)._getParsedProperties()});return Object.assign(Object.assign(Object.assign(Object.assign({},o),(0,t.getSchemaUtils)(o)),(0,e.getObjectLikeUtils)(o)),(0,r.getObjectUtils)(o))}return Yp.lazyObject=i,Yp}var _U;function Tde(){return _U||(_U=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.lazyObject=r.lazy=void 0;var e=wH();Object.defineProperty(r,"lazy",{enumerable:!0,get:function(){return e.lazy}});var t=jde();Object.defineProperty(r,"lazyObject",{enumerable:!0,get:function(){return t.lazyObject}})}(HE)),HE}var GE={},oh={},bU;function Ade(){if(bU)return oh;bU=1,Object.defineProperty(oh,"__esModule",{value:!0}),oh.list=void 0;const r=Wt(),e=Cr(),t=sl(),n=Lr();function i(o){const s={parse:(u,l)=>a(u,(c,d)=>{var h;return o.parse(c,Object.assign(Object.assign({},l),{breadcrumbsPrefix:[...(h=l==null?void 0:l.breadcrumbsPrefix)!==null&&h!==void 0?h:[],`[${d}]`]}))}),json:(u,l)=>a(u,(c,d)=>{var h;return o.json(c,Object.assign(Object.assign({},l),{breadcrumbsPrefix:[...(h=l==null?void 0:l.breadcrumbsPrefix)!==null&&h!==void 0?h:[],`[${d}]`]}))}),getType:()=>r.SchemaType.LIST};return Object.assign(Object.assign({},(0,t.maybeSkipValidation)(s)),(0,n.getSchemaUtils)(s))}oh.list=i;function a(o,s){return Array.isArray(o)?o.map((l,c)=>s(l,c)).reduce((l,c)=>{if(l.ok&&c.ok)return{ok:!0,value:[...l.value,c.value]};const d=[];return l.ok||d.push(...l.errors),c.ok||d.push(...c.errors),{ok:!1,errors:d}},{ok:!0,value:[]}):{ok:!1,errors:[{message:(0,e.getErrorMessageForIncorrectType)(o,"list"),path:[]}]}}return oh}var yU;function jH(){return yU||(yU=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.list=void 0;var e=Ade();Object.defineProperty(r,"list",{enumerable:!0,get:function(){return e.list}})}(GE)),GE}var JE={},sh={},vU;function Mde(){if(vU)return sh;vU=1,Object.defineProperty(sh,"__esModule",{value:!0}),sh.stringLiteral=void 0;const r=Wt(),e=Ll(),t=Cr();function n(i){return(0,e.createIdentitySchemaCreator)(r.SchemaType.STRING_LITERAL,(o,{breadcrumbsPrefix:s=[]}={})=>o===i?{ok:!0,value:i}:{ok:!1,errors:[{path:s,message:(0,t.getErrorMessageForIncorrectType)(o,`"${i}"`)}]})()}return sh.stringLiteral=n,sh}var uh={},wU;function Ide(){if(wU)return uh;wU=1,Object.defineProperty(uh,"__esModule",{value:!0}),uh.booleanLiteral=void 0;const r=Wt(),e=Ll(),t=Cr();function n(i){return(0,e.createIdentitySchemaCreator)(r.SchemaType.BOOLEAN_LITERAL,(o,{breadcrumbsPrefix:s=[]}={})=>o===i?{ok:!0,value:i}:{ok:!1,errors:[{path:s,message:(0,t.getErrorMessageForIncorrectType)(o,`${i.toString()}`)}]})()}return uh.booleanLiteral=n,uh}var SU;function xde(){return SU||(SU=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.booleanLiteral=r.stringLiteral=void 0;var e=Mde();Object.defineProperty(r,"stringLiteral",{enumerable:!0,get:function(){return e.stringLiteral}});var t=Ide();Object.defineProperty(r,"booleanLiteral",{enumerable:!0,get:function(){return t.booleanLiteral}})}(JE)),JE}var XE={},lh={},OU;function Dde(){if(OU)return lh;OU=1,Object.defineProperty(lh,"__esModule",{value:!0}),lh.any=void 0;const r=Wt(),e=Ll();return lh.any=(0,e.createIdentitySchemaCreator)(r.SchemaType.ANY,t=>({ok:!0,value:t})),lh}var ch={},EU;function $de(){if(EU)return ch;EU=1,Object.defineProperty(ch,"__esModule",{value:!0}),ch.boolean=void 0;const r=Wt(),e=Ll(),t=Cr();return ch.boolean=(0,e.createIdentitySchemaCreator)(r.SchemaType.BOOLEAN,(n,{breadcrumbsPrefix:i=[]}={})=>typeof n=="boolean"?{ok:!0,value:n}:{ok:!1,errors:[{path:i,message:(0,t.getErrorMessageForIncorrectType)(n,"boolean")}]}),ch}var dh={},RU;function Nde(){if(RU)return dh;RU=1,Object.defineProperty(dh,"__esModule",{value:!0}),dh.number=void 0;const r=Wt(),e=Ll(),t=Cr();return dh.number=(0,e.createIdentitySchemaCreator)(r.SchemaType.NUMBER,(n,{breadcrumbsPrefix:i=[]}={})=>typeof n=="number"?{ok:!0,value:n}:{ok:!1,errors:[{path:i,message:(0,t.getErrorMessageForIncorrectType)(n,"number")}]}),dh}var fh={},CU;function qde(){if(CU)return fh;CU=1,Object.defineProperty(fh,"__esModule",{value:!0}),fh.string=void 0;const r=Wt(),e=Ll(),t=Cr();return fh.string=(0,e.createIdentitySchemaCreator)(r.SchemaType.STRING,(n,{breadcrumbsPrefix:i=[]}={})=>typeof n=="string"?{ok:!0,value:n}:{ok:!1,errors:[{path:i,message:(0,t.getErrorMessageForIncorrectType)(n,"string")}]}),fh}var ph={},PU;function Bde(){if(PU)return ph;PU=1,Object.defineProperty(ph,"__esModule",{value:!0}),ph.unknown=void 0;const r=Wt(),e=Ll();return ph.unknown=(0,e.createIdentitySchemaCreator)(r.SchemaType.UNKNOWN,t=>({ok:!0,value:t})),ph}var jU;function Ude(){return jU||(jU=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.unknown=r.string=r.number=r.boolean=r.any=void 0;var e=Dde();Object.defineProperty(r,"any",{enumerable:!0,get:function(){return e.any}});var t=$de();Object.defineProperty(r,"boolean",{enumerable:!0,get:function(){return t.boolean}});var n=Nde();Object.defineProperty(r,"number",{enumerable:!0,get:function(){return n.number}});var i=qde();Object.defineProperty(r,"string",{enumerable:!0,get:function(){return i.string}});var a=Bde();Object.defineProperty(r,"unknown",{enumerable:!0,get:function(){return a.unknown}})}(XE)),XE}var ZE={},hh={},TU;function zde(){if(TU)return hh;TU=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.record=void 0;const r=Wt(),e=SH(),t=Cr(),n=Eb(),i=sl(),a=Lr();function o(u,l){const c={parse:(d,h)=>s({value:d,isKeyNumeric:u.getType()===r.SchemaType.NUMBER,transformKey:f=>{var m;return u.parse(f,Object.assign(Object.assign({},h),{breadcrumbsPrefix:[...(m=h==null?void 0:h.breadcrumbsPrefix)!==null&&m!==void 0?m:[],`${f} (key)`]}))},transformValue:(f,m)=>{var p;return l.parse(f,Object.assign(Object.assign({},h),{breadcrumbsPrefix:[...(p=h==null?void 0:h.breadcrumbsPrefix)!==null&&p!==void 0?p:[],`${m}`]}))},breadcrumbsPrefix:h==null?void 0:h.breadcrumbsPrefix}),json:(d,h)=>s({value:d,isKeyNumeric:u.getType()===r.SchemaType.NUMBER,transformKey:f=>{var m;return u.json(f,Object.assign(Object.assign({},h),{breadcrumbsPrefix:[...(m=h==null?void 0:h.breadcrumbsPrefix)!==null&&m!==void 0?m:[],`${f} (key)`]}))},transformValue:(f,m)=>{var p;return l.json(f,Object.assign(Object.assign({},h),{breadcrumbsPrefix:[...(p=h==null?void 0:h.breadcrumbsPrefix)!==null&&p!==void 0?p:[],`${m}`]}))},breadcrumbsPrefix:h==null?void 0:h.breadcrumbsPrefix}),getType:()=>r.SchemaType.RECORD};return Object.assign(Object.assign({},(0,i.maybeSkipValidation)(c)),(0,a.getSchemaUtils)(c))}hh.record=o;function s({value:u,isKeyNumeric:l,transformKey:c,transformValue:d,breadcrumbsPrefix:h=[]}){return(0,n.isPlainObject)(u)?(0,e.entries)(u).reduce((f,[m,p])=>{if(p==null)return f;const g=f;let b=m;if(l){const w=m.length>0?Number(m):NaN;isNaN(w)||(b=w)}const _=c(b),y=d(p,b);if(g.ok&&_.ok&&y.ok)return{ok:!0,value:Object.assign(Object.assign({},g.value),{[_.value]:y.value})};const v=[];return g.ok||v.push(...g.errors),_.ok||v.push(..._.errors),y.ok||v.push(...y.errors),{ok:!1,errors:v}},{ok:!0,value:{}}):{ok:!1,errors:[{path:h,message:(0,t.getErrorMessageForIncorrectType)(u,"object")}]}}return hh}var AU;function Lde(){return AU||(AU=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.record=void 0;var e=zde();Object.defineProperty(r,"record",{enumerable:!0,get:function(){return e.record}})}(ZE)),ZE}var QE={},mh={},MU;function Fde(){if(MU)return mh;MU=1,Object.defineProperty(mh,"__esModule",{value:!0}),mh.set=void 0;const r=Wt(),e=Cr(),t=sl(),n=jH(),i=Lr();function a(o){const s=(0,n.list)(o),u={parse:(l,c)=>{const d=s.parse(l,c);return d.ok?{ok:!0,value:new Set(d.value)}:d},json:(l,c)=>{var d;return l instanceof Set?s.json([...l],c):{ok:!1,errors:[{path:(d=c==null?void 0:c.breadcrumbsPrefix)!==null&&d!==void 0?d:[],message:(0,e.getErrorMessageForIncorrectType)(l,"Set")}]}},getType:()=>r.SchemaType.SET};return Object.assign(Object.assign({},(0,t.maybeSkipValidation)(u)),(0,i.getSchemaUtils)(u))}return mh.set=a,mh}var IU;function kde(){return IU||(IU=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.set=void 0;var e=Fde();Object.defineProperty(r,"set",{enumerable:!0,get:function(){return e.set}})}(QE)),QE}var YE={},gh={},xU;function Vde(){if(xU)return gh;xU=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh.undiscriminatedUnion=void 0;const r=Wt(),e=sl(),t=Lr();function n(a){const o={parse:(s,u)=>i((l,c)=>l.parse(s,c),a,u),json:(s,u)=>i((l,c)=>l.json(s,c),a,u),getType:()=>r.SchemaType.UNDISCRIMINATED_UNION};return Object.assign(Object.assign({},(0,e.maybeSkipValidation)(o)),(0,t.getSchemaUtils)(o))}gh.undiscriminatedUnion=n;function i(a,o,s){const u=[];for(const[l,c]of o.entries()){const d=a(c,Object.assign(Object.assign({},s),{skipValidation:!1}));if(d.ok)return d;for(const h of d.errors)u.push({path:h.path,message:`[Variant ${l}] ${h.message}`})}return{ok:!1,errors:u}}return gh}var DU;function Hde(){return DU||(DU=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.undiscriminatedUnion=void 0;var e=Vde();Object.defineProperty(r,"undiscriminatedUnion",{enumerable:!0,get:function(){return e.undiscriminatedUnion}})}(YE)),YE}var eR={},_h={},$U;function Kde(){if($U)return _h;$U=1,Object.defineProperty(_h,"__esModule",{value:!0}),_h.discriminant=void 0;function r(e,t){return{parsedDiscriminant:e,rawDiscriminant:t}}return _h.discriminant=r,_h}var xc={},NU;function Wde(){if(NU)return xc;NU=1;var r=xc&&xc.__rest||function(d,h){var f={};for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&h.indexOf(m)<0&&(f[m]=d[m]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,m=Object.getOwnPropertySymbols(d);p<m.length;p++)h.indexOf(m[p])<0&&Object.prototype.propertyIsEnumerable.call(d,m[p])&&(f[m[p]]=d[m[p]]);return f};Object.defineProperty(xc,"__esModule",{value:!0}),xc.union=void 0;const e=Wt(),t=Cr(),n=Eb(),i=EH(),a=sl(),o=vH(),s=Rb(),u=Lr();function l(d,h){const f=typeof d=="string"?d:d.rawDiscriminant,m=typeof d=="string"?d:d.parsedDiscriminant,p=(0,o.enum_)((0,i.keys)(h)),g={parse:(b,_)=>c({value:b,discriminant:f,transformedDiscriminant:m,transformDiscriminantValue:y=>{var v;return p.parse(y,{allowUnrecognizedEnumValues:_==null?void 0:_.allowUnrecognizedUnionMembers,breadcrumbsPrefix:[...(v=_==null?void 0:_.breadcrumbsPrefix)!==null&&v!==void 0?v:[],f]})},getAdditionalPropertiesSchema:y=>h[y],allowUnrecognizedUnionMembers:_==null?void 0:_.allowUnrecognizedUnionMembers,transformAdditionalProperties:(y,v)=>v.parse(y,_),breadcrumbsPrefix:_==null?void 0:_.breadcrumbsPrefix}),json:(b,_)=>c({value:b,discriminant:m,transformedDiscriminant:f,transformDiscriminantValue:y=>{var v;return p.json(y,{allowUnrecognizedEnumValues:_==null?void 0:_.allowUnrecognizedUnionMembers,breadcrumbsPrefix:[...(v=_==null?void 0:_.breadcrumbsPrefix)!==null&&v!==void 0?v:[],m]})},getAdditionalPropertiesSchema:y=>h[y],allowUnrecognizedUnionMembers:_==null?void 0:_.allowUnrecognizedUnionMembers,transformAdditionalProperties:(y,v)=>v.json(y,_),breadcrumbsPrefix:_==null?void 0:_.breadcrumbsPrefix}),getType:()=>e.SchemaType.UNION};return Object.assign(Object.assign(Object.assign({},(0,a.maybeSkipValidation)(g)),(0,u.getSchemaUtils)(g)),(0,s.getObjectLikeUtils)(g))}xc.union=l;function c({value:d,discriminant:h,transformedDiscriminant:f,transformDiscriminantValue:m,getAdditionalPropertiesSchema:p,allowUnrecognizedUnionMembers:g=!1,transformAdditionalProperties:b,breadcrumbsPrefix:_=[]}){if(!(0,n.isPlainObject)(d))return{ok:!1,errors:[{path:_,message:(0,t.getErrorMessageForIncorrectType)(d,"object")}]};const y=d,v=h,w=y[v],S=r(y,[typeof v=="symbol"?v:v+""]);if(w==null)return{ok:!1,errors:[{path:_,message:`Missing discriminant ("${h}")`}]};const R=m(w);if(!R.ok)return{ok:!1,errors:R.errors};const P=p(R.value);if(P==null)return g?{ok:!0,value:Object.assign({[f]:R.value},S)}:{ok:!1,errors:[{path:[..._,h],message:"Unexpected discriminant value"}]};const C=b(S,P);return C.ok?{ok:!0,value:Object.assign({[f]:w},C.value)}:C}return xc}var qU;function Gde(){return qU||(qU=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.union=r.discriminant=void 0;var e=Kde();Object.defineProperty(r,"discriminant",{enumerable:!0,get:function(){return e.discriminant}});var t=Wde();Object.defineProperty(r,"union",{enumerable:!0,get:function(){return t.union}})}(eR)),eR}var BU;function Jde(){return BU||(BU=1,function(r){var e=Tc&&Tc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Tc&&Tc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(wde(),r),t(Ode(),r),t(vH(),r),t(Tde(),r),t(jH(),r),t(xde(),r),t(PH(),r),t(Rb(),r),t(Ude(),r),t(Lde(),r),t(Lr(),r),t(kde(),r),t(Hde(),r),t(Gde(),r)}(Tc)),Tc}var UU;function Xde(){return UU||(UU=1,function(r){var e=jc&&jc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=jc&&jc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(Jde(),r)}(jc)),jc}var zU;function $(){return zU||(zU=1,function(r){var e=Cn&&Cn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),t=Cn&&Cn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),n=Cn&&Cn.__exportStar||function(a,o){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&e(o,a,s)},i=Cn&&Cn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(r,"__esModule",{value:!0}),r.serialization=void 0,n(sde(),r),n(fde(),r),n(pde(),r),n(Nm(),r),n(bde(),r),r.serialization=i(Xde())}(Cn)),Cn}var wt={},LU;function Zde(){if(LU)return wt;LU=1;var r=wt&&wt.__awaiter||function(m,p,g,b){function _(y){return y instanceof g?y:new g(function(v){v(y)})}return new(g||(g=Promise))(function(y,v){function w(P){try{R(b.next(P))}catch(C){v(C)}}function S(P){try{R(b.throw(P))}catch(C){v(C)}}function R(P){P.done?y(P.value):_(P.value).then(w,S)}R((b=b.apply(m,p||[])).next())})},e=wt&&wt.__asyncValues||function(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=m[Symbol.asyncIterator],g;return p?p.call(m):(m=typeof __values=="function"?__values(m):m[Symbol.iterator](),g={},b("next"),b("throw"),b("return"),g[Symbol.asyncIterator]=function(){return this},g);function b(y){g[y]=m[y]&&function(v){return new Promise(function(w,S){v=m[y](v),_(w,S,v.done,v.value)})}}function _(y,v,w,S){Promise.resolve(S).then(function(R){y({value:R,done:w})},v)}},t=wt&&wt.__await||function(m){return this instanceof t?(this.v=m,this):new t(m)},n=wt&&wt.__asyncGenerator||function(m,p,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b=g.apply(m,p||[]),_,y=[];return _={},v("next"),v("throw"),v("return"),_[Symbol.asyncIterator]=function(){return this},_;function v(A){b[A]&&(_[A]=function(M){return new Promise(function(G,U){y.push([A,M,G,U])>1||w(A,M)})})}function w(A,M){try{S(b[A](M))}catch(G){C(y[0][3],G)}}function S(A){A.value instanceof t?Promise.resolve(A.value.v).then(R,P):C(y[0][2],A)}function R(A){w("next",A)}function P(A){w("throw",A)}function C(A,M){A(M),y.shift(),y.length&&w(y[0][0],y[0][1])}};Object.defineProperty(wt,"__esModule",{value:!0}),wt.readableStreamAsyncIterable=wt._decodeChunks=wt.LineDecoder=wt._iterSSEMessages=wt.StreamUtils=void 0;const i=Ot();class a{constructor(p,g){this.iterator=p,this.controller=g}static fromSSEResponse(p,g){let b=!1;function _(){return n(this,arguments,function*(){var v,w;if(b)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");b=!0;let S=!1;try{try{for(var R=e(o(p,g)),P;P=yield t(R.next()),!P.done;){const C=P.value;if(!S){if(C.data.startsWith("[DONE]")){S=!0;continue}if(C.event===null){let A;try{A=JSON.parse(C.data)}catch(M){throw console.error("Could not parse message into JSON:",C.data),console.error("From chunk:",C.raw),M}if(A&&A.error)throw new i.CohereError({message:`Error: ${A.error}`});yield yield t(A)}else{let A;try{A=JSON.parse(C.data)}catch(M){throw console.error("Could not parse message into JSON:",C.data),console.error("From chunk:",C.raw),M}if(C.event=="error")throw new i.CohereError({message:`Error: ${A.message}, ${A.error}`});yield yield t({event:C.event,data:A})}}}}catch(C){v={error:C}}finally{try{P&&!P.done&&(w=R.return)&&(yield t(w.call(R)))}finally{if(v)throw v.error}}S=!0}catch(C){if(C instanceof Error&&C.name==="AbortError")return yield t(void 0);throw C}finally{S||g==null||g.abort()}})}return new a(_,g)}static fromReadableStream(p,g){let b=!1;function _(){return n(this,arguments,function*(){var w,S;const R=new c,P=f(p);try{for(var C=e(P),A;A=yield t(C.next()),!A.done;){const M=A.value;for(const G of R.decode(M))yield yield t(G)}}catch(M){w={error:M}}finally{try{A&&!A.done&&(S=C.return)&&(yield t(S.call(C)))}finally{if(w)throw w.error}}for(const M of R.flush())yield yield t(M)})}function y(){return n(this,arguments,function*(){var w,S;if(b)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");b=!0;let R=!1;try{try{for(var P=e(_()),C;C=yield t(P.next()),!C.done;){const A=C.value;R||A&&(yield yield t(JSON.parse(A)))}}catch(A){w={error:A}}finally{try{C&&!C.done&&(S=P.return)&&(yield t(S.call(P)))}finally{if(w)throw w.error}}R=!0}catch(A){if(A instanceof Error&&A.name==="AbortError")return yield t(void 0);throw A}finally{R||g==null||g.abort()}})}return new a(y,g)}[Symbol.asyncIterator](){return this.iterator()}tee(){const p=[],g=[],b=this.iterator(),_=y=>({next:()=>{if(y.length===0){const v=b.next();p.push(v),g.push(v)}return y.shift()}});return[new a(()=>_(p),this.controller),new a(()=>_(g),this.controller)]}toReadableStream(){const p=this;let g;const b=new TextEncoder;return new ReadableStream({start(){return r(this,void 0,void 0,function*(){g=p[Symbol.asyncIterator]()})},pull(_){return r(this,void 0,void 0,function*(){try{const{value:y,done:v}=yield g.next();if(v)return _.close();const w=b.encode(JSON.stringify(y)+`
`);_.enqueue(w)}catch(y){_.error(y)}})},cancel(){var _;return r(this,void 0,void 0,function*(){yield(_=g.return)===null||_===void 0?void 0:_.call(g)})}})}}wt.StreamUtils=a;function o(m,p){return n(this,arguments,function*(){var b,_;if(!m.body)throw p==null||p.abort(),new i.CohereError({message:"Attempted to iterate over a response with no body"});const y=new l,v=new c,w=f(m.body);try{for(var S=e(s(w)),R;R=yield t(S.next()),!R.done;){const P=R.value;for(const C of v.decode(P)){const A=y.decode(C);A&&(yield yield t(A))}}}catch(P){b={error:P}}finally{try{R&&!R.done&&(_=S.return)&&(yield t(_.call(S)))}finally{if(b)throw b.error}}for(const P of v.flush()){const C=y.decode(P);C&&(yield yield t(C))}})}wt._iterSSEMessages=o;function s(m){return n(this,arguments,function*(){var g,b;let _=new Uint8Array;try{for(var y=e(m),v;v=yield t(y.next()),!v.done;){const w=v.value;if(w==null)continue;const S=w instanceof ArrayBuffer?new Uint8Array(w):typeof w=="string"?new TextEncoder().encode(w):w;let R=new Uint8Array(_.length+S.length);R.set(_),R.set(S,_.length),_=R;let P;for(;(P=u(_))!==-1;)yield yield t(_.slice(0,P)),_=_.slice(P)}}catch(w){g={error:w}}finally{try{v&&!v.done&&(b=y.return)&&(yield t(b.call(y)))}finally{if(g)throw g.error}}_.length>0&&(yield yield t(_))})}function u(m){for(let b=0;b<m.length-2;b++){if(m[b]===10&&m[b+1]===10||m[b]===13&&m[b+1]===13)return b+2;if(m[b]===13&&m[b+1]===10&&b+3<m.length&&m[b+2]===13&&m[b+3]===10)return b+4}return-1}class l{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(p){if(p.endsWith("\r")&&(p=p.substring(0,p.length-1)),!p){if(!this.event&&!this.data.length)return null;const y={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],y}if(this.chunks.push(p),p.startsWith(":"))return null;let[g,b,_]=h(p,":");return _.startsWith(" ")&&(_=_.substring(1)),g==="event"?this.event=_:g==="data"&&this.data.push(_),null}}class c{constructor(){this.buffer=[],this.trailingCR=!1}decode(p){let g=this.decodeText(p);if(this.trailingCR&&(g="\r"+g,this.trailingCR=!1),g.endsWith("\r")&&(this.trailingCR=!0,g=g.slice(0,-1)),!g)return[];const b=c.NEWLINE_CHARS.has(g[g.length-1]||"");let _=g.split(c.NEWLINE_REGEXP);return b&&_.pop(),_.length===1&&!b?(this.buffer.push(_[0]),[]):(this.buffer.length>0&&(_=[this.buffer.join("")+_[0],..._.slice(1)],this.buffer=[]),b||(this.buffer=[_.pop()||""]),_)}decodeText(p){var g;if(p==null)return"";if(typeof p=="string")return p;if(typeof Buffer<"u"){if(p instanceof Buffer)return p.toString();if(p instanceof Uint8Array)return Buffer.from(p).toString();throw new i.CohereError({message:`Unexpected: received non-Uint8Array (${p.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`})}if(typeof TextDecoder<"u"){if(p instanceof Uint8Array||p instanceof ArrayBuffer)return(g=this.textDecoder)!==null&&g!==void 0||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(p);throw new i.CohereError({message:`Unexpected: received non-Uint8Array/ArrayBuffer (${p.constructor.name}) in a web platform. Please report this error.`})}throw new i.CohereError({message:"Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error."})}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const p=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,p}}wt.LineDecoder=c,c.NEWLINE_CHARS=new Set([`
`,"\r"]),c.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function d(m){const p=new c,g=[];for(const b of m)g.push(...p.decode(b));return g}wt._decodeChunks=d;function h(m,p){const g=m.indexOf(p);return g!==-1?[m.substring(0,g),p,m.substring(g+p.length)]:[m,"",""]}function f(m){if(m[Symbol.asyncIterator])return m;const p=m.getReader();return{next(){return r(this,void 0,void 0,function*(){try{const g=yield p.read();return g!=null&&g.done&&p.releaseLock(),g}catch(g){throw p.releaseLock(),g}})},return(){return r(this,void 0,void 0,function*(){const g=p.cancel();return p.releaseLock(),yield g,{done:!0,value:void 0}})},[Symbol.asyncIterator](){return this}}}return wt.readableStreamAsyncIterable=f,wt}var Dc={},Pn={},$c={},Nc={},jn={},Tn={},FU;function Cb(){if(FU)return Tn;FU=1;var r=Tn&&Tn.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Tn&&Tn.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Tn&&Tn.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.Document=void 0;const n=t($());return Tn.Document=n.serialization.object({data:n.serialization.record(n.serialization.string(),n.serialization.unknown()),id:n.serialization.string().optional()}),Tn}var kU;function TH(){if(kU)return jn;kU=1;var r=jn&&jn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=jn&&jn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=jn&&jn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(jn,"__esModule",{value:!0}),jn.V2ChatStreamRequestDocumentsItem=void 0;const n=t($()),i=Cb();return jn.V2ChatStreamRequestDocumentsItem=n.serialization.undiscriminatedUnion([n.serialization.string(),i.Document]),jn}var An={},VU;function AH(){if(VU)return An;VU=1;var r=An&&An.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=An&&An.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=An&&An.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(An,"__esModule",{value:!0}),An.V2ChatStreamRequestSafetyMode=void 0;const n=t($());return An.V2ChatStreamRequestSafetyMode=n.serialization.enum_(["CONTEXTUAL","STRICT","OFF"]),An}var Mn={},HU;function MH(){if(HU)return Mn;HU=1;var r=Mn&&Mn.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Mn&&Mn.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Mn&&Mn.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.V2ChatStreamRequestToolChoice=void 0;const n=t($());return Mn.V2ChatStreamRequestToolChoice=n.serialization.enum_(["REQUIRED","NONE"]),Mn}var In={},KU;function IH(){if(KU)return In;KU=1;var r=In&&In.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=In&&In.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=In&&In.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(In,"__esModule",{value:!0}),In.V2ChatRequestDocumentsItem=void 0;const n=t($()),i=Cb();return In.V2ChatRequestDocumentsItem=n.serialization.undiscriminatedUnion([n.serialization.string(),i.Document]),In}var xn={},WU;function xH(){if(WU)return xn;WU=1;var r=xn&&xn.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=xn&&xn.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=xn&&xn.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(xn,"__esModule",{value:!0}),xn.V2ChatRequestSafetyMode=void 0;const n=t($());return xn.V2ChatRequestSafetyMode=n.serialization.enum_(["CONTEXTUAL","STRICT","OFF"]),xn}var Dn={},GU;function DH(){if(GU)return Dn;GU=1;var r=Dn&&Dn.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Dn&&Dn.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Dn&&Dn.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.V2ChatRequestToolChoice=void 0;const n=t($());return Dn.V2ChatRequestToolChoice=n.serialization.enum_(["REQUIRED","NONE"]),Dn}var $n={},JU;function $H(){if(JU)return $n;JU=1;var r=$n&&$n.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=$n&&$n.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=$n&&$n.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty($n,"__esModule",{value:!0}),$n.V2EmbedRequestTruncate=void 0;const n=t($());return $n.V2EmbedRequestTruncate=n.serialization.enum_(["NONE","START","END"]),$n}var Nn={},XU;function NH(){if(XU)return Nn;XU=1;var r=Nn&&Nn.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Nn&&Nn.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Nn&&Nn.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.V2RerankResponseResultsItemDocument=void 0;const n=t($());return Nn.V2RerankResponseResultsItemDocument=n.serialization.object({text:n.serialization.string()}),Nn}var qn={},ZU;function qH(){if(ZU)return qn;ZU=1;var r=qn&&qn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=qn&&qn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=qn&&qn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(qn,"__esModule",{value:!0}),qn.V2RerankResponseResultsItem=void 0;const n=t($()),i=NH();return qn.V2RerankResponseResultsItem=n.serialization.object({document:i.V2RerankResponseResultsItemDocument.optional(),index:n.serialization.number(),relevanceScore:n.serialization.property("relevance_score",n.serialization.number())}),qn}var Bn={},Un={},zn={},QU;function BH(){if(QU)return zn;QU=1;var r=zn&&zn.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=zn&&zn.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=zn&&zn.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(zn,"__esModule",{value:!0}),zn.ApiMetaApiVersion=void 0;const n=t($());return zn.ApiMetaApiVersion=n.serialization.object({version:n.serialization.string(),isDeprecated:n.serialization.property("is_deprecated",n.serialization.boolean().optional()),isExperimental:n.serialization.property("is_experimental",n.serialization.boolean().optional())}),zn}var Ln={},YU;function UH(){if(YU)return Ln;YU=1;var r=Ln&&Ln.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ln&&Ln.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ln&&Ln.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.ApiMetaBilledUnits=void 0;const n=t($());return Ln.ApiMetaBilledUnits=n.serialization.object({images:n.serialization.number().optional(),inputTokens:n.serialization.property("input_tokens",n.serialization.number().optional()),outputTokens:n.serialization.property("output_tokens",n.serialization.number().optional()),searchUnits:n.serialization.property("search_units",n.serialization.number().optional()),classifications:n.serialization.number().optional()}),Ln}var Fn={},ez;function zH(){if(ez)return Fn;ez=1;var r=Fn&&Fn.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Fn&&Fn.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Fn&&Fn.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.ApiMetaTokens=void 0;const n=t($());return Fn.ApiMetaTokens=n.serialization.object({inputTokens:n.serialization.property("input_tokens",n.serialization.number().optional()),outputTokens:n.serialization.property("output_tokens",n.serialization.number().optional())}),Fn}var tz;function Fr(){if(tz)return Un;tz=1;var r=Un&&Un.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(u,l);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,d)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),e=Un&&Un.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),t=Un&&Un.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&r(u,s,l);return e(u,s),u};Object.defineProperty(Un,"__esModule",{value:!0}),Un.ApiMeta=void 0;const n=t($()),i=BH(),a=UH(),o=zH();return Un.ApiMeta=n.serialization.object({apiVersion:n.serialization.property("api_version",i.ApiMetaApiVersion.optional()),billedUnits:n.serialization.property("billed_units",a.ApiMetaBilledUnits.optional()),tokens:o.ApiMetaTokens.optional(),warnings:n.serialization.list(n.serialization.string()).optional()}),Un}var rz;function Qde(){if(rz)return Bn;rz=1;var r=Bn&&Bn.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Bn&&Bn.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Bn&&Bn.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.V2RerankResponse=void 0;const n=t($()),i=qH(),a=Fr();return Bn.V2RerankResponse=n.serialization.object({id:n.serialization.string().optional(),results:n.serialization.list(i.V2RerankResponseResultsItem),meta:a.ApiMeta.optional()}),Bn}var nz;function LH(){return nz||(nz=1,function(r){var e=Nc&&Nc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Nc&&Nc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(TH(),r),t(AH(),r),t(MH(),r),t(IH(),r),t(xH(),r),t(DH(),r),t($H(),r),t(NH(),r),t(qH(),r),t(Qde(),r)}(Nc)),Nc}var qc={},tR={},kn={},Vn={},Hn={},Kn={},Wn={},Gn={},Jn={},iz;function Cf(){if(iz)return Jn;iz=1;var r=Jn&&Jn.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Jn&&Jn.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Jn&&Jn.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.TextContent=void 0;const n=t($());return Jn.TextContent=n.serialization.object({text:n.serialization.string()}),Jn}var Xn={},Zn={},az;function FH(){if(az)return Zn;az=1;var r=Zn&&Zn.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Zn&&Zn.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Zn&&Zn.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.ImageUrl=void 0;const n=t($());return Zn.ImageUrl=n.serialization.object({url:n.serialization.string()}),Zn}var oz;function kH(){if(oz)return Xn;oz=1;var r=Xn&&Xn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Xn&&Xn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Xn&&Xn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.ImageContent=void 0;const n=t($()),i=FH();return Xn.ImageContent=n.serialization.object({imageUrl:n.serialization.property("image_url",i.ImageUrl)}),Xn}var sz;function VH(){if(sz)return Gn;sz=1;var r=Gn&&Gn.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Gn&&Gn.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Gn&&Gn.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.Content=void 0;const n=t($()),i=Cf(),a=kH();return Gn.Content=n.serialization.union("type",{text:i.TextContent,image_url:a.ImageContent}).transform({transform:o=>o,untransform:o=>o}),Gn}var uz;function HH(){if(uz)return Wn;uz=1;var r=Wn&&Wn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Wn&&Wn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Wn&&Wn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.UserMessageContent=void 0;const n=t($()),i=VH();return Wn.UserMessageContent=n.serialization.undiscriminatedUnion([n.serialization.string(),n.serialization.list(i.Content)]),Wn}var lz;function KH(){if(lz)return Kn;lz=1;var r=Kn&&Kn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Kn&&Kn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Kn&&Kn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.UserMessage=void 0;const n=t($()),i=HH();return Kn.UserMessage=n.serialization.object({content:i.UserMessageContent}),Kn}var Qn={},Yn={},ei={},cz;function WH(){if(cz)return ei;cz=1;var r=ei&&ei.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=ei&&ei.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=ei&&ei.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(ei,"__esModule",{value:!0}),ei.ToolCallV2Function=void 0;const n=t($());return ei.ToolCallV2Function=n.serialization.object({name:n.serialization.string().optional(),arguments:n.serialization.string().optional()}),ei}var dz;function Pb(){if(dz)return Yn;dz=1;var r=Yn&&Yn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Yn&&Yn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Yn&&Yn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.ToolCallV2=void 0;const n=t($()),i=WH();return Yn.ToolCallV2=n.serialization.object({id:n.serialization.string().optional(),type:n.serialization.stringLiteral("function").optional(),function:i.ToolCallV2Function.optional()}),Yn}var ti={},ri={},fz;function GH(){if(fz)return ri;fz=1;var r=ri&&ri.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=ri&&ri.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=ri&&ri.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(ri,"__esModule",{value:!0}),ri.AssistantMessageContentItem=void 0;const n=t($()),i=Cf();return ri.AssistantMessageContentItem=n.serialization.union("type",{text:i.TextContent}).transform({transform:a=>a,untransform:a=>a}),ri}var pz;function JH(){if(pz)return ti;pz=1;var r=ti&&ti.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=ti&&ti.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=ti&&ti.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(ti,"__esModule",{value:!0}),ti.AssistantMessageContent=void 0;const n=t($()),i=GH();return ti.AssistantMessageContent=n.serialization.undiscriminatedUnion([n.serialization.string(),n.serialization.list(i.AssistantMessageContentItem)]),ti}var ni={},ii={},ai={},hz;function XH(){if(hz)return ai;hz=1;var r=ai&&ai.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=ai&&ai.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=ai&&ai.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(ai,"__esModule",{value:!0}),ai.ToolSource=void 0;const n=t($());return ai.ToolSource=n.serialization.object({id:n.serialization.string().optional(),toolOutput:n.serialization.property("tool_output",n.serialization.record(n.serialization.string(),n.serialization.unknown()).optional())}),ai}var oi={},mz;function ZH(){if(mz)return oi;mz=1;var r=oi&&oi.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=oi&&oi.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=oi&&oi.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(oi,"__esModule",{value:!0}),oi.DocumentSource=void 0;const n=t($());return oi.DocumentSource=n.serialization.object({id:n.serialization.string().optional(),document:n.serialization.record(n.serialization.string(),n.serialization.unknown()).optional()}),oi}var gz;function QH(){if(gz)return ii;gz=1;var r=ii&&ii.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=ii&&ii.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=ii&&ii.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(ii,"__esModule",{value:!0}),ii.Source=void 0;const n=t($()),i=XH(),a=ZH();return ii.Source=n.serialization.union("type",{tool:i.ToolSource,document:a.DocumentSource}).transform({transform:o=>o,untransform:o=>o}),ii}var si={},_z;function YH(){if(_z)return si;_z=1;var r=si&&si.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=si&&si.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=si&&si.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(si,"__esModule",{value:!0}),si.CitationType=void 0;const n=t($());return si.CitationType=n.serialization.enum_(["TEXT_CONTENT","PLAN"]),si}var bz;function jb(){if(bz)return ni;bz=1;var r=ni&&ni.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=ni&&ni.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=ni&&ni.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(ni,"__esModule",{value:!0}),ni.Citation=void 0;const n=t($()),i=QH(),a=YH();return ni.Citation=n.serialization.object({start:n.serialization.number().optional(),end:n.serialization.number().optional(),text:n.serialization.string().optional(),sources:n.serialization.list(i.Source).optional(),type:a.CitationType.optional()}),ni}var yz;function e5(){if(yz)return Qn;yz=1;var r=Qn&&Qn.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(u,l);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,d)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),e=Qn&&Qn.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),t=Qn&&Qn.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&r(u,s,l);return e(u,s),u};Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.AssistantMessage=void 0;const n=t($()),i=Pb(),a=JH(),o=jb();return Qn.AssistantMessage=n.serialization.object({toolCalls:n.serialization.property("tool_calls",n.serialization.list(i.ToolCallV2).optional()),toolPlan:n.serialization.property("tool_plan",n.serialization.string().optional()),content:a.AssistantMessageContent.optional(),citations:n.serialization.list(o.Citation).optional()}),Qn}var ui={},li={},ci={},vz;function t5(){if(vz)return ci;vz=1;var r=ci&&ci.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=ci&&ci.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=ci&&ci.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(ci,"__esModule",{value:!0}),ci.SystemMessageContentItem=void 0;const n=t($()),i=Cf();return ci.SystemMessageContentItem=n.serialization.union("type",{text:i.TextContent}).transform({transform:a=>a,untransform:a=>a}),ci}var wz;function r5(){if(wz)return li;wz=1;var r=li&&li.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=li&&li.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=li&&li.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(li,"__esModule",{value:!0}),li.SystemMessageContent=void 0;const n=t($()),i=t5();return li.SystemMessageContent=n.serialization.undiscriminatedUnion([n.serialization.string(),n.serialization.list(i.SystemMessageContentItem)]),li}var Sz;function n5(){if(Sz)return ui;Sz=1;var r=ui&&ui.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=ui&&ui.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=ui&&ui.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(ui,"__esModule",{value:!0}),ui.SystemMessage=void 0;const n=t($()),i=r5();return ui.SystemMessage=n.serialization.object({content:i.SystemMessageContent}),ui}var di={},fi={},pi={},hi={},Oz;function i5(){if(Oz)return hi;Oz=1;var r=hi&&hi.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=hi&&hi.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=hi&&hi.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(hi,"__esModule",{value:!0}),hi.DocumentContent=void 0;const n=t($()),i=Cb();return hi.DocumentContent=n.serialization.object({document:i.Document}),hi}var Ez;function a5(){if(Ez)return pi;Ez=1;var r=pi&&pi.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=pi&&pi.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=pi&&pi.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(pi,"__esModule",{value:!0}),pi.ToolContent=void 0;const n=t($()),i=Cf(),a=i5();return pi.ToolContent=n.serialization.union("type",{text:i.TextContent,document:a.DocumentContent}).transform({transform:o=>o,untransform:o=>o}),pi}var Rz;function o5(){if(Rz)return fi;Rz=1;var r=fi&&fi.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=fi&&fi.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=fi&&fi.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(fi,"__esModule",{value:!0}),fi.ToolMessageV2Content=void 0;const n=t($()),i=a5();return fi.ToolMessageV2Content=n.serialization.undiscriminatedUnion([n.serialization.string(),n.serialization.list(i.ToolContent)]),fi}var Cz;function s5(){if(Cz)return di;Cz=1;var r=di&&di.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=di&&di.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=di&&di.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(di,"__esModule",{value:!0}),di.ToolMessageV2=void 0;const n=t($()),i=o5();return di.ToolMessageV2=n.serialization.object({toolCallId:n.serialization.property("tool_call_id",n.serialization.string()),content:i.ToolMessageV2Content}),di}var Pz;function u5(){if(Pz)return Hn;Pz=1;var r=Hn&&Hn.__createBinding||(Object.create?function(u,l,c,d){d===void 0&&(d=c);var h=Object.getOwnPropertyDescriptor(l,c);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[c]}}),Object.defineProperty(u,d,h)}:function(u,l,c,d){d===void 0&&(d=c),u[d]=l[c]}),e=Hn&&Hn.__setModuleDefault||(Object.create?function(u,l){Object.defineProperty(u,"default",{enumerable:!0,value:l})}:function(u,l){u.default=l}),t=Hn&&Hn.__importStar||function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var c in u)c!=="default"&&Object.prototype.hasOwnProperty.call(u,c)&&r(l,u,c);return e(l,u),l};Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.ChatMessageV2=void 0;const n=t($()),i=KH(),a=e5(),o=n5(),s=s5();return Hn.ChatMessageV2=n.serialization.union("role",{user:i.UserMessage,assistant:a.AssistantMessage,system:o.SystemMessage,tool:s.ToolMessageV2}).transform({transform:u=>u,untransform:u=>u}),Hn}var jz;function JP(){if(jz)return Vn;jz=1;var r=Vn&&Vn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Vn&&Vn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Vn&&Vn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.ChatMessages=void 0;const n=t($()),i=u5();return Vn.ChatMessages=n.serialization.list(i.ChatMessageV2),Vn}var mi={},gi={},Tz;function l5(){if(Tz)return gi;Tz=1;var r=gi&&gi.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=gi&&gi.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=gi&&gi.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(gi,"__esModule",{value:!0}),gi.ToolV2Function=void 0;const n=t($());return gi.ToolV2Function=n.serialization.object({name:n.serialization.string(),description:n.serialization.string().optional(),parameters:n.serialization.record(n.serialization.string(),n.serialization.unknown())}),gi}var Az;function XP(){if(Az)return mi;Az=1;var r=mi&&mi.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=mi&&mi.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=mi&&mi.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(mi,"__esModule",{value:!0}),mi.ToolV2=void 0;const n=t($()),i=l5();return mi.ToolV2=n.serialization.object({type:n.serialization.stringLiteral("function").optional(),function:i.ToolV2Function.optional()}),mi}var _i={},bi={},Mz;function c5(){if(Mz)return bi;Mz=1;var r=bi&&bi.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=bi&&bi.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=bi&&bi.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(bi,"__esModule",{value:!0}),bi.CitationOptionsMode=void 0;const n=t($());return bi.CitationOptionsMode=n.serialization.enum_(["FAST","ACCURATE","OFF"]),bi}var Iz;function ZP(){if(Iz)return _i;Iz=1;var r=_i&&_i.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=_i&&_i.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=_i&&_i.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(_i,"__esModule",{value:!0}),_i.CitationOptions=void 0;const n=t($()),i=c5();return _i.CitationOptions=n.serialization.object({mode:i.CitationOptionsMode.optional()}),_i}var yi={},vi={},xz;function d5(){if(xz)return vi;xz=1;var r=vi&&vi.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=vi&&vi.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=vi&&vi.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(vi,"__esModule",{value:!0}),vi.TextResponseFormatV2=void 0;const n=t($());return vi.TextResponseFormatV2=n.serialization.object({}),vi}var wi={},Dz;function f5(){if(Dz)return wi;Dz=1;var r=wi&&wi.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=wi&&wi.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=wi&&wi.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(wi,"__esModule",{value:!0}),wi.JsonResponseFormatV2=void 0;const n=t($());return wi.JsonResponseFormatV2=n.serialization.object({jsonSchema:n.serialization.property("json_schema",n.serialization.record(n.serialization.string(),n.serialization.unknown()).optional())}),wi}var $z;function QP(){if($z)return yi;$z=1;var r=yi&&yi.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=yi&&yi.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=yi&&yi.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(yi,"__esModule",{value:!0}),yi.ResponseFormatV2=void 0;const n=t($()),i=d5(),a=f5();return yi.ResponseFormatV2=n.serialization.union("type",{text:i.TextResponseFormatV2,json_object:a.JsonResponseFormatV2}).transform({transform:o=>o,untransform:o=>o}),yi}var Nz;function Yde(){if(Nz)return kn;Nz=1;var r=kn&&kn.__createBinding||(Object.create?function(d,h,f,m){m===void 0&&(m=f);var p=Object.getOwnPropertyDescriptor(h,f);(!p||("get"in p?!h.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(d,m,p)}:function(d,h,f,m){m===void 0&&(m=f),d[m]=h[f]}),e=kn&&kn.__setModuleDefault||(Object.create?function(d,h){Object.defineProperty(d,"default",{enumerable:!0,value:h})}:function(d,h){d.default=h}),t=kn&&kn.__importStar||function(d){if(d&&d.__esModule)return d;var h={};if(d!=null)for(var f in d)f!=="default"&&Object.prototype.hasOwnProperty.call(d,f)&&r(h,d,f);return e(h,d),h};Object.defineProperty(kn,"__esModule",{value:!0}),kn.V2ChatStreamRequest=void 0;const n=t($()),i=JP(),a=XP(),o=TH(),s=ZP(),u=QP(),l=AH(),c=MH();return kn.V2ChatStreamRequest=n.serialization.object({model:n.serialization.string(),messages:i.ChatMessages,tools:n.serialization.list(a.ToolV2).optional(),strictTools:n.serialization.property("strict_tools",n.serialization.boolean().optional()),documents:n.serialization.list(o.V2ChatStreamRequestDocumentsItem).optional(),citationOptions:n.serialization.property("citation_options",s.CitationOptions.optional()),responseFormat:n.serialization.property("response_format",u.ResponseFormatV2.optional()),safetyMode:n.serialization.property("safety_mode",l.V2ChatStreamRequestSafetyMode.optional()),maxTokens:n.serialization.property("max_tokens",n.serialization.number().optional()),stopSequences:n.serialization.property("stop_sequences",n.serialization.list(n.serialization.string()).optional()),temperature:n.serialization.number().optional(),seed:n.serialization.number().optional(),frequencyPenalty:n.serialization.property("frequency_penalty",n.serialization.number().optional()),presencePenalty:n.serialization.property("presence_penalty",n.serialization.number().optional()),k:n.serialization.number().optional(),p:n.serialization.number().optional(),returnPrompt:n.serialization.property("return_prompt",n.serialization.boolean().optional()),logprobs:n.serialization.boolean().optional(),toolChoice:n.serialization.property("tool_choice",c.V2ChatStreamRequestToolChoice.optional())}),kn}var Si={},qz;function efe(){if(qz)return Si;qz=1;var r=Si&&Si.__createBinding||(Object.create?function(d,h,f,m){m===void 0&&(m=f);var p=Object.getOwnPropertyDescriptor(h,f);(!p||("get"in p?!h.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(d,m,p)}:function(d,h,f,m){m===void 0&&(m=f),d[m]=h[f]}),e=Si&&Si.__setModuleDefault||(Object.create?function(d,h){Object.defineProperty(d,"default",{enumerable:!0,value:h})}:function(d,h){d.default=h}),t=Si&&Si.__importStar||function(d){if(d&&d.__esModule)return d;var h={};if(d!=null)for(var f in d)f!=="default"&&Object.prototype.hasOwnProperty.call(d,f)&&r(h,d,f);return e(h,d),h};Object.defineProperty(Si,"__esModule",{value:!0}),Si.V2ChatRequest=void 0;const n=t($()),i=JP(),a=XP(),o=IH(),s=ZP(),u=QP(),l=xH(),c=DH();return Si.V2ChatRequest=n.serialization.object({model:n.serialization.string(),messages:i.ChatMessages,tools:n.serialization.list(a.ToolV2).optional(),strictTools:n.serialization.property("strict_tools",n.serialization.boolean().optional()),documents:n.serialization.list(o.V2ChatRequestDocumentsItem).optional(),citationOptions:n.serialization.property("citation_options",s.CitationOptions.optional()),responseFormat:n.serialization.property("response_format",u.ResponseFormatV2.optional()),safetyMode:n.serialization.property("safety_mode",l.V2ChatRequestSafetyMode.optional()),maxTokens:n.serialization.property("max_tokens",n.serialization.number().optional()),stopSequences:n.serialization.property("stop_sequences",n.serialization.list(n.serialization.string()).optional()),temperature:n.serialization.number().optional(),seed:n.serialization.number().optional(),frequencyPenalty:n.serialization.property("frequency_penalty",n.serialization.number().optional()),presencePenalty:n.serialization.property("presence_penalty",n.serialization.number().optional()),k:n.serialization.number().optional(),p:n.serialization.number().optional(),returnPrompt:n.serialization.property("return_prompt",n.serialization.boolean().optional()),logprobs:n.serialization.boolean().optional(),toolChoice:n.serialization.property("tool_choice",c.V2ChatRequestToolChoice.optional())}),Si}var Oi={},Ei={},Bz;function Tb(){if(Bz)return Ei;Bz=1;var r=Ei&&Ei.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ei&&Ei.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ei&&Ei.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.EmbedInputType=void 0;const n=t($());return Ei.EmbedInputType=n.serialization.enum_(["search_document","search_query","classification","clustering","image"]),Ei}var Ri={},Ci={},Pi={},ji={},Uz;function p5(){if(Uz)return ji;Uz=1;var r=ji&&ji.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=ji&&ji.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=ji&&ji.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(ji,"__esModule",{value:!0}),ji.EmbedImageUrl=void 0;const n=t($());return ji.EmbedImageUrl=n.serialization.object({url:n.serialization.string()}),ji}var zz;function h5(){if(zz)return Pi;zz=1;var r=Pi&&Pi.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Pi&&Pi.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Pi&&Pi.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.EmbedImage=void 0;const n=t($()),i=p5();return Pi.EmbedImage=n.serialization.object({imageUrl:n.serialization.property("image_url",i.EmbedImageUrl.optional())}),Pi}var Ti={},Lz;function m5(){if(Lz)return Ti;Lz=1;var r=Ti&&Ti.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ti&&Ti.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ti&&Ti.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.EmbedText=void 0;const n=t($());return Ti.EmbedText=n.serialization.object({text:n.serialization.string().optional()}),Ti}var Fz;function g5(){if(Fz)return Ci;Fz=1;var r=Ci&&Ci.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Ci&&Ci.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Ci&&Ci.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.EmbedContent=void 0;const n=t($()),i=h5(),a=m5();return Ci.EmbedContent=n.serialization.union("type",{image_url:i.EmbedImage,text:a.EmbedText}).transform({transform:o=>o,untransform:o=>o}),Ci}var kz;function _5(){if(kz)return Ri;kz=1;var r=Ri&&Ri.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Ri&&Ri.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Ri&&Ri.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.EmbedInput=void 0;const n=t($()),i=g5();return Ri.EmbedInput=n.serialization.object({content:n.serialization.list(i.EmbedContent)}),Ri}var Ai={},Vz;function Ab(){if(Vz)return Ai;Vz=1;var r=Ai&&Ai.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ai&&Ai.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ai&&Ai.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.EmbeddingType=void 0;const n=t($());return Ai.EmbeddingType=n.serialization.enum_(["float","int8","uint8","binary","ubinary"]),Ai}var Hz;function tfe(){if(Hz)return Oi;Hz=1;var r=Oi&&Oi.__createBinding||(Object.create?function(u,l,c,d){d===void 0&&(d=c);var h=Object.getOwnPropertyDescriptor(l,c);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[c]}}),Object.defineProperty(u,d,h)}:function(u,l,c,d){d===void 0&&(d=c),u[d]=l[c]}),e=Oi&&Oi.__setModuleDefault||(Object.create?function(u,l){Object.defineProperty(u,"default",{enumerable:!0,value:l})}:function(u,l){u.default=l}),t=Oi&&Oi.__importStar||function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var c in u)c!=="default"&&Object.prototype.hasOwnProperty.call(u,c)&&r(l,u,c);return e(l,u),l};Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.V2EmbedRequest=void 0;const n=t($()),i=Tb(),a=_5(),o=Ab(),s=$H();return Oi.V2EmbedRequest=n.serialization.object({texts:n.serialization.list(n.serialization.string()).optional(),images:n.serialization.list(n.serialization.string()).optional(),model:n.serialization.string(),inputType:n.serialization.property("input_type",i.EmbedInputType),inputs:n.serialization.list(a.EmbedInput).optional(),maxTokens:n.serialization.property("max_tokens",n.serialization.number().optional()),outputDimension:n.serialization.property("output_dimension",n.serialization.number().optional()),embeddingTypes:n.serialization.property("embedding_types",n.serialization.list(o.EmbeddingType)),truncate:s.V2EmbedRequestTruncate.optional()}),Oi}var Mi={},Kz;function rfe(){if(Kz)return Mi;Kz=1;var r=Mi&&Mi.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Mi&&Mi.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Mi&&Mi.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.V2RerankRequest=void 0;const n=t($());return Mi.V2RerankRequest=n.serialization.object({model:n.serialization.string(),query:n.serialization.string(),documents:n.serialization.list(n.serialization.string()),topN:n.serialization.property("top_n",n.serialization.number().optional()),returnDocuments:n.serialization.property("return_documents",n.serialization.boolean().optional()),maxTokensPerDoc:n.serialization.property("max_tokens_per_doc",n.serialization.number().optional())}),Mi}var Wz;function b5(){return Wz||(Wz=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.V2RerankRequest=r.V2EmbedRequest=r.V2ChatRequest=r.V2ChatStreamRequest=void 0;var e=Yde();Object.defineProperty(r,"V2ChatStreamRequest",{enumerable:!0,get:function(){return e.V2ChatStreamRequest}});var t=efe();Object.defineProperty(r,"V2ChatRequest",{enumerable:!0,get:function(){return t.V2ChatRequest}});var n=tfe();Object.defineProperty(r,"V2EmbedRequest",{enumerable:!0,get:function(){return n.V2EmbedRequest}});var i=rfe();Object.defineProperty(r,"V2RerankRequest",{enumerable:!0,get:function(){return i.V2RerankRequest}})}(tR)),tR}var Gz;function nfe(){return Gz||(Gz=1,function(r){var e=qc&&qc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=qc&&qc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(b5(),r)}(qc)),qc}var Jz;function ife(){return Jz||(Jz=1,function(r){var e=$c&&$c.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=$c&&$c.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(LH(),r),t(nfe(),r)}($c)),$c}var Bc={},Uc={},Ii={},Xz;function y5(){if(Xz)return Ii;Xz=1;var r=Ii&&Ii.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ii&&Ii.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ii&&Ii.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.CreateEmbedJobRequestTruncate=void 0;const n=t($());return Ii.CreateEmbedJobRequestTruncate=n.serialization.enum_(["START","END"]),Ii}var Zz;function v5(){return Zz||(Zz=1,function(r){var e=Uc&&Uc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Uc&&Uc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(y5(),r)}(Uc)),Uc}var zc={},rR={},xi={},Qz;function afe(){if(Qz)return xi;Qz=1;var r=xi&&xi.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(u,l);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,d)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),e=xi&&xi.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),t=xi&&xi.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&r(u,s,l);return e(u,s),u};Object.defineProperty(xi,"__esModule",{value:!0}),xi.CreateEmbedJobRequest=void 0;const n=t($()),i=Tb(),a=Ab(),o=y5();return xi.CreateEmbedJobRequest=n.serialization.object({model:n.serialization.string(),datasetId:n.serialization.property("dataset_id",n.serialization.string()),inputType:n.serialization.property("input_type",i.EmbedInputType),name:n.serialization.string().optional(),embeddingTypes:n.serialization.property("embedding_types",n.serialization.list(a.EmbeddingType).optional()),truncate:o.CreateEmbedJobRequestTruncate.optional()}),xi}var Yz;function w5(){return Yz||(Yz=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CreateEmbedJobRequest=void 0;var e=afe();Object.defineProperty(r,"CreateEmbedJobRequest",{enumerable:!0,get:function(){return e.CreateEmbedJobRequest}})}(rR)),rR}var eL;function ofe(){return eL||(eL=1,function(r){var e=zc&&zc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=zc&&zc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(w5(),r)}(zc)),zc}var tL;function sfe(){return tL||(tL=1,function(r){var e=Bc&&Bc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Bc&&Bc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(v5(),r),t(ofe(),r)}(Bc)),Bc}var Lc={},Fc={},Di={},$i={},Ni={},rL;function S5(){if(rL)return Ni;rL=1;var r=Ni&&Ni.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ni&&Ni.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ni&&Ni.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.DatasetType=void 0;const n=t($());return Ni.DatasetType=n.serialization.enum_(["embed-input","embed-result","cluster-result","cluster-outliers","reranker-finetune-input","single-label-classification-finetune-input","chat-finetune-input","multi-label-classification-finetune-input"]),Ni}var qi={},nL;function O5(){if(nL)return qi;nL=1;var r=qi&&qi.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=qi&&qi.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=qi&&qi.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(qi,"__esModule",{value:!0}),qi.DatasetValidationStatus=void 0;const n=t($());return qi.DatasetValidationStatus=n.serialization.enum_(["unknown","queued","processing","failed","validated","skipped"]),qi}var Bi={},iL;function E5(){if(iL)return Bi;iL=1;var r=Bi&&Bi.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Bi&&Bi.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Bi&&Bi.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.DatasetPart=void 0;const n=t($());return Bi.DatasetPart=n.serialization.object({id:n.serialization.string(),name:n.serialization.string(),url:n.serialization.string().optional(),index:n.serialization.number().optional(),sizeBytes:n.serialization.property("size_bytes",n.serialization.number().optional()),numRows:n.serialization.property("num_rows",n.serialization.number().optional()),originalUrl:n.serialization.property("original_url",n.serialization.string().optional()),samples:n.serialization.list(n.serialization.string()).optional()}),Bi}var aL;function YP(){if(aL)return $i;aL=1;var r=$i&&$i.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(u,l);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,d)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),e=$i&&$i.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),t=$i&&$i.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&r(u,s,l);return e(u,s),u};Object.defineProperty($i,"__esModule",{value:!0}),$i.Dataset=void 0;const n=t($()),i=S5(),a=O5(),o=E5();return $i.Dataset=n.serialization.object({id:n.serialization.string(),name:n.serialization.string(),createdAt:n.serialization.property("created_at",n.serialization.date()),updatedAt:n.serialization.property("updated_at",n.serialization.date()),datasetType:n.serialization.property("dataset_type",i.DatasetType),validationStatus:n.serialization.property("validation_status",a.DatasetValidationStatus),validationError:n.serialization.property("validation_error",n.serialization.string().optional()),schema:n.serialization.string().optional(),requiredFields:n.serialization.property("required_fields",n.serialization.list(n.serialization.string()).optional()),preserveFields:n.serialization.property("preserve_fields",n.serialization.list(n.serialization.string()).optional()),datasetParts:n.serialization.property("dataset_parts",n.serialization.list(o.DatasetPart).optional()),validationWarnings:n.serialization.property("validation_warnings",n.serialization.list(n.serialization.string()).optional())}),$i}var oL;function ufe(){if(oL)return Di;oL=1;var r=Di&&Di.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Di&&Di.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Di&&Di.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Di,"__esModule",{value:!0}),Di.DatasetsListResponse=void 0;const n=t($()),i=YP();return Di.DatasetsListResponse=n.serialization.object({datasets:n.serialization.list(i.Dataset).optional()}),Di}var Ui={},sL;function lfe(){if(sL)return Ui;sL=1;var r=Ui&&Ui.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ui&&Ui.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ui&&Ui.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.DatasetsCreateResponseDatasetPartsItem=void 0;const n=t($());return Ui.DatasetsCreateResponseDatasetPartsItem=n.serialization.object({name:n.serialization.string().optional(),numRows:n.serialization.property("num_rows",n.serialization.number().optional()),samples:n.serialization.list(n.serialization.string()).optional(),partKind:n.serialization.property("part_kind",n.serialization.string().optional())}),Ui}var zi={},uL;function cfe(){if(uL)return zi;uL=1;var r=zi&&zi.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=zi&&zi.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=zi&&zi.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(zi,"__esModule",{value:!0}),zi.DatasetsCreateResponse=void 0;const n=t($());return zi.DatasetsCreateResponse=n.serialization.object({id:n.serialization.string().optional()}),zi}var Li={},lL;function dfe(){if(lL)return Li;lL=1;var r=Li&&Li.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Li&&Li.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Li&&Li.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Li,"__esModule",{value:!0}),Li.DatasetsGetUsageResponse=void 0;const n=t($());return Li.DatasetsGetUsageResponse=n.serialization.object({organizationUsage:n.serialization.property("organization_usage",n.serialization.number().optional())}),Li}var Fi={},cL;function ffe(){if(cL)return Fi;cL=1;var r=Fi&&Fi.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Fi&&Fi.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Fi&&Fi.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.DatasetsGetResponse=void 0;const n=t($()),i=YP();return Fi.DatasetsGetResponse=n.serialization.object({dataset:i.Dataset}),Fi}var dL;function R5(){return dL||(dL=1,function(r){var e=Fc&&Fc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Fc&&Fc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(ufe(),r),t(lfe(),r),t(cfe(),r),t(dfe(),r),t(ffe(),r)}(Fc)),Fc}var ki={},Vi={},fL;function pfe(){if(fL)return Vi;fL=1;var r=Vi&&Vi.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Vi&&Vi.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Vi&&Vi.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.Response=void 0;const n=t($());return Vi.Response=n.serialization.record(n.serialization.string(),n.serialization.unknown()),Vi}var pL;function hfe(){if(pL)return ki;pL=1;var r=ki&&ki.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),e=ki&&ki.__setModuleDefault||(Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i}),t=ki&&ki.__importStar||function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var a in n)a!=="default"&&Object.prototype.hasOwnProperty.call(n,a)&&r(i,n,a);return e(i,n),i};return Object.defineProperty(ki,"__esModule",{value:!0}),ki.delete=void 0,ki.delete=t(pfe()),ki}var hL;function mfe(){return hL||(hL=1,function(r){var e=Lc&&Lc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Lc&&Lc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(R5(),r),t(hfe(),r)}(Lc)),Lc}var kc={},Hi={},Vc={},Hc={},Ki={},mL;function C5(){if(mL)return Ki;mL=1;var r=Ki&&Ki.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ki&&Ki.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ki&&Ki.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.BaseType=void 0;const n=t($());return Ki.BaseType=n.serialization.enum_(["BASE_TYPE_UNSPECIFIED","BASE_TYPE_GENERATIVE","BASE_TYPE_CLASSIFICATION","BASE_TYPE_RERANK","BASE_TYPE_CHAT"]),Ki}var Wi={},gL;function P5(){if(gL)return Wi;gL=1;var r=Wi&&Wi.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Wi&&Wi.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Wi&&Wi.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.Strategy=void 0;const n=t($());return Wi.Strategy=n.serialization.enum_(["STRATEGY_UNSPECIFIED","STRATEGY_VANILLA","STRATEGY_TFEW"]),Wi}var Gi={},_L;function j5(){if(_L)return Gi;_L=1;var r=Gi&&Gi.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Gi&&Gi.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Gi&&Gi.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.BaseModel=void 0;const n=t($()),i=C5(),a=P5();return Gi.BaseModel=n.serialization.object({name:n.serialization.string().optional(),version:n.serialization.string().optional(),baseType:n.serialization.property("base_type",i.BaseType),strategy:a.Strategy.optional()}),Gi}var Ji={},bL;function T5(){if(bL)return Ji;bL=1;var r=Ji&&Ji.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ji&&Ji.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ji&&Ji.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.LoraTargetModules=void 0;const n=t($());return Ji.LoraTargetModules=n.serialization.enum_(["LORA_TARGET_MODULES_UNSPECIFIED","LORA_TARGET_MODULES_QV","LORA_TARGET_MODULES_QKVO","LORA_TARGET_MODULES_QKVO_FFN"]),Ji}var Xi={},yL;function A5(){if(yL)return Xi;yL=1;var r=Xi&&Xi.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Xi&&Xi.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Xi&&Xi.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.Hyperparameters=void 0;const n=t($()),i=T5();return Xi.Hyperparameters=n.serialization.object({earlyStoppingPatience:n.serialization.property("early_stopping_patience",n.serialization.number().optional()),earlyStoppingThreshold:n.serialization.property("early_stopping_threshold",n.serialization.number().optional()),trainBatchSize:n.serialization.property("train_batch_size",n.serialization.number().optional()),trainEpochs:n.serialization.property("train_epochs",n.serialization.number().optional()),learningRate:n.serialization.property("learning_rate",n.serialization.number().optional()),loraAlpha:n.serialization.property("lora_alpha",n.serialization.number().optional()),loraRank:n.serialization.property("lora_rank",n.serialization.number().optional()),loraTargetModules:n.serialization.property("lora_target_modules",i.LoraTargetModules.optional())}),Xi}var Zi={},vL;function M5(){if(vL)return Zi;vL=1;var r=Zi&&Zi.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Zi&&Zi.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Zi&&Zi.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.WandbConfig=void 0;const n=t($());return Zi.WandbConfig=n.serialization.object({project:n.serialization.string(),apiKey:n.serialization.property("api_key",n.serialization.string()),entity:n.serialization.string().optional()}),Zi}var Qi={},wL;function e1(){if(wL)return Qi;wL=1;var r=Qi&&Qi.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(u,l);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,d)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),e=Qi&&Qi.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),t=Qi&&Qi.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&r(u,s,l);return e(u,s),u};Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.Settings=void 0;const n=t($()),i=j5(),a=A5(),o=M5();return Qi.Settings=n.serialization.object({baseModel:n.serialization.property("base_model",i.BaseModel),datasetId:n.serialization.property("dataset_id",n.serialization.string()),hyperparameters:a.Hyperparameters.optional(),multiLabel:n.serialization.property("multi_label",n.serialization.boolean().optional()),wandb:o.WandbConfig.optional()}),Qi}var Yi={},SL;function Mb(){if(SL)return Yi;SL=1;var r=Yi&&Yi.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Yi&&Yi.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Yi&&Yi.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.Status=void 0;const n=t($());return Yi.Status=n.serialization.enum_(["STATUS_UNSPECIFIED","STATUS_FINETUNING","STATUS_DEPLOYING_API","STATUS_READY","STATUS_FAILED","STATUS_DELETED","STATUS_TEMPORARILY_OFFLINE","STATUS_PAUSED","STATUS_QUEUED"]),Yi}var ea={},OL;function qm(){if(OL)return ea;OL=1;var r=ea&&ea.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=ea&&ea.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=ea&&ea.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(ea,"__esModule",{value:!0}),ea.FinetunedModel=void 0;const n=t($()),i=e1(),a=Mb();return ea.FinetunedModel=n.serialization.object({id:n.serialization.string().optional(),name:n.serialization.string(),creatorId:n.serialization.property("creator_id",n.serialization.string().optional()),organizationId:n.serialization.property("organization_id",n.serialization.string().optional()),settings:i.Settings,status:a.Status.optional(),createdAt:n.serialization.property("created_at",n.serialization.date().optional()),updatedAt:n.serialization.property("updated_at",n.serialization.date().optional()),completedAt:n.serialization.property("completed_at",n.serialization.date().optional()),lastUsed:n.serialization.property("last_used",n.serialization.date().optional())}),ea}var ta={},EL;function gfe(){if(EL)return ta;EL=1;var r=ta&&ta.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=ta&&ta.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=ta&&ta.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(ta,"__esModule",{value:!0}),ta.ListFinetunedModelsResponse=void 0;const n=t($()),i=qm();return ta.ListFinetunedModelsResponse=n.serialization.object({finetunedModels:n.serialization.property("finetuned_models",n.serialization.list(i.FinetunedModel).optional()),nextPageToken:n.serialization.property("next_page_token",n.serialization.string().optional()),totalSize:n.serialization.property("total_size",n.serialization.number().optional())}),ta}var ra={},RL;function _fe(){if(RL)return ra;RL=1;var r=ra&&ra.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=ra&&ra.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=ra&&ra.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(ra,"__esModule",{value:!0}),ra.CreateFinetunedModelResponse=void 0;const n=t($()),i=qm();return ra.CreateFinetunedModelResponse=n.serialization.object({finetunedModel:n.serialization.property("finetuned_model",i.FinetunedModel.optional())}),ra}var na={},CL;function bfe(){if(CL)return na;CL=1;var r=na&&na.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=na&&na.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=na&&na.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(na,"__esModule",{value:!0}),na.GetFinetunedModelResponse=void 0;const n=t($()),i=qm();return na.GetFinetunedModelResponse=n.serialization.object({finetunedModel:n.serialization.property("finetuned_model",i.FinetunedModel.optional())}),na}var ia={},PL;function yfe(){if(PL)return ia;PL=1;var r=ia&&ia.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=ia&&ia.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=ia&&ia.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(ia,"__esModule",{value:!0}),ia.DeleteFinetunedModelResponse=void 0;const n=t($());return ia.DeleteFinetunedModelResponse=n.serialization.record(n.serialization.string(),n.serialization.unknown()),ia}var aa={},jL;function vfe(){if(jL)return aa;jL=1;var r=aa&&aa.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=aa&&aa.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=aa&&aa.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(aa,"__esModule",{value:!0}),aa.UpdateFinetunedModelResponse=void 0;const n=t($()),i=qm();return aa.UpdateFinetunedModelResponse=n.serialization.object({finetunedModel:n.serialization.property("finetuned_model",i.FinetunedModel.optional())}),aa}var oa={},TL;function I5(){if(TL)return oa;TL=1;var r=oa&&oa.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=oa&&oa.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=oa&&oa.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(oa,"__esModule",{value:!0}),oa.Event=void 0;const n=t($()),i=Mb();return oa.Event=n.serialization.object({userId:n.serialization.property("user_id",n.serialization.string().optional()),status:i.Status.optional(),createdAt:n.serialization.property("created_at",n.serialization.date().optional())}),oa}var sa={},AL;function wfe(){if(AL)return sa;AL=1;var r=sa&&sa.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=sa&&sa.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=sa&&sa.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(sa,"__esModule",{value:!0}),sa.ListEventsResponse=void 0;const n=t($()),i=I5();return sa.ListEventsResponse=n.serialization.object({events:n.serialization.list(i.Event).optional(),nextPageToken:n.serialization.property("next_page_token",n.serialization.string().optional()),totalSize:n.serialization.property("total_size",n.serialization.number().optional())}),sa}var ua={},ML;function x5(){if(ML)return ua;ML=1;var r=ua&&ua.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=ua&&ua.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=ua&&ua.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(ua,"__esModule",{value:!0}),ua.TrainingStepMetrics=void 0;const n=t($());return ua.TrainingStepMetrics=n.serialization.object({createdAt:n.serialization.property("created_at",n.serialization.date().optional()),stepNumber:n.serialization.property("step_number",n.serialization.number().optional()),metrics:n.serialization.record(n.serialization.string(),n.serialization.number()).optional()}),ua}var la={},IL;function Sfe(){if(IL)return la;IL=1;var r=la&&la.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=la&&la.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=la&&la.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(la,"__esModule",{value:!0}),la.ListTrainingStepMetricsResponse=void 0;const n=t($()),i=x5();return la.ListTrainingStepMetricsResponse=n.serialization.object({stepMetrics:n.serialization.property("step_metrics",n.serialization.list(i.TrainingStepMetrics).optional()),nextPageToken:n.serialization.property("next_page_token",n.serialization.string().optional())}),la}var xL;function D5(){return xL||(xL=1,function(r){var e=Hc&&Hc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Hc&&Hc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(C5(),r),t(P5(),r),t(j5(),r),t(T5(),r),t(A5(),r),t(M5(),r),t(e1(),r),t(Mb(),r),t(qm(),r),t(gfe(),r),t(_fe(),r),t(bfe(),r),t(yfe(),r),t(vfe(),r),t(I5(),r),t(wfe(),r),t(x5(),r),t(Sfe(),r)}(Hc)),Hc}var DL;function Ofe(){return DL||(DL=1,function(r){var e=Vc&&Vc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Vc&&Vc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(D5(),r)}(Vc)),Vc}var $L;function Efe(){return $L||($L=1,function(r){var e=Hi&&Hi.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),t=Hi&&Hi.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),n=Hi&&Hi.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o},i=Hi&&Hi.__exportStar||function(a,o){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&e(o,a,s)};Object.defineProperty(r,"__esModule",{value:!0}),r.finetuning=void 0,r.finetuning=n(Ofe()),i(D5(),r)}(Hi)),Hi}var Kc={},nR={},ca={},NL;function Rfe(){if(NL)return ca;NL=1;var r=ca&&ca.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=ca&&ca.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=ca&&ca.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(ca,"__esModule",{value:!0}),ca.FinetuningUpdateFinetunedModelRequest=void 0;const n=t($()),i=e1(),a=Mb();return ca.FinetuningUpdateFinetunedModelRequest=n.serialization.object({name:n.serialization.string(),creatorId:n.serialization.property("creator_id",n.serialization.string().optional()),organizationId:n.serialization.property("organization_id",n.serialization.string().optional()),settings:i.Settings,status:a.Status.optional(),createdAt:n.serialization.property("created_at",n.serialization.date().optional()),updatedAt:n.serialization.property("updated_at",n.serialization.date().optional()),completedAt:n.serialization.property("completed_at",n.serialization.date().optional()),lastUsed:n.serialization.property("last_used",n.serialization.date().optional())}),ca}var qL;function $5(){return qL||(qL=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.FinetuningUpdateFinetunedModelRequest=void 0;var e=Rfe();Object.defineProperty(r,"FinetuningUpdateFinetunedModelRequest",{enumerable:!0,get:function(){return e.FinetuningUpdateFinetunedModelRequest}})}(nR)),nR}var BL;function Cfe(){return BL||(BL=1,function(r){var e=Kc&&Kc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Kc&&Kc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t($5(),r)}(Kc)),Kc}var UL;function Pfe(){return UL||(UL=1,function(r){var e=kc&&kc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=kc&&kc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(Efe(),r),t(Cfe(),r)}(kc)),kc}var Wc={},Gc={},iR={},da={},fa={},zL;function t1(){if(zL)return fa;zL=1;var r=fa&&fa.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=fa&&fa.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=fa&&fa.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(fa,"__esModule",{value:!0}),fa.CreateConnectorOAuth=void 0;const n=t($());return fa.CreateConnectorOAuth=n.serialization.object({clientId:n.serialization.property("client_id",n.serialization.string().optional()),clientSecret:n.serialization.property("client_secret",n.serialization.string().optional()),authorizeUrl:n.serialization.property("authorize_url",n.serialization.string().optional()),tokenUrl:n.serialization.property("token_url",n.serialization.string().optional()),scope:n.serialization.string().optional()}),fa}var pa={},ha={},LL;function N5(){if(LL)return ha;LL=1;var r=ha&&ha.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=ha&&ha.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=ha&&ha.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(ha,"__esModule",{value:!0}),ha.AuthTokenType=void 0;const n=t($());return ha.AuthTokenType=n.serialization.enum_(["bearer","basic","noscheme"]),ha}var FL;function r1(){if(FL)return pa;FL=1;var r=pa&&pa.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=pa&&pa.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=pa&&pa.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(pa,"__esModule",{value:!0}),pa.CreateConnectorServiceAuth=void 0;const n=t($()),i=N5();return pa.CreateConnectorServiceAuth=n.serialization.object({type:i.AuthTokenType,token:n.serialization.string()}),pa}var kL;function jfe(){if(kL)return da;kL=1;var r=da&&da.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=da&&da.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=da&&da.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(da,"__esModule",{value:!0}),da.CreateConnectorRequest=void 0;const n=t($()),i=t1(),a=r1();return da.CreateConnectorRequest=n.serialization.object({name:n.serialization.string(),description:n.serialization.string().optional(),url:n.serialization.string(),excludes:n.serialization.list(n.serialization.string()).optional(),oauth:i.CreateConnectorOAuth.optional(),active:n.serialization.boolean().optional(),continueOnFailure:n.serialization.property("continue_on_failure",n.serialization.boolean().optional()),serviceAuth:n.serialization.property("service_auth",a.CreateConnectorServiceAuth.optional())}),da}var ma={},VL;function Tfe(){if(VL)return ma;VL=1;var r=ma&&ma.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=ma&&ma.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=ma&&ma.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(ma,"__esModule",{value:!0}),ma.UpdateConnectorRequest=void 0;const n=t($()),i=t1(),a=r1();return ma.UpdateConnectorRequest=n.serialization.object({name:n.serialization.string().optional(),url:n.serialization.string().optional(),excludes:n.serialization.list(n.serialization.string()).optional(),oauth:i.CreateConnectorOAuth.optional(),active:n.serialization.boolean().optional(),continueOnFailure:n.serialization.property("continue_on_failure",n.serialization.boolean().optional()),serviceAuth:n.serialization.property("service_auth",a.CreateConnectorServiceAuth.optional())}),ma}var HL;function q5(){return HL||(HL=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.UpdateConnectorRequest=r.CreateConnectorRequest=void 0;var e=jfe();Object.defineProperty(r,"CreateConnectorRequest",{enumerable:!0,get:function(){return e.CreateConnectorRequest}});var t=Tfe();Object.defineProperty(r,"UpdateConnectorRequest",{enumerable:!0,get:function(){return t.UpdateConnectorRequest}})}(iR)),iR}var KL;function Afe(){return KL||(KL=1,function(r){var e=Gc&&Gc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Gc&&Gc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(q5(),r)}(Gc)),Gc}var WL;function Mfe(){return WL||(WL=1,function(r){var e=Wc&&Wc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Wc&&Wc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(Afe(),r)}(Wc)),Wc}var GL;function Ife(){return GL||(GL=1,function(r){var e=Pn&&Pn.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),t=Pn&&Pn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),n=Pn&&Pn.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o},i=Pn&&Pn.__exportStar||function(a,o){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&e(o,a,s)};Object.defineProperty(r,"__esModule",{value:!0}),r.connectors=r.finetuning=r.datasets=r.embedJobs=r.v2=void 0,r.v2=n(ife()),i(LH(),r),r.embedJobs=n(sfe()),i(v5(),r),r.datasets=n(mfe()),i(R5(),r),r.finetuning=n(Pfe()),i(b5(),r),i(w5(),r),r.connectors=n(Mfe()),i(q5(),r),i($5(),r)}(Pn)),Pn}var Jc={},ga={},JL;function B5(){if(JL)return ga;JL=1;var r=ga&&ga.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=ga&&ga.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=ga&&ga.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(ga,"__esModule",{value:!0}),ga.ChatStreamRequestPromptTruncation=void 0;const n=t($());return ga.ChatStreamRequestPromptTruncation=n.serialization.enum_(["OFF","AUTO","AUTO_PRESERVE_ORDER"]),ga}var _a={},XL;function U5(){if(XL)return _a;XL=1;var r=_a&&_a.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=_a&&_a.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=_a&&_a.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(_a,"__esModule",{value:!0}),_a.ChatStreamRequestCitationQuality=void 0;const n=t($());return _a.ChatStreamRequestCitationQuality=n.serialization.enum_(["fast","accurate","off"]),_a}var ba={},ZL;function xfe(){if(ZL)return ba;ZL=1;var r=ba&&ba.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=ba&&ba.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=ba&&ba.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(ba,"__esModule",{value:!0}),ba.ChatStreamRequestConnectorsSearchOptions=void 0;const n=t($());return ba.ChatStreamRequestConnectorsSearchOptions=n.serialization.object({seed:n.serialization.number().optional()}),ba}var ya={},QL;function z5(){if(QL)return ya;QL=1;var r=ya&&ya.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=ya&&ya.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=ya&&ya.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(ya,"__esModule",{value:!0}),ya.ChatStreamRequestSafetyMode=void 0;const n=t($());return ya.ChatStreamRequestSafetyMode=n.serialization.enum_(["CONTEXTUAL","STRICT","NONE"]),ya}var va={},YL;function L5(){if(YL)return va;YL=1;var r=va&&va.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=va&&va.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=va&&va.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(va,"__esModule",{value:!0}),va.ChatRequestPromptTruncation=void 0;const n=t($());return va.ChatRequestPromptTruncation=n.serialization.enum_(["OFF","AUTO","AUTO_PRESERVE_ORDER"]),va}var wa={},eF;function F5(){if(eF)return wa;eF=1;var r=wa&&wa.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=wa&&wa.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=wa&&wa.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(wa,"__esModule",{value:!0}),wa.ChatRequestCitationQuality=void 0;const n=t($());return wa.ChatRequestCitationQuality=n.serialization.enum_(["fast","accurate","off"]),wa}var Sa={},tF;function Dfe(){if(tF)return Sa;tF=1;var r=Sa&&Sa.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Sa&&Sa.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Sa&&Sa.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.ChatRequestConnectorsSearchOptions=void 0;const n=t($());return Sa.ChatRequestConnectorsSearchOptions=n.serialization.object({seed:n.serialization.number().optional()}),Sa}var Oa={},rF;function k5(){if(rF)return Oa;rF=1;var r=Oa&&Oa.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Oa&&Oa.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Oa&&Oa.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.ChatRequestSafetyMode=void 0;const n=t($());return Oa.ChatRequestSafetyMode=n.serialization.enum_(["CONTEXTUAL","STRICT","NONE"]),Oa}var Ea={},nF;function V5(){if(nF)return Ea;nF=1;var r=Ea&&Ea.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ea&&Ea.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ea&&Ea.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.GenerateStreamRequestTruncate=void 0;const n=t($());return Ea.GenerateStreamRequestTruncate=n.serialization.enum_(["NONE","START","END"]),Ea}var Ra={},iF;function H5(){if(iF)return Ra;iF=1;var r=Ra&&Ra.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ra&&Ra.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ra&&Ra.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.GenerateStreamRequestReturnLikelihoods=void 0;const n=t($());return Ra.GenerateStreamRequestReturnLikelihoods=n.serialization.enum_(["GENERATION","ALL","NONE"]),Ra}var Ca={},aF;function K5(){if(aF)return Ca;aF=1;var r=Ca&&Ca.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ca&&Ca.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ca&&Ca.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.GenerateRequestTruncate=void 0;const n=t($());return Ca.GenerateRequestTruncate=n.serialization.enum_(["NONE","START","END"]),Ca}var Pa={},oF;function W5(){if(oF)return Pa;oF=1;var r=Pa&&Pa.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Pa&&Pa.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Pa&&Pa.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.GenerateRequestReturnLikelihoods=void 0;const n=t($());return Pa.GenerateRequestReturnLikelihoods=n.serialization.enum_(["GENERATION","ALL","NONE"]),Pa}var ja={},sF;function G5(){if(sF)return ja;sF=1;var r=ja&&ja.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=ja&&ja.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=ja&&ja.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(ja,"__esModule",{value:!0}),ja.EmbedRequestTruncate=void 0;const n=t($());return ja.EmbedRequestTruncate=n.serialization.enum_(["NONE","START","END"]),ja}var Ta={},Aa={},Ma={},uF;function n1(){if(uF)return Ma;uF=1;var r=Ma&&Ma.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ma&&Ma.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ma&&Ma.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.Image=void 0;const n=t($());return Ma.Image=n.serialization.object({width:n.serialization.number(),height:n.serialization.number(),format:n.serialization.string(),bitDepth:n.serialization.property("bit_depth",n.serialization.number())}),Ma}var lF;function J5(){if(lF)return Aa;lF=1;var r=Aa&&Aa.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Aa&&Aa.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Aa&&Aa.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.EmbedFloatsResponse=void 0;const n=t($()),i=n1(),a=Fr();return Aa.EmbedFloatsResponse=n.serialization.object({id:n.serialization.string(),embeddings:n.serialization.list(n.serialization.list(n.serialization.number())),texts:n.serialization.list(n.serialization.string()),images:n.serialization.list(i.Image).optional(),meta:a.ApiMeta.optional()}),Aa}var Ia={},xa={},cF;function X5(){if(cF)return xa;cF=1;var r=xa&&xa.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=xa&&xa.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=xa&&xa.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(xa,"__esModule",{value:!0}),xa.EmbedByTypeResponseEmbeddings=void 0;const n=t($());return xa.EmbedByTypeResponseEmbeddings=n.serialization.object({float:n.serialization.list(n.serialization.list(n.serialization.number())).optional(),int8:n.serialization.list(n.serialization.list(n.serialization.number())).optional(),uint8:n.serialization.list(n.serialization.list(n.serialization.number())).optional(),binary:n.serialization.list(n.serialization.list(n.serialization.number())).optional(),ubinary:n.serialization.list(n.serialization.list(n.serialization.number())).optional()}),xa}var dF;function Z5(){if(dF)return Ia;dF=1;var r=Ia&&Ia.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(u,l);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,d)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),e=Ia&&Ia.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),t=Ia&&Ia.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&r(u,s,l);return e(u,s),u};Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.EmbedByTypeResponse=void 0;const n=t($()),i=X5(),a=n1(),o=Fr();return Ia.EmbedByTypeResponse=n.serialization.object({id:n.serialization.string(),embeddings:i.EmbedByTypeResponseEmbeddings,texts:n.serialization.list(n.serialization.string()),images:n.serialization.list(a.Image).optional(),meta:o.ApiMeta.optional()}),Ia}var fF;function $fe(){if(fF)return Ta;fF=1;var r=Ta&&Ta.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Ta&&Ta.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Ta&&Ta.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.EmbedResponse=void 0;const n=t($()),i=J5(),a=Z5();return Ta.EmbedResponse=n.serialization.union(n.serialization.discriminant("responseType","response_type"),{embeddings_floats:i.EmbedFloatsResponse,embeddings_by_type:a.EmbedByTypeResponse}).transform({transform:o=>o,untransform:o=>o}),Ta}var Da={},$a={},pF;function Q5(){if(pF)return $a;pF=1;var r=$a&&$a.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=$a&&$a.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=$a&&$a.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty($a,"__esModule",{value:!0}),$a.RerankDocument=void 0;const n=t($());return $a.RerankDocument=n.serialization.record(n.serialization.string(),n.serialization.string()),$a}var hF;function Y5(){if(hF)return Da;hF=1;var r=Da&&Da.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Da&&Da.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Da&&Da.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Da,"__esModule",{value:!0}),Da.RerankRequestDocumentsItem=void 0;const n=t($()),i=Q5();return Da.RerankRequestDocumentsItem=n.serialization.undiscriminatedUnion([n.serialization.string(),i.RerankDocument]),Da}var Na={},mF;function e9(){if(mF)return Na;mF=1;var r=Na&&Na.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Na&&Na.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Na&&Na.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Na,"__esModule",{value:!0}),Na.RerankResponseResultsItemDocument=void 0;const n=t($());return Na.RerankResponseResultsItemDocument=n.serialization.object({text:n.serialization.string()}),Na}var qa={},gF;function t9(){if(gF)return qa;gF=1;var r=qa&&qa.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=qa&&qa.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=qa&&qa.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(qa,"__esModule",{value:!0}),qa.RerankResponseResultsItem=void 0;const n=t($()),i=e9();return qa.RerankResponseResultsItem=n.serialization.object({document:i.RerankResponseResultsItemDocument.optional(),index:n.serialization.number(),relevanceScore:n.serialization.property("relevance_score",n.serialization.number())}),qa}var Ba={},_F;function Nfe(){if(_F)return Ba;_F=1;var r=Ba&&Ba.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Ba&&Ba.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Ba&&Ba.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.RerankResponse=void 0;const n=t($()),i=t9(),a=Fr();return Ba.RerankResponse=n.serialization.object({id:n.serialization.string().optional(),results:n.serialization.list(i.RerankResponseResultsItem),meta:a.ApiMeta.optional()}),Ba}var Ua={},bF;function r9(){if(bF)return Ua;bF=1;var r=Ua&&Ua.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ua&&Ua.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ua&&Ua.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.ClassifyRequestTruncate=void 0;const n=t($());return Ua.ClassifyRequestTruncate=n.serialization.enum_(["NONE","START","END"]),Ua}var za={},yF;function n9(){if(yF)return za;yF=1;var r=za&&za.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=za&&za.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=za&&za.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(za,"__esModule",{value:!0}),za.ClassifyResponseClassificationsItemLabelsValue=void 0;const n=t($());return za.ClassifyResponseClassificationsItemLabelsValue=n.serialization.object({confidence:n.serialization.number().optional()}),za}var La={},vF;function i9(){if(vF)return La;vF=1;var r=La&&La.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=La&&La.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=La&&La.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(La,"__esModule",{value:!0}),La.ClassifyResponseClassificationsItemClassificationType=void 0;const n=t($());return La.ClassifyResponseClassificationsItemClassificationType=n.serialization.enum_(["single-label","multi-label"]),La}var Fa={},wF;function a9(){if(wF)return Fa;wF=1;var r=Fa&&Fa.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Fa&&Fa.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Fa&&Fa.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.ClassifyResponseClassificationsItem=void 0;const n=t($()),i=n9(),a=i9();return Fa.ClassifyResponseClassificationsItem=n.serialization.object({id:n.serialization.string(),input:n.serialization.string().optional(),prediction:n.serialization.string().optional(),predictions:n.serialization.list(n.serialization.string()),confidence:n.serialization.number().optional(),confidences:n.serialization.list(n.serialization.number()),labels:n.serialization.record(n.serialization.string(),i.ClassifyResponseClassificationsItemLabelsValue),classificationType:n.serialization.property("classification_type",a.ClassifyResponseClassificationsItemClassificationType)}),Fa}var ka={},SF;function qfe(){if(SF)return ka;SF=1;var r=ka&&ka.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=ka&&ka.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=ka&&ka.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(ka,"__esModule",{value:!0}),ka.ClassifyResponse=void 0;const n=t($()),i=a9(),a=Fr();return ka.ClassifyResponse=n.serialization.object({id:n.serialization.string(),classifications:n.serialization.list(i.ClassifyResponseClassificationsItem),meta:a.ApiMeta.optional()}),ka}var Va={},OF;function o9(){if(OF)return Va;OF=1;var r=Va&&Va.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Va&&Va.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Va&&Va.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Va,"__esModule",{value:!0}),Va.SummarizeRequestLength=void 0;const n=t($());return Va.SummarizeRequestLength=n.serialization.enum_(["short","medium","long"]),Va}var Ha={},EF;function s9(){if(EF)return Ha;EF=1;var r=Ha&&Ha.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ha&&Ha.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ha&&Ha.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.SummarizeRequestFormat=void 0;const n=t($());return Ha.SummarizeRequestFormat=n.serialization.enum_(["paragraph","bullets"]),Ha}var Ka={},RF;function u9(){if(RF)return Ka;RF=1;var r=Ka&&Ka.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ka&&Ka.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ka&&Ka.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.SummarizeRequestExtractiveness=void 0;const n=t($());return Ka.SummarizeRequestExtractiveness=n.serialization.enum_(["low","medium","high"]),Ka}var Wa={},CF;function Bfe(){if(CF)return Wa;CF=1;var r=Wa&&Wa.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Wa&&Wa.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Wa&&Wa.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.SummarizeResponse=void 0;const n=t($()),i=Fr();return Wa.SummarizeResponse=n.serialization.object({id:n.serialization.string().optional(),summary:n.serialization.string().optional(),meta:i.ApiMeta.optional()}),Wa}var Ga={},PF;function Ufe(){if(PF)return Ga;PF=1;var r=Ga&&Ga.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Ga&&Ga.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Ga&&Ga.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.TokenizeResponse=void 0;const n=t($()),i=Fr();return Ga.TokenizeResponse=n.serialization.object({tokens:n.serialization.list(n.serialization.number()),tokenStrings:n.serialization.property("token_strings",n.serialization.list(n.serialization.string())),meta:i.ApiMeta.optional()}),Ga}var Ja={},jF;function zfe(){if(jF)return Ja;jF=1;var r=Ja&&Ja.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Ja&&Ja.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Ja&&Ja.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.DetokenizeResponse=void 0;const n=t($()),i=Fr();return Ja.DetokenizeResponse=n.serialization.object({text:n.serialization.string(),meta:i.ApiMeta.optional()}),Ja}var Xa={},TF;function Lfe(){if(TF)return Xa;TF=1;var r=Xa&&Xa.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Xa&&Xa.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Xa&&Xa.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.CheckApiKeyResponse=void 0;const n=t($());return Xa.CheckApiKeyResponse=n.serialization.object({valid:n.serialization.boolean(),organizationId:n.serialization.property("organization_id",n.serialization.string().optional()),ownerId:n.serialization.property("owner_id",n.serialization.string().optional())}),Xa}var Za={},AF;function Bm(){if(AF)return Za;AF=1;var r=Za&&Za.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Za&&Za.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Za&&Za.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Za,"__esModule",{value:!0}),Za.ToolCall=void 0;const n=t($());return Za.ToolCall=n.serialization.object({name:n.serialization.string(),parameters:n.serialization.record(n.serialization.string(),n.serialization.unknown())}),Za}var Qa={},MF;function l9(){if(MF)return Qa;MF=1;var r=Qa&&Qa.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Qa&&Qa.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Qa&&Qa.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.ChatMessage=void 0;const n=t($()),i=Bm();return Qa.ChatMessage=n.serialization.object({message:n.serialization.string(),toolCalls:n.serialization.property("tool_calls",n.serialization.list(i.ToolCall).optional())}),Qa}var Ya={},IF;function Ib(){if(IF)return Ya;IF=1;var r=Ya&&Ya.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Ya&&Ya.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Ya&&Ya.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.ToolResult=void 0;const n=t($()),i=Bm();return Ya.ToolResult=n.serialization.object({call:i.ToolCall,outputs:n.serialization.list(n.serialization.record(n.serialization.string(),n.serialization.unknown()))}),Ya}var eo={},xF;function c9(){if(xF)return eo;xF=1;var r=eo&&eo.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=eo&&eo.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=eo&&eo.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(eo,"__esModule",{value:!0}),eo.ToolMessage=void 0;const n=t($()),i=Ib();return eo.ToolMessage=n.serialization.object({toolResults:n.serialization.property("tool_results",n.serialization.list(i.ToolResult).optional())}),eo}var to={},DF;function xb(){if(DF)return to;DF=1;var r=to&&to.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=to&&to.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=to&&to.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(to,"__esModule",{value:!0}),to.Message=void 0;const n=t($()),i=l9(),a=c9();return to.Message=n.serialization.union("role",{CHATBOT:i.ChatMessage,SYSTEM:i.ChatMessage,USER:i.ChatMessage,TOOL:a.ToolMessage}).transform({transform:o=>o,untransform:o=>o}),to}var ro={},$F;function i1(){if($F)return ro;$F=1;var r=ro&&ro.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=ro&&ro.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=ro&&ro.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(ro,"__esModule",{value:!0}),ro.ChatConnector=void 0;const n=t($());return ro.ChatConnector=n.serialization.object({id:n.serialization.string(),userAccessToken:n.serialization.property("user_access_token",n.serialization.string().optional()),continueOnFailure:n.serialization.property("continue_on_failure",n.serialization.boolean().optional()),options:n.serialization.record(n.serialization.string(),n.serialization.unknown()).optional()}),ro}var no={},NF;function Um(){if(NF)return no;NF=1;var r=no&&no.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=no&&no.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=no&&no.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(no,"__esModule",{value:!0}),no.ChatDocument=void 0;const n=t($());return no.ChatDocument=n.serialization.record(n.serialization.string(),n.serialization.string()),no}var io={},qF;function d9(){if(qF)return io;qF=1;var r=io&&io.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=io&&io.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=io&&io.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(io,"__esModule",{value:!0}),io.ToolParameterDefinitionsValue=void 0;const n=t($());return io.ToolParameterDefinitionsValue=n.serialization.object({description:n.serialization.string().optional(),type:n.serialization.string(),required:n.serialization.boolean().optional()}),io}var ao={},BF;function a1(){if(BF)return ao;BF=1;var r=ao&&ao.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=ao&&ao.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=ao&&ao.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(ao,"__esModule",{value:!0}),ao.Tool=void 0;const n=t($()),i=d9();return ao.Tool=n.serialization.object({name:n.serialization.string(),description:n.serialization.string(),parameterDefinitions:n.serialization.property("parameter_definitions",n.serialization.record(n.serialization.string(),i.ToolParameterDefinitionsValue).optional())}),ao}var oo={},UF;function f9(){if(UF)return oo;UF=1;var r=oo&&oo.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=oo&&oo.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=oo&&oo.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(oo,"__esModule",{value:!0}),oo.TextResponseFormat=void 0;const n=t($());return oo.TextResponseFormat=n.serialization.object({}),oo}var so={},zF;function p9(){if(zF)return so;zF=1;var r=so&&so.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=so&&so.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=so&&so.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(so,"__esModule",{value:!0}),so.JsonResponseFormat=void 0;const n=t($());return so.JsonResponseFormat=n.serialization.object({schema:n.serialization.record(n.serialization.string(),n.serialization.unknown()).optional()}),so}var uo={},LF;function o1(){if(LF)return uo;LF=1;var r=uo&&uo.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=uo&&uo.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=uo&&uo.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(uo,"__esModule",{value:!0}),uo.ResponseFormat=void 0;const n=t($()),i=f9(),a=p9();return uo.ResponseFormat=n.serialization.union("type",{text:i.TextResponseFormat,json_object:a.JsonResponseFormat}).transform({transform:o=>o,untransform:o=>o}),uo}var lo={},FF;function h9(){if(FF)return lo;FF=1;var r=lo&&lo.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=lo&&lo.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=lo&&lo.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(lo,"__esModule",{value:!0}),lo.ChatCitationType=void 0;const n=t($());return lo.ChatCitationType=n.serialization.enum_(["TEXT_CONTENT","PLAN"]),lo}var co={},kF;function s1(){if(kF)return co;kF=1;var r=co&&co.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=co&&co.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=co&&co.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(co,"__esModule",{value:!0}),co.ChatCitation=void 0;const n=t($()),i=h9();return co.ChatCitation=n.serialization.object({start:n.serialization.number(),end:n.serialization.number(),text:n.serialization.string(),documentIds:n.serialization.property("document_ids",n.serialization.list(n.serialization.string())),type:i.ChatCitationType.optional()}),co}var fo={},VF;function Db(){if(VF)return fo;VF=1;var r=fo&&fo.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=fo&&fo.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=fo&&fo.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(fo,"__esModule",{value:!0}),fo.ChatSearchQuery=void 0;const n=t($());return fo.ChatSearchQuery=n.serialization.object({text:n.serialization.string(),generationId:n.serialization.property("generation_id",n.serialization.string())}),fo}var po={},HF;function m9(){if(HF)return po;HF=1;var r=po&&po.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=po&&po.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=po&&po.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(po,"__esModule",{value:!0}),po.ChatSearchResultConnector=void 0;const n=t($());return po.ChatSearchResultConnector=n.serialization.object({id:n.serialization.string()}),po}var ho={},KF;function u1(){if(KF)return ho;KF=1;var r=ho&&ho.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=ho&&ho.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=ho&&ho.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(ho,"__esModule",{value:!0}),ho.ChatSearchResult=void 0;const n=t($()),i=Db(),a=m9();return ho.ChatSearchResult=n.serialization.object({searchQuery:n.serialization.property("search_query",i.ChatSearchQuery.optional()),connector:a.ChatSearchResultConnector,documentIds:n.serialization.property("document_ids",n.serialization.list(n.serialization.string())),errorMessage:n.serialization.property("error_message",n.serialization.string().optional()),continueOnFailure:n.serialization.property("continue_on_failure",n.serialization.boolean().optional())}),ho}var mo={},WF;function zm(){if(WF)return mo;WF=1;var r=mo&&mo.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=mo&&mo.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=mo&&mo.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(mo,"__esModule",{value:!0}),mo.FinishReason=void 0;const n=t($());return mo.FinishReason=n.serialization.enum_(["COMPLETE","STOP_SEQUENCE","ERROR","ERROR_TOXIC","ERROR_LIMIT","USER_CANCEL","MAX_TOKENS"]),mo}var go={},GF;function g9(){if(GF)return go;GF=1;var r=go&&go.__createBinding||(Object.create?function(h,f,m,p){p===void 0&&(p=m);var g=Object.getOwnPropertyDescriptor(f,m);(!g||("get"in g?!f.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return f[m]}}),Object.defineProperty(h,p,g)}:function(h,f,m,p){p===void 0&&(p=m),h[p]=f[m]}),e=go&&go.__setModuleDefault||(Object.create?function(h,f){Object.defineProperty(h,"default",{enumerable:!0,value:f})}:function(h,f){h.default=f}),t=go&&go.__importStar||function(h){if(h&&h.__esModule)return h;var f={};if(h!=null)for(var m in h)m!=="default"&&Object.prototype.hasOwnProperty.call(h,m)&&r(f,h,m);return e(f,h),f};Object.defineProperty(go,"__esModule",{value:!0}),go.NonStreamedChatResponse=void 0;const n=t($()),i=s1(),a=Um(),o=Db(),s=u1(),u=zm(),l=Bm(),c=xb(),d=Fr();return go.NonStreamedChatResponse=n.serialization.object({text:n.serialization.string(),generationId:n.serialization.property("generation_id",n.serialization.string().optional()),responseId:n.serialization.property("response_id",n.serialization.string().optional()),citations:n.serialization.list(i.ChatCitation).optional(),documents:n.serialization.list(a.ChatDocument).optional(),isSearchRequired:n.serialization.property("is_search_required",n.serialization.boolean().optional()),searchQueries:n.serialization.property("search_queries",n.serialization.list(o.ChatSearchQuery).optional()),searchResults:n.serialization.property("search_results",n.serialization.list(s.ChatSearchResult).optional()),finishReason:n.serialization.property("finish_reason",u.FinishReason.optional()),toolCalls:n.serialization.property("tool_calls",n.serialization.list(l.ToolCall).optional()),chatHistory:n.serialization.property("chat_history",n.serialization.list(c.Message).optional()),prompt:n.serialization.string().optional(),meta:d.ApiMeta.optional()}),go}var _o={},JF;function qu(){if(JF)return _o;JF=1;var r=_o&&_o.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=_o&&_o.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=_o&&_o.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(_o,"__esModule",{value:!0}),_o.ChatStreamEvent=void 0;const n=t($());return _o.ChatStreamEvent=n.serialization.object({}),_o}var bo={},XF;function _9(){if(XF)return bo;XF=1;var r=bo&&bo.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=bo&&bo.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=bo&&bo.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(bo,"__esModule",{value:!0}),bo.ChatStreamStartEvent=void 0;const n=t($()),i=qu();return bo.ChatStreamStartEvent=n.serialization.object({generationId:n.serialization.property("generation_id",n.serialization.string())}).extend(i.ChatStreamEvent),bo}var yo={},ZF;function b9(){if(ZF)return yo;ZF=1;var r=yo&&yo.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=yo&&yo.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=yo&&yo.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(yo,"__esModule",{value:!0}),yo.ChatSearchQueriesGenerationEvent=void 0;const n=t($()),i=Db(),a=qu();return yo.ChatSearchQueriesGenerationEvent=n.serialization.object({searchQueries:n.serialization.property("search_queries",n.serialization.list(i.ChatSearchQuery))}).extend(a.ChatStreamEvent),yo}var vo={},QF;function y9(){if(QF)return vo;QF=1;var r=vo&&vo.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(u,l);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,d)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),e=vo&&vo.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),t=vo&&vo.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&r(u,s,l);return e(u,s),u};Object.defineProperty(vo,"__esModule",{value:!0}),vo.ChatSearchResultsEvent=void 0;const n=t($()),i=u1(),a=Um(),o=qu();return vo.ChatSearchResultsEvent=n.serialization.object({searchResults:n.serialization.property("search_results",n.serialization.list(i.ChatSearchResult).optional()),documents:n.serialization.list(a.ChatDocument).optional()}).extend(o.ChatStreamEvent),vo}var wo={},YF;function v9(){if(YF)return wo;YF=1;var r=wo&&wo.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=wo&&wo.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=wo&&wo.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(wo,"__esModule",{value:!0}),wo.ChatTextGenerationEvent=void 0;const n=t($()),i=qu();return wo.ChatTextGenerationEvent=n.serialization.object({text:n.serialization.string()}).extend(i.ChatStreamEvent),wo}var So={},ek;function w9(){if(ek)return So;ek=1;var r=So&&So.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=So&&So.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=So&&So.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(So,"__esModule",{value:!0}),So.ChatCitationGenerationEvent=void 0;const n=t($()),i=s1(),a=qu();return So.ChatCitationGenerationEvent=n.serialization.object({citations:n.serialization.list(i.ChatCitation)}).extend(a.ChatStreamEvent),So}var Oo={},tk;function S9(){if(tk)return Oo;tk=1;var r=Oo&&Oo.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Oo&&Oo.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Oo&&Oo.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.ChatToolCallsGenerationEvent=void 0;const n=t($()),i=Bm(),a=qu();return Oo.ChatToolCallsGenerationEvent=n.serialization.object({text:n.serialization.string().optional(),toolCalls:n.serialization.property("tool_calls",n.serialization.list(i.ToolCall))}).extend(a.ChatStreamEvent),Oo}var Eo={},rk;function O9(){if(rk)return Eo;rk=1;var r=Eo&&Eo.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Eo&&Eo.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Eo&&Eo.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.ChatStreamEndEventFinishReason=void 0;const n=t($());return Eo.ChatStreamEndEventFinishReason=n.serialization.enum_(["COMPLETE","ERROR_LIMIT","MAX_TOKENS","ERROR","ERROR_TOXIC"]),Eo}var Ro={},nk;function E9(){if(nk)return Ro;nk=1;var r=Ro&&Ro.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(u,l);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,d)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),e=Ro&&Ro.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),t=Ro&&Ro.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&r(u,s,l);return e(u,s),u};Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.ChatStreamEndEvent=void 0;const n=t($()),i=O9(),a=g9(),o=qu();return Ro.ChatStreamEndEvent=n.serialization.object({finishReason:n.serialization.property("finish_reason",i.ChatStreamEndEventFinishReason),response:a.NonStreamedChatResponse}).extend(o.ChatStreamEvent),Ro}var Co={},ik;function R9(){if(ik)return Co;ik=1;var r=Co&&Co.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Co&&Co.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Co&&Co.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Co,"__esModule",{value:!0}),Co.ToolCallDelta=void 0;const n=t($());return Co.ToolCallDelta=n.serialization.object({name:n.serialization.string().optional(),index:n.serialization.number().optional(),parameters:n.serialization.string().optional(),text:n.serialization.string().optional()}),Co}var Po={},ak;function C9(){if(ak)return Po;ak=1;var r=Po&&Po.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Po&&Po.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Po&&Po.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Po,"__esModule",{value:!0}),Po.ChatToolCallsChunkEvent=void 0;const n=t($()),i=R9(),a=qu();return Po.ChatToolCallsChunkEvent=n.serialization.object({toolCallDelta:n.serialization.property("tool_call_delta",i.ToolCallDelta),text:n.serialization.string().optional()}).extend(a.ChatStreamEvent),Po}var jo={},ok;function l1(){if(ok)return jo;ok=1;var r=jo&&jo.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=jo&&jo.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=jo&&jo.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(jo,"__esModule",{value:!0}),jo.ChatDebugEvent=void 0;const n=t($()),i=qu();return jo.ChatDebugEvent=n.serialization.object({prompt:n.serialization.string().optional()}).extend(i.ChatStreamEvent),jo}var To={},sk;function Ffe(){if(sk)return To;sk=1;var r=To&&To.__createBinding||(Object.create?function(f,m,p,g){g===void 0&&(g=p);var b=Object.getOwnPropertyDescriptor(m,p);(!b||("get"in b?!m.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(f,g,b)}:function(f,m,p,g){g===void 0&&(g=p),f[g]=m[p]}),e=To&&To.__setModuleDefault||(Object.create?function(f,m){Object.defineProperty(f,"default",{enumerable:!0,value:m})}:function(f,m){f.default=m}),t=To&&To.__importStar||function(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&r(m,f,p);return e(m,f),m};Object.defineProperty(To,"__esModule",{value:!0}),To.StreamedChatResponse=void 0;const n=t($()),i=_9(),a=b9(),o=y9(),s=v9(),u=w9(),l=S9(),c=E9(),d=C9(),h=l1();return To.StreamedChatResponse=n.serialization.union(n.serialization.discriminant("eventType","event_type"),{"stream-start":i.ChatStreamStartEvent,"search-queries-generation":a.ChatSearchQueriesGenerationEvent,"search-results":o.ChatSearchResultsEvent,"text-generation":s.ChatTextGenerationEvent,"citation-generation":u.ChatCitationGenerationEvent,"tool-calls-generation":l.ChatToolCallsGenerationEvent,"stream-end":c.ChatStreamEndEvent,"tool-calls-chunk":d.ChatToolCallsChunkEvent,debug:h.ChatDebugEvent}).transform({transform:f=>f,untransform:f=>f}),To}var Ao={},uk;function kfe(){if(uk)return Ao;uk=1;var r=Ao&&Ao.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ao&&Ao.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ao&&Ao.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.ReasoningEffort=void 0;const n=t($());return Ao.ReasoningEffort=n.serialization.enum_(["low","medium","high"]),Ao}var Mo={},lk;function P9(){if(lk)return Mo;lk=1;var r=Mo&&Mo.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Mo&&Mo.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Mo&&Mo.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.TruncationStrategyAutoPreserveOrder=void 0;const n=t($());return Mo.TruncationStrategyAutoPreserveOrder=n.serialization.object({}),Mo}var Io={},ck;function j9(){if(ck)return Io;ck=1;var r=Io&&Io.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Io&&Io.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Io&&Io.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Io,"__esModule",{value:!0}),Io.TruncationStrategyNone=void 0;const n=t($());return Io.TruncationStrategyNone=n.serialization.object({}),Io}var xo={},dk;function Vfe(){if(dk)return xo;dk=1;var r=xo&&xo.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=xo&&xo.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=xo&&xo.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(xo,"__esModule",{value:!0}),xo.TruncationStrategy=void 0;const n=t($()),i=P9(),a=j9();return xo.TruncationStrategy=n.serialization.union("type",{auto:i.TruncationStrategyAutoPreserveOrder,none:a.TruncationStrategyNone}).transform({transform:o=>o,untransform:o=>o}),xo}var Do={},fk;function c1(){if(fk)return Do;fk=1;var r=Do&&Do.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Do&&Do.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Do&&Do.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Do,"__esModule",{value:!0}),Do.ChatFinishReason=void 0;const n=t($());return Do.ChatFinishReason=n.serialization.enum_(["COMPLETE","STOP_SEQUENCE","MAX_TOKENS","TOOL_CALL","ERROR"]),Do}var $o={},pk;function T9(){if(pk)return $o;pk=1;var r=$o&&$o.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=$o&&$o.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=$o&&$o.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty($o,"__esModule",{value:!0}),$o.AssistantMessageResponseContentItem=void 0;const n=t($()),i=Cf();return $o.AssistantMessageResponseContentItem=n.serialization.union("type",{text:i.TextContent}).transform({transform:a=>a,untransform:a=>a}),$o}var No={},hk;function A9(){if(hk)return No;hk=1;var r=No&&No.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(u,l);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,d)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),e=No&&No.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),t=No&&No.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&r(u,s,l);return e(u,s),u};Object.defineProperty(No,"__esModule",{value:!0}),No.AssistantMessageResponse=void 0;const n=t($()),i=Pb(),a=T9(),o=jb();return No.AssistantMessageResponse=n.serialization.object({role:n.serialization.stringLiteral("assistant"),toolCalls:n.serialization.property("tool_calls",n.serialization.list(i.ToolCallV2).optional()),toolPlan:n.serialization.property("tool_plan",n.serialization.string().optional()),content:n.serialization.list(a.AssistantMessageResponseContentItem).optional(),citations:n.serialization.list(o.Citation).optional()}),No}var qo={},mk;function M9(){if(mk)return qo;mk=1;var r=qo&&qo.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=qo&&qo.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=qo&&qo.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(qo,"__esModule",{value:!0}),qo.UsageBilledUnits=void 0;const n=t($());return qo.UsageBilledUnits=n.serialization.object({inputTokens:n.serialization.property("input_tokens",n.serialization.number().optional()),outputTokens:n.serialization.property("output_tokens",n.serialization.number().optional()),searchUnits:n.serialization.property("search_units",n.serialization.number().optional()),classifications:n.serialization.number().optional()}),qo}var Bo={},gk;function I9(){if(gk)return Bo;gk=1;var r=Bo&&Bo.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Bo&&Bo.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Bo&&Bo.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.UsageTokens=void 0;const n=t($());return Bo.UsageTokens=n.serialization.object({inputTokens:n.serialization.property("input_tokens",n.serialization.number().optional()),outputTokens:n.serialization.property("output_tokens",n.serialization.number().optional())}),Bo}var Uo={},_k;function d1(){if(_k)return Uo;_k=1;var r=Uo&&Uo.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Uo&&Uo.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Uo&&Uo.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.Usage=void 0;const n=t($()),i=M9(),a=I9();return Uo.Usage=n.serialization.object({billedUnits:n.serialization.property("billed_units",i.UsageBilledUnits.optional()),tokens:a.UsageTokens.optional()}),Uo}var zo={},bk;function f1(){if(bk)return zo;bk=1;var r=zo&&zo.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=zo&&zo.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=zo&&zo.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(zo,"__esModule",{value:!0}),zo.LogprobItem=void 0;const n=t($());return zo.LogprobItem=n.serialization.object({text:n.serialization.string().optional(),tokenIds:n.serialization.property("token_ids",n.serialization.list(n.serialization.number())),logprobs:n.serialization.list(n.serialization.number()).optional()}),zo}var Lo={},yk;function Hfe(){if(yk)return Lo;yk=1;var r=Lo&&Lo.__createBinding||(Object.create?function(u,l,c,d){d===void 0&&(d=c);var h=Object.getOwnPropertyDescriptor(l,c);(!h||("get"in h?!l.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return l[c]}}),Object.defineProperty(u,d,h)}:function(u,l,c,d){d===void 0&&(d=c),u[d]=l[c]}),e=Lo&&Lo.__setModuleDefault||(Object.create?function(u,l){Object.defineProperty(u,"default",{enumerable:!0,value:l})}:function(u,l){u.default=l}),t=Lo&&Lo.__importStar||function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var c in u)c!=="default"&&Object.prototype.hasOwnProperty.call(u,c)&&r(l,u,c);return e(l,u),l};Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.ChatResponse=void 0;const n=t($()),i=c1(),a=A9(),o=d1(),s=f1();return Lo.ChatResponse=n.serialization.object({id:n.serialization.string(),finishReason:n.serialization.property("finish_reason",i.ChatFinishReason),prompt:n.serialization.string().optional(),message:a.AssistantMessageResponse,usage:o.Usage.optional(),logprobs:n.serialization.list(s.LogprobItem).optional()}),Lo}var Fo={},vk;function nn(){if(vk)return Fo;vk=1;var r=Fo&&Fo.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Fo&&Fo.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Fo&&Fo.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.ChatStreamEventType=void 0;const n=t($());return Fo.ChatStreamEventType=n.serialization.object({}),Fo}var ko={},wk;function x9(){if(wk)return ko;wk=1;var r=ko&&ko.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=ko&&ko.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=ko&&ko.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(ko,"__esModule",{value:!0}),ko.ChatMessageStartEventDeltaMessage=void 0;const n=t($());return ko.ChatMessageStartEventDeltaMessage=n.serialization.object({role:n.serialization.stringLiteral("assistant").optional()}),ko}var Vo={},Sk;function D9(){if(Sk)return Vo;Sk=1;var r=Vo&&Vo.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Vo&&Vo.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Vo&&Vo.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.ChatMessageStartEventDelta=void 0;const n=t($()),i=x9();return Vo.ChatMessageStartEventDelta=n.serialization.object({message:i.ChatMessageStartEventDeltaMessage.optional()}),Vo}var Ho={},Ok;function $9(){if(Ok)return Ho;Ok=1;var r=Ho&&Ho.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Ho&&Ho.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Ho&&Ho.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.ChatMessageStartEvent=void 0;const n=t($()),i=D9(),a=nn();return Ho.ChatMessageStartEvent=n.serialization.object({id:n.serialization.string().optional(),delta:i.ChatMessageStartEventDelta.optional()}).extend(a.ChatStreamEventType),Ho}var Ko={},Ek;function N9(){if(Ek)return Ko;Ek=1;var r=Ko&&Ko.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ko&&Ko.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ko&&Ko.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.ChatContentStartEventDeltaMessageContent=void 0;const n=t($());return Ko.ChatContentStartEventDeltaMessageContent=n.serialization.object({text:n.serialization.string().optional(),type:n.serialization.stringLiteral("text").optional()}),Ko}var Wo={},Rk;function q9(){if(Rk)return Wo;Rk=1;var r=Wo&&Wo.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Wo&&Wo.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Wo&&Wo.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.ChatContentStartEventDeltaMessage=void 0;const n=t($()),i=N9();return Wo.ChatContentStartEventDeltaMessage=n.serialization.object({content:i.ChatContentStartEventDeltaMessageContent.optional()}),Wo}var Go={},Ck;function B9(){if(Ck)return Go;Ck=1;var r=Go&&Go.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Go&&Go.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Go&&Go.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Go,"__esModule",{value:!0}),Go.ChatContentStartEventDelta=void 0;const n=t($()),i=q9();return Go.ChatContentStartEventDelta=n.serialization.object({message:i.ChatContentStartEventDeltaMessage.optional()}),Go}var Jo={},Pk;function U9(){if(Pk)return Jo;Pk=1;var r=Jo&&Jo.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Jo&&Jo.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Jo&&Jo.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.ChatContentStartEvent=void 0;const n=t($()),i=B9(),a=nn();return Jo.ChatContentStartEvent=n.serialization.object({index:n.serialization.number().optional(),delta:i.ChatContentStartEventDelta.optional()}).extend(a.ChatStreamEventType),Jo}var Xo={},jk;function z9(){if(jk)return Xo;jk=1;var r=Xo&&Xo.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Xo&&Xo.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Xo&&Xo.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.ChatContentDeltaEventDeltaMessageContent=void 0;const n=t($());return Xo.ChatContentDeltaEventDeltaMessageContent=n.serialization.object({text:n.serialization.string().optional()}),Xo}var Zo={},Tk;function L9(){if(Tk)return Zo;Tk=1;var r=Zo&&Zo.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Zo&&Zo.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Zo&&Zo.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Zo,"__esModule",{value:!0}),Zo.ChatContentDeltaEventDeltaMessage=void 0;const n=t($()),i=z9();return Zo.ChatContentDeltaEventDeltaMessage=n.serialization.object({content:i.ChatContentDeltaEventDeltaMessageContent.optional()}),Zo}var Qo={},Ak;function F9(){if(Ak)return Qo;Ak=1;var r=Qo&&Qo.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Qo&&Qo.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Qo&&Qo.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.ChatContentDeltaEventDelta=void 0;const n=t($()),i=L9();return Qo.ChatContentDeltaEventDelta=n.serialization.object({message:i.ChatContentDeltaEventDeltaMessage.optional()}),Qo}var Yo={},Mk;function k9(){if(Mk)return Yo;Mk=1;var r=Yo&&Yo.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(u,l);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,d)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),e=Yo&&Yo.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),t=Yo&&Yo.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&r(u,s,l);return e(u,s),u};Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.ChatContentDeltaEvent=void 0;const n=t($()),i=F9(),a=f1(),o=nn();return Yo.ChatContentDeltaEvent=n.serialization.object({index:n.serialization.number().optional(),delta:i.ChatContentDeltaEventDelta.optional(),logprobs:a.LogprobItem.optional()}).extend(o.ChatStreamEventType),Yo}var es={},Ik;function V9(){if(Ik)return es;Ik=1;var r=es&&es.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=es&&es.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=es&&es.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(es,"__esModule",{value:!0}),es.ChatContentEndEvent=void 0;const n=t($()),i=nn();return es.ChatContentEndEvent=n.serialization.object({index:n.serialization.number().optional()}).extend(i.ChatStreamEventType),es}var ts={},xk;function H9(){if(xk)return ts;xk=1;var r=ts&&ts.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=ts&&ts.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=ts&&ts.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(ts,"__esModule",{value:!0}),ts.ChatToolPlanDeltaEventDeltaMessage=void 0;const n=t($());return ts.ChatToolPlanDeltaEventDeltaMessage=n.serialization.object({toolPlan:n.serialization.property("tool_plan",n.serialization.string().optional())}),ts}var rs={},Dk;function K9(){if(Dk)return rs;Dk=1;var r=rs&&rs.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=rs&&rs.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=rs&&rs.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(rs,"__esModule",{value:!0}),rs.ChatToolPlanDeltaEventDelta=void 0;const n=t($()),i=H9();return rs.ChatToolPlanDeltaEventDelta=n.serialization.object({message:i.ChatToolPlanDeltaEventDeltaMessage.optional()}),rs}var ns={},$k;function W9(){if($k)return ns;$k=1;var r=ns&&ns.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=ns&&ns.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=ns&&ns.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(ns,"__esModule",{value:!0}),ns.ChatToolPlanDeltaEvent=void 0;const n=t($()),i=K9(),a=nn();return ns.ChatToolPlanDeltaEvent=n.serialization.object({delta:i.ChatToolPlanDeltaEventDelta.optional()}).extend(a.ChatStreamEventType),ns}var is={},Nk;function G9(){if(Nk)return is;Nk=1;var r=is&&is.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=is&&is.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=is&&is.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(is,"__esModule",{value:!0}),is.ChatToolCallStartEventDeltaMessage=void 0;const n=t($()),i=Pb();return is.ChatToolCallStartEventDeltaMessage=n.serialization.object({toolCalls:n.serialization.property("tool_calls",i.ToolCallV2.optional())}),is}var as={},qk;function J9(){if(qk)return as;qk=1;var r=as&&as.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=as&&as.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=as&&as.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(as,"__esModule",{value:!0}),as.ChatToolCallStartEventDelta=void 0;const n=t($()),i=G9();return as.ChatToolCallStartEventDelta=n.serialization.object({message:i.ChatToolCallStartEventDeltaMessage.optional()}),as}var os={},Bk;function X9(){if(Bk)return os;Bk=1;var r=os&&os.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=os&&os.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=os&&os.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(os,"__esModule",{value:!0}),os.ChatToolCallStartEvent=void 0;const n=t($()),i=J9(),a=nn();return os.ChatToolCallStartEvent=n.serialization.object({index:n.serialization.number().optional(),delta:i.ChatToolCallStartEventDelta.optional()}).extend(a.ChatStreamEventType),os}var ss={},Uk;function Z9(){if(Uk)return ss;Uk=1;var r=ss&&ss.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=ss&&ss.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=ss&&ss.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(ss,"__esModule",{value:!0}),ss.ChatToolCallDeltaEventDeltaMessageToolCallsFunction=void 0;const n=t($());return ss.ChatToolCallDeltaEventDeltaMessageToolCallsFunction=n.serialization.object({arguments:n.serialization.string().optional()}),ss}var us={},zk;function Q9(){if(zk)return us;zk=1;var r=us&&us.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=us&&us.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=us&&us.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(us,"__esModule",{value:!0}),us.ChatToolCallDeltaEventDeltaMessageToolCalls=void 0;const n=t($()),i=Z9();return us.ChatToolCallDeltaEventDeltaMessageToolCalls=n.serialization.object({function:i.ChatToolCallDeltaEventDeltaMessageToolCallsFunction.optional()}),us}var ls={},Lk;function Y9(){if(Lk)return ls;Lk=1;var r=ls&&ls.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=ls&&ls.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=ls&&ls.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(ls,"__esModule",{value:!0}),ls.ChatToolCallDeltaEventDeltaMessage=void 0;const n=t($()),i=Q9();return ls.ChatToolCallDeltaEventDeltaMessage=n.serialization.object({toolCalls:n.serialization.property("tool_calls",i.ChatToolCallDeltaEventDeltaMessageToolCalls.optional())}),ls}var cs={},Fk;function eK(){if(Fk)return cs;Fk=1;var r=cs&&cs.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=cs&&cs.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=cs&&cs.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(cs,"__esModule",{value:!0}),cs.ChatToolCallDeltaEventDelta=void 0;const n=t($()),i=Y9();return cs.ChatToolCallDeltaEventDelta=n.serialization.object({message:i.ChatToolCallDeltaEventDeltaMessage.optional()}),cs}var ds={},kk;function tK(){if(kk)return ds;kk=1;var r=ds&&ds.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=ds&&ds.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=ds&&ds.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(ds,"__esModule",{value:!0}),ds.ChatToolCallDeltaEvent=void 0;const n=t($()),i=eK(),a=nn();return ds.ChatToolCallDeltaEvent=n.serialization.object({index:n.serialization.number().optional(),delta:i.ChatToolCallDeltaEventDelta.optional()}).extend(a.ChatStreamEventType),ds}var fs={},Vk;function rK(){if(Vk)return fs;Vk=1;var r=fs&&fs.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=fs&&fs.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=fs&&fs.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(fs,"__esModule",{value:!0}),fs.ChatToolCallEndEvent=void 0;const n=t($()),i=nn();return fs.ChatToolCallEndEvent=n.serialization.object({index:n.serialization.number().optional()}).extend(i.ChatStreamEventType),fs}var ps={},Hk;function nK(){if(Hk)return ps;Hk=1;var r=ps&&ps.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=ps&&ps.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=ps&&ps.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(ps,"__esModule",{value:!0}),ps.CitationStartEventDeltaMessage=void 0;const n=t($()),i=jb();return ps.CitationStartEventDeltaMessage=n.serialization.object({citations:i.Citation.optional()}),ps}var hs={},Kk;function iK(){if(Kk)return hs;Kk=1;var r=hs&&hs.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=hs&&hs.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=hs&&hs.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(hs,"__esModule",{value:!0}),hs.CitationStartEventDelta=void 0;const n=t($()),i=nK();return hs.CitationStartEventDelta=n.serialization.object({message:i.CitationStartEventDeltaMessage.optional()}),hs}var ms={},Wk;function aK(){if(Wk)return ms;Wk=1;var r=ms&&ms.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=ms&&ms.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=ms&&ms.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(ms,"__esModule",{value:!0}),ms.CitationStartEvent=void 0;const n=t($()),i=iK(),a=nn();return ms.CitationStartEvent=n.serialization.object({index:n.serialization.number().optional(),delta:i.CitationStartEventDelta.optional()}).extend(a.ChatStreamEventType),ms}var gs={},Gk;function oK(){if(Gk)return gs;Gk=1;var r=gs&&gs.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=gs&&gs.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=gs&&gs.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(gs,"__esModule",{value:!0}),gs.CitationEndEvent=void 0;const n=t($()),i=nn();return gs.CitationEndEvent=n.serialization.object({index:n.serialization.number().optional()}).extend(i.ChatStreamEventType),gs}var _s={},Jk;function sK(){if(Jk)return _s;Jk=1;var r=_s&&_s.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=_s&&_s.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=_s&&_s.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(_s,"__esModule",{value:!0}),_s.ChatMessageEndEventDelta=void 0;const n=t($()),i=c1(),a=d1();return _s.ChatMessageEndEventDelta=n.serialization.object({finishReason:n.serialization.property("finish_reason",i.ChatFinishReason.optional()),usage:a.Usage.optional()}),_s}var bs={},Xk;function uK(){if(Xk)return bs;Xk=1;var r=bs&&bs.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=bs&&bs.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=bs&&bs.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(bs,"__esModule",{value:!0}),bs.ChatMessageEndEvent=void 0;const n=t($()),i=sK(),a=nn();return bs.ChatMessageEndEvent=n.serialization.object({id:n.serialization.string().optional(),delta:i.ChatMessageEndEventDelta.optional()}).extend(a.ChatStreamEventType),bs}var ys={},Zk;function Kfe(){if(Zk)return ys;Zk=1;var r=ys&&ys.__createBinding||(Object.create?function(g,b,_,y){y===void 0&&(y=_);var v=Object.getOwnPropertyDescriptor(b,_);(!v||("get"in v?!b.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return b[_]}}),Object.defineProperty(g,y,v)}:function(g,b,_,y){y===void 0&&(y=_),g[y]=b[_]}),e=ys&&ys.__setModuleDefault||(Object.create?function(g,b){Object.defineProperty(g,"default",{enumerable:!0,value:b})}:function(g,b){g.default=b}),t=ys&&ys.__importStar||function(g){if(g&&g.__esModule)return g;var b={};if(g!=null)for(var _ in g)_!=="default"&&Object.prototype.hasOwnProperty.call(g,_)&&r(b,g,_);return e(b,g),b};Object.defineProperty(ys,"__esModule",{value:!0}),ys.StreamedChatResponseV2=void 0;const n=t($()),i=$9(),a=U9(),o=k9(),s=V9(),u=W9(),l=X9(),c=tK(),d=rK(),h=aK(),f=oK(),m=uK(),p=l1();return ys.StreamedChatResponseV2=n.serialization.union("type",{"message-start":i.ChatMessageStartEvent,"content-start":a.ChatContentStartEvent,"content-delta":o.ChatContentDeltaEvent,"content-end":s.ChatContentEndEvent,"tool-plan-delta":u.ChatToolPlanDeltaEvent,"tool-call-start":l.ChatToolCallStartEvent,"tool-call-delta":c.ChatToolCallDeltaEvent,"tool-call-end":d.ChatToolCallEndEvent,"citation-start":h.CitationStartEvent,"citation-end":f.CitationEndEvent,"message-end":m.ChatMessageEndEvent,debug:p.ChatDebugEvent}).transform({transform:g=>g,untransform:g=>g}),ys}var vs={},Qk;function lK(){if(Qk)return vs;Qk=1;var r=vs&&vs.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=vs&&vs.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=vs&&vs.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(vs,"__esModule",{value:!0}),vs.SingleGenerationTokenLikelihoodsItem=void 0;const n=t($());return vs.SingleGenerationTokenLikelihoodsItem=n.serialization.object({token:n.serialization.string(),likelihood:n.serialization.number()}),vs}var ws={},Yk;function cK(){if(Yk)return ws;Yk=1;var r=ws&&ws.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=ws&&ws.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=ws&&ws.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(ws,"__esModule",{value:!0}),ws.SingleGeneration=void 0;const n=t($()),i=lK();return ws.SingleGeneration=n.serialization.object({id:n.serialization.string(),text:n.serialization.string(),index:n.serialization.number().optional(),likelihood:n.serialization.number().optional(),tokenLikelihoods:n.serialization.property("token_likelihoods",n.serialization.list(i.SingleGenerationTokenLikelihoodsItem).optional())}),ws}var Ss={},e4;function Wfe(){if(e4)return Ss;e4=1;var r=Ss&&Ss.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Ss&&Ss.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Ss&&Ss.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.Generation=void 0;const n=t($()),i=cK(),a=Fr();return Ss.Generation=n.serialization.object({id:n.serialization.string(),prompt:n.serialization.string().optional(),generations:n.serialization.list(i.SingleGeneration),meta:a.ApiMeta.optional()}),Ss}var Os={},t4;function $b(){if(t4)return Os;t4=1;var r=Os&&Os.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Os&&Os.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Os&&Os.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Os,"__esModule",{value:!0}),Os.GenerateStreamEvent=void 0;const n=t($());return Os.GenerateStreamEvent=n.serialization.object({}),Os}var Es={},r4;function dK(){if(r4)return Es;r4=1;var r=Es&&Es.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Es&&Es.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Es&&Es.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Es,"__esModule",{value:!0}),Es.GenerateStreamText=void 0;const n=t($()),i=$b();return Es.GenerateStreamText=n.serialization.object({text:n.serialization.string(),index:n.serialization.number().optional(),isFinished:n.serialization.property("is_finished",n.serialization.boolean())}).extend(i.GenerateStreamEvent),Es}var Rs={},n4;function fK(){if(n4)return Rs;n4=1;var r=Rs&&Rs.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Rs&&Rs.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Rs&&Rs.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.SingleGenerationInStream=void 0;const n=t($()),i=zm();return Rs.SingleGenerationInStream=n.serialization.object({id:n.serialization.string(),text:n.serialization.string(),index:n.serialization.number().optional(),finishReason:n.serialization.property("finish_reason",i.FinishReason)}),Rs}var Cs={},i4;function pK(){if(i4)return Cs;i4=1;var r=Cs&&Cs.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Cs&&Cs.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Cs&&Cs.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.GenerateStreamEndResponse=void 0;const n=t($()),i=fK();return Cs.GenerateStreamEndResponse=n.serialization.object({id:n.serialization.string(),prompt:n.serialization.string().optional(),generations:n.serialization.list(i.SingleGenerationInStream).optional()}),Cs}var Ps={},a4;function hK(){if(a4)return Ps;a4=1;var r=Ps&&Ps.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(u,l);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,d)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),e=Ps&&Ps.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),t=Ps&&Ps.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&r(u,s,l);return e(u,s),u};Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.GenerateStreamEnd=void 0;const n=t($()),i=zm(),a=pK(),o=$b();return Ps.GenerateStreamEnd=n.serialization.object({isFinished:n.serialization.property("is_finished",n.serialization.boolean()),finishReason:n.serialization.property("finish_reason",i.FinishReason.optional()),response:a.GenerateStreamEndResponse}).extend(o.GenerateStreamEvent),Ps}var js={},o4;function mK(){if(o4)return js;o4=1;var r=js&&js.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=js&&js.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=js&&js.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(js,"__esModule",{value:!0}),js.GenerateStreamError=void 0;const n=t($()),i=zm(),a=$b();return js.GenerateStreamError=n.serialization.object({index:n.serialization.number().optional(),isFinished:n.serialization.property("is_finished",n.serialization.boolean()),finishReason:n.serialization.property("finish_reason",i.FinishReason),err:n.serialization.string()}).extend(a.GenerateStreamEvent),js}var Ts={},s4;function Gfe(){if(s4)return Ts;s4=1;var r=Ts&&Ts.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(u,l);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,d)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),e=Ts&&Ts.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),t=Ts&&Ts.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&r(u,s,l);return e(u,s),u};Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.GenerateStreamedResponse=void 0;const n=t($()),i=dK(),a=hK(),o=mK();return Ts.GenerateStreamedResponse=n.serialization.union(n.serialization.discriminant("eventType","event_type"),{"text-generation":i.GenerateStreamText,"stream-end":a.GenerateStreamEnd,"stream-error":o.GenerateStreamError}).transform({transform:s=>s,untransform:s=>s}),Ts}var As={},u4;function gK(){if(u4)return As;u4=1;var r=As&&As.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=As&&As.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=As&&As.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(As,"__esModule",{value:!0}),As.EmbedJobStatus=void 0;const n=t($());return As.EmbedJobStatus=n.serialization.enum_(["processing","complete","cancelling","cancelled","failed"]),As}var Ms={},l4;function _K(){if(l4)return Ms;l4=1;var r=Ms&&Ms.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ms&&Ms.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ms&&Ms.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.EmbedJobTruncate=void 0;const n=t($());return Ms.EmbedJobTruncate=n.serialization.enum_(["START","END"]),Ms}var Is={},c4;function bK(){if(c4)return Is;c4=1;var r=Is&&Is.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(u,l);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,d)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),e=Is&&Is.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),t=Is&&Is.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&r(u,s,l);return e(u,s),u};Object.defineProperty(Is,"__esModule",{value:!0}),Is.EmbedJob=void 0;const n=t($()),i=gK(),a=_K(),o=Fr();return Is.EmbedJob=n.serialization.object({jobId:n.serialization.property("job_id",n.serialization.string()),name:n.serialization.string().optional(),status:i.EmbedJobStatus,createdAt:n.serialization.property("created_at",n.serialization.date()),inputDatasetId:n.serialization.property("input_dataset_id",n.serialization.string()),outputDatasetId:n.serialization.property("output_dataset_id",n.serialization.string().optional()),model:n.serialization.string(),truncate:a.EmbedJobTruncate,meta:o.ApiMeta.optional()}),Is}var xs={},d4;function Jfe(){if(d4)return xs;d4=1;var r=xs&&xs.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=xs&&xs.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=xs&&xs.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(xs,"__esModule",{value:!0}),xs.ListEmbedJobResponse=void 0;const n=t($()),i=bK();return xs.ListEmbedJobResponse=n.serialization.object({embedJobs:n.serialization.property("embed_jobs",n.serialization.list(i.EmbedJob).optional())}),xs}var Ds={},f4;function Xfe(){if(f4)return Ds;f4=1;var r=Ds&&Ds.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Ds&&Ds.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Ds&&Ds.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.CreateEmbedJobResponse=void 0;const n=t($()),i=Fr();return Ds.CreateEmbedJobResponse=n.serialization.object({jobId:n.serialization.property("job_id",n.serialization.string()),meta:i.ApiMeta.optional()}),Ds}var $s={},p4;function yK(){if(p4)return $s;p4=1;var r=$s&&$s.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=$s&&$s.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=$s&&$s.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty($s,"__esModule",{value:!0}),$s.ClassifyExample=void 0;const n=t($());return $s.ClassifyExample=n.serialization.object({text:n.serialization.string().optional(),label:n.serialization.string().optional()}),$s}var Ns={},h4;function Zfe(){if(h4)return Ns;h4=1;var r=Ns&&Ns.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ns&&Ns.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ns&&Ns.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.ParseInfo=void 0;const n=t($());return Ns.ParseInfo=n.serialization.object({separator:n.serialization.string().optional(),delimiter:n.serialization.string().optional()}),Ns}var qs={},m4;function Qfe(){if(m4)return qs;m4=1;var r=qs&&qs.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=qs&&qs.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=qs&&qs.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(qs,"__esModule",{value:!0}),qs.RerankerDataMetrics=void 0;const n=t($());return qs.RerankerDataMetrics=n.serialization.object({numTrainQueries:n.serialization.property("num_train_queries",n.serialization.number().optional()),numTrainRelevantPassages:n.serialization.property("num_train_relevant_passages",n.serialization.number().optional()),numTrainHardNegatives:n.serialization.property("num_train_hard_negatives",n.serialization.number().optional()),numEvalQueries:n.serialization.property("num_eval_queries",n.serialization.number().optional()),numEvalRelevantPassages:n.serialization.property("num_eval_relevant_passages",n.serialization.number().optional()),numEvalHardNegatives:n.serialization.property("num_eval_hard_negatives",n.serialization.number().optional())}),qs}var Bs={},g4;function Yfe(){if(g4)return Bs;g4=1;var r=Bs&&Bs.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Bs&&Bs.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Bs&&Bs.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.ChatDataMetrics=void 0;const n=t($());return Bs.ChatDataMetrics=n.serialization.object({numTrainTurns:n.serialization.property("num_train_turns",n.serialization.number().optional()),numEvalTurns:n.serialization.property("num_eval_turns",n.serialization.number().optional()),preamble:n.serialization.string().optional()}),Bs}var Us={},_4;function vK(){if(_4)return Us;_4=1;var r=Us&&Us.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Us&&Us.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Us&&Us.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Us,"__esModule",{value:!0}),Us.LabelMetric=void 0;const n=t($());return Us.LabelMetric=n.serialization.object({totalExamples:n.serialization.property("total_examples",n.serialization.number().optional()),label:n.serialization.string().optional(),samples:n.serialization.list(n.serialization.string()).optional()}),Us}var zs={},b4;function epe(){if(b4)return zs;b4=1;var r=zs&&zs.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=zs&&zs.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=zs&&zs.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(zs,"__esModule",{value:!0}),zs.ClassifyDataMetrics=void 0;const n=t($()),i=vK();return zs.ClassifyDataMetrics=n.serialization.object({labelMetrics:n.serialization.property("label_metrics",n.serialization.list(i.LabelMetric).optional())}),zs}var Ls={},y4;function wK(){if(y4)return Ls;y4=1;var r=Ls&&Ls.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ls&&Ls.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ls&&Ls.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.FinetuneDatasetMetrics=void 0;const n=t($());return Ls.FinetuneDatasetMetrics=n.serialization.object({trainableTokenCount:n.serialization.property("trainable_token_count",n.serialization.number().optional()),totalExamples:n.serialization.property("total_examples",n.serialization.number().optional()),trainExamples:n.serialization.property("train_examples",n.serialization.number().optional()),trainSizeBytes:n.serialization.property("train_size_bytes",n.serialization.number().optional()),evalExamples:n.serialization.property("eval_examples",n.serialization.number().optional()),evalSizeBytes:n.serialization.property("eval_size_bytes",n.serialization.number().optional())}),Ls}var Fs={},v4;function SK(){if(v4)return Fs;v4=1;var r=Fs&&Fs.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Fs&&Fs.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Fs&&Fs.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.MetricsEmbedDataFieldsItem=void 0;const n=t($());return Fs.MetricsEmbedDataFieldsItem=n.serialization.object({name:n.serialization.string().optional(),count:n.serialization.number().optional()}),Fs}var ks={},w4;function OK(){if(w4)return ks;w4=1;var r=ks&&ks.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=ks&&ks.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=ks&&ks.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(ks,"__esModule",{value:!0}),ks.MetricsEmbedData=void 0;const n=t($()),i=SK();return ks.MetricsEmbedData=n.serialization.object({fields:n.serialization.list(i.MetricsEmbedDataFieldsItem).optional()}),ks}var Vs={},S4;function tpe(){if(S4)return Vs;S4=1;var r=Vs&&Vs.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Vs&&Vs.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Vs&&Vs.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.Metrics=void 0;const n=t($()),i=wK(),a=OK();return Vs.Metrics=n.serialization.object({finetuneDatasetMetrics:n.serialization.property("finetune_dataset_metrics",i.FinetuneDatasetMetrics.optional()),embedData:n.serialization.property("embed_data",a.MetricsEmbedData.optional())}),Vs}var Hs={},O4;function EK(){if(O4)return Hs;O4=1;var r=Hs&&Hs.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Hs&&Hs.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Hs&&Hs.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.ConnectorOAuth=void 0;const n=t($());return Hs.ConnectorOAuth=n.serialization.object({clientId:n.serialization.property("client_id",n.serialization.string().optional()),clientSecret:n.serialization.property("client_secret",n.serialization.string().optional()),authorizeUrl:n.serialization.property("authorize_url",n.serialization.string()),tokenUrl:n.serialization.property("token_url",n.serialization.string()),scope:n.serialization.string().optional()}),Hs}var Ks={},E4;function RK(){if(E4)return Ks;E4=1;var r=Ks&&Ks.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ks&&Ks.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ks&&Ks.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.ConnectorAuthStatus=void 0;const n=t($());return Ks.ConnectorAuthStatus=n.serialization.enum_(["valid","expired"]),Ks}var Ws={},R4;function Lm(){if(R4)return Ws;R4=1;var r=Ws&&Ws.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=Ws&&Ws.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=Ws&&Ws.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.Connector=void 0;const n=t($()),i=EK(),a=RK();return Ws.Connector=n.serialization.object({id:n.serialization.string(),organizationId:n.serialization.property("organization_id",n.serialization.string().optional()),name:n.serialization.string(),description:n.serialization.string().optional(),url:n.serialization.string().optional(),createdAt:n.serialization.property("created_at",n.serialization.date()),updatedAt:n.serialization.property("updated_at",n.serialization.date()),excludes:n.serialization.list(n.serialization.string()).optional(),authType:n.serialization.property("auth_type",n.serialization.string().optional()),oauth:i.ConnectorOAuth.optional(),authStatus:n.serialization.property("auth_status",a.ConnectorAuthStatus.optional()),active:n.serialization.boolean().optional(),continueOnFailure:n.serialization.property("continue_on_failure",n.serialization.boolean().optional())}),Ws}var Gs={},C4;function rpe(){if(C4)return Gs;C4=1;var r=Gs&&Gs.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Gs&&Gs.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Gs&&Gs.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.ListConnectorsResponse=void 0;const n=t($()),i=Lm();return Gs.ListConnectorsResponse=n.serialization.object({connectors:n.serialization.list(i.Connector),totalCount:n.serialization.property("total_count",n.serialization.number().optional())}),Gs}var Js={},P4;function npe(){if(P4)return Js;P4=1;var r=Js&&Js.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Js&&Js.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Js&&Js.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Js,"__esModule",{value:!0}),Js.CreateConnectorResponse=void 0;const n=t($()),i=Lm();return Js.CreateConnectorResponse=n.serialization.object({connector:i.Connector}),Js}var Xs={},j4;function ipe(){if(j4)return Xs;j4=1;var r=Xs&&Xs.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Xs&&Xs.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Xs&&Xs.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.GetConnectorResponse=void 0;const n=t($()),i=Lm();return Xs.GetConnectorResponse=n.serialization.object({connector:i.Connector}),Xs}var Zs={},T4;function ape(){if(T4)return Zs;T4=1;var r=Zs&&Zs.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Zs&&Zs.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Zs&&Zs.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.DeleteConnectorResponse=void 0;const n=t($());return Zs.DeleteConnectorResponse=n.serialization.record(n.serialization.string(),n.serialization.unknown()),Zs}var Qs={},A4;function ope(){if(A4)return Qs;A4=1;var r=Qs&&Qs.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=Qs&&Qs.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Qs&&Qs.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.UpdateConnectorResponse=void 0;const n=t($()),i=Lm();return Qs.UpdateConnectorResponse=n.serialization.object({connector:i.Connector}),Qs}var Ys={},M4;function spe(){if(M4)return Ys;M4=1;var r=Ys&&Ys.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=Ys&&Ys.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=Ys&&Ys.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.OAuthAuthorizeResponse=void 0;const n=t($());return Ys.OAuthAuthorizeResponse=n.serialization.object({redirectUrl:n.serialization.property("redirect_url",n.serialization.string().optional())}),Ys}var eu={},I4;function CK(){if(I4)return eu;I4=1;var r=eu&&eu.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=eu&&eu.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=eu&&eu.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(eu,"__esModule",{value:!0}),eu.CompatibleEndpoint=void 0;const n=t($());return eu.CompatibleEndpoint=n.serialization.enum_(["chat","embed","classify","summarize","rerank","rate","generate"]),eu}var tu={},x4;function PK(){if(x4)return tu;x4=1;var r=tu&&tu.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=tu&&tu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=tu&&tu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(tu,"__esModule",{value:!0}),tu.GetModelResponse=void 0;const n=t($()),i=CK();return tu.GetModelResponse=n.serialization.object({name:n.serialization.string().optional(),endpoints:n.serialization.list(i.CompatibleEndpoint).optional(),finetuned:n.serialization.boolean().optional(),contextLength:n.serialization.property("context_length",n.serialization.number().optional()),tokenizerUrl:n.serialization.property("tokenizer_url",n.serialization.string().optional()),supportsVision:n.serialization.property("supports_vision",n.serialization.boolean().optional()),defaultEndpoints:n.serialization.property("default_endpoints",n.serialization.list(i.CompatibleEndpoint).optional()),features:n.serialization.list(n.serialization.string()).optional()}),tu}var ru={},D4;function upe(){if(D4)return ru;D4=1;var r=ru&&ru.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=ru&&ru.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=ru&&ru.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(ru,"__esModule",{value:!0}),ru.ListModelsResponse=void 0;const n=t($()),i=PK();return ru.ListModelsResponse=n.serialization.object({models:n.serialization.list(i.GetModelResponse),nextPageToken:n.serialization.property("next_page_token",n.serialization.string().optional())}),ru}var $4;function lpe(){return $4||($4=1,function(r){var e=Jc&&Jc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Jc&&Jc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(B5(),r),t(U5(),r),t(xfe(),r),t(z5(),r),t(L5(),r),t(F5(),r),t(Dfe(),r),t(k5(),r),t(V5(),r),t(H5(),r),t(K5(),r),t(W5(),r),t(G5(),r),t($fe(),r),t(Y5(),r),t(e9(),r),t(t9(),r),t(Nfe(),r),t(r9(),r),t(n9(),r),t(i9(),r),t(a9(),r),t(qfe(),r),t(o9(),r),t(s9(),r),t(u9(),r),t(Bfe(),r),t(Ufe(),r),t(zfe(),r),t(Lfe(),r),t(Bm(),r),t(l9(),r),t(Ib(),r),t(c9(),r),t(xb(),r),t(i1(),r),t(Um(),r),t(d9(),r),t(a1(),r),t(f9(),r),t(p9(),r),t(o1(),r),t(h9(),r),t(s1(),r),t(Db(),r),t(m9(),r),t(u1(),r),t(zm(),r),t(BH(),r),t(UH(),r),t(zH(),r),t(Fr(),r),t(g9(),r),t(qu(),r),t(_9(),r),t(b9(),r),t(y9(),r),t(v9(),r),t(w9(),r),t(S9(),r),t(O9(),r),t(E9(),r),t(R9(),r),t(C9(),r),t(l1(),r),t(Ffe(),r),t(Cf(),r),t(FH(),r),t(kH(),r),t(VH(),r),t(HH(),r),t(KH(),r),t(WH(),r),t(Pb(),r),t(XH(),r),t(ZH(),r),t(QH(),r),t(YH(),r),t(jb(),r),t(GH(),r),t(JH(),r),t(e5(),r),t(t5(),r),t(r5(),r),t(n5(),r),t(Cb(),r),t(i5(),r),t(a5(),r),t(o5(),r),t(s5(),r),t(u5(),r),t(JP(),r),t(kfe(),r),t(l5(),r),t(XP(),r),t(c5(),r),t(ZP(),r),t(P9(),r),t(j9(),r),t(Vfe(),r),t(d5(),r),t(f5(),r),t(QP(),r),t(c1(),r),t(T9(),r),t(A9(),r),t(M9(),r),t(I9(),r),t(d1(),r),t(f1(),r),t(Hfe(),r),t(nn(),r),t(x9(),r),t(D9(),r),t($9(),r),t(N9(),r),t(q9(),r),t(B9(),r),t(U9(),r),t(z9(),r),t(L9(),r),t(F9(),r),t(k9(),r),t(V9(),r),t(H9(),r),t(K9(),r),t(W9(),r),t(G9(),r),t(J9(),r),t(X9(),r),t(Z9(),r),t(Q9(),r),t(Y9(),r),t(eK(),r),t(tK(),r),t(rK(),r),t(nK(),r),t(iK(),r),t(aK(),r),t(oK(),r),t(sK(),r),t(uK(),r),t(Kfe(),r),t(lK(),r),t(cK(),r),t(Wfe(),r),t($b(),r),t(dK(),r),t(fK(),r),t(pK(),r),t(hK(),r),t(mK(),r),t(Gfe(),r),t(Tb(),r),t(Ab(),r),t(n1(),r),t(J5(),r),t(X5(),r),t(Z5(),r),t(p5(),r),t(h5(),r),t(m5(),r),t(g5(),r),t(_5(),r),t(gK(),r),t(_K(),r),t(bK(),r),t(Jfe(),r),t(Xfe(),r),t(Q5(),r),t(yK(),r),t(O5(),r),t(S5(),r),t(E5(),r),t(Zfe(),r),t(Qfe(),r),t(Yfe(),r),t(vK(),r),t(epe(),r),t(wK(),r),t(SK(),r),t(OK(),r),t(tpe(),r),t(YP(),r),t(EK(),r),t(RK(),r),t(Lm(),r),t(rpe(),r),t(t1(),r),t(N5(),r),t(r1(),r),t(npe(),r),t(ipe(),r),t(ape(),r),t(ope(),r),t(spe(),r),t(CK(),r),t(PK(),r),t(upe(),r)}(Jc)),Jc}var Xc={},aR={},nu={},N4;function cpe(){if(N4)return nu;N4=1;var r=nu&&nu.__createBinding||(Object.create?function(f,m,p,g){g===void 0&&(g=p);var b=Object.getOwnPropertyDescriptor(m,p);(!b||("get"in b?!m.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(f,g,b)}:function(f,m,p,g){g===void 0&&(g=p),f[g]=m[p]}),e=nu&&nu.__setModuleDefault||(Object.create?function(f,m){Object.defineProperty(f,"default",{enumerable:!0,value:m})}:function(f,m){f.default=m}),t=nu&&nu.__importStar||function(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&r(m,f,p);return e(m,f),m};Object.defineProperty(nu,"__esModule",{value:!0}),nu.ChatStreamRequest=void 0;const n=t($()),i=xb(),a=B5(),o=i1(),s=Um(),u=U5(),l=a1(),c=Ib(),d=o1(),h=z5();return nu.ChatStreamRequest=n.serialization.object({message:n.serialization.string(),model:n.serialization.string().optional(),preamble:n.serialization.string().optional(),chatHistory:n.serialization.property("chat_history",n.serialization.list(i.Message).optional()),conversationId:n.serialization.property("conversation_id",n.serialization.string().optional()),promptTruncation:n.serialization.property("prompt_truncation",a.ChatStreamRequestPromptTruncation.optional()),connectors:n.serialization.list(o.ChatConnector).optional(),searchQueriesOnly:n.serialization.property("search_queries_only",n.serialization.boolean().optional()),documents:n.serialization.list(s.ChatDocument).optional(),citationQuality:n.serialization.property("citation_quality",u.ChatStreamRequestCitationQuality.optional()),temperature:n.serialization.number().optional(),maxTokens:n.serialization.property("max_tokens",n.serialization.number().optional()),maxInputTokens:n.serialization.property("max_input_tokens",n.serialization.number().optional()),k:n.serialization.number().optional(),p:n.serialization.number().optional(),seed:n.serialization.number().optional(),stopSequences:n.serialization.property("stop_sequences",n.serialization.list(n.serialization.string()).optional()),frequencyPenalty:n.serialization.property("frequency_penalty",n.serialization.number().optional()),presencePenalty:n.serialization.property("presence_penalty",n.serialization.number().optional()),rawPrompting:n.serialization.property("raw_prompting",n.serialization.boolean().optional()),returnPrompt:n.serialization.property("return_prompt",n.serialization.boolean().optional()),tools:n.serialization.list(l.Tool).optional(),toolResults:n.serialization.property("tool_results",n.serialization.list(c.ToolResult).optional()),forceSingleStep:n.serialization.property("force_single_step",n.serialization.boolean().optional()),responseFormat:n.serialization.property("response_format",d.ResponseFormat.optional()),safetyMode:n.serialization.property("safety_mode",h.ChatStreamRequestSafetyMode.optional())}),nu}var iu={},q4;function dpe(){if(q4)return iu;q4=1;var r=iu&&iu.__createBinding||(Object.create?function(f,m,p,g){g===void 0&&(g=p);var b=Object.getOwnPropertyDescriptor(m,p);(!b||("get"in b?!m.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(f,g,b)}:function(f,m,p,g){g===void 0&&(g=p),f[g]=m[p]}),e=iu&&iu.__setModuleDefault||(Object.create?function(f,m){Object.defineProperty(f,"default",{enumerable:!0,value:m})}:function(f,m){f.default=m}),t=iu&&iu.__importStar||function(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&r(m,f,p);return e(m,f),m};Object.defineProperty(iu,"__esModule",{value:!0}),iu.ChatRequest=void 0;const n=t($()),i=xb(),a=L5(),o=i1(),s=Um(),u=F5(),l=a1(),c=Ib(),d=o1(),h=k5();return iu.ChatRequest=n.serialization.object({message:n.serialization.string(),model:n.serialization.string().optional(),preamble:n.serialization.string().optional(),chatHistory:n.serialization.property("chat_history",n.serialization.list(i.Message).optional()),conversationId:n.serialization.property("conversation_id",n.serialization.string().optional()),promptTruncation:n.serialization.property("prompt_truncation",a.ChatRequestPromptTruncation.optional()),connectors:n.serialization.list(o.ChatConnector).optional(),searchQueriesOnly:n.serialization.property("search_queries_only",n.serialization.boolean().optional()),documents:n.serialization.list(s.ChatDocument).optional(),citationQuality:n.serialization.property("citation_quality",u.ChatRequestCitationQuality.optional()),temperature:n.serialization.number().optional(),maxTokens:n.serialization.property("max_tokens",n.serialization.number().optional()),maxInputTokens:n.serialization.property("max_input_tokens",n.serialization.number().optional()),k:n.serialization.number().optional(),p:n.serialization.number().optional(),seed:n.serialization.number().optional(),stopSequences:n.serialization.property("stop_sequences",n.serialization.list(n.serialization.string()).optional()),frequencyPenalty:n.serialization.property("frequency_penalty",n.serialization.number().optional()),presencePenalty:n.serialization.property("presence_penalty",n.serialization.number().optional()),rawPrompting:n.serialization.property("raw_prompting",n.serialization.boolean().optional()),returnPrompt:n.serialization.property("return_prompt",n.serialization.boolean().optional()),tools:n.serialization.list(l.Tool).optional(),toolResults:n.serialization.property("tool_results",n.serialization.list(c.ToolResult).optional()),forceSingleStep:n.serialization.property("force_single_step",n.serialization.boolean().optional()),responseFormat:n.serialization.property("response_format",d.ResponseFormat.optional()),safetyMode:n.serialization.property("safety_mode",h.ChatRequestSafetyMode.optional())}),iu}var au={},B4;function fpe(){if(B4)return au;B4=1;var r=au&&au.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=au&&au.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=au&&au.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(au,"__esModule",{value:!0}),au.GenerateStreamRequest=void 0;const n=t($()),i=V5(),a=H5();return au.GenerateStreamRequest=n.serialization.object({prompt:n.serialization.string(),model:n.serialization.string().optional(),numGenerations:n.serialization.property("num_generations",n.serialization.number().optional()),maxTokens:n.serialization.property("max_tokens",n.serialization.number().optional()),truncate:i.GenerateStreamRequestTruncate.optional(),temperature:n.serialization.number().optional(),seed:n.serialization.number().optional(),preset:n.serialization.string().optional(),endSequences:n.serialization.property("end_sequences",n.serialization.list(n.serialization.string()).optional()),stopSequences:n.serialization.property("stop_sequences",n.serialization.list(n.serialization.string()).optional()),k:n.serialization.number().optional(),p:n.serialization.number().optional(),frequencyPenalty:n.serialization.property("frequency_penalty",n.serialization.number().optional()),presencePenalty:n.serialization.property("presence_penalty",n.serialization.number().optional()),returnLikelihoods:n.serialization.property("return_likelihoods",a.GenerateStreamRequestReturnLikelihoods.optional()),rawPrompting:n.serialization.property("raw_prompting",n.serialization.boolean().optional())}),au}var ou={},U4;function ppe(){if(U4)return ou;U4=1;var r=ou&&ou.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=ou&&ou.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=ou&&ou.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(ou,"__esModule",{value:!0}),ou.GenerateRequest=void 0;const n=t($()),i=K5(),a=W5();return ou.GenerateRequest=n.serialization.object({prompt:n.serialization.string(),model:n.serialization.string().optional(),numGenerations:n.serialization.property("num_generations",n.serialization.number().optional()),maxTokens:n.serialization.property("max_tokens",n.serialization.number().optional()),truncate:i.GenerateRequestTruncate.optional(),temperature:n.serialization.number().optional(),seed:n.serialization.number().optional(),preset:n.serialization.string().optional(),endSequences:n.serialization.property("end_sequences",n.serialization.list(n.serialization.string()).optional()),stopSequences:n.serialization.property("stop_sequences",n.serialization.list(n.serialization.string()).optional()),k:n.serialization.number().optional(),p:n.serialization.number().optional(),frequencyPenalty:n.serialization.property("frequency_penalty",n.serialization.number().optional()),presencePenalty:n.serialization.property("presence_penalty",n.serialization.number().optional()),returnLikelihoods:n.serialization.property("return_likelihoods",a.GenerateRequestReturnLikelihoods.optional()),rawPrompting:n.serialization.property("raw_prompting",n.serialization.boolean().optional())}),ou}var su={},z4;function hpe(){if(z4)return su;z4=1;var r=su&&su.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(u,l);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,d)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),e=su&&su.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),t=su&&su.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&r(u,s,l);return e(u,s),u};Object.defineProperty(su,"__esModule",{value:!0}),su.EmbedRequest=void 0;const n=t($()),i=Tb(),a=Ab(),o=G5();return su.EmbedRequest=n.serialization.object({texts:n.serialization.list(n.serialization.string()).optional(),images:n.serialization.list(n.serialization.string()).optional(),model:n.serialization.string().optional(),inputType:n.serialization.property("input_type",i.EmbedInputType.optional()),embeddingTypes:n.serialization.property("embedding_types",n.serialization.list(a.EmbeddingType).optional()),truncate:o.EmbedRequestTruncate.optional()}),su}var uu={},L4;function mpe(){if(L4)return uu;L4=1;var r=uu&&uu.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),e=uu&&uu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=uu&&uu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&r(o,a,s);return e(o,a),o};Object.defineProperty(uu,"__esModule",{value:!0}),uu.RerankRequest=void 0;const n=t($()),i=Y5();return uu.RerankRequest=n.serialization.object({model:n.serialization.string().optional(),query:n.serialization.string(),documents:n.serialization.list(i.RerankRequestDocumentsItem),topN:n.serialization.property("top_n",n.serialization.number().optional()),rankFields:n.serialization.property("rank_fields",n.serialization.list(n.serialization.string()).optional()),returnDocuments:n.serialization.property("return_documents",n.serialization.boolean().optional()),maxChunksPerDoc:n.serialization.property("max_chunks_per_doc",n.serialization.number().optional())}),uu}var lu={},F4;function gpe(){if(F4)return lu;F4=1;var r=lu&&lu.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),e=lu&&lu.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=lu&&lu.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&r(s,o,u);return e(s,o),s};Object.defineProperty(lu,"__esModule",{value:!0}),lu.ClassifyRequest=void 0;const n=t($()),i=yK(),a=r9();return lu.ClassifyRequest=n.serialization.object({inputs:n.serialization.list(n.serialization.string()),examples:n.serialization.list(i.ClassifyExample).optional(),model:n.serialization.string().optional(),preset:n.serialization.string().optional(),truncate:a.ClassifyRequestTruncate.optional()}),lu}var cu={},k4;function _pe(){if(k4)return cu;k4=1;var r=cu&&cu.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var d=Object.getOwnPropertyDescriptor(u,l);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,d)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),e=cu&&cu.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),t=cu&&cu.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&r(u,s,l);return e(u,s),u};Object.defineProperty(cu,"__esModule",{value:!0}),cu.SummarizeRequest=void 0;const n=t($()),i=o9(),a=s9(),o=u9();return cu.SummarizeRequest=n.serialization.object({text:n.serialization.string(),length:i.SummarizeRequestLength.optional(),format:a.SummarizeRequestFormat.optional(),model:n.serialization.string().optional(),extractiveness:o.SummarizeRequestExtractiveness.optional(),temperature:n.serialization.number().optional(),additionalCommand:n.serialization.property("additional_command",n.serialization.string().optional())}),cu}var du={},V4;function bpe(){if(V4)return du;V4=1;var r=du&&du.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=du&&du.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=du&&du.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(du,"__esModule",{value:!0}),du.TokenizeRequest=void 0;const n=t($());return du.TokenizeRequest=n.serialization.object({text:n.serialization.string(),model:n.serialization.string()}),du}var fu={},H4;function ype(){if(H4)return fu;H4=1;var r=fu&&fu.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,u)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),e=fu&&fu.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),t=fu&&fu.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(a,i,o);return e(a,i),a};Object.defineProperty(fu,"__esModule",{value:!0}),fu.DetokenizeRequest=void 0;const n=t($());return fu.DetokenizeRequest=n.serialization.object({tokens:n.serialization.list(n.serialization.number()),model:n.serialization.string()}),fu}var K4;function vpe(){return K4||(K4=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.DetokenizeRequest=r.TokenizeRequest=r.SummarizeRequest=r.ClassifyRequest=r.RerankRequest=r.EmbedRequest=r.GenerateRequest=r.GenerateStreamRequest=r.ChatRequest=r.ChatStreamRequest=void 0;var e=cpe();Object.defineProperty(r,"ChatStreamRequest",{enumerable:!0,get:function(){return e.ChatStreamRequest}});var t=dpe();Object.defineProperty(r,"ChatRequest",{enumerable:!0,get:function(){return t.ChatRequest}});var n=fpe();Object.defineProperty(r,"GenerateStreamRequest",{enumerable:!0,get:function(){return n.GenerateStreamRequest}});var i=ppe();Object.defineProperty(r,"GenerateRequest",{enumerable:!0,get:function(){return i.GenerateRequest}});var a=hpe();Object.defineProperty(r,"EmbedRequest",{enumerable:!0,get:function(){return a.EmbedRequest}});var o=mpe();Object.defineProperty(r,"RerankRequest",{enumerable:!0,get:function(){return o.RerankRequest}});var s=gpe();Object.defineProperty(r,"ClassifyRequest",{enumerable:!0,get:function(){return s.ClassifyRequest}});var u=_pe();Object.defineProperty(r,"SummarizeRequest",{enumerable:!0,get:function(){return u.SummarizeRequest}});var l=bpe();Object.defineProperty(r,"TokenizeRequest",{enumerable:!0,get:function(){return l.TokenizeRequest}});var c=ype();Object.defineProperty(r,"DetokenizeRequest",{enumerable:!0,get:function(){return c.DetokenizeRequest}})}(aR)),aR}var W4;function wpe(){return W4||(W4=1,function(r){var e=Xc&&Xc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Xc&&Xc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(vpe(),r)}(Xc)),Xc}var G4;function Fl(){return G4||(G4=1,function(r){var e=Dc&&Dc.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),t=Dc&&Dc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(Ife(),r),t(lpe(),r),t(wpe(),r)}(Dc)),Dc}var J4;function jK(){return J4||(J4=1,function(r){var e={},t=jr&&jr.__createBinding||(Object.create?function(C,A,M,G){G===void 0&&(G=M);var U=Object.getOwnPropertyDescriptor(A,M);(!U||("get"in U?!A.__esModule:U.writable||U.configurable))&&(U={enumerable:!0,get:function(){return A[M]}}),Object.defineProperty(C,G,U)}:function(C,A,M,G){G===void 0&&(G=M),C[G]=A[M]}),n=jr&&jr.__setModuleDefault||(Object.create?function(C,A){Object.defineProperty(C,"default",{enumerable:!0,value:A})}:function(C,A){C.default=A}),i=jr&&jr.__importStar||function(C){if(C&&C.__esModule)return C;var A={};if(C!=null)for(var M in C)M!=="default"&&Object.prototype.hasOwnProperty.call(C,M)&&t(A,C,M);return n(A,C),A},a=jr&&jr.__awaiter||function(C,A,M,G){function U(z){return z instanceof M?z:new M(function(W){W(z)})}return new(M||(M=Promise))(function(z,W){function Y(q){try{I(G.next(q))}catch(T){W(T)}}function oe(q){try{I(G.throw(q))}catch(T){W(T)}}function I(q){q.done?z(q.value):U(q.value).then(Y,oe)}I((G=G.apply(C,A||[])).next())})},o=jr&&jr.__asyncValues||function(C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var A=C[Symbol.asyncIterator],M;return A?A.call(C):(C=typeof __values=="function"?__values(C):C[Symbol.iterator](),M={},G("next"),G("throw"),G("return"),M[Symbol.asyncIterator]=function(){return this},M);function G(z){M[z]=C[z]&&function(W){return new Promise(function(Y,oe){W=C[z](W),U(Y,oe,W.done,W.value)})}}function U(z,W,Y,oe){Promise.resolve(oe).then(function(I){z({value:I,done:Y})},W)}};Object.defineProperty(r,"__esModule",{value:!0}),r.fetchOverride=r.parseAWSEvent=r.getAuthHeaders=r.getUrl=r.mapResponseFromBedrock=void 0;const s=Tse,u=Uue,l=Kue,c=uce,d=Yg(),h=$(),f=hH(),m=Zde(),p=i(Fl()),g=(C,A)=>a(void 0,void 0,void 0,function*(){const M=Object.assign({},e);try{return C(),yield A()}finally{e=M}}),b={1:{chat:p.StreamedChatResponse,generate:p.GenerateStreamedResponse},2:{chat:p.StreamedChatResponseV2,generate:p.GenerateStreamedResponse}},_={1:{chat:p.NonStreamedChatResponse,embed:p.EmbedResponse,generate:p.Generation,rerank:p.RerankResponse},2:{chat:p.ChatResponse,embed:p.EmbedByTypeResponse,generate:p.Generation,rerank:p.V2RerankResponse}},y=(C,A,M,G)=>a(void 0,void 0,void 0,function*(){const U=C?b[M][A]:_[M][A],z={unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]},W=yield U.parseOrThrow(G,z);return U.jsonOrThrow(W,z)});r.mapResponseFromBedrock=y;const v=(C,A,M,G)=>{const U={bedrock:G?"invoke-with-response-stream":"invoke",sagemaker:G?"invocations-response-stream":"invocations"}[C];return{bedrock:`https://${C}-runtime.${A}.amazonaws.com/model/${M}/${U}`,sagemaker:`https://runtime.sagemaker.${A}.amazonaws.com/endpoints/${M}/${U}`}[C]};r.getUrl=v;const w=(C,A,M,G,U,z)=>a(void 0,void 0,void 0,function*(){const W=(0,u.fromNodeProviderChain)(),Y=yield g(()=>{z.awsAccessKey&&(e.AWS_ACCESS_KEY_ID=z.awsAccessKey),z.awsSecretKey&&(e.AWS_SECRET_ACCESS_KEY=z.awsSecretKey),z.awsSessionToken&&(e.AWS_SESSION_TOKEN=z.awsSessionToken)},()=>W()),oe=new c.SignatureV4({service:U,region:z.awsRegion,credentials:Y,sha256:s.Sha256});delete M.connection,M.host=C.hostname;const I=new l.HttpRequest({method:A.toUpperCase(),protocol:C.protocol,path:C.pathname,headers:M,body:G});return(yield oe.sign(I)).headers});r.getAuthHeaders=w;const S=C=>{const A=/{[^\}]*}/,M=C.match(A);if(M!=null&&M[0]){const G=JSON.parse(M[0]);if(G.bytes){const U=Buffer.from(G.bytes,"base64").toString("utf-8"),z=JSON.parse(U);if(z.event_type)return z}}};r.parseAWSEvent=S;const R=C=>({v1:1,v2:2})[C]||1,P=(C,{awsRegion:A,awsAccessKey:M,awsSecretKey:G,awsSessionToken:U})=>z=>a(void 0,void 0,void 0,function*(){var W,Y;const oe=z.url.split("/"),I=oe.pop(),q=R(oe.pop()),T=z.body;console.assert(T.model,"model is required");const V=!!T.stream,re=(0,r.getUrl)(C,A,T.model,V);I==="rerank"&&(T.api_version=q),delete T.stream,delete T.model,delete z.headers.Authorization,z.headers.Host=new URL(re).hostname;const Z=yield(0,r.getAuthHeaders)(new URL(re),z.method,z.headers,JSON.stringify(T),C,{awsRegion:A,awsAccessKey:M,awsSecretKey:G,awsSessionToken:U});z.url=re,z.headers=Z;const fe=yield(0,h.fetcher)(z);if(!fe.ok)return fe;try{if(V){const J=(0,f.readableStreamAsyncIterable)(fe.body),F=new m.LineDecoder,ee=new d.PassThrough;try{for(var _e=o(J),Se;Se=yield _e.next(),!Se.done;){const L=Se.value;for(const te of F.decode(L)){const ne=(0,r.parseAWSEvent)(te);if(ne){const B=yield(0,r.mapResponseFromBedrock)(V,I,q,ne);ee.push(JSON.stringify(B)+`
`)}}}}catch(L){W={error:L}}finally{try{Se&&!Se.done&&(Y=_e.return)&&(yield Y.call(_e))}finally{if(W)throw W.error}}for(const L of F.flush()){const te=(0,r.parseAWSEvent)(L);if(te){const ne=yield(0,r.mapResponseFromBedrock)(V,I,q,te);ee.push(JSON.stringify(ne)+`
`)}}return ee.end(),{ok:!0,body:ee}}else{const J=yield fe.body;return{ok:!0,body:yield(0,r.mapResponseFromBedrock)(V,I,q,J)}}}catch(J){throw J}});r.fetchOverride=P}(jr)),jr}var Zc={},Ft={},bh={},X4;function kl(){return X4||(X4=1,Object.defineProperty(bh,"__esModule",{value:!0}),bh.CohereEnvironment=void 0,bh.CohereEnvironment={Production:"https://api.cohere.com"}),bh}var t_={exports:{}},Spe=t_.exports,Z4;function _d(){return Z4||(Z4=1,function(r){(function(e,t,n){r.exports?r.exports=n():t[e]=n()})("urljoin",Spe,function(){function e(t){var n=[];if(t.length===0)return"";if(typeof t[0]!="string")throw new TypeError("Url must be a string. Received "+t[0]);if(t[0].match(/^[^/:]+:\/*$/)&&t.length>1){var i=t.shift();t[0]=i+t[0]}t[0].match(/^file:\/\/\//)?t[0]=t[0].replace(/^([^/:]+):\/*/,"$1:///"):t[0]=t[0].replace(/^([^/:]+):\/*/,"$1://");for(var a=0;a<t.length;a++){var o=t[a];if(typeof o!="string")throw new TypeError("Url must be a string. Received "+o);o!==""&&(a>0&&(o=o.replace(/^[\/]+/,"")),a<t.length-1?o=o.replace(/[\/]+$/,""):o=o.replace(/[\/]+$/,"/"),n.push(o))}var s=n.join("/");s=s.replace(/\/(\?|&|#[^!])/g,"$1");var u=s.split("?");return s=u.shift()+(u.length>0?"?":"")+u.join("&"),s}return function(){var t;return typeof arguments[0]=="object"?t=arguments[0]:t=[].slice.call(arguments),e(t)}})}(t_)),t_.exports}var ar={},Q4;function TK(){if(Q4)return ar;Q4=1;var r={},e=ar&&ar.__createBinding||(Object.create?function(f,m,p,g){g===void 0&&(g=p);var b=Object.getOwnPropertyDescriptor(m,p);(!b||("get"in b?!m.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(f,g,b)}:function(f,m,p,g){g===void 0&&(g=p),f[g]=m[p]}),t=ar&&ar.__setModuleDefault||(Object.create?function(f,m){Object.defineProperty(f,"default",{enumerable:!0,value:m})}:function(f,m){f.default=m}),n=ar&&ar.__importStar||function(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&e(m,f,p);return t(m,f),m},i=ar&&ar.__awaiter||function(f,m,p,g){function b(_){return _ instanceof p?_:new p(function(y){y(_)})}return new(p||(p=Promise))(function(_,y){function v(R){try{S(g.next(R))}catch(P){y(P)}}function w(R){try{S(g.throw(R))}catch(P){y(P)}}function S(R){R.done?_(R.value):b(R.value).then(v,w)}S((g=g.apply(f,m||[])).next())})},a=ar&&ar.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(ar,"__esModule",{value:!0}),ar.V2=void 0;const o=n(kl()),s=n($()),u=n(Bl()),l=n(Fl()),c=a(_d()),d=n(Ot());class h{constructor(m={}){this._options=m}chatStream(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,c.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,"v2/chat"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},l.V2ChatStreamRequest.jsonOrThrow(m,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!0}),responseType:"sse",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(_.ok)return new s.Stream({stream:_.body,parse:y=>i(this,void 0,void 0,function*(){return l.StreamedChatResponseV2.parseOrThrow(y,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]})}),signal:p==null?void 0:p.abortSignal,eventShape:{type:"sse",streamTerminator:"[DONE]"}});if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 422:throw new u.UnprocessableEntityError(_.error.body);case 429:throw new u.TooManyRequestsError(_.error.body);case 498:throw new u.InvalidTokenError(_.error.body);case 499:throw new u.ClientClosedRequestError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 501:throw new u.NotImplementedError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);case 504:throw new u.GatewayTimeoutError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v2/chat.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}})}chat(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,c.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,"v2/chat"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},l.V2ChatRequest.jsonOrThrow(m,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!1}),timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(_.ok)return l.ChatResponse.parseOrThrow(_.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 422:throw new u.UnprocessableEntityError(_.error.body);case 429:throw new u.TooManyRequestsError(_.error.body);case 498:throw new u.InvalidTokenError(_.error.body);case 499:throw new u.ClientClosedRequestError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 501:throw new u.NotImplementedError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);case 504:throw new u.GatewayTimeoutError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v2/chat.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}})}embed(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,c.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,"v2/embed"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",body:l.V2EmbedRequest.jsonOrThrow(m,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(_.ok)return l.EmbedByTypeResponse.parseOrThrow(_.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 422:throw new u.UnprocessableEntityError(_.error.body);case 429:throw new u.TooManyRequestsError(_.error.body);case 498:throw new u.InvalidTokenError(_.error.body);case 499:throw new u.ClientClosedRequestError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 501:throw new u.NotImplementedError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);case 504:throw new u.GatewayTimeoutError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v2/embed.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}})}rerank(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,c.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,"v2/rerank"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",body:l.V2RerankRequest.jsonOrThrow(m,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(_.ok)return l.V2RerankResponse.parseOrThrow(_.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 422:throw new u.UnprocessableEntityError(_.error.body);case 429:throw new u.TooManyRequestsError(_.error.body);case 498:throw new u.InvalidTokenError(_.error.body);case 499:throw new u.ClientClosedRequestError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 501:throw new u.NotImplementedError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);case 504:throw new u.GatewayTimeoutError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v2/rerank.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}})}_getAuthorizationHeader(){var m;return i(this,void 0,void 0,function*(){const p=(m=yield s.Supplier.get(this._options.token))!==null&&m!==void 0?m:process==null?void 0:r.CO_API_KEY;if(p==null)throw new d.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${p}`})}}return ar.V2=h,ar}var or={},Y4;function Ope(){if(Y4)return or;Y4=1;var r={},e=or&&or.__createBinding||(Object.create?function(f,m,p,g){g===void 0&&(g=p);var b=Object.getOwnPropertyDescriptor(m,p);(!b||("get"in b?!m.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(f,g,b)}:function(f,m,p,g){g===void 0&&(g=p),f[g]=m[p]}),t=or&&or.__setModuleDefault||(Object.create?function(f,m){Object.defineProperty(f,"default",{enumerable:!0,value:m})}:function(f,m){f.default=m}),n=or&&or.__importStar||function(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&e(m,f,p);return t(m,f),m},i=or&&or.__awaiter||function(f,m,p,g){function b(_){return _ instanceof p?_:new p(function(y){y(_)})}return new(p||(p=Promise))(function(_,y){function v(R){try{S(g.next(R))}catch(P){y(P)}}function w(R){try{S(g.throw(R))}catch(P){y(P)}}function S(R){R.done?_(R.value):b(R.value).then(v,w)}S((g=g.apply(f,m||[])).next())})},a=or&&or.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(or,"__esModule",{value:!0}),or.EmbedJobs=void 0;const o=n(kl()),s=n($()),u=n(Bl()),l=a(_d()),c=n(Fl()),d=n(Ot());class h{constructor(m={}){this._options=m}list(m){var p,g;return i(this,void 0,void 0,function*(){const b=yield((p=this._options.fetcher)!==null&&p!==void 0?p:s.fetcher)({url:(0,l.default)((g=yield s.Supplier.get(this._options.environment))!==null&&g!==void 0?g:o.CohereEnvironment.Production,"v1/embed-jobs"),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},m==null?void 0:m.headers),contentType:"application/json",requestType:"json",timeoutMs:(m==null?void 0:m.timeoutInSeconds)!=null?m.timeoutInSeconds*1e3:3e5,maxRetries:m==null?void 0:m.maxRetries,abortSignal:m==null?void 0:m.abortSignal});if(b.ok)return c.ListEmbedJobResponse.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new u.BadRequestError(b.error.body);case 401:throw new u.UnauthorizedError(b.error.body);case 403:throw new u.ForbiddenError(b.error.body);case 404:throw new u.NotFoundError(b.error.body);case 422:throw new u.UnprocessableEntityError(b.error.body);case 429:throw new u.TooManyRequestsError(b.error.body);case 498:throw new u.InvalidTokenError(b.error.body);case 499:throw new u.ClientClosedRequestError(b.error.body);case 500:throw new u.InternalServerError(b.error.body);case 501:throw new u.NotImplementedError(b.error.body);case 503:throw new u.ServiceUnavailableError(b.error.body);case 504:throw new u.GatewayTimeoutError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/embed-jobs.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}create(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,"v1/embed-jobs"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",body:c.CreateEmbedJobRequest.jsonOrThrow(m,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(_.ok)return c.CreateEmbedJobResponse.parseOrThrow(_.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 422:throw new u.UnprocessableEntityError(_.error.body);case 429:throw new u.TooManyRequestsError(_.error.body);case 498:throw new u.InvalidTokenError(_.error.body);case 499:throw new u.ClientClosedRequestError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 501:throw new u.NotImplementedError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);case 504:throw new u.GatewayTimeoutError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v1/embed-jobs.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}})}get(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,`v1/embed-jobs/${encodeURIComponent(m)}`),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(_.ok)return c.EmbedJob.parseOrThrow(_.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 422:throw new u.UnprocessableEntityError(_.error.body);case 429:throw new u.TooManyRequestsError(_.error.body);case 498:throw new u.InvalidTokenError(_.error.body);case 499:throw new u.ClientClosedRequestError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 501:throw new u.NotImplementedError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);case 504:throw new u.GatewayTimeoutError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/embed-jobs/{id}.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}})}cancel(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,`v1/embed-jobs/${encodeURIComponent(m)}/cancel`),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(!_.ok){if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 422:throw new u.UnprocessableEntityError(_.error.body);case 429:throw new u.TooManyRequestsError(_.error.body);case 498:throw new u.InvalidTokenError(_.error.body);case 499:throw new u.ClientClosedRequestError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 501:throw new u.NotImplementedError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);case 504:throw new u.GatewayTimeoutError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v1/embed-jobs/{id}/cancel.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}}})}_getAuthorizationHeader(){var m;return i(this,void 0,void 0,function*(){const p=(m=yield s.Supplier.get(this._options.token))!==null&&m!==void 0?m:process==null?void 0:r.CO_API_KEY;if(p==null)throw new d.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${p}`})}}return or.EmbedJobs=h,or}var sr={},eV;function Epe(){if(eV)return sr;eV=1;var r={},e=sr&&sr.__createBinding||(Object.create?function(f,m,p,g){g===void 0&&(g=p);var b=Object.getOwnPropertyDescriptor(m,p);(!b||("get"in b?!m.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(f,g,b)}:function(f,m,p,g){g===void 0&&(g=p),f[g]=m[p]}),t=sr&&sr.__setModuleDefault||(Object.create?function(f,m){Object.defineProperty(f,"default",{enumerable:!0,value:m})}:function(f,m){f.default=m}),n=sr&&sr.__importStar||function(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&e(m,f,p);return t(m,f),m},i=sr&&sr.__awaiter||function(f,m,p,g){function b(_){return _ instanceof p?_:new p(function(y){y(_)})}return new(p||(p=Promise))(function(_,y){function v(R){try{S(g.next(R))}catch(P){y(P)}}function w(R){try{S(g.throw(R))}catch(P){y(P)}}function S(R){R.done?_(R.value):b(R.value).then(v,w)}S((g=g.apply(f,m||[])).next())})},a=sr&&sr.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(sr,"__esModule",{value:!0}),sr.Datasets=void 0;const o=n(kl()),s=n($()),u=n(Bl()),l=a(_d()),c=n(Fl()),d=n(Ot());class h{constructor(m={}){this._options=m}list(m={},p){var g,b;return i(this,void 0,void 0,function*(){const{datasetType:_,before:y,after:v,limit:w,offset:S,validationStatus:R}=m,P={};_!=null&&(P.datasetType=_),y!=null&&(P.before=y.toISOString()),v!=null&&(P.after=v.toISOString()),w!=null&&(P.limit=w.toString()),S!=null&&(P.offset=S.toString()),R!=null&&(P.validationStatus=R);const C=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,"v1/datasets"),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",queryParameters:P,requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(C.ok)return c.DatasetsListResponse.parseOrThrow(C.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(C.error.reason==="status-code")switch(C.error.statusCode){case 400:throw new u.BadRequestError(C.error.body);case 401:throw new u.UnauthorizedError(C.error.body);case 403:throw new u.ForbiddenError(C.error.body);case 404:throw new u.NotFoundError(C.error.body);case 422:throw new u.UnprocessableEntityError(C.error.body);case 429:throw new u.TooManyRequestsError(C.error.body);case 498:throw new u.InvalidTokenError(C.error.body);case 499:throw new u.ClientClosedRequestError(C.error.body);case 500:throw new u.InternalServerError(C.error.body);case 501:throw new u.NotImplementedError(C.error.body);case 503:throw new u.ServiceUnavailableError(C.error.body);case 504:throw new u.GatewayTimeoutError(C.error.body);default:throw new d.CohereError({statusCode:C.error.statusCode,body:C.error.body})}switch(C.error.reason){case"non-json":throw new d.CohereError({statusCode:C.error.statusCode,body:C.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/datasets.");case"unknown":throw new d.CohereError({message:C.error.errorMessage})}})}create(m,p,g,b){var _,y;return i(this,void 0,void 0,function*(){const v={};v.name=g.name,v.type=g.type,g.keepOriginalFile!=null&&(v.keep_original_file=g.keepOriginalFile.toString()),g.skipMalformedInput!=null&&(v.skip_malformed_input=g.skipMalformedInput.toString()),g.keepFields!=null&&(Array.isArray(g.keepFields)?v.keep_fields=g.keepFields.map(P=>P):v.keep_fields=g.keepFields),g.optionalFields!=null&&(Array.isArray(g.optionalFields)?v.optional_fields=g.optionalFields.map(P=>P):v.optional_fields=g.optionalFields),g.textSeparator!=null&&(v.text_separator=g.textSeparator),g.csvDelimiter!=null&&(v.csv_delimiter=g.csvDelimiter),g.dryRun!=null&&(v.dry_run=g.dryRun.toString());const w=yield s.newFormData();yield w.appendFile("data",m),p!=null&&(yield w.appendFile("eval_data",p));const S=yield w.getRequest(),R=yield((_=this._options.fetcher)!==null&&_!==void 0?_:s.fetcher)({url:(0,l.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,"v1/datasets"),method:"POST",headers:Object.assign(Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},S.headers),b==null?void 0:b.headers),queryParameters:v,requestType:"file",duplex:S.duplex,body:S.body,timeoutMs:(b==null?void 0:b.timeoutInSeconds)!=null?b.timeoutInSeconds*1e3:3e5,maxRetries:b==null?void 0:b.maxRetries,abortSignal:b==null?void 0:b.abortSignal});if(R.ok)return c.DatasetsCreateResponse.parseOrThrow(R.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(R.error.reason==="status-code")switch(R.error.statusCode){case 400:throw new u.BadRequestError(R.error.body);case 401:throw new u.UnauthorizedError(R.error.body);case 403:throw new u.ForbiddenError(R.error.body);case 404:throw new u.NotFoundError(R.error.body);case 422:throw new u.UnprocessableEntityError(R.error.body);case 429:throw new u.TooManyRequestsError(R.error.body);case 498:throw new u.InvalidTokenError(R.error.body);case 499:throw new u.ClientClosedRequestError(R.error.body);case 500:throw new u.InternalServerError(R.error.body);case 501:throw new u.NotImplementedError(R.error.body);case 503:throw new u.ServiceUnavailableError(R.error.body);case 504:throw new u.GatewayTimeoutError(R.error.body);default:throw new d.CohereError({statusCode:R.error.statusCode,body:R.error.body})}switch(R.error.reason){case"non-json":throw new d.CohereError({statusCode:R.error.statusCode,body:R.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v1/datasets.");case"unknown":throw new d.CohereError({message:R.error.errorMessage})}})}getUsage(m){var p,g;return i(this,void 0,void 0,function*(){const b=yield((p=this._options.fetcher)!==null&&p!==void 0?p:s.fetcher)({url:(0,l.default)((g=yield s.Supplier.get(this._options.environment))!==null&&g!==void 0?g:o.CohereEnvironment.Production,"v1/datasets/usage"),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},m==null?void 0:m.headers),contentType:"application/json",requestType:"json",timeoutMs:(m==null?void 0:m.timeoutInSeconds)!=null?m.timeoutInSeconds*1e3:3e5,maxRetries:m==null?void 0:m.maxRetries,abortSignal:m==null?void 0:m.abortSignal});if(b.ok)return c.DatasetsGetUsageResponse.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new u.BadRequestError(b.error.body);case 401:throw new u.UnauthorizedError(b.error.body);case 403:throw new u.ForbiddenError(b.error.body);case 404:throw new u.NotFoundError(b.error.body);case 422:throw new u.UnprocessableEntityError(b.error.body);case 429:throw new u.TooManyRequestsError(b.error.body);case 498:throw new u.InvalidTokenError(b.error.body);case 499:throw new u.ClientClosedRequestError(b.error.body);case 500:throw new u.InternalServerError(b.error.body);case 501:throw new u.NotImplementedError(b.error.body);case 503:throw new u.ServiceUnavailableError(b.error.body);case 504:throw new u.GatewayTimeoutError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/datasets/usage.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}get(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,`v1/datasets/${encodeURIComponent(m)}`),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(_.ok)return c.DatasetsGetResponse.parseOrThrow(_.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 422:throw new u.UnprocessableEntityError(_.error.body);case 429:throw new u.TooManyRequestsError(_.error.body);case 498:throw new u.InvalidTokenError(_.error.body);case 499:throw new u.ClientClosedRequestError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 501:throw new u.NotImplementedError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);case 504:throw new u.GatewayTimeoutError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/datasets/{id}.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}})}delete(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,`v1/datasets/${encodeURIComponent(m)}`),method:"DELETE",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(_.ok)return c.datasets.delete.Response.parseOrThrow(_.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 422:throw new u.UnprocessableEntityError(_.error.body);case 429:throw new u.TooManyRequestsError(_.error.body);case 498:throw new u.InvalidTokenError(_.error.body);case 499:throw new u.ClientClosedRequestError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 501:throw new u.NotImplementedError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);case 504:throw new u.GatewayTimeoutError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling DELETE /v1/datasets/{id}.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}})}_getAuthorizationHeader(){var m;return i(this,void 0,void 0,function*(){const p=(m=yield s.Supplier.get(this._options.token))!==null&&m!==void 0?m:process==null?void 0:r.CO_API_KEY;if(p==null)throw new d.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${p}`})}}return sr.Datasets=h,sr}var ur={},tV;function Rpe(){if(tV)return ur;tV=1;var r={},e=ur&&ur.__createBinding||(Object.create?function(f,m,p,g){g===void 0&&(g=p);var b=Object.getOwnPropertyDescriptor(m,p);(!b||("get"in b?!m.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(f,g,b)}:function(f,m,p,g){g===void 0&&(g=p),f[g]=m[p]}),t=ur&&ur.__setModuleDefault||(Object.create?function(f,m){Object.defineProperty(f,"default",{enumerable:!0,value:m})}:function(f,m){f.default=m}),n=ur&&ur.__importStar||function(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&e(m,f,p);return t(m,f),m},i=ur&&ur.__awaiter||function(f,m,p,g){function b(_){return _ instanceof p?_:new p(function(y){y(_)})}return new(p||(p=Promise))(function(_,y){function v(R){try{S(g.next(R))}catch(P){y(P)}}function w(R){try{S(g.throw(R))}catch(P){y(P)}}function S(R){R.done?_(R.value):b(R.value).then(v,w)}S((g=g.apply(f,m||[])).next())})},a=ur&&ur.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(ur,"__esModule",{value:!0}),ur.Connectors=void 0;const o=n(kl()),s=n($()),u=n(Bl()),l=a(_d()),c=n(Fl()),d=n(Ot());class h{constructor(m={}){this._options=m}list(m={},p){var g,b;return i(this,void 0,void 0,function*(){const{limit:_,offset:y}=m,v={};_!=null&&(v.limit=_.toString()),y!=null&&(v.offset=y.toString());const w=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,"v1/connectors"),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",queryParameters:v,requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(w.ok)return c.ListConnectorsResponse.parseOrThrow(w.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(w.error.reason==="status-code")switch(w.error.statusCode){case 400:throw new u.BadRequestError(w.error.body);case 401:throw new u.UnauthorizedError(w.error.body);case 403:throw new u.ForbiddenError(w.error.body);case 404:throw new u.NotFoundError(w.error.body);case 422:throw new u.UnprocessableEntityError(w.error.body);case 429:throw new u.TooManyRequestsError(w.error.body);case 498:throw new u.InvalidTokenError(w.error.body);case 499:throw new u.ClientClosedRequestError(w.error.body);case 500:throw new u.InternalServerError(w.error.body);case 501:throw new u.NotImplementedError(w.error.body);case 503:throw new u.ServiceUnavailableError(w.error.body);case 504:throw new u.GatewayTimeoutError(w.error.body);default:throw new d.CohereError({statusCode:w.error.statusCode,body:w.error.body})}switch(w.error.reason){case"non-json":throw new d.CohereError({statusCode:w.error.statusCode,body:w.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/connectors.");case"unknown":throw new d.CohereError({message:w.error.errorMessage})}})}create(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,"v1/connectors"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",body:c.CreateConnectorRequest.jsonOrThrow(m,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(_.ok)return c.CreateConnectorResponse.parseOrThrow(_.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 422:throw new u.UnprocessableEntityError(_.error.body);case 429:throw new u.TooManyRequestsError(_.error.body);case 498:throw new u.InvalidTokenError(_.error.body);case 499:throw new u.ClientClosedRequestError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 501:throw new u.NotImplementedError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);case 504:throw new u.GatewayTimeoutError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v1/connectors.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}})}get(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,`v1/connectors/${encodeURIComponent(m)}`),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(_.ok)return c.GetConnectorResponse.parseOrThrow(_.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 422:throw new u.UnprocessableEntityError(_.error.body);case 429:throw new u.TooManyRequestsError(_.error.body);case 498:throw new u.InvalidTokenError(_.error.body);case 499:throw new u.ClientClosedRequestError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 501:throw new u.NotImplementedError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);case 504:throw new u.GatewayTimeoutError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/connectors/{id}.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}})}delete(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,`v1/connectors/${encodeURIComponent(m)}`),method:"DELETE",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(_.ok)return c.DeleteConnectorResponse.parseOrThrow(_.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 422:throw new u.UnprocessableEntityError(_.error.body);case 429:throw new u.TooManyRequestsError(_.error.body);case 498:throw new u.InvalidTokenError(_.error.body);case 499:throw new u.ClientClosedRequestError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 501:throw new u.NotImplementedError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);case 504:throw new u.GatewayTimeoutError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling DELETE /v1/connectors/{id}.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}})}update(m,p={},g){var b,_;return i(this,void 0,void 0,function*(){const y=yield((b=this._options.fetcher)!==null&&b!==void 0?b:s.fetcher)({url:(0,l.default)((_=yield s.Supplier.get(this._options.environment))!==null&&_!==void 0?_:o.CohereEnvironment.Production,`v1/connectors/${encodeURIComponent(m)}`),method:"PATCH",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},g==null?void 0:g.headers),contentType:"application/json",requestType:"json",body:c.UpdateConnectorRequest.jsonOrThrow(p,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(g==null?void 0:g.timeoutInSeconds)!=null?g.timeoutInSeconds*1e3:3e5,maxRetries:g==null?void 0:g.maxRetries,abortSignal:g==null?void 0:g.abortSignal});if(y.ok)return c.UpdateConnectorResponse.parseOrThrow(y.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(y.error.reason==="status-code")switch(y.error.statusCode){case 400:throw new u.BadRequestError(y.error.body);case 401:throw new u.UnauthorizedError(y.error.body);case 403:throw new u.ForbiddenError(y.error.body);case 404:throw new u.NotFoundError(y.error.body);case 422:throw new u.UnprocessableEntityError(y.error.body);case 429:throw new u.TooManyRequestsError(y.error.body);case 498:throw new u.InvalidTokenError(y.error.body);case 499:throw new u.ClientClosedRequestError(y.error.body);case 500:throw new u.InternalServerError(y.error.body);case 501:throw new u.NotImplementedError(y.error.body);case 503:throw new u.ServiceUnavailableError(y.error.body);case 504:throw new u.GatewayTimeoutError(y.error.body);default:throw new d.CohereError({statusCode:y.error.statusCode,body:y.error.body})}switch(y.error.reason){case"non-json":throw new d.CohereError({statusCode:y.error.statusCode,body:y.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling PATCH /v1/connectors/{id}.");case"unknown":throw new d.CohereError({message:y.error.errorMessage})}})}oAuthAuthorize(m,p={},g){var b,_;return i(this,void 0,void 0,function*(){const{afterTokenRedirect:y}=p,v={};y!=null&&(v.after_token_redirect=y);const w=yield((b=this._options.fetcher)!==null&&b!==void 0?b:s.fetcher)({url:(0,l.default)((_=yield s.Supplier.get(this._options.environment))!==null&&_!==void 0?_:o.CohereEnvironment.Production,`v1/connectors/${encodeURIComponent(m)}/oauth/authorize`),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},g==null?void 0:g.headers),contentType:"application/json",queryParameters:v,requestType:"json",timeoutMs:(g==null?void 0:g.timeoutInSeconds)!=null?g.timeoutInSeconds*1e3:3e5,maxRetries:g==null?void 0:g.maxRetries,abortSignal:g==null?void 0:g.abortSignal});if(w.ok)return c.OAuthAuthorizeResponse.parseOrThrow(w.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(w.error.reason==="status-code")switch(w.error.statusCode){case 400:throw new u.BadRequestError(w.error.body);case 401:throw new u.UnauthorizedError(w.error.body);case 403:throw new u.ForbiddenError(w.error.body);case 404:throw new u.NotFoundError(w.error.body);case 422:throw new u.UnprocessableEntityError(w.error.body);case 429:throw new u.TooManyRequestsError(w.error.body);case 498:throw new u.InvalidTokenError(w.error.body);case 499:throw new u.ClientClosedRequestError(w.error.body);case 500:throw new u.InternalServerError(w.error.body);case 501:throw new u.NotImplementedError(w.error.body);case 503:throw new u.ServiceUnavailableError(w.error.body);case 504:throw new u.GatewayTimeoutError(w.error.body);default:throw new d.CohereError({statusCode:w.error.statusCode,body:w.error.body})}switch(w.error.reason){case"non-json":throw new d.CohereError({statusCode:w.error.statusCode,body:w.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v1/connectors/{id}/oauth/authorize.");case"unknown":throw new d.CohereError({message:w.error.errorMessage})}})}_getAuthorizationHeader(){var m;return i(this,void 0,void 0,function*(){const p=(m=yield s.Supplier.get(this._options.token))!==null&&m!==void 0?m:process==null?void 0:r.CO_API_KEY;if(p==null)throw new d.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${p}`})}}return ur.Connectors=h,ur}var lr={},rV;function Cpe(){if(rV)return lr;rV=1;var r={},e=lr&&lr.__createBinding||(Object.create?function(f,m,p,g){g===void 0&&(g=p);var b=Object.getOwnPropertyDescriptor(m,p);(!b||("get"in b?!m.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(f,g,b)}:function(f,m,p,g){g===void 0&&(g=p),f[g]=m[p]}),t=lr&&lr.__setModuleDefault||(Object.create?function(f,m){Object.defineProperty(f,"default",{enumerable:!0,value:m})}:function(f,m){f.default=m}),n=lr&&lr.__importStar||function(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&e(m,f,p);return t(m,f),m},i=lr&&lr.__awaiter||function(f,m,p,g){function b(_){return _ instanceof p?_:new p(function(y){y(_)})}return new(p||(p=Promise))(function(_,y){function v(R){try{S(g.next(R))}catch(P){y(P)}}function w(R){try{S(g.throw(R))}catch(P){y(P)}}function S(R){R.done?_(R.value):b(R.value).then(v,w)}S((g=g.apply(f,m||[])).next())})},a=lr&&lr.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(lr,"__esModule",{value:!0}),lr.Models=void 0;const o=n(kl()),s=n($()),u=n(Bl()),l=a(_d()),c=n(Fl()),d=n(Ot());class h{constructor(m={}){this._options=m}get(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,`v1/models/${encodeURIComponent(m)}`),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(_.ok)return c.GetModelResponse.parseOrThrow(_.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 422:throw new u.UnprocessableEntityError(_.error.body);case 429:throw new u.TooManyRequestsError(_.error.body);case 498:throw new u.InvalidTokenError(_.error.body);case 499:throw new u.ClientClosedRequestError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 501:throw new u.NotImplementedError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);case 504:throw new u.GatewayTimeoutError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/models/{model}.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}})}list(m={},p){var g,b;return i(this,void 0,void 0,function*(){const{pageSize:_,pageToken:y,endpoint:v,defaultOnly:w}=m,S={};_!=null&&(S.page_size=_.toString()),y!=null&&(S.page_token=y),v!=null&&(S.endpoint=v),w!=null&&(S.default_only=w.toString());const R=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,"v1/models"),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",queryParameters:S,requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(R.ok)return c.ListModelsResponse.parseOrThrow(R.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(R.error.reason==="status-code")switch(R.error.statusCode){case 400:throw new u.BadRequestError(R.error.body);case 401:throw new u.UnauthorizedError(R.error.body);case 403:throw new u.ForbiddenError(R.error.body);case 404:throw new u.NotFoundError(R.error.body);case 422:throw new u.UnprocessableEntityError(R.error.body);case 429:throw new u.TooManyRequestsError(R.error.body);case 498:throw new u.InvalidTokenError(R.error.body);case 499:throw new u.ClientClosedRequestError(R.error.body);case 500:throw new u.InternalServerError(R.error.body);case 501:throw new u.NotImplementedError(R.error.body);case 503:throw new u.ServiceUnavailableError(R.error.body);case 504:throw new u.GatewayTimeoutError(R.error.body);default:throw new d.CohereError({statusCode:R.error.statusCode,body:R.error.body})}switch(R.error.reason){case"non-json":throw new d.CohereError({statusCode:R.error.statusCode,body:R.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/models.");case"unknown":throw new d.CohereError({message:R.error.errorMessage})}})}_getAuthorizationHeader(){var m;return i(this,void 0,void 0,function*(){const p=(m=yield s.Supplier.get(this._options.token))!==null&&m!==void 0?m:process==null?void 0:r.CO_API_KEY;if(p==null)throw new d.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${p}`})}}return lr.Models=h,lr}var cr={},nV;function Ppe(){if(nV)return cr;nV=1;var r={},e=cr&&cr.__createBinding||(Object.create?function(f,m,p,g){g===void 0&&(g=p);var b=Object.getOwnPropertyDescriptor(m,p);(!b||("get"in b?!m.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(f,g,b)}:function(f,m,p,g){g===void 0&&(g=p),f[g]=m[p]}),t=cr&&cr.__setModuleDefault||(Object.create?function(f,m){Object.defineProperty(f,"default",{enumerable:!0,value:m})}:function(f,m){f.default=m}),n=cr&&cr.__importStar||function(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&e(m,f,p);return t(m,f),m},i=cr&&cr.__awaiter||function(f,m,p,g){function b(_){return _ instanceof p?_:new p(function(y){y(_)})}return new(p||(p=Promise))(function(_,y){function v(R){try{S(g.next(R))}catch(P){y(P)}}function w(R){try{S(g.throw(R))}catch(P){y(P)}}function S(R){R.done?_(R.value):b(R.value).then(v,w)}S((g=g.apply(f,m||[])).next())})},a=cr&&cr.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(cr,"__esModule",{value:!0}),cr.Finetuning=void 0;const o=n(kl()),s=n($()),u=n(Bl()),l=a(_d()),c=n(Fl()),d=n(Ot());class h{constructor(m={}){this._options=m}listFinetunedModels(m={},p){var g,b;return i(this,void 0,void 0,function*(){const{pageSize:_,pageToken:y,orderBy:v}=m,w={};_!=null&&(w.page_size=_.toString()),y!=null&&(w.page_token=y),v!=null&&(w.order_by=v);const S=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,"v1/finetuning/finetuned-models"),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",queryParameters:w,requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(S.ok)return c.finetuning.ListFinetunedModelsResponse.parseOrThrow(S.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(S.error.reason==="status-code")switch(S.error.statusCode){case 400:throw new u.BadRequestError(S.error.body);case 401:throw new u.UnauthorizedError(S.error.body);case 403:throw new u.ForbiddenError(S.error.body);case 404:throw new u.NotFoundError(S.error.body);case 500:throw new u.InternalServerError(S.error.body);case 503:throw new u.ServiceUnavailableError(S.error.body);default:throw new d.CohereError({statusCode:S.error.statusCode,body:S.error.body})}switch(S.error.reason){case"non-json":throw new d.CohereError({statusCode:S.error.statusCode,body:S.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/finetuning/finetuned-models.");case"unknown":throw new d.CohereError({message:S.error.errorMessage})}})}createFinetunedModel(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,"v1/finetuning/finetuned-models"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",body:c.finetuning.FinetunedModel.jsonOrThrow(m,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(_.ok)return c.finetuning.CreateFinetunedModelResponse.parseOrThrow(_.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v1/finetuning/finetuned-models.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}})}getFinetunedModel(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,`v1/finetuning/finetuned-models/${encodeURIComponent(m)}`),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(_.ok)return c.finetuning.GetFinetunedModelResponse.parseOrThrow(_.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/finetuning/finetuned-models/{id}.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}})}deleteFinetunedModel(m,p){var g,b;return i(this,void 0,void 0,function*(){const _=yield((g=this._options.fetcher)!==null&&g!==void 0?g:s.fetcher)({url:(0,l.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,`v1/finetuning/finetuned-models/${encodeURIComponent(m)}`),method:"DELETE",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(_.ok)return c.finetuning.DeleteFinetunedModelResponse.parseOrThrow(_.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(_.error.reason==="status-code")switch(_.error.statusCode){case 400:throw new u.BadRequestError(_.error.body);case 401:throw new u.UnauthorizedError(_.error.body);case 403:throw new u.ForbiddenError(_.error.body);case 404:throw new u.NotFoundError(_.error.body);case 500:throw new u.InternalServerError(_.error.body);case 503:throw new u.ServiceUnavailableError(_.error.body);default:throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.body})}switch(_.error.reason){case"non-json":throw new d.CohereError({statusCode:_.error.statusCode,body:_.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling DELETE /v1/finetuning/finetuned-models/{id}.");case"unknown":throw new d.CohereError({message:_.error.errorMessage})}})}updateFinetunedModel(m,p,g){var b,_;return i(this,void 0,void 0,function*(){const y=yield((b=this._options.fetcher)!==null&&b!==void 0?b:s.fetcher)({url:(0,l.default)((_=yield s.Supplier.get(this._options.environment))!==null&&_!==void 0?_:o.CohereEnvironment.Production,`v1/finetuning/finetuned-models/${encodeURIComponent(m)}`),method:"PATCH",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},g==null?void 0:g.headers),contentType:"application/json",requestType:"json",body:c.FinetuningUpdateFinetunedModelRequest.jsonOrThrow(p,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(g==null?void 0:g.timeoutInSeconds)!=null?g.timeoutInSeconds*1e3:3e5,maxRetries:g==null?void 0:g.maxRetries,abortSignal:g==null?void 0:g.abortSignal});if(y.ok)return c.finetuning.UpdateFinetunedModelResponse.parseOrThrow(y.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(y.error.reason==="status-code")switch(y.error.statusCode){case 400:throw new u.BadRequestError(y.error.body);case 401:throw new u.UnauthorizedError(y.error.body);case 403:throw new u.ForbiddenError(y.error.body);case 404:throw new u.NotFoundError(y.error.body);case 500:throw new u.InternalServerError(y.error.body);case 503:throw new u.ServiceUnavailableError(y.error.body);default:throw new d.CohereError({statusCode:y.error.statusCode,body:y.error.body})}switch(y.error.reason){case"non-json":throw new d.CohereError({statusCode:y.error.statusCode,body:y.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling PATCH /v1/finetuning/finetuned-models/{id}.");case"unknown":throw new d.CohereError({message:y.error.errorMessage})}})}listEvents(m,p={},g){var b,_;return i(this,void 0,void 0,function*(){const{pageSize:y,pageToken:v,orderBy:w}=p,S={};y!=null&&(S.page_size=y.toString()),v!=null&&(S.page_token=v),w!=null&&(S.order_by=w);const R=yield((b=this._options.fetcher)!==null&&b!==void 0?b:s.fetcher)({url:(0,l.default)((_=yield s.Supplier.get(this._options.environment))!==null&&_!==void 0?_:o.CohereEnvironment.Production,`v1/finetuning/finetuned-models/${encodeURIComponent(m)}/events`),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},g==null?void 0:g.headers),contentType:"application/json",queryParameters:S,requestType:"json",timeoutMs:(g==null?void 0:g.timeoutInSeconds)!=null?g.timeoutInSeconds*1e3:3e5,maxRetries:g==null?void 0:g.maxRetries,abortSignal:g==null?void 0:g.abortSignal});if(R.ok)return c.finetuning.ListEventsResponse.parseOrThrow(R.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(R.error.reason==="status-code")switch(R.error.statusCode){case 400:throw new u.BadRequestError(R.error.body);case 401:throw new u.UnauthorizedError(R.error.body);case 403:throw new u.ForbiddenError(R.error.body);case 404:throw new u.NotFoundError(R.error.body);case 500:throw new u.InternalServerError(R.error.body);case 503:throw new u.ServiceUnavailableError(R.error.body);default:throw new d.CohereError({statusCode:R.error.statusCode,body:R.error.body})}switch(R.error.reason){case"non-json":throw new d.CohereError({statusCode:R.error.statusCode,body:R.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/finetuning/finetuned-models/{finetuned_model_id}/events.");case"unknown":throw new d.CohereError({message:R.error.errorMessage})}})}listTrainingStepMetrics(m,p={},g){var b,_;return i(this,void 0,void 0,function*(){const{pageSize:y,pageToken:v}=p,w={};y!=null&&(w.page_size=y.toString()),v!=null&&(w.page_token=v);const S=yield((b=this._options.fetcher)!==null&&b!==void 0?b:s.fetcher)({url:(0,l.default)((_=yield s.Supplier.get(this._options.environment))!==null&&_!==void 0?_:o.CohereEnvironment.Production,`v1/finetuning/finetuned-models/${encodeURIComponent(m)}/training-step-metrics`),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},g==null?void 0:g.headers),contentType:"application/json",queryParameters:w,requestType:"json",timeoutMs:(g==null?void 0:g.timeoutInSeconds)!=null?g.timeoutInSeconds*1e3:3e5,maxRetries:g==null?void 0:g.maxRetries,abortSignal:g==null?void 0:g.abortSignal});if(S.ok)return c.finetuning.ListTrainingStepMetricsResponse.parseOrThrow(S.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(S.error.reason==="status-code")switch(S.error.statusCode){case 400:throw new u.BadRequestError(S.error.body);case 401:throw new u.UnauthorizedError(S.error.body);case 403:throw new u.ForbiddenError(S.error.body);case 404:throw new u.NotFoundError(S.error.body);case 500:throw new u.InternalServerError(S.error.body);case 503:throw new u.ServiceUnavailableError(S.error.body);default:throw new d.CohereError({statusCode:S.error.statusCode,body:S.error.body})}switch(S.error.reason){case"non-json":throw new d.CohereError({statusCode:S.error.statusCode,body:S.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/finetuning/finetuned-models/{finetuned_model_id}/training-step-metrics.");case"unknown":throw new d.CohereError({message:S.error.errorMessage})}})}_getAuthorizationHeader(){var m;return i(this,void 0,void 0,function*(){const p=(m=yield s.Supplier.get(this._options.token))!==null&&m!==void 0?m:process==null?void 0:r.CO_API_KEY;if(p==null)throw new d.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${p}`})}}return cr.Finetuning=h,cr}var iV;function p1(){if(iV)return Ft;iV=1;var r={},e=Ft&&Ft.__createBinding||(Object.create?function(v,w,S,R){R===void 0&&(R=S);var P=Object.getOwnPropertyDescriptor(w,S);(!P||("get"in P?!w.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return w[S]}}),Object.defineProperty(v,R,P)}:function(v,w,S,R){R===void 0&&(R=S),v[R]=w[S]}),t=Ft&&Ft.__setModuleDefault||(Object.create?function(v,w){Object.defineProperty(v,"default",{enumerable:!0,value:w})}:function(v,w){v.default=w}),n=Ft&&Ft.__importStar||function(v){if(v&&v.__esModule)return v;var w={};if(v!=null)for(var S in v)S!=="default"&&Object.prototype.hasOwnProperty.call(v,S)&&e(w,v,S);return t(w,v),w},i=Ft&&Ft.__awaiter||function(v,w,S,R){function P(C){return C instanceof S?C:new S(function(A){A(C)})}return new(S||(S=Promise))(function(C,A){function M(z){try{U(R.next(z))}catch(W){A(W)}}function G(z){try{U(R.throw(z))}catch(W){A(W)}}function U(z){z.done?C(z.value):P(z.value).then(M,G)}U((R=R.apply(v,w||[])).next())})},a=Ft&&Ft.__rest||function(v,w){var S={};for(var R in v)Object.prototype.hasOwnProperty.call(v,R)&&w.indexOf(R)<0&&(S[R]=v[R]);if(v!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,R=Object.getOwnPropertySymbols(v);P<R.length;P++)w.indexOf(R[P])<0&&Object.prototype.propertyIsEnumerable.call(v,R[P])&&(S[R[P]]=v[R[P]]);return S},o=Ft&&Ft.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.CohereClient=void 0;const s=n(kl()),u=n($()),l=n(Bl()),c=n(Fl()),d=o(_d()),h=n(Ot()),f=TK(),m=Ope(),p=Epe(),g=Rpe(),b=Cpe(),_=Ppe();class y{constructor(w={}){this._options=w}get v2(){var w;return(w=this._v2)!==null&&w!==void 0?w:this._v2=new f.V2(this._options)}get embedJobs(){var w;return(w=this._embedJobs)!==null&&w!==void 0?w:this._embedJobs=new m.EmbedJobs(this._options)}get datasets(){var w;return(w=this._datasets)!==null&&w!==void 0?w:this._datasets=new p.Datasets(this._options)}get connectors(){var w;return(w=this._connectors)!==null&&w!==void 0?w:this._connectors=new g.Connectors(this._options)}get models(){var w;return(w=this._models)!==null&&w!==void 0?w:this._models=new b.Models(this._options)}get finetuning(){var w;return(w=this._finetuning)!==null&&w!==void 0?w:this._finetuning=new _.Finetuning(this._options)}chatStream(w,S){var R,P;return i(this,void 0,void 0,function*(){const{accepts:C}=w,A=a(w,["accepts"]),M=yield((R=this._options.fetcher)!==null&&R!==void 0?R:u.fetcher)({url:(0,d.default)((P=yield u.Supplier.get(this._options.environment))!==null&&P!==void 0?P:s.CohereEnvironment.Production,"v1/chat"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield u.Supplier.get(this._options.clientName))!=null?yield u.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":u.RUNTIME.type,"X-Fern-Runtime-Version":u.RUNTIME.version,Accepts:C??void 0},S==null?void 0:S.headers),contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},c.ChatStreamRequest.jsonOrThrow(A,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!0}),responseType:"sse",timeoutMs:(S==null?void 0:S.timeoutInSeconds)!=null?S.timeoutInSeconds*1e3:3e5,maxRetries:S==null?void 0:S.maxRetries,abortSignal:S==null?void 0:S.abortSignal});if(M.ok)return new u.Stream({stream:M.body,parse:G=>i(this,void 0,void 0,function*(){return c.StreamedChatResponse.parseOrThrow(G,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]})}),signal:S==null?void 0:S.abortSignal,eventShape:{type:"json",messageTerminator:`
`}});if(M.error.reason==="status-code")switch(M.error.statusCode){case 400:throw new l.BadRequestError(M.error.body);case 401:throw new l.UnauthorizedError(M.error.body);case 403:throw new l.ForbiddenError(M.error.body);case 404:throw new l.NotFoundError(M.error.body);case 422:throw new l.UnprocessableEntityError(M.error.body);case 429:throw new l.TooManyRequestsError(M.error.body);case 498:throw new l.InvalidTokenError(M.error.body);case 499:throw new l.ClientClosedRequestError(M.error.body);case 500:throw new l.InternalServerError(M.error.body);case 501:throw new l.NotImplementedError(M.error.body);case 503:throw new l.ServiceUnavailableError(M.error.body);case 504:throw new l.GatewayTimeoutError(M.error.body);default:throw new h.CohereError({statusCode:M.error.statusCode,body:M.error.body})}switch(M.error.reason){case"non-json":throw new h.CohereError({statusCode:M.error.statusCode,body:M.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/chat.");case"unknown":throw new h.CohereError({message:M.error.errorMessage})}})}chat(w,S){var R,P;return i(this,void 0,void 0,function*(){const{accepts:C}=w,A=a(w,["accepts"]),M=yield((R=this._options.fetcher)!==null&&R!==void 0?R:u.fetcher)({url:(0,d.default)((P=yield u.Supplier.get(this._options.environment))!==null&&P!==void 0?P:s.CohereEnvironment.Production,"v1/chat"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield u.Supplier.get(this._options.clientName))!=null?yield u.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":u.RUNTIME.type,"X-Fern-Runtime-Version":u.RUNTIME.version,Accepts:C??void 0},S==null?void 0:S.headers),contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},c.ChatRequest.jsonOrThrow(A,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!1}),timeoutMs:(S==null?void 0:S.timeoutInSeconds)!=null?S.timeoutInSeconds*1e3:3e5,maxRetries:S==null?void 0:S.maxRetries,abortSignal:S==null?void 0:S.abortSignal});if(M.ok)return c.NonStreamedChatResponse.parseOrThrow(M.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(M.error.reason==="status-code")switch(M.error.statusCode){case 400:throw new l.BadRequestError(M.error.body);case 401:throw new l.UnauthorizedError(M.error.body);case 403:throw new l.ForbiddenError(M.error.body);case 404:throw new l.NotFoundError(M.error.body);case 422:throw new l.UnprocessableEntityError(M.error.body);case 429:throw new l.TooManyRequestsError(M.error.body);case 498:throw new l.InvalidTokenError(M.error.body);case 499:throw new l.ClientClosedRequestError(M.error.body);case 500:throw new l.InternalServerError(M.error.body);case 501:throw new l.NotImplementedError(M.error.body);case 503:throw new l.ServiceUnavailableError(M.error.body);case 504:throw new l.GatewayTimeoutError(M.error.body);default:throw new h.CohereError({statusCode:M.error.statusCode,body:M.error.body})}switch(M.error.reason){case"non-json":throw new h.CohereError({statusCode:M.error.statusCode,body:M.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/chat.");case"unknown":throw new h.CohereError({message:M.error.errorMessage})}})}generateStream(w,S){var R,P;return i(this,void 0,void 0,function*(){const C=yield((R=this._options.fetcher)!==null&&R!==void 0?R:u.fetcher)({url:(0,d.default)((P=yield u.Supplier.get(this._options.environment))!==null&&P!==void 0?P:s.CohereEnvironment.Production,"v1/generate"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield u.Supplier.get(this._options.clientName))!=null?yield u.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":u.RUNTIME.type,"X-Fern-Runtime-Version":u.RUNTIME.version},S==null?void 0:S.headers),contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},c.GenerateStreamRequest.jsonOrThrow(w,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!0}),responseType:"sse",timeoutMs:(S==null?void 0:S.timeoutInSeconds)!=null?S.timeoutInSeconds*1e3:3e5,maxRetries:S==null?void 0:S.maxRetries,abortSignal:S==null?void 0:S.abortSignal});if(C.ok)return new u.Stream({stream:C.body,parse:A=>i(this,void 0,void 0,function*(){return c.GenerateStreamedResponse.parseOrThrow(A,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]})}),signal:S==null?void 0:S.abortSignal,eventShape:{type:"json",messageTerminator:`
`}});if(C.error.reason==="status-code")switch(C.error.statusCode){case 400:throw new l.BadRequestError(C.error.body);case 401:throw new l.UnauthorizedError(C.error.body);case 403:throw new l.ForbiddenError(C.error.body);case 404:throw new l.NotFoundError(C.error.body);case 422:throw new l.UnprocessableEntityError(C.error.body);case 429:throw new l.TooManyRequestsError(C.error.body);case 498:throw new l.InvalidTokenError(C.error.body);case 499:throw new l.ClientClosedRequestError(C.error.body);case 500:throw new l.InternalServerError(C.error.body);case 501:throw new l.NotImplementedError(C.error.body);case 503:throw new l.ServiceUnavailableError(C.error.body);case 504:throw new l.GatewayTimeoutError(C.error.body);default:throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.body})}switch(C.error.reason){case"non-json":throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/generate.");case"unknown":throw new h.CohereError({message:C.error.errorMessage})}})}generate(w,S){var R,P;return i(this,void 0,void 0,function*(){const C=yield((R=this._options.fetcher)!==null&&R!==void 0?R:u.fetcher)({url:(0,d.default)((P=yield u.Supplier.get(this._options.environment))!==null&&P!==void 0?P:s.CohereEnvironment.Production,"v1/generate"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield u.Supplier.get(this._options.clientName))!=null?yield u.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":u.RUNTIME.type,"X-Fern-Runtime-Version":u.RUNTIME.version},S==null?void 0:S.headers),contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},c.GenerateRequest.jsonOrThrow(w,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!1}),timeoutMs:(S==null?void 0:S.timeoutInSeconds)!=null?S.timeoutInSeconds*1e3:3e5,maxRetries:S==null?void 0:S.maxRetries,abortSignal:S==null?void 0:S.abortSignal});if(C.ok)return c.Generation.parseOrThrow(C.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(C.error.reason==="status-code")switch(C.error.statusCode){case 400:throw new l.BadRequestError(C.error.body);case 401:throw new l.UnauthorizedError(C.error.body);case 403:throw new l.ForbiddenError(C.error.body);case 404:throw new l.NotFoundError(C.error.body);case 422:throw new l.UnprocessableEntityError(C.error.body);case 429:throw new l.TooManyRequestsError(C.error.body);case 498:throw new l.InvalidTokenError(C.error.body);case 499:throw new l.ClientClosedRequestError(C.error.body);case 500:throw new l.InternalServerError(C.error.body);case 501:throw new l.NotImplementedError(C.error.body);case 503:throw new l.ServiceUnavailableError(C.error.body);case 504:throw new l.GatewayTimeoutError(C.error.body);default:throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.body})}switch(C.error.reason){case"non-json":throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/generate.");case"unknown":throw new h.CohereError({message:C.error.errorMessage})}})}embed(w={},S){var R,P;return i(this,void 0,void 0,function*(){const C=yield((R=this._options.fetcher)!==null&&R!==void 0?R:u.fetcher)({url:(0,d.default)((P=yield u.Supplier.get(this._options.environment))!==null&&P!==void 0?P:s.CohereEnvironment.Production,"v1/embed"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield u.Supplier.get(this._options.clientName))!=null?yield u.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":u.RUNTIME.type,"X-Fern-Runtime-Version":u.RUNTIME.version},S==null?void 0:S.headers),contentType:"application/json",requestType:"json",body:c.EmbedRequest.jsonOrThrow(w,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(S==null?void 0:S.timeoutInSeconds)!=null?S.timeoutInSeconds*1e3:3e5,maxRetries:S==null?void 0:S.maxRetries,abortSignal:S==null?void 0:S.abortSignal});if(C.ok)return c.EmbedResponse.parseOrThrow(C.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(C.error.reason==="status-code")switch(C.error.statusCode){case 400:throw new l.BadRequestError(C.error.body);case 401:throw new l.UnauthorizedError(C.error.body);case 403:throw new l.ForbiddenError(C.error.body);case 404:throw new l.NotFoundError(C.error.body);case 422:throw new l.UnprocessableEntityError(C.error.body);case 429:throw new l.TooManyRequestsError(C.error.body);case 498:throw new l.InvalidTokenError(C.error.body);case 499:throw new l.ClientClosedRequestError(C.error.body);case 500:throw new l.InternalServerError(C.error.body);case 501:throw new l.NotImplementedError(C.error.body);case 503:throw new l.ServiceUnavailableError(C.error.body);case 504:throw new l.GatewayTimeoutError(C.error.body);default:throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.body})}switch(C.error.reason){case"non-json":throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/embed.");case"unknown":throw new h.CohereError({message:C.error.errorMessage})}})}rerank(w,S){var R,P;return i(this,void 0,void 0,function*(){const C=yield((R=this._options.fetcher)!==null&&R!==void 0?R:u.fetcher)({url:(0,d.default)((P=yield u.Supplier.get(this._options.environment))!==null&&P!==void 0?P:s.CohereEnvironment.Production,"v1/rerank"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield u.Supplier.get(this._options.clientName))!=null?yield u.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":u.RUNTIME.type,"X-Fern-Runtime-Version":u.RUNTIME.version},S==null?void 0:S.headers),contentType:"application/json",requestType:"json",body:c.RerankRequest.jsonOrThrow(w,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(S==null?void 0:S.timeoutInSeconds)!=null?S.timeoutInSeconds*1e3:3e5,maxRetries:S==null?void 0:S.maxRetries,abortSignal:S==null?void 0:S.abortSignal});if(C.ok)return c.RerankResponse.parseOrThrow(C.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(C.error.reason==="status-code")switch(C.error.statusCode){case 400:throw new l.BadRequestError(C.error.body);case 401:throw new l.UnauthorizedError(C.error.body);case 403:throw new l.ForbiddenError(C.error.body);case 404:throw new l.NotFoundError(C.error.body);case 422:throw new l.UnprocessableEntityError(C.error.body);case 429:throw new l.TooManyRequestsError(C.error.body);case 498:throw new l.InvalidTokenError(C.error.body);case 499:throw new l.ClientClosedRequestError(C.error.body);case 500:throw new l.InternalServerError(C.error.body);case 501:throw new l.NotImplementedError(C.error.body);case 503:throw new l.ServiceUnavailableError(C.error.body);case 504:throw new l.GatewayTimeoutError(C.error.body);default:throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.body})}switch(C.error.reason){case"non-json":throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/rerank.");case"unknown":throw new h.CohereError({message:C.error.errorMessage})}})}classify(w,S){var R,P;return i(this,void 0,void 0,function*(){const C=yield((R=this._options.fetcher)!==null&&R!==void 0?R:u.fetcher)({url:(0,d.default)((P=yield u.Supplier.get(this._options.environment))!==null&&P!==void 0?P:s.CohereEnvironment.Production,"v1/classify"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield u.Supplier.get(this._options.clientName))!=null?yield u.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":u.RUNTIME.type,"X-Fern-Runtime-Version":u.RUNTIME.version},S==null?void 0:S.headers),contentType:"application/json",requestType:"json",body:c.ClassifyRequest.jsonOrThrow(w,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(S==null?void 0:S.timeoutInSeconds)!=null?S.timeoutInSeconds*1e3:3e5,maxRetries:S==null?void 0:S.maxRetries,abortSignal:S==null?void 0:S.abortSignal});if(C.ok)return c.ClassifyResponse.parseOrThrow(C.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(C.error.reason==="status-code")switch(C.error.statusCode){case 400:throw new l.BadRequestError(C.error.body);case 401:throw new l.UnauthorizedError(C.error.body);case 403:throw new l.ForbiddenError(C.error.body);case 404:throw new l.NotFoundError(C.error.body);case 422:throw new l.UnprocessableEntityError(C.error.body);case 429:throw new l.TooManyRequestsError(C.error.body);case 498:throw new l.InvalidTokenError(C.error.body);case 499:throw new l.ClientClosedRequestError(C.error.body);case 500:throw new l.InternalServerError(C.error.body);case 501:throw new l.NotImplementedError(C.error.body);case 503:throw new l.ServiceUnavailableError(C.error.body);case 504:throw new l.GatewayTimeoutError(C.error.body);default:throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.body})}switch(C.error.reason){case"non-json":throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/classify.");case"unknown":throw new h.CohereError({message:C.error.errorMessage})}})}summarize(w,S){var R,P;return i(this,void 0,void 0,function*(){const C=yield((R=this._options.fetcher)!==null&&R!==void 0?R:u.fetcher)({url:(0,d.default)((P=yield u.Supplier.get(this._options.environment))!==null&&P!==void 0?P:s.CohereEnvironment.Production,"v1/summarize"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield u.Supplier.get(this._options.clientName))!=null?yield u.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":u.RUNTIME.type,"X-Fern-Runtime-Version":u.RUNTIME.version},S==null?void 0:S.headers),contentType:"application/json",requestType:"json",body:c.SummarizeRequest.jsonOrThrow(w,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(S==null?void 0:S.timeoutInSeconds)!=null?S.timeoutInSeconds*1e3:3e5,maxRetries:S==null?void 0:S.maxRetries,abortSignal:S==null?void 0:S.abortSignal});if(C.ok)return c.SummarizeResponse.parseOrThrow(C.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(C.error.reason==="status-code")switch(C.error.statusCode){case 400:throw new l.BadRequestError(C.error.body);case 401:throw new l.UnauthorizedError(C.error.body);case 403:throw new l.ForbiddenError(C.error.body);case 404:throw new l.NotFoundError(C.error.body);case 422:throw new l.UnprocessableEntityError(C.error.body);case 429:throw new l.TooManyRequestsError(C.error.body);case 498:throw new l.InvalidTokenError(C.error.body);case 499:throw new l.ClientClosedRequestError(C.error.body);case 500:throw new l.InternalServerError(C.error.body);case 501:throw new l.NotImplementedError(C.error.body);case 503:throw new l.ServiceUnavailableError(C.error.body);case 504:throw new l.GatewayTimeoutError(C.error.body);default:throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.body})}switch(C.error.reason){case"non-json":throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/summarize.");case"unknown":throw new h.CohereError({message:C.error.errorMessage})}})}tokenize(w,S){var R,P;return i(this,void 0,void 0,function*(){const C=yield((R=this._options.fetcher)!==null&&R!==void 0?R:u.fetcher)({url:(0,d.default)((P=yield u.Supplier.get(this._options.environment))!==null&&P!==void 0?P:s.CohereEnvironment.Production,"v1/tokenize"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield u.Supplier.get(this._options.clientName))!=null?yield u.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":u.RUNTIME.type,"X-Fern-Runtime-Version":u.RUNTIME.version},S==null?void 0:S.headers),contentType:"application/json",requestType:"json",body:c.TokenizeRequest.jsonOrThrow(w,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(S==null?void 0:S.timeoutInSeconds)!=null?S.timeoutInSeconds*1e3:3e5,maxRetries:S==null?void 0:S.maxRetries,abortSignal:S==null?void 0:S.abortSignal});if(C.ok)return c.TokenizeResponse.parseOrThrow(C.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(C.error.reason==="status-code")switch(C.error.statusCode){case 400:throw new l.BadRequestError(C.error.body);case 401:throw new l.UnauthorizedError(C.error.body);case 403:throw new l.ForbiddenError(C.error.body);case 404:throw new l.NotFoundError(C.error.body);case 422:throw new l.UnprocessableEntityError(C.error.body);case 429:throw new l.TooManyRequestsError(C.error.body);case 498:throw new l.InvalidTokenError(C.error.body);case 499:throw new l.ClientClosedRequestError(C.error.body);case 500:throw new l.InternalServerError(C.error.body);case 501:throw new l.NotImplementedError(C.error.body);case 503:throw new l.ServiceUnavailableError(C.error.body);case 504:throw new l.GatewayTimeoutError(C.error.body);default:throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.body})}switch(C.error.reason){case"non-json":throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/tokenize.");case"unknown":throw new h.CohereError({message:C.error.errorMessage})}})}detokenize(w,S){var R,P;return i(this,void 0,void 0,function*(){const C=yield((R=this._options.fetcher)!==null&&R!==void 0?R:u.fetcher)({url:(0,d.default)((P=yield u.Supplier.get(this._options.environment))!==null&&P!==void 0?P:s.CohereEnvironment.Production,"v1/detokenize"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield u.Supplier.get(this._options.clientName))!=null?yield u.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":u.RUNTIME.type,"X-Fern-Runtime-Version":u.RUNTIME.version},S==null?void 0:S.headers),contentType:"application/json",requestType:"json",body:c.DetokenizeRequest.jsonOrThrow(w,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(S==null?void 0:S.timeoutInSeconds)!=null?S.timeoutInSeconds*1e3:3e5,maxRetries:S==null?void 0:S.maxRetries,abortSignal:S==null?void 0:S.abortSignal});if(C.ok)return c.DetokenizeResponse.parseOrThrow(C.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(C.error.reason==="status-code")switch(C.error.statusCode){case 400:throw new l.BadRequestError(C.error.body);case 401:throw new l.UnauthorizedError(C.error.body);case 403:throw new l.ForbiddenError(C.error.body);case 404:throw new l.NotFoundError(C.error.body);case 422:throw new l.UnprocessableEntityError(C.error.body);case 429:throw new l.TooManyRequestsError(C.error.body);case 498:throw new l.InvalidTokenError(C.error.body);case 499:throw new l.ClientClosedRequestError(C.error.body);case 500:throw new l.InternalServerError(C.error.body);case 501:throw new l.NotImplementedError(C.error.body);case 503:throw new l.ServiceUnavailableError(C.error.body);case 504:throw new l.GatewayTimeoutError(C.error.body);default:throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.body})}switch(C.error.reason){case"non-json":throw new h.CohereError({statusCode:C.error.statusCode,body:C.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/detokenize.");case"unknown":throw new h.CohereError({message:C.error.errorMessage})}})}checkApiKey(w){var S,R;return i(this,void 0,void 0,function*(){const P=yield((S=this._options.fetcher)!==null&&S!==void 0?S:u.fetcher)({url:(0,d.default)((R=yield u.Supplier.get(this._options.environment))!==null&&R!==void 0?R:s.CohereEnvironment.Production,"v1/check-api-key"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield u.Supplier.get(this._options.clientName))!=null?yield u.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.17.1","User-Agent":"cohere-ai/7.17.1","X-Fern-Runtime":u.RUNTIME.type,"X-Fern-Runtime-Version":u.RUNTIME.version},w==null?void 0:w.headers),contentType:"application/json",requestType:"json",timeoutMs:(w==null?void 0:w.timeoutInSeconds)!=null?w.timeoutInSeconds*1e3:3e5,maxRetries:w==null?void 0:w.maxRetries,abortSignal:w==null?void 0:w.abortSignal});if(P.ok)return c.CheckApiKeyResponse.parseOrThrow(P.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(P.error.reason==="status-code")switch(P.error.statusCode){case 400:throw new l.BadRequestError(P.error.body);case 401:throw new l.UnauthorizedError(P.error.body);case 403:throw new l.ForbiddenError(P.error.body);case 404:throw new l.NotFoundError(P.error.body);case 422:throw new l.UnprocessableEntityError(P.error.body);case 429:throw new l.TooManyRequestsError(P.error.body);case 498:throw new l.InvalidTokenError(P.error.body);case 499:throw new l.ClientClosedRequestError(P.error.body);case 500:throw new l.InternalServerError(P.error.body);case 501:throw new l.NotImplementedError(P.error.body);case 503:throw new l.ServiceUnavailableError(P.error.body);case 504:throw new l.GatewayTimeoutError(P.error.body);default:throw new h.CohereError({statusCode:P.error.statusCode,body:P.error.body})}switch(P.error.reason){case"non-json":throw new h.CohereError({statusCode:P.error.statusCode,body:P.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/check-api-key.");case"unknown":throw new h.CohereError({message:P.error.errorMessage})}})}_getAuthorizationHeader(){var w;return i(this,void 0,void 0,function*(){const S=(w=yield u.Supplier.get(this._options.token))!==null&&w!==void 0?w:process==null?void 0:r.CO_API_KEY;if(S==null)throw new h.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${S}`})}}return Ft.CohereClient=y,Ft}var yh={},aV;function AK(){if(aV)return yh;aV=1,Object.defineProperty(yh,"__esModule",{value:!0}),yh.CohereClientV2=void 0;const r=TK(),e=p1();class t{constructor(i){this._options=i,this.client=new e.CohereClient(this._options),this.clientV2=new r.V2(this._options),this.chat=this.clientV2.chat.bind(this.clientV2),this.chatStream=this.clientV2.chatStream.bind(this.clientV2),this.embed=this.clientV2.embed.bind(this.clientV2),this.rerank=this.clientV2.rerank.bind(this.clientV2),this.generateStream=this.client.generateStream.bind(this.clientV2),this.generate=this.client.generate.bind(this.clientV2),this.classify=this.client.classify.bind(this.clientV2),this.summarize=this.client.summarize.bind(this.clientV2),this.tokenize=this.client.tokenize.bind(this.clientV2),this.detokenize=this.client.detokenize.bind(this.clientV2),this.checkApiKey=this.client.checkApiKey.bind(this.clientV2),this.embedJobs=this.client.embedJobs,this.datasets=this.client.datasets,this.connectors=this.client.connectors,this.models=this.client.models,this.finetuning=this.client.finetuning}}return yh.CohereClientV2=t,yh}var oV;function MK(){if(oV)return Zc;oV=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.AwsClientV2=Zc.AwsClient=void 0;const r=p1(),e=AK();let t=class extends r.CohereClient{constructor(a){a.token="n/a",super(a)}};Zc.AwsClient=t;class n extends e.CohereClientV2{constructor(a){a.token="n/a",super(a)}}return Zc.AwsClientV2=n,Zc}var sV;function jpe(){if(sV)return _c;sV=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.BedrockClientV2=_c.BedrockClient=void 0;const r=jK(),e=MK();let t=class extends e.AwsClient{constructor(a){super(Object.assign(Object.assign({},a),{fetcher:(0,r.fetchOverride)("bedrock",a)}))}};_c.BedrockClient=t;class n extends e.AwsClientV2{constructor(a){super(Object.assign(Object.assign({},a),{fetcher:(0,r.fetchOverride)("bedrock",a)}))}}return _c.BedrockClientV2=n,_c}var vh={},uV;function Tpe(){if(uV)return vh;uV=1,Object.defineProperty(vh,"__esModule",{value:!0}),vh.CustomClient=void 0;const r=p1();let e=class extends r.CohereClient{constructor(n={}){var i,a;try{const o=/\/v1\/?$/,s=(i=n.environment)===null||i===void 0?void 0:i.toString().replace(o,"");s!==((a=n.environment)===null||a===void 0?void 0:a.toString())&&(n.environment=s)}catch{}super(n),this._options=n}};return vh.CustomClient=e,vh}var Qc={},lV;function Ape(){if(lV)return Qc;lV=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.SagemakerClientV2=Qc.SagemakerClient=void 0;const r=MK(),e=jK();let t=class extends r.AwsClient{constructor(a){super(Object.assign(Object.assign({},a),{fetcher:(0,e.fetchOverride)("sagemaker",a)}))}};Qc.SagemakerClient=t;class n extends r.AwsClientV2{constructor(a){super(Object.assign(Object.assign({},a),{fetcher:(0,e.fetchOverride)("sagemaker",a)}))}}return Qc.SagemakerClientV2=n,Qc}var cV;function Mpe(){return cV||(cV=1,function(r){var e=Vu&&Vu.__createBinding||(Object.create?function(c,d,h,f){f===void 0&&(f=h);var m=Object.getOwnPropertyDescriptor(d,h);(!m||("get"in m?!d.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(c,f,m)}:function(c,d,h,f){f===void 0&&(f=h),c[f]=d[h]}),t=Vu&&Vu.__setModuleDefault||(Object.create?function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}:function(c,d){c.default=d}),n=Vu&&Vu.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var h in c)h!=="default"&&Object.prototype.hasOwnProperty.call(c,h)&&e(d,c,h);return t(d,c),d};Object.defineProperty(r,"__esModule",{value:!0}),r.SagemakerClientV2=r.SagemakerClient=r.CohereTimeoutError=r.CohereError=r.CohereEnvironment=r.CohereClient=r.CohereClientV2=r.BedrockClientV2=r.BedrockClient=r.Cohere=void 0,r.Cohere=n(Bl());var i=jpe();Object.defineProperty(r,"BedrockClient",{enumerable:!0,get:function(){return i.BedrockClient}}),Object.defineProperty(r,"BedrockClientV2",{enumerable:!0,get:function(){return i.BedrockClientV2}});var a=AK();Object.defineProperty(r,"CohereClientV2",{enumerable:!0,get:function(){return a.CohereClientV2}});var o=Tpe();Object.defineProperty(r,"CohereClient",{enumerable:!0,get:function(){return o.CustomClient}});var s=kl();Object.defineProperty(r,"CohereEnvironment",{enumerable:!0,get:function(){return s.CohereEnvironment}});var u=Ot();Object.defineProperty(r,"CohereError",{enumerable:!0,get:function(){return u.CohereError}}),Object.defineProperty(r,"CohereTimeoutError",{enumerable:!0,get:function(){return u.CohereTimeoutError}});var l=Ape();Object.defineProperty(r,"SagemakerClient",{enumerable:!0,get:function(){return l.SagemakerClient}}),Object.defineProperty(r,"SagemakerClientV2",{enumerable:!0,get:function(){return l.SagemakerClientV2}})}(Vu)),Vu}var Ipe=Mpe();function IK(r){if(r!=null&&r.client)return r.client;const e=(r==null?void 0:r.apiKey)??ot("COHERE_API_KEY");if(!e)throw new Error("COHERE_API_KEY must be set");return new Ipe.CohereClient({token:e})}function dV(r){const e=[];let t=[];typeof r=="string"?t=[{output:r}]:r instanceof Map||typeof r=="object"&&r!==null&&!Array.isArray(r)?t=[r]:Array.isArray(r)||(t=[{output:r}]);for(let n of t)!(n instanceof Map)&&(typeof n!="object"||n===null)&&(n={output:n}),e.push(n);return e}function $g(r,e){const t=a=>{switch(a){case"system":return"SYSTEM";case"human":return"USER";case"ai":return"CHATBOT";case"tool":return"TOOL";default:throw new Error(`Unknown message type: '${a}'. Accepted types: 'human', 'ai', 'system', 'tool'`)}},n=a=>{if(typeof a=="string")return a;throw new Error(`ChatCohere does not support non text message content. Received: ${JSON.stringify(a,null,2)}`)},i=a=>xu(a)&&a.tool_calls?a.tool_calls.map(o=>({name:o.name,parameters:o.args})):[];if(r._getType().toLowerCase()==="ai")return{role:t(r._getType()),message:n(r.content),toolCalls:i(r)};if(r._getType().toLowerCase()==="tool")return{role:t(r._getType()),message:n(r.content),toolResults:e};if(r._getType().toLowerCase()==="human"||r._getType().toLowerCase()==="system")return{role:t(r._getType()),message:n(r.content)};throw new Error("Got unknown message type. Supported types are AIMessage, ToolMessage, HumanMessage, and SystemMessage")}function xpe(r){return"name"in r&&"description"in r&&"parameterDefinitions"in r}function fV(r){return r._getType()==="tool"}function pV(r){const e="properties"in r?r.properties:{};let t="required"in r?r.required:[];const n={};return Object.keys(e).forEach(i=>{n[i]=e[i],t===void 0&&(t=[]),n[i].required=t.includes(i)}),n}function Dpe(r){if(r){if(r.every(xpe))return r;if(r.every(Tm))return r.map(e=>({name:e.function.name,description:e.function.description??"",parameterDefinitions:pV(e.function.parameters)}));if(r.every(Sf))return r.map(e=>{const t=lf(e.schema)?Zu(e.schema):e.schema;return{name:e.name,description:e.description??"",parameterDefinitions:pV(t)}});throw new Error("Can not pass in a mix of tool schema types to ChatCohere.")}else return}class $pe extends Qr{static lc_name(){return"ChatCohere"}constructor(e){super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"command-r-plus"}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.3}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.client=IK(e),this.model=(e==null?void 0:e.model)??this.model,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.streaming=(e==null?void 0:e.streaming)??this.streaming,this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage}getLsParams(e){const t=this.invocationParams(e);return{ls_provider:"cohere",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:this.temperature??void 0,ls_max_tokens:typeof t.maxTokens=="number"?t.maxTokens:void 0,ls_stop:Array.isArray(t.stopSequences)?t.stopSequences:void 0}}_llmType(){return"cohere"}invocationParams(e){if(e.tool_choice)throw new Error("'tool_choice' call option is not supported by ChatCohere.");const t={model:this.model,preamble:e.preamble,conversationId:e.conversationId,promptTruncation:e.promptTruncation,connectors:e.connectors,searchQueriesOnly:e.searchQueriesOnly,documents:e.documents,temperature:e.temperature??this.temperature,forceSingleStep:e.forceSingleStep,tools:e.tools};return Object.fromEntries(Object.entries(t).filter(([,n])=>n!==void 0))}bindTools(e,t){return this.withConfig({tools:Dpe(e),...t})}_getChatRequest(e,t){const n=this.invocationParams(t),i=this._messagesToCohereToolResultsCurrChatTurn(e),a=[];let o="",s=[];if(n.forceSingleStep){o="";for(let l=0;l<e.length-1;l+=1){const c=e[l];if(!(xu(c)&&c.tool_calls))if(c._getType().toLowerCase()==="tool"){if(s=s.concat(this._messageToCohereToolResults(e,l)),l===e.length-1||e[l+1]._getType().toLowerCase()!=="tool"){const d=$g(c,s);a.push(d),s=[]}}else a.push($g(c,[]))}for(let l=e.length-1;l>=0;l-=1){const c=e[l];if(c._getType().toLowerCase()==="human"&&c.content){o=c.content.toString();break}}}else{for(let l=0;l<e.length-1;l+=1){const c=e[l];if(c._getType().toLowerCase()==="tool"){if(s=s.concat(this._messageToCohereToolResults(e,l)),l===e.length-1||e[l+1]._getType().toLowerCase()!=="tool"){const d=$g(c,s);a.push(d),s=[]}}else a.push($g(c,[]))}o=i.length>0?"":e[e.length-1].content.toString()}return{message:o,chatHistory:a,toolResults:i.length>0?i:void 0,...n}}_getCurrChatTurnMessages(e){const t=[];for(let n=e.length-1;n>=0;n-=1){const i=e[n];if(t.push(i),i._getType().toLowerCase()==="human")break}return t.reverse()}_messagesToCohereToolResultsCurrChatTurn(e){const t=[],n=this._getCurrChatTurnMessages(e);for(const i of n)if(fV(i)){const a=i,o=n.filter(s=>xu(s)&&s.tool_calls!==void 0);if(o.length>0){const s=o[o.length-1];s.tool_calls&&t.push(...s.tool_calls.filter(u=>u.id===a.tool_call_id).map(u=>({call:{name:u.name,parameters:u.args},outputs:dV(a.content)})))}}return t}_messageToCohereToolResults(e,t){const n=[],i=e[t];if(!fV(i))throw new Error("The message index does not correspond to an instance of ToolMessage");const o=e.slice(0,t).filter(s=>xu(s)&&s.tool_calls).slice(-1)[0];return o.tool_calls&&n.push(...o.tool_calls.filter(s=>s.id===i.tool_call_id).map(s=>({call:{name:s.name,parameters:s.args},outputs:dV(i.content)}))),n}_formatCohereToolCalls(e=null){if(!e)return[];const t=[];for(const n of e)t.push({id:Zt().substring(0,32),function:{name:n.name,arguments:n.parameters},type:"function"});return t}_convertCohereToolCallToLangchain(e){return e.map(t=>({name:t.function.name,args:t.function.arguments,id:t.id,type:"tool_call"}))}async _generate(e,t,n){var c,d;const i={},a=this._getChatRequest(e,t);if(this.streaming){const h=this._streamResponseChunks(e,t,n),f={};for await(const p of h){const g=((c=p.generationInfo)==null?void 0:c.completion)??0;f[g]===void 0?f[g]=p:f[g]=f[g].concat(p)}return{generations:Object.entries(f).sort(([p],[g])=>parseInt(p,10)-parseInt(g,10)).map(([p,g])=>g),llmOutput:{estimatedTokenUsage:i}}}const o=await this.caller.callWithOptions({signal:t.signal},async()=>{let h;try{h=await this.client.chat(a)}catch(f){throw f.status=f.status??f.statusCode,f}return h});if((d=o.meta)!=null&&d.tokens){const{inputTokens:h,outputTokens:f}=o.meta.tokens;f&&(i.completionTokens=(i.completionTokens??0)+f),h&&(i.promptTokens=(i.promptTokens??0)+h),i.totalTokens=(i.totalTokens??0)+(i.promptTokens??0)+(i.completionTokens??0)}const s={...o};delete s.text,o.toolCalls&&o.toolCalls.length>0&&(s.toolCalls=this._formatCohereToolCalls(o.toolCalls));let u=[];return"toolCalls"in s&&(u=this._convertCohereToolCallToLangchain(s.toolCalls)),{generations:[{text:o.text,message:new Su({content:o.text,additional_kwargs:s,tool_calls:u,usage_metadata:{input_tokens:i.promptTokens??0,output_tokens:i.completionTokens??0,total_tokens:i.totalTokens??0}}),generationInfo:s}],llmOutput:{estimatedTokenUsage:i}}}async*_streamResponseChunks(e,t,n){var o,s,u,l;const i=this._getChatRequest(e,t),a=await this.caller.call(async()=>{let c;try{c=await this.client.chatStream(i)}catch(d){throw d.status=d.status??d.statusCode,d}return c});for await(const c of a)if(c.eventType==="text-generation")yield new wr({text:c.text,message:new ft({content:c.text})}),await(n==null?void 0:n.handleLLMNewToken(c.text));else if(c.eventType!=="stream-end")yield new wr({text:"",message:new ft({content:"",additional_kwargs:{...c}}),generationInfo:{...c}});else if(c.eventType==="stream-end"&&(this.streamUsage||t.streamUsage)){const d=((s=(o=c.response.meta)==null?void 0:o.tokens)==null?void 0:s.inputTokens)??0,h=((l=(u=c.response.meta)==null?void 0:u.tokens)==null?void 0:l.outputTokens)??0,f={...c.response};c.response.toolCalls&&c.response.toolCalls.length>0&&(f.toolCalls=this._formatCohereToolCalls(c.response.toolCalls));let m=[];const p=f.toolCalls??[];p.length>0&&(m=p.map(g=>({name:g.function.name,args:g.function.arguments,id:g.id,index:g.index,type:"tool_call_chunk"}))),yield new wr({text:"",message:new ft({content:"",additional_kwargs:{eventType:"stream-end"},tool_call_chunks:m,usage_metadata:{input_tokens:d,output_tokens:h,total_tokens:d+h}}),generationInfo:{eventType:"stream-end",...f}})}}_combineLLMOutput(...e){return e.reduce((t,n)=>{var i,a,o;if(n&&n.estimatedTokenUsage){let s=((i=t.estimatedTokenUsage)==null?void 0:i.completionTokens)??0,u=((a=t.estimatedTokenUsage)==null?void 0:a.promptTokens)??0,l=((o=t.estimatedTokenUsage)==null?void 0:o.totalTokens)??0;s+=n.estimatedTokenUsage.completionTokens??0,u+=n.estimatedTokenUsage.promptTokens??0,l+=n.estimatedTokenUsage.totalTokens??0,t.estimatedTokenUsage={completionTokens:s,promptTokens:u,totalTokens:l}}return t},{estimatedTokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}get lc_secrets(){return{apiKey:"COHERE_API_KEY",api_key:"COHERE_API_KEY"}}get lc_aliases(){return{apiKey:"cohere_api_key",api_key:"cohere_api_key"}}}class Npe extends S6{constructor(e){const t={maxConcurrency:2,...e};if(super(t),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:48}),Object.defineProperty(this,"embeddingTypes",{enumerable:!0,configurable:!0,writable:!0,value:["float"]}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.client=IK(t),this.model=(t==null?void 0:t.model)??this.model,!this.model)throw new Error("Model not specified for CohereEmbeddings instance. Please provide a model name from the options here: https://docs.cohere.com/reference/embed");this.batchSize=(t==null?void 0:t.batchSize)??this.batchSize,this.embeddingTypes=(t==null?void 0:t.embeddingTypes)??this.embeddingTypes}async embedDocuments(e){const t=IP(e,this.batchSize),n=t.map(o=>this.embeddingWithRetry({model:this.model,texts:o,inputType:"search_document",embeddingTypes:this.embeddingTypes})),i=await Promise.all(n),a=[];for(let o=0;o<i.length;o+=1){const s=t[o],{embeddings:u}=i[o];for(let l=0;l<s.length;l+=1)"float"in u&&u.float?a.push(u.float[l]):Array.isArray(u)&&a.push(u[l])}return a}async embedQuery(e){const{embeddings:t}=await this.embeddingWithRetry({model:this.model,texts:[e],inputType:"search_query",embeddingTypes:this.embeddingTypes});if("float"in t&&t.float)return t.float[0];if(Array.isArray(t))return t[0];throw new Error(`Invalid response from Cohere API. Received: ${JSON.stringify(t,null,2)}`)}async embed(e){const{embeddings:t}=await this.embeddingWithRetry(e);if("float"in t&&t.float)return t.float[0];if(Array.isArray(t))return t[0];throw new Error(`Invalid response from Cohere API. Received: ${JSON.stringify(t,null,2)}`)}async embeddingWithRetry(e){return this.caller.call(async()=>{let t;try{t=await this.client.embed(e)}catch(n){throw n.status=n.status??n.statusCode,n}return t})}get lc_secrets(){return{apiKey:"COHERE_API_KEY",api_key:"COHERE_API_KEY"}}get lc_aliases(){return{apiKey:"cohere_api_key",api_key:"cohere_api_key"}}}const Bd="0.5.0";let hV=!1,Jh,xK,DK,vC,$K,NK,qK,BK,UK;function qpe(r,e={auto:!1}){if(hV)throw new Error(`you must \`import 'groq-sdk/shims/${r.kind}'\` before importing anything else from groq-sdk`);if(Jh)throw new Error(`can't \`import 'groq-sdk/shims/${r.kind}'\` after \`import 'groq-sdk/shims/${Jh}'\``);hV=e.auto,Jh=r.kind,xK=r.fetch,DK=r.FormData,vC=r.File,$K=r.ReadableStream,NK=r.getMultipartRequestOptions,qK=r.getDefaultAgent,BK=r.fileFromPath,UK=r.isFsReadStream}class Bpe{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function Upe({manuallyImported:r}={}){const e=r?"You may need to use polyfills":"Add one of these imports before your first `import … from 'groq-sdk'`:\n- `import 'groq-sdk/shims/node'` (if you're running on Node)\n- `import 'groq-sdk/shims/web'` (otherwise)\n";let t,n,i,a;try{t=fetch,n=Request,i=Response,a=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:t,Request:n,Response:i,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,s)=>({...s,body:new Bpe(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/groq/groq-typescript#file-uploads")},isFsReadStream:o=>!1}}Jh||qpe(Upe(),{auto:!0});class vu extends Error{}class er extends vu{constructor(e,t,n,i){super(`${er.makeMessage(e,t,n)}`),this.status=e,this.headers=i,this.error=t}static makeMessage(e,t,n){const i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,n,i){if(!e)return new Nb({cause:OC(t)});const a=t;return e===400?new LK(e,a,n,i):e===401?new FK(e,a,n,i):e===403?new kK(e,a,n,i):e===404?new VK(e,a,n,i):e===409?new HK(e,a,n,i):e===422?new KK(e,a,n,i):e===429?new WK(e,a,n,i):e>=500?new GK(e,a,n,i):new er(e,a,n,i)}}class wC extends er{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class Nb extends er{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class zK extends Nb{constructor({message:e}={}){super({message:e??"Request timed out."})}}class LK extends er{constructor(){super(...arguments),this.status=400}}class FK extends er{constructor(){super(...arguments),this.status=401}}class kK extends er{constructor(){super(...arguments),this.status=403}}class VK extends er{constructor(){super(...arguments),this.status=404}}class HK extends er{constructor(){super(...arguments),this.status=409}}class KK extends er{constructor(){super(...arguments),this.status=422}}class WK extends er{constructor(){super(...arguments),this.status=429}}class GK extends er{}class Hd{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;const i=new zpe;async function*a(){if(!e.body)throw t.abort(),new vu("Attempted to iterate over a response with no body");const s=new fd,u=mV(e.body);for await(const l of u)for(const c of s.decode(l)){const d=i.decode(c);d&&(yield d)}for(const l of s.flush()){const c=i.decode(l);c&&(yield c)}}async function*o(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let s=!1;try{for await(const u of a())if(!s){if(u.data.startsWith("[DONE]")){s=!0;continue}if(u.event===null){let l;try{l=JSON.parse(u.data)}catch(c){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),c}if(l&&l.error)throw new er(void 0,l.error,void 0,void 0);yield l}}s=!0}catch(u){if(u instanceof Error&&u.name==="AbortError")return;throw u}finally{s||t.abort()}}return new Hd(o,t)}static fromReadableStream(e,t){let n=!1;async function*i(){const o=new fd,s=mV(e);for await(const u of s)for(const l of o.decode(u))yield l;for(const u of o.flush())yield u}async function*a(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let o=!1;try{for await(const s of i())o||s&&(yield JSON.parse(s));o=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{o||t.abort()}}return new Hd(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),i=a=>({next:()=>{if(a.length===0){const o=n.next();e.push(o),t.push(o)}return a.shift()}});return[new Hd(()=>i(e),this.controller),new Hd(()=>i(t),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new $K({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:a,done:o}=await t.next();if(o)return i.close();const s=n.encode(JSON.stringify(a)+`
`);i.enqueue(s)}catch(a){i.error(a)}},async cancel(){var i;await((i=t.return)==null?void 0:i.call(t))}})}}class zpe{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,i]=Lpe(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}}class fd{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const n=fd.NEWLINE_CHARS.has(t[t.length-1]||"");let i=t.split(fd.NEWLINE_REGEXP);return i.length===1&&!n?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),n||(this.buffer=[i.pop()||""]),i)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new vu(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new vu(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new vu("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}fd.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);fd.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function Lpe(r,e){const t=r.indexOf(e);return t!==-1?[r.substring(0,t),e,r.substring(t+e.length)]:[r,"",""]}function mV(r){if(r[Symbol.asyncIterator])return r;const e=r.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const JK=r=>r!=null&&typeof r=="object"&&typeof r.url=="string"&&typeof r.blob=="function",XK=r=>r!=null&&typeof r=="object"&&typeof r.name=="string"&&typeof r.lastModified=="number"&&h1(r),h1=r=>r!=null&&typeof r=="object"&&typeof r.size=="number"&&typeof r.type=="string"&&typeof r.text=="function"&&typeof r.slice=="function"&&typeof r.arrayBuffer=="function",Fpe=r=>XK(r)||JK(r)||UK(r);async function ZK(r,e,t){var i;if(r=await r,t??(t=XK(r)?{lastModified:r.lastModified,type:r.type}:{}),JK(r)){const a=await r.blob();return e||(e=new URL(r.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new vC([a],e,t)}const n=await kpe(r);if(e||(e=Hpe(r)??"unknown_file"),!t.type){const a=(i=n[0])==null?void 0:i.type;typeof a=="string"&&(t={...t,type:a})}return new vC(n,e,t)}async function kpe(r){var t;let e=[];if(typeof r=="string"||ArrayBuffer.isView(r)||r instanceof ArrayBuffer)e.push(r);else if(h1(r))e.push(await r.arrayBuffer());else if(Kpe(r))for await(const n of r)e.push(n);else throw new Error(`Unexpected data type: ${typeof r}; constructor: ${(t=r==null?void 0:r.constructor)==null?void 0:t.name}; props: ${Vpe(r)}`);return e}function Vpe(r){return`[${Object.getOwnPropertyNames(r).map(t=>`"${t}"`).join(", ")}]`}function Hpe(r){var e;return oR(r.name)||oR(r.filename)||((e=oR(r.path))==null?void 0:e.split(/[\\/]/).pop())}const oR=r=>{if(typeof r=="string")return r;if(typeof Buffer<"u"&&r instanceof Buffer)return String(r)},Kpe=r=>r!=null&&typeof r=="object"&&typeof r[Symbol.asyncIterator]=="function",gV=r=>r&&typeof r=="object"&&r.body&&r[Symbol.toStringTag]==="MultipartBody",QK=async r=>{const e=await Wpe(r.body);return NK(e,r)},Wpe=async r=>{const e=new DK;return await Promise.all(Object.entries(r||{}).map(([t,n])=>SC(e,t,n))),e},SC=async(r,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")r.append(e,String(t));else if(Fpe(t)){const n=await ZK(t);r.append(e,n)}else if(Array.isArray(t))await Promise.all(t.map(n=>SC(r,e+"[]",n)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([n,i])=>SC(r,`${e}[${n}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var Qd={};async function YK(r){const{response:e}=r;if(r.options.stream)return Yd("response",e.status,e.url,e.headers,e.body),r.options.__streamClass?r.options.__streamClass.fromSSEResponse(e,r.controller):Hd.fromSSEResponse(e,r.controller);if(e.status===204)return null;if(r.options.__binaryResponse)return e;const t=e.headers.get("content-type");if((t==null?void 0:t.includes("application/json"))||(t==null?void 0:t.includes("application/vnd.api+json"))){const a=await e.json();return Yd("response",e.status,e.url,e.headers,a),a}const i=await e.text();return Yd("response",e.status,e.url,e.headers,i),i}class qb extends Promise{constructor(e,t=YK){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new qb(this.responsePromise,async t=>e(await this.parseResponse(t)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Gpe{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e4,httpAgent:i,fetch:a}){this.baseURL=e,this.maxRetries=sR("maxRetries",t),this.timeout=sR("timeout",n),this.httpAgent=i,this.fetch=a??xK}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Ype(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${ohe()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async i=>{const a=i&&h1(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:e,path:t,...i,body:a}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e){var m;const{method:t,path:n,query:i,headers:a={}}=e,o=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:gV(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,s=this.calculateContentLength(o),u=this.buildURL(n,i);"timeout"in e&&sR("timeout",e.timeout);const l=e.timeout??this.timeout,c=e.httpAgent??this.httpAgent??qK(u),d=l+1e3;typeof((m=c==null?void 0:c.options)==null?void 0:m.timeout)=="number"&&d>(c.options.timeout??0)&&(c.options.timeout=d),this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const h=this.buildHeaders({options:e,headers:a,contentLength:s});return{req:{method:t,...o&&{body:o},headers:h,...c&&{agent:c},signal:e.signal??null},url:u,timeout:l}}buildHeaders({options:e,headers:t,contentLength:n}){const i={};n&&(i["content-length"]=n);const a=this.defaultHeaders(e);return wV(i,a),wV(i,t),gV(e.body)&&Jh!=="node"&&delete i["content-type"],this.validateHeaders(i,t),i}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,n,i){return er.generate(e,t,n,i)}request(e,t=null){return new qb(this.makeRequest(e,t))}async makeRequest(e,t){var c,d;const n=await e;t==null&&(t=n.maxRetries??this.maxRetries),await this.prepareOptions(n);const{req:i,url:a,timeout:o}=this.buildRequest(n);if(await this.prepareRequest(i,{url:a,options:n}),Yd("request",a,n,i.headers),(c=n.signal)!=null&&c.aborted)throw new wC;const s=new AbortController,u=await this.fetchWithTimeout(a,i,o,s).catch(OC);if(u instanceof Error){if((d=n.signal)!=null&&d.aborted)throw new wC;if(t)return this.retryRequest(n,t);throw u.name==="AbortError"?new zK:new Nb({cause:u})}const l=Xpe(u.headers);if(!u.ok){if(t&&this.shouldRetry(u)){const b=`retrying, ${t} attempts remaining`;return Yd(`response (error; ${b})`,u.status,a,l),this.retryRequest(n,t,l)}const h=await u.text().catch(b=>OC(b).message),f=ehe(h),m=f?void 0:h;throw Yd(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,u.status,a,l,m),this.makeStatusError(u.status,f,m,l)}return{response:u,options:n,controller:s}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new Jpe(this,n,e)}buildURL(e,t){const n=rhe(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return ihe(i)||(t={...i,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,n])=>typeof n<"u").map(([t,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(t)}=`;throw new vu(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,n,i){const{signal:a,...o}=t||{};a&&a.addEventListener("abort",()=>i.abort());const s=setTimeout(()=>i.abort(),n);return this.getRequestClient().fetch.call(void 0,e,{signal:i.signal,...o}).finally(()=>{clearTimeout(s)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,n){let i;const a=n==null?void 0:n["retry-after-ms"];if(a){const s=parseFloat(a);Number.isNaN(s)||(i=s)}const o=n==null?void 0:n["retry-after"];if(o&&!i){const s=parseFloat(o);Number.isNaN(s)?i=Date.parse(o)-Date.now():i=s*1e3}if(!(i&&0<=i&&i<60*1e3)){const s=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,s)}return await nhe(i),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,o=Math.min(.5*Math.pow(2,a),8),s=1-Math.random()*.25;return o*s*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Bd}`}}class Jpe extends qb{constructor(e,t,n){super(t,async i=>new n(e,i.response,await YK(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const Xpe=r=>new Proxy(Object.fromEntries(r.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),Zpe=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bd,"X-Stainless-OS":bV(Deno.build.os),"X-Stainless-Arch":_V(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bd,"X-Stainless-OS":bV(process.platform),"X-Stainless-Arch":_V(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const r=Qpe();return r?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${r.browser}`,"X-Stainless-Runtime-Version":r.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bd,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Qpe(){if(typeof navigator>"u"||!navigator)return null;const r=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of r){const n=t.exec(navigator.userAgent);if(n){const i=n[1]||0,a=n[2]||0,o=n[3]||0;return{browser:e,version:`${i}.${a}.${o}`}}}return null}const _V=r=>r==="x32"?"x32":r==="x86_64"||r==="x64"?"x64":r==="arm"?"arm":r==="aarch64"||r==="arm64"?"arm64":r?`other:${r}`:"unknown",bV=r=>(r=r.toLowerCase(),r.includes("ios")?"iOS":r==="android"?"Android":r==="darwin"?"MacOS":r==="win32"?"Windows":r==="freebsd"?"FreeBSD":r==="openbsd"?"OpenBSD":r==="linux"?"Linux":r?`Other:${r}`:"Unknown");let yV;const Ype=()=>yV??(yV=Zpe()),ehe=r=>{try{return JSON.parse(r)}catch{return}},the=new RegExp("^(?:[a-z]+:)?//","i"),rhe=r=>the.test(r),nhe=r=>new Promise(e=>setTimeout(e,r)),sR=(r,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new vu(`${r} must be an integer`);if(e<0)throw new vu(`${r} must be a positive integer`);return e},OC=r=>r instanceof Error?r:new Error(r),vV=r=>{var e,t,n,i;if(typeof process<"u")return((e=Qd==null?void 0:Qd[r])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(i=(n=(t=Deno.env)==null?void 0:t.get)==null?void 0:n.call(t,r))==null?void 0:i.trim()};function ihe(r){if(!r)return!0;for(const e in r)return!1;return!0}function ahe(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function wV(r,e){for(const t in e){if(!ahe(e,t))continue;const n=t.toLowerCase();if(!n)continue;const i=e[t];i===null?delete r[n]:i!==void 0&&(r[n]=i)}}function Yd(r,...e){typeof process<"u"&&(Qd==null?void 0:Qd.DEBUG)==="true"&&console.log(`Groq:DEBUG:${r}`,...e)}const ohe=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)}),she=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";class Vl{constructor(e){this._client=e}}class I_ extends Vl{create(e,t){return this._client.post("/openai/v1/audio/transcriptions",QK({body:e,...t}))}}I_||(I_={});class x_ extends Vl{create(e,t){return this._client.post("/openai/v1/audio/translations",QK({body:e,...t}))}}x_||(x_={});class D_ extends Vl{constructor(){super(...arguments),this.transcriptions=new I_(this._client),this.translations=new x_(this._client)}}(function(r){r.Transcriptions=I_,r.Translations=x_})(D_||(D_={}));let $_=class extends Vl{create(e,t){return this._client.post("/openai/v1/chat/completions",{body:e,...t,stream:e.stream??!1})}};$_||($_={});class N_ extends Vl{constructor(){super(...arguments),this.completions=new $_(this._client)}}(function(r){r.Completions=$_})(N_||(N_={}));class q_ extends Vl{}q_||(q_={});class B_ extends Vl{create(e,t){return this._client.post("/openai/v1/embeddings",{body:e,...t})}}B_||(B_={});class U_ extends Vl{retrieve(e,t){return this._client.get(`/openai/v1/models/${e}`,t)}list(e){return this._client.get("/openai/v1/models",e)}delete(e,t){return this._client.delete(`/openai/v1/models/${e}`,t)}}U_||(U_={});var eW;class Ct extends Gpe{constructor({baseURL:e=vV("GROQ_BASE_URL"),apiKey:t=vV("GROQ_API_KEY"),...n}={}){if(t===void 0)throw new vu("The GROQ_API_KEY environment variable is missing or empty; either provide it, or instantiate the Groq client with an apiKey option, like new Groq({ apiKey: 'My API Key' }).");const i={apiKey:t,...n,baseURL:e||"https://api.groq.com"};if(!i.dangerouslyAllowBrowser&&she())throw new vu(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Groq({ apiKey, dangerouslyAllowBrowser: true })`);super({baseURL:i.baseURL,timeout:i.timeout??6e4,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new q_(this),this.chat=new N_(this),this.embeddings=new B_(this),this.audio=new D_(this),this.models=new U_(this),this._options=i,this.apiKey=t}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}eW=Ct;Ct.Groq=eW;Ct.GroqError=vu;Ct.APIError=er;Ct.APIConnectionError=Nb;Ct.APIConnectionTimeoutError=zK;Ct.APIUserAbortError=wC;Ct.NotFoundError=VK;Ct.ConflictError=HK;Ct.RateLimitError=WK;Ct.BadRequestError=LK;Ct.AuthenticationError=FK;Ct.InternalServerError=GK;Ct.PermissionDeniedError=kK;Ct.UnprocessableEntityError=KK;Ct.toFile=ZK;Ct.fileFromPath=BK;(function(r){r.Completions=q_,r.Chat=N_,r.Embeddings=B_,r.Audio=D_,r.Models=U_})(Ct||(Ct={}));function uhe(r){const e=r._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";default:throw new Error(`Unknown message type: ${e}`)}}function SV(r){return r.map(e=>{var n;if(typeof e.content!="string")throw new Error("Non string message content not supported");const t={role:uhe(e),content:e.content,name:e.name,function_call:e.additional_kwargs.function_call,tool_calls:e.additional_kwargs.tool_calls,tool_call_id:e.tool_call_id};return xu(e)&&((n=e.tool_calls)!=null&&n.length)?t.tool_calls=e.tool_calls.map(d6):(e.additional_kwargs.tool_calls!=null&&(t.tool_calls=e.additional_kwargs.tool_calls),e.tool_call_id!=null&&(t.tool_call_id=e.tool_call_id)),t})}function lhe(r,e){const t=r.tool_calls;switch(r.role){case"assistant":{const n=[],i=[];for(const a of t??[])try{n.push(AP(a,{returnId:!0}))}catch(o){i.push(f6(a,o.message))}return new Su({content:r.content||"",additional_kwargs:{tool_calls:t},tool_calls:n,invalid_tool_calls:i,usage_metadata:e})}default:return new hd(r.content||"",r.role??"unknown")}}function che(r,e){if(r!=null&&r.length)return r.map(t=>{var n,i;return{id:t.id,name:(n=t.function)==null?void 0:n.name,args:(i=t.function)==null?void 0:i.arguments,type:"tool_call_chunk",index:e}})}function dhe(r,e,t){const{role:n}=r,i=r.content??"";let a;r.function_call?a={function_call:r.function_call}:r.tool_calls?a={tool_calls:r.tool_calls}:a={};let o,s;if(t!=null&&t.usage&&(o={input_tokens:t.usage.prompt_tokens,output_tokens:t.usage.completion_tokens,total_tokens:t.usage.total_tokens},s=t.id),n==="user")return{message:new bm({content:i})};if(n==="assistant"){const u=che(r.tool_calls,e);return{message:new ft({content:i,additional_kwargs:a,tool_call_chunks:u?u.map(l=>({type:l.type,args:l.args,index:l.index})):void 0,usage_metadata:o,id:s}),toolCallData:u?u.map(l=>({id:l.id??"",name:l.name??"",index:l.index??e,type:"tool_call_chunk"})):void 0}}else return n==="system"?{message:new rf({content:i})}:{message:new _m({content:i,role:n})}}class fhe extends Qr{static lc_name(){return"ChatGroq"}_llmType(){return"groq"}get lc_secrets(){return{apiKey:"GROQ_API_KEY"}}constructor(e){super(e??{}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models","groq"]}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"mixtral-8x7b-32768"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"mixtral-8x7b-32768"}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0});const t=(e==null?void 0:e.apiKey)||ot("GROQ_API_KEY");if(!t)throw new Error('Groq API key not found. Please set the GROQ_API_KEY environment variable or provide the key into "apiKey"');const n={"User-Agent":"langchainjs",...(e==null?void 0:e.defaultHeaders)??{}};this.client=new Ct({apiKey:t,dangerouslyAllowBrowser:!0,baseURL:e==null?void 0:e.baseUrl,timeout:e==null?void 0:e.timeout,httpAgent:e==null?void 0:e.httpAgent,fetch:e==null?void 0:e.fetch,maxRetries:0,defaultHeaders:n,defaultQuery:e==null?void 0:e.defaultQuery}),this.apiKey=t,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.modelName=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.model=this.modelName,this.streaming=(e==null?void 0:e.streaming)??this.streaming,this.stop=(e==null?void 0:e.stopSequences)??(typeof(e==null?void 0:e.stop)=="string"?[e.stop]:e==null?void 0:e.stop)??[],this.stopSequences=this.stop,this.maxTokens=e==null?void 0:e.maxTokens}getLsParams(e){const t=this.invocationParams(e);return{ls_provider:"groq",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??this.temperature,ls_max_tokens:t.max_tokens??this.maxTokens,ls_stop:e.stop}}async completionWithRetry(e,t){return this.caller.call(async()=>this.client.chat.completions.create(e,t))}invocationParams(e){const t=super.invocationParams(e);return e.tool_choice!==void 0&&(t.tool_choice=e.tool_choice),e.tools!==void 0&&(t.tools=e.tools),e.response_format!==void 0&&(t.response_format=e.response_format),{...t,stop:e.stop??this.stopSequences,model:this.model,temperature:this.temperature,max_tokens:this.maxTokens}}bindTools(e,t){return this.bind({tools:e.map(n=>gee(n)),...t})}async*_streamResponseChunks(e,t,n){var c,d;const i=this.invocationParams(t),a=SV(e),o=await this.completionWithRetry({...i,messages:a,stream:!0},{signal:t==null?void 0:t.signal,headers:t==null?void 0:t.headers});let s="";const u=[];let l;for await(const h of o){l=h;const f=h==null?void 0:h.choices[0];if(!f)continue;(c=f.delta)!=null&&c.role&&(s=f.delta.role);const{message:m,toolCallData:p}=dhe({...f.delta,role:s},f.index,h.x_groq);if(p){const b=p.filter(_=>u.every(y=>y.id!==_.id));u.push(...b),yield new wr({message:new ft({content:"",tool_call_chunks:b}),text:""})}const g=new wr({message:m,text:f.delta.content??"",generationInfo:{finishReason:f.finish_reason}});yield g,n==null||n.handleLLMNewToken(g.text??"")}if(l&&("choices"in l&&delete l.choices,yield new wr({message:new ft({content:"",response_metadata:l}),text:""})),(d=t.signal)!=null&&d.aborted)throw new Error("AbortError")}async _generate(e,t,n){var i;if(this.streaming){const a={},o=this._streamResponseChunks(e,t,n),s={};for await(const l of o){const c=((i=l.generationInfo)==null?void 0:i.completion)??0;s[c]===void 0?s[c]=l:s[c]=s[c].concat(l)}return{generations:Object.entries(s).sort(([l],[c])=>parseInt(l,10)-parseInt(c,10)).map(([l,c])=>c),llmOutput:{estimatedTokenUsage:a}}}else return this._generateNonStreaming(e,t,n)}async _generateNonStreaming(e,t,n){var l;const i={},a=this.invocationParams(t),o=SV(e),s=await this.completionWithRetry({...a,stream:!1,messages:o},{signal:t==null?void 0:t.signal,headers:t==null?void 0:t.headers});if("usage"in s&&s.usage){const{completion_tokens:c,prompt_tokens:d,total_tokens:h}=s.usage;c&&(i.completionTokens=(i.completionTokens??0)+c),d&&(i.promptTokens=(i.promptTokens??0)+d),h&&(i.totalTokens=(i.totalTokens??0)+h)}const u=[];if("choices"in s&&s.choices)for(const c of s.choices){const d=((l=c.message)==null?void 0:l.content)??"";let h;i.totalTokens!==void 0&&(h={input_tokens:i.promptTokens??0,output_tokens:i.completionTokens??0,total_tokens:i.totalTokens});const f={text:d,message:lhe(c.message??{role:"assistant"},h)};f.generationInfo={...c.finish_reason?{finish_reason:c.finish_reason}:{},...c.logprobs?{logprobs:c.logprobs}:{}},u.push(f)}return{generations:u,llmOutput:{tokenUsage:i}}}withStructuredOutput(e,t){const n=e,i=t==null?void 0:t.name,a=t==null?void 0:t.method,o=t==null?void 0:t.includeRaw;let s=i??"extract",u,l;if(a==="jsonMode")l=this.bind({response_format:{type:"json_object"}}),TR(n)?u=eC.fromZodSchema(n):u=new tC;else if(TR(n)){const f=eb(n);l=this.bind({tools:[{type:"function",function:{name:s,description:f.description,parameters:f}}],tool_choice:{type:"function",function:{name:s}}}),u=new R_({returnSingle:!0,keyName:s,zodSchema:n})}else{let f;typeof n.name=="string"&&typeof n.parameters=="object"&&n.parameters!=null?(f=n,s=n.name):(s=n.title??s,f={name:s,description:n.description??"",parameters:n}),l=this.bind({tools:[{type:"function",function:f}],tool_choice:{type:"function",function:{name:s}}}),u=new R_({returnSingle:!0,keyName:s})}if(!o)return l.pipe(u).withConfig({runName:"ChatGroqStructuredOutput"});const c=$u.assign({parsed:(f,m)=>u.invoke(f.raw,m)}),d=$u.assign({parsed:()=>null}),h=c.withFallbacks({fallbacks:[d]});return Nr.from([{raw:l},h]).withConfig({runName:"ChatGroqStructuredOutput"})}}var pu={},OV;function phe(){if(OV)return pu;OV=1,Object.defineProperty(pu,"__esModule",{value:!0}),pu.HTTPClient=void 0,pu.matchContentType=n,pu.matchStatusCode=a,pu.matchResponse=o,pu.isConnectionError=s,pu.isTimeoutError=u,pu.isAbortError=l;const r=(c,d)=>d==null?fetch(c):fetch(c,d);class e{constructor(d={}){this.options=d,this.requestHooks=[],this.requestErrorHooks=[],this.responseHooks=[],this.fetcher=d.fetcher||r}async request(d){let h=d;for(const f of this.requestHooks){const m=await f(h);m&&(h=m)}try{const f=await this.fetcher(h);for(const m of this.responseHooks)await m(f,h);return f}catch(f){for(const m of this.requestErrorHooks)await m(f,h);throw f}}addHook(...d){if(d[0]==="beforeRequest")this.requestHooks.push(d[1]);else if(d[0]==="requestError")this.requestErrorHooks.push(d[1]);else if(d[0]==="response")this.responseHooks.push(d[1]);else throw new Error(`Invalid hook type: ${d[0]}`);return this}removeHook(...d){let h;if(d[0]==="beforeRequest")h=this.requestHooks;else if(d[0]==="requestError")h=this.requestErrorHooks;else if(d[0]==="response")h=this.responseHooks;else throw new Error(`Invalid hook type: ${d[0]}`);const f=h.findIndex(m=>m===d[1]);return f>=0&&h.splice(f,1),this}clone(){const d=new e(this.options);return d.requestHooks=this.requestHooks.slice(),d.requestErrorHooks=this.requestErrorHooks.slice(),d.responseHooks=this.responseHooks.slice(),d}}pu.HTTPClient=e;const t=/\s*;\s*/g;function n(c,d){var S;if(d==="*")return!0;let h=((S=c.headers.get("content-type"))==null?void 0:S.trim())||"application/octet-stream";h=h.toLowerCase();const f=d.toLowerCase().trim().split(t),[m="",...p]=f;if(m.split("/").length!==2)return!1;const g=h.split(t),[b="",..._]=g,[y="",v=""]=b.split("/");if(!y||!v||m!=="*/*"&&b!==m&&`${y}/*`!==m&&`*/${v}`!==m||_.length<p.length)return!1;const w=new Set(_);for(const R of p)if(!w.has(R))return!1;return!0}const i=new RegExp("^[0-9]xx$","i");function a(c,d){const h=`${c.status}`,f=Array.isArray(d)?d:[d];return f.length?f.some(m=>{const p=`${m}`;if(p==="default")return!0;if(!i.test(`${p}`))return p===h;const g=p.charAt(0);if(!g)throw new Error("Invalid status code range");const b=h.charAt(0);if(!b)throw new Error(`Invalid response status code: ${h}`);return b===g}):!1}function o(c,d,h){return a(c,d)&&n(c,h)}function s(c){if(typeof c!="object"||c==null)return!1;const d=c instanceof TypeError&&c.message.toLowerCase().startsWith("failed to fetch"),h=c instanceof TypeError&&c.message.toLowerCase().startsWith("fetch failed"),f="name"in c&&c.name==="ConnectionError",m="code"in c&&typeof c.code=="string"&&c.code.toLowerCase()==="econnreset";return d||h||m||f}function u(c){if(typeof c!="object"||c==null)return!1;const d="name"in c&&c.name==="TimeoutError",h="code"in c&&c.code===23,f="code"in c&&typeof c.code=="string"&&c.code.toLowerCase()==="econnaborted";return d||h||f}function l(c){if(typeof c!="object"||c==null)return!1;const d="name"in c&&c.name==="AbortError",h="code"in c&&c.code===20,f="code"in c&&typeof c.code=="string"&&c.code.toLowerCase()==="econnaborted";return d||h||f}return pu}var hhe=phe();class mhe extends w6{static lc_name(){return"MistralAI"}constructor(e){super(e??{}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms","mistralai"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"codestral-latest"}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"randomSeed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serverURL",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"beforeRequestHooks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestErrorHooks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"responseHooks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"httpClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.model=(e==null?void 0:e.model)??this.model,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.maxTokens=(e==null?void 0:e.maxTokens)??this.maxTokens,this.randomSeed=(e==null?void 0:e.randomSeed)??this.randomSeed,this.batchSize=(e==null?void 0:e.batchSize)??this.batchSize,this.streaming=(e==null?void 0:e.streaming)??this.streaming,this.serverURL=(e==null?void 0:e.serverURL)??this.serverURL,this.maxRetries=e==null?void 0:e.maxRetries,this.maxConcurrency=e==null?void 0:e.maxConcurrency,this.beforeRequestHooks=(e==null?void 0:e.beforeRequestHooks)??this.beforeRequestHooks,this.requestErrorHooks=(e==null?void 0:e.requestErrorHooks)??this.requestErrorHooks,this.responseHooks=(e==null?void 0:e.responseHooks)??this.responseHooks,this.httpClient=(e==null?void 0:e.httpClient)??this.httpClient;const t=(e==null?void 0:e.apiKey)??ot("MISTRAL_API_KEY");if(!t)throw new Error(`MistralAI requires an API key to be set.
Either provide one via the "apiKey" field in the constructor, or set the "MISTRAL_API_KEY" environment variable.`);this.apiKey=t,this.addAllHooksToHttpClient()}get lc_secrets(){return{apiKey:"MISTRAL_API_KEY"}}get lc_aliases(){return{apiKey:"mistral_api_key"}}_llmType(){return"mistralai"}invocationParams(e){return{model:this.model,suffix:e.suffix,temperature:this.temperature,maxTokens:this.maxTokens,topP:this.topP,randomSeed:this.randomSeed,stop:e.stop}}async _call(e,t){var o;const n={...this.invocationParams(t),prompt:e},i=await this.completionWithRetry(n,t,!1);let a=((o=i==null?void 0:i.choices)==null?void 0:o[0].message.content)??"";return Array.isArray(a)&&(a=a[0].type==="text"?a[0].text:""),a}async _generate(e,t,n){const i=IP(e,this.batchSize),a=[],o=this.invocationParams(t);for(let u=0;u<i.length;u+=1){const l=await(async()=>{var c;if(this.streaming){const d=[];for(let h=0;h<i[u].length;h+=1){const f=[];let m;const p=await this.completionWithRetry({...o,prompt:i[u][h]},t,!0);for await(const{data:g}of p){m||(m={id:g.id,object:"chat.completion",created:g.created,model:g.model});for(const b of g.choices){let _=b.delta.content??"";if(Array.isArray(_)){let y="";for(const v of _)if(v.type==="text")y+=v.text;else if(v.type==="image_url"){const w=typeof v.imageUrl=="string"?v.imageUrl:v.imageUrl.url;y+=w}_=y}if(!f[b.index])f[b.index]={index:b.index,message:{role:"assistant",content:_,toolCalls:null},finishReason:b.finishReason??"length"};else{const y=f[b.index];y.message.content+=_,y.finishReason=b.finishReason??"length"}n==null||n.handleLLMNewToken(_,{prompt:b.index,completion:b.index})}}if((c=t.signal)!=null&&c.aborted)throw new Error("AbortError");d.push({...m,choices:f})}return d}else{const d=[];for(let h=0;h<i[u].length;h+=1){const f=await this.completionWithRetry({...o,prompt:i[u][h]},t,!1);d.push(f)}return d}})();a.push(...l.map(c=>c.choices??[]))}return{generations:a.map(u=>u.map(l=>{var d;let c=((d=l.message)==null?void 0:d.content)??"";return Array.isArray(c)&&(c=c[0].type==="text"?c[0].text:""),{text:c,generationInfo:{finishReason:l.finishReason}}}))}}async completionWithRetry(e,t,n){const{Mistral:i}=await this.imports(),a=new ym({maxConcurrency:t.maxConcurrency||this.maxConcurrency,maxRetries:this.maxRetries}),o=new i({apiKey:this.apiKey,serverURL:this.serverURL,timeoutMs:t.timeout,...this.httpClient?{httpClient:this.httpClient}:{}});return a.callWithOptions({signal:t.signal},async()=>{var s,u,l;try{let c;return n?c=await o.fim.stream(e):c=await o.fim.complete(e),c}catch(c){throw((s=c.message)!=null&&s.includes("status: 400")||(u=c.message)!=null&&u.toLowerCase().includes("status 400")||(l=c.message)!=null&&l.includes("validation failed"))&&(c.status=400),c}})}async*_streamResponseChunks(e,t,n){var o;const i={...this.invocationParams(t),prompt:e},a=await this.completionWithRetry(i,t,!0);for await(const s of a){const{data:u}=s,l=u==null?void 0:u.choices[0];if(!l)continue;let c=l.delta.content??"";Array.isArray(c)&&(c=c[0].type==="text"?c[0].text:"");const d=new nl({text:c,generationInfo:{finishReason:l.finishReason,tokenUsage:u.usage}});yield d,n==null||n.handleLLMNewToken(d.text??"")}if((o=t.signal)!=null&&o.aborted)throw new Error("AbortError")}addAllHooksToHttpClient(){var e,t,n;try{if(this.removeAllHooksFromHttpClient(),[this.beforeRequestHooks,this.requestErrorHooks,this.responseHooks].some(a=>a&&a.length>0)&&!this.httpClient&&(this.httpClient=new hhe.HTTPClient),this.beforeRequestHooks)for(const a of this.beforeRequestHooks)(e=this.httpClient)==null||e.addHook("beforeRequest",a);if(this.requestErrorHooks)for(const a of this.requestErrorHooks)(t=this.httpClient)==null||t.addHook("requestError",a);if(this.responseHooks)for(const a of this.responseHooks)(n=this.httpClient)==null||n.addHook("response",a)}catch{throw new Error("Error in adding all hooks")}}removeAllHooksFromHttpClient(){var e,t,n;try{if(this.beforeRequestHooks)for(const i of this.beforeRequestHooks)(e=this.httpClient)==null||e.removeHook("beforeRequest",i);if(this.requestErrorHooks)for(const i of this.requestErrorHooks)(t=this.httpClient)==null||t.removeHook("requestError",i);if(this.responseHooks)for(const i of this.responseHooks)(n=this.httpClient)==null||n.removeHook("response",i)}catch{throw new Error("Error in removing hooks")}}removeHookFromHttpClient(e){var t,n,i;try{(t=this.httpClient)==null||t.removeHook("beforeRequest",e),(n=this.httpClient)==null||n.removeHook("requestError",e),(i=this.httpClient)==null||i.removeHook("response",e)}catch{throw new Error("Error in removing hook")}}async imports(){const{Mistral:e}=await Rl(async()=>{const{Mistral:t}=await import("./index3.js").then(n=>n.i);return{Mistral:t}},[]);return{Mistral:e}}}const m1="https://huggingface.co",tW="https://router.huggingface.co",ghe="X-HF-Bill-To",EV={"black-forest-labs":{},cerebras:{},cohere:{},"fal-ai":{},"featherless-ai":{},"fireworks-ai":{},groq:{},"hf-inference":{},hyperbolic:{},nebius:{},novita:{},nscale:{},openai:{},ovhcloud:{},replicate:{},sambanova:{},together:{}};class g1 extends Error{constructor(e){super(e),this.name="InferenceClientError"}}class $t extends g1{constructor(e){super(e),this.name="InputError"}}class rW extends g1{constructor(t,n,i){super(t);Ee(this,"httpRequest");Ee(this,"httpResponse");this.httpRequest={...n,...n.headers?{headers:{...n.headers,..."Authorization"in n.headers?{Authorization:"Bearer [redacted]"}:void 0}}:void 0},this.httpResponse=i}}class Qu extends rW{constructor(e,t,n){super(e,t,n),this.name="ProviderApiError"}}class $h extends rW{constructor(e,t,n){super(e,t,n),this.name="HubApiError"}}class xe extends g1{constructor(e){super(e),this.name="ProviderOutputError"}}function nW(r){return Array.isArray(r)?r:[r]}class kr{constructor(e,t,n=!1){Ee(this,"provider");Ee(this,"baseUrl");Ee(this,"clientSideRoutingOnly");this.provider=e,this.baseUrl=t,this.clientSideRoutingOnly=n}makeBaseUrl(e){return e.authMethod!=="provider-key"?`${tW}/${this.provider}`:this.baseUrl}makeBody(e){return"data"in e.args&&e.args.data?e.args.data:JSON.stringify(this.preparePayload(e))}makeUrl(e){const t=this.makeBaseUrl(e),n=this.makeRoute(e).replace(/^\/+/,"");return`${t}/${n}`}prepareHeaders(e,t){const n={Authorization:`Bearer ${e.accessToken}`};return t||(n["Content-Type"]="application/json"),n}}class Vr extends kr{constructor(e,t,n=!1){super(e,t,n)}makeRoute(){return"v1/chat/completions"}preparePayload(e){return{...e.args,model:e.model}}async getResponse(e){if(typeof e=="object"&&Array.isArray(e==null?void 0:e.choices)&&typeof(e==null?void 0:e.created)=="number"&&typeof(e==null?void 0:e.id)=="string"&&typeof(e==null?void 0:e.model)=="string"&&(e.system_fingerprint===void 0||e.system_fingerprint===null||typeof e.system_fingerprint=="string")&&typeof(e==null?void 0:e.usage)=="object")return e;throw new xe("Expected ChatCompletionOutput")}}class bd extends kr{constructor(e,t,n=!1){super(e,t,n)}preparePayload(e){return{...e.args,model:e.model}}makeRoute(){return"v1/completions"}async getResponse(e){const t=nW(e);if(Array.isArray(t)&&t.length>0&&t.every(n=>typeof n=="object"&&!!n&&"generated_text"in n&&typeof n.generated_text=="string"))return t[0];throw new xe("Expected Array<{generated_text: string}>")}}function iW(r){if(globalThis.Buffer)return globalThis.Buffer.from(r).toString("base64");{const e=[];return r.forEach(t=>{e.push(String.fromCharCode(t))}),globalThis.btoa(e.join(""))}}function _he(r,e){return Object.assign({},...e.map(t=>{if(r[t]!==void 0)return{[t]:r[t]}}))}function EC(r,e){return r.includes(e)}function Pt(r,e){const t=Array.isArray(e)?e:[e],n=Object.keys(r).filter(i=>!EC(t,i));return _he(r,n)}const RV=["feature-extraction","sentence-similarity"];class lt extends kr{constructor(){super("hf-inference",`${tW}/hf-inference`)}preparePayload(e){return e.args}makeUrl(e){return e.model.startsWith("http://")||e.model.startsWith("https://")?e.model:super.makeUrl(e)}makeRoute(e){return e.task&&["feature-extraction","sentence-similarity"].includes(e.task)?`models/${e.model}/pipeline/${e.task}`:`models/${e.model}`}async getResponse(e){return e}}class bhe extends lt{async getResponse(e,t,n,i){if(!e)throw new xe("Received malformed response from HF-Inference text-to-image API: response is undefined");if(typeof e=="object"){if("data"in e&&Array.isArray(e.data)&&e.data[0].b64_json){const a=e.data[0].b64_json;return i==="url"?`data:image/jpeg;base64,${a}`:await(await fetch(`data:image/jpeg;base64,${a}`)).blob()}if("output"in e&&Array.isArray(e.output))return i==="url"?e.output[0]:await(await fetch(e.output[0])).blob()}if(e instanceof Blob)return i==="url"?`data:image/jpeg;base64,${await e.arrayBuffer().then(o=>Buffer.from(o).toString("base64"))}`:e;throw new xe("Received malformed response from HF-Inference text-to-image API: expected a Blob")}}class yhe extends lt{makeUrl(e){let t;return e.model.startsWith("http://")||e.model.startsWith("https://")?t=e.model.trim():t=`${this.makeBaseUrl(e)}/models/${e.model}`,t=t.replace(/\/+$/,""),t.endsWith("/v1")?t+="/chat/completions":t.endsWith("/chat/completions")||(t+="/v1/chat/completions"),t}preparePayload(e){return{...e.args,model:e.model}}async getResponse(e){return e}}class vhe extends lt{async getResponse(e){const t=nW(e);if(Array.isArray(t)&&t.every(n=>"generated_text"in n&&typeof(n==null?void 0:n.generated_text)=="string"))return t==null?void 0:t[0];throw new xe("Received malformed response from HF-Inference text generation API: expected Array<{generated_text: string}>")}}class whe extends lt{async getResponse(e){if(Array.isArray(e)&&e.every(t=>typeof t=="object"&&t!==null&&typeof t.label=="string"&&typeof t.score=="number"))return e;throw new xe("Received malformed response from HF-Inference audio-classification API: expected Array<{label: string, score: number}> but received different format")}}class She extends lt{async getResponse(e){return e}async preparePayloadAsync(e){return"data"in e?e:{...Pt(e,"inputs"),data:e.inputs}}}class Ohe extends lt{async getResponse(e){if(!Array.isArray(e))throw new xe("Received malformed response from HF-Inference audio-to-audio API: expected Array");if(!e.every(t=>typeof t=="object"&&t&&"label"in t&&typeof t.label=="string"&&"content-type"in t&&typeof t["content-type"]=="string"&&"blob"in t&&typeof t.blob=="string"))throw new xe("Received malformed response from HF-Inference audio-to-audio API: expected Array<{label: string, audio: Blob}>");return e}}class Ehe extends lt{async getResponse(e){if(Array.isArray(e)&&e.every(t=>typeof t=="object"&&!!t&&typeof(t==null?void 0:t.answer)=="string"&&(typeof t.end=="number"||typeof t.end>"u")&&(typeof t.score=="number"||typeof t.score>"u")&&(typeof t.start=="number"||typeof t.start>"u")))return e[0];throw new xe("Received malformed response from HF-Inference document-question-answering API: expected Array<{answer: string, end: number, score: number, start: number}>")}}class Rhe extends lt{async getResponse(e){const t=(n,i,a=0)=>a>i?!1:n.every(o=>Array.isArray(o))?n.every(o=>t(o,i,a+1)):n.every(o=>typeof o=="number");if(Array.isArray(e)&&t(e,3,0))return e;throw new xe("Received malformed response from HF-Inference feature-extraction API: expected Array<number[][][] | number[][] | number[] | number>")}}class Che extends lt{async getResponse(e){if(Array.isArray(e)&&e.every(t=>typeof t.label=="string"&&typeof t.score=="number"))return e;throw new xe("Received malformed response from HF-Inference image-classification API: expected Array<{label: string, score: number}>")}}class Phe extends lt{async getResponse(e){if(Array.isArray(e)&&e.every(t=>typeof t.label=="string"&&typeof t.mask=="string"&&(t.score===void 0||typeof t.score=="number")))return e;throw new xe("Received malformed response from HF-Inference image-segmentation API: expected Array<{label: string, mask: string, score: number}>")}}class jhe extends lt{async getResponse(e){if(typeof(e==null?void 0:e.generated_text)!="string")throw new xe("Received malformed response from HF-Inference image-to-text API: expected {generated_text: string}");return e}}class The extends lt{async preparePayloadAsync(e){return e.parameters?{...e,inputs:iW(new Uint8Array(e.inputs instanceof ArrayBuffer?e.inputs:await e.inputs.arrayBuffer()))}:{...e,model:e.model,data:e.inputs}}async getResponse(e){if(e instanceof Blob)return e;throw new xe("Received malformed response from HF-Inference image-to-image API: expected Blob")}}class Ahe extends lt{async getResponse(e){if(Array.isArray(e)&&e.every(t=>typeof t.label=="string"&&typeof t.score=="number"&&typeof t.box.xmin=="number"&&typeof t.box.ymin=="number"&&typeof t.box.xmax=="number"&&typeof t.box.ymax=="number"))return e;throw new xe("Received malformed response from HF-Inference object-detection API: expected Array<{label: string, score: number, box: {xmin: number, ymin: number, xmax: number, ymax: number}}>")}}class Mhe extends lt{async getResponse(e){if(Array.isArray(e)&&e.every(t=>typeof t.label=="string"&&typeof t.score=="number"))return e;throw new xe("Received malformed response from HF-Inference zero-shot-image-classification API: expected Array<{label: string, score: number}>")}}class Ihe extends lt{async getResponse(e){const t=e==null?void 0:e[0];if(Array.isArray(t)&&t.every(n=>typeof(n==null?void 0:n.label)=="string"&&typeof n.score=="number"))return t;throw new xe("Received malformed response from HF-Inference text-classification API: expected Array<{label: string, score: number}>")}}class xhe extends lt{async getResponse(e){if(Array.isArray(e)?e.every(t=>typeof t=="object"&&!!t&&typeof t.answer=="string"&&typeof t.end=="number"&&typeof t.score=="number"&&typeof t.start=="number"):typeof e=="object"&&e&&typeof e.answer=="string"&&typeof e.end=="number"&&typeof e.score=="number"&&typeof e.start=="number")return Array.isArray(e)?e[0]:e;throw new xe("Received malformed response from HF-Inference question-answering API: expected Array<{answer: string, end: number, score: number, start: number}>")}}class Dhe extends lt{async getResponse(e){if(Array.isArray(e)&&e.every(t=>typeof t.score=="number"&&typeof t.sequence=="string"&&typeof t.token=="number"&&typeof t.token_str=="string"))return e;throw new xe("Received malformed response from HF-Inference fill-mask API: expected Array<{score: number, sequence: string, token: number, token_str: string}>")}}class $he extends lt{async getResponse(e){if(Array.isArray(e)&&e.every(t=>Array.isArray(t.labels)&&t.labels.every(n=>typeof n=="string")&&Array.isArray(t.scores)&&t.scores.every(n=>typeof n=="number")&&typeof t.sequence=="string"))return e;throw new xe("Received malformed response from HF-Inference zero-shot-classification API: expected Array<{labels: string[], scores: number[], sequence: string}>")}}class Nhe extends lt{async getResponse(e){if(Array.isArray(e)&&e.every(t=>typeof t=="number"))return e;throw new xe("Received malformed response from HF-Inference sentence-similarity API: expected Array<number>")}}class z_ extends lt{static validate(e){return typeof e=="object"&&!!e&&"aggregator"in e&&typeof e.aggregator=="string"&&"answer"in e&&typeof e.answer=="string"&&"cells"in e&&Array.isArray(e.cells)&&e.cells.every(t=>typeof t=="string")&&"coordinates"in e&&Array.isArray(e.coordinates)&&e.coordinates.every(t=>Array.isArray(t)&&t.every(n=>typeof n=="number"))}async getResponse(e){if(Array.isArray(e)&&Array.isArray(e)?e.every(t=>z_.validate(t)):z_.validate(e))return Array.isArray(e)?e[0]:e;throw new xe("Received malformed response from HF-Inference table-question-answering API: expected {aggregator: string, answer: string, cells: string[], coordinates: number[][]}")}}class qhe extends lt{async getResponse(e){if(Array.isArray(e)&&e.every(t=>typeof t.end=="number"&&typeof t.entity_group=="string"&&typeof t.score=="number"&&typeof t.start=="number"&&typeof t.word=="string"))return e;throw new xe("Received malformed response from HF-Inference token-classification API: expected Array<{end: number, entity_group: string, score: number, start: number, word: string}>")}}class Bhe extends lt{async getResponse(e){if(Array.isArray(e)&&e.every(t=>typeof(t==null?void 0:t.translation_text)=="string"))return(e==null?void 0:e.length)===1?e==null?void 0:e[0]:e;throw new xe("Received malformed response from HF-Inference translation API: expected Array<{translation_text: string}>")}}class Uhe extends lt{async getResponse(e){if(Array.isArray(e)&&e.every(t=>typeof(t==null?void 0:t.summary_text)=="string"))return e==null?void 0:e[0];throw new xe("Received malformed response from HF-Inference summarization API: expected Array<{summary_text: string}>")}}class zhe extends lt{async getResponse(e){return e}}class Lhe extends lt{async getResponse(e){if(Array.isArray(e)&&e.every(t=>typeof t=="number"))return e;throw new xe("Received malformed response from HF-Inference tabular-classification API: expected Array<number>")}}class Fhe extends lt{async getResponse(e){if(Array.isArray(e)&&e.every(t=>typeof t=="object"&&!!t&&typeof(t==null?void 0:t.answer)=="string"&&typeof t.score=="number"))return e[0];throw new xe("Received malformed response from HF-Inference visual-question-answering API: expected Array<{answer: string, score: number}>")}}class khe extends lt{async getResponse(e){if(Array.isArray(e)&&e.every(t=>typeof t=="number"))return e;throw new xe("Received malformed response from HF-Inference tabular-regression API: expected Array<number>")}}class Vhe extends lt{async getResponse(e){return e}}const uR=new Map;function Hhe(r,e){return e?Array.isArray(e)?e:Object.entries(e).map(([t,n])=>({provider:t,hfModelId:r,providerId:n.providerId,status:n.status,task:n.task})):[]}async function aW(r,e,t){var i;let n;if(uR.has(r))n=uR.get(r);else{const a=`${m1}/api/models/${r}?expand[]=inferenceProviderMapping`,o=await((t==null?void 0:t.fetch)??fetch)(a,{headers:e!=null&&e.startsWith("hf_")?{Authorization:`Bearer ${e}`}:{}});if(!o.ok)if((i=o.headers.get("Content-Type"))!=null&&i.startsWith("application/json")){const u=await o.json();if("error"in u&&typeof u.error=="string")throw new $h(`Failed to fetch inference provider mapping for model ${r}: ${u.error}`,{url:a,method:"GET"},{requestId:o.headers.get("x-request-id")??"",status:o.status,body:u})}else throw new $h(`Failed to fetch inference provider mapping for model ${r}`,{url:a,method:"GET"},{requestId:o.headers.get("x-request-id")??"",status:o.status,body:await o.text()});let s=null;try{s=await o.json()}catch{throw new $h(`Failed to fetch inference provider mapping for model ${r}: malformed API response, invalid JSON`,{url:a,method:"GET"},{requestId:o.headers.get("x-request-id")??"",status:o.status,body:await o.text()})}if(!(s!=null&&s.inferenceProviderMapping))throw new $h(`We have not been able to find inference provider information for model ${r}.`,{url:a,method:"GET"},{requestId:o.headers.get("x-request-id")??"",status:o.status,body:await o.text()});n=Hhe(r,s.inferenceProviderMapping),uR.set(r,n)}return n}async function Khe(r,e){if(EV[r.provider][r.modelId])return EV[r.provider][r.modelId];const n=(await aW(r.modelId,r.accessToken,e)).find(i=>i.provider===r.provider);if(n){const i=r.provider==="hf-inference"&&EC(RV,r.task)?RV:[r.task];if(!EC(i,n.task))throw new $t(`Model ${r.modelId} is not supported for task ${r.task} and provider ${r.provider}. Supported task: ${n.task}.`);return n.status==="staging"&&console.warn(`Model ${r.modelId} is in staging mode for provider ${r.provider}. Meant for test purposes only.`),n}return null}async function Whe(r,e,t){var n;if(t){if(r)throw new $t("Specifying both endpointUrl and provider is not supported.");return"hf-inference"}if(r||(console.log("Defaulting to 'auto' which will select the first provider available for the model, sorted by the user's order in https://hf.co/settings/inference-providers."),r="auto"),r==="auto"){if(!e)throw new $t("Specifying a model is required when provider is 'auto'");r=(n=(await aW(e))[0])==null?void 0:n.provider}if(!r)throw new $t(`No Inference Provider available for model ${e}.`);return r}function _1(r){return new Promise(e=>{setTimeout(()=>e(),r)})}const Ghe="https://api.us1.bfl.ai";class Jhe extends kr{constructor(){super("black-forest-labs",Ghe)}preparePayload(e){return{...Pt(e.args,["inputs","parameters"]),...e.args.parameters,prompt:e.args.inputs}}prepareHeaders(e,t){const n={Authorization:e.authMethod!=="provider-key"?`Bearer ${e.accessToken}`:`X-Key ${e.accessToken}`};return t||(n["Content-Type"]="application/json"),n}makeRoute(e){if(!e)throw new $t("Params are required");return`/v1/${e.model}`}async getResponse(e,t,n,i){const a=new URL(e.polling_url);for(let o=0;o<5;o++){await _1(1e3),console.debug(`Polling Black Forest Labs API for the result... ${o+1}/5`),a.searchParams.set("attempt",o.toString(10));const s=await fetch(a,{headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Qu("Failed to fetch result from black forest labs API",{url:a.toString(),method:"GET",headers:{"Content-Type":"application/json"}},{requestId:s.headers.get("x-request-id")??"",status:s.status,body:await s.text()});const u=await s.json();if(typeof u=="object"&&u&&"status"in u&&typeof u.status=="string"&&u.status==="Ready"&&"result"in u&&typeof u.result=="object"&&u.result&&"sample"in u.result&&typeof u.result.sample=="string")return i==="url"?u.result.sample:await(await fetch(u.result.sample)).blob()}throw new xe("Timed out while waiting for the result from black forest labs API - aborting after 5 attempts")}}class Xhe extends Vr{constructor(){super("cerebras","https://api.cerebras.ai")}}class Zhe extends Vr{constructor(){super("cohere","https://api.cohere.com")}makeRoute(){return"/compatibility/v1/chat/completions"}}function Bb(r){return/^http(s?):/.test(r)||r.startsWith("/")}const CV=["audio/mpeg","audio/mp4","audio/wav","audio/x-wav"];class Ub extends kr{constructor(e){super("fal-ai",e||"https://fal.run")}preparePayload(e){return e.args}makeRoute(e){return`/${e.model}`}prepareHeaders(e,t){const n={Authorization:e.authMethod!=="provider-key"?`Bearer ${e.accessToken}`:`Key ${e.accessToken}`};return t||(n["Content-Type"]="application/json"),n}}function Qhe(r,e){return`${m1}/${r}/resolve/main/${e}`}class Yhe extends Ub{preparePayload(e){var n;const t={...Pt(e.args,["inputs","parameters"]),...e.args.parameters,sync_mode:!0,prompt:e.args.inputs};return((n=e.mapping)==null?void 0:n.adapter)==="lora"&&e.mapping.adapterWeightsPath&&(t.loras=[{path:Qhe(e.mapping.hfModelId,e.mapping.adapterWeightsPath),scale:1}],e.mapping.providerId==="fal-ai/lora"&&(t.model_name="stabilityai/stable-diffusion-xl-base-1.0")),t}async getResponse(e,t){if(typeof e=="object"&&"images"in e&&Array.isArray(e.images)&&e.images.length>0&&"url"in e.images[0]&&typeof e.images[0].url=="string")return t==="url"?e.images[0].url:await(await fetch(e.images[0].url)).blob();throw new xe("Received malformed response from Fal.ai text-to-image API")}}class eme extends Ub{constructor(){super("https://queue.fal.run")}makeRoute(e){return e.authMethod!=="provider-key"?`/${e.model}?_subdomain=queue`:`/${e.model}`}preparePayload(e){return{...Pt(e.args,["inputs","parameters"]),...e.args.parameters,prompt:e.args.inputs}}async getResponse(e,t,n){if(!t||!n)throw new $t("URL and headers are required for text-to-video task");if(!e.request_id)throw new xe("Received malformed response from Fal.ai text-to-video API: no request ID found in the response");let a=e.status;const o=new URL(t),s=`${o.protocol}//${o.host}${o.host==="router.huggingface.co"?"/fal-ai":""}`,u=new URL(e.response_url).pathname,l=o.search,c=`${s}${u}/status${l}`,d=`${s}${u}${l}`;for(;a!=="COMPLETED";){await _1(500);const m=await fetch(c,{headers:n});if(!m.ok)throw new Qu("Failed to fetch response status from fal-ai API",{url:c,method:"GET"},{requestId:m.headers.get("x-request-id")??"",status:m.status,body:await m.text()});try{a=(await m.json()).status}catch{throw new xe("Failed to parse status response from fal-ai API: received malformed response")}}const h=await fetch(d,{headers:n});let f;try{f=await h.json()}catch{throw new xe("Failed to parse result response from fal-ai API: received malformed response")}if(typeof f=="object"&&f&&"video"in f&&typeof f.video=="object"&&f.video&&"url"in f.video&&typeof f.video.url=="string"&&Bb(f.video.url))return await(await fetch(f.video.url)).blob();throw new xe(`Received malformed response from Fal.ai text-to-video API: expected { video: { url: string } } result format, got instead: ${JSON.stringify(f)}`)}}class tme extends Ub{prepareHeaders(e,t){const n=super.prepareHeaders(e,t);return n["Content-Type"]="application/json",n}async getResponse(e){const t=e;if(typeof(t==null?void 0:t.text)!="string")throw new xe(`Received malformed response from Fal.ai Automatic Speech Recognition API: expected { text: string } format, got instead: ${JSON.stringify(e)}`);return{text:t.text}}async preparePayloadAsync(e){const t="data"in e&&e.data instanceof Blob?e.data:"inputs"in e?e.inputs:void 0,n=t==null?void 0:t.type;if(!n)throw new $t("Unable to determine the input's content-type. Make sure your are passing a Blob when using provider fal-ai.");if(!CV.includes(n))throw new $t(`Provider fal-ai does not support blob type ${n} - supported content types are: ${CV.join(", ")}`);const i=iW(new Uint8Array(await t.arrayBuffer()));return{..."data"in e?Pt(e,"data"):Pt(e,"inputs"),audio_url:`data:${n};base64,${i}`}}}class rme extends Ub{preparePayload(e){return{...Pt(e.args,["inputs","parameters"]),...e.args.parameters,text:e.args.inputs}}async getResponse(e){var i;const t=e;if(typeof((i=t==null?void 0:t.audio)==null?void 0:i.url)!="string")throw new xe(`Received malformed response from Fal.ai Text-to-Speech API: expected { audio: { url: string } } format, got instead: ${JSON.stringify(e)}`);const n=await fetch(t.audio.url);if(!n.ok)throw new Qu(`Failed to fetch audio from ${t.audio.url}: ${n.statusText}`,{url:t.audio.url,method:"GET",headers:{"Content-Type":"application/json"}},{requestId:n.headers.get("x-request-id")??"",status:n.status,body:await n.text()});try{return await n.blob()}catch(a){throw new Qu(`Failed to fetch audio from ${t.audio.url}: ${a instanceof Error?a.message:String(a)}`,{url:t.audio.url,method:"GET",headers:{"Content-Type":"application/json"}},{requestId:n.headers.get("x-request-id")??"",status:n.status,body:await n.text()})}}}const oW="https://api.featherless.ai";class nme extends Vr{constructor(){super("featherless-ai",oW)}}class ime extends bd{constructor(){super("featherless-ai",oW)}preparePayload(e){return{model:e.model,...Pt(e.args,["inputs","parameters"]),...e.args.parameters?{max_tokens:e.args.parameters.max_new_tokens,...Pt(e.args.parameters,"max_new_tokens")}:void 0,prompt:e.args.inputs}}async getResponse(e){if(typeof e=="object"&&"choices"in e&&Array.isArray(e==null?void 0:e.choices)&&typeof(e==null?void 0:e.model)=="string")return{generated_text:e.choices[0].text};throw new xe("Received malformed response from Featherless AI text generation API")}}class ame extends Vr{constructor(){super("fireworks-ai","https://api.fireworks.ai")}makeRoute(){return"/inference/v1/chat/completions"}}const sW="https://api.groq.com";class ome extends bd{constructor(){super("groq",sW)}makeRoute(){return"/openai/v1/chat/completions"}}class sme extends Vr{constructor(){super("groq",sW)}makeRoute(){return"/openai/v1/chat/completions"}}const b1="https://api.hyperbolic.xyz";class ume extends Vr{constructor(){super("hyperbolic",b1)}}class lme extends bd{constructor(){super("hyperbolic",b1)}makeRoute(){return"v1/chat/completions"}preparePayload(e){return{messages:[{content:e.args.inputs,role:"user"}],...e.args.parameters?{max_tokens:e.args.parameters.max_new_tokens,...Pt(e.args.parameters,"max_new_tokens")}:void 0,...Pt(e.args,["inputs","parameters"]),model:e.model}}async getResponse(e){if(typeof e=="object"&&"choices"in e&&Array.isArray(e==null?void 0:e.choices)&&typeof(e==null?void 0:e.model)=="string")return{generated_text:e.choices[0].message.content};throw new xe("Received malformed response from Hyperbolic text generation API")}}class cme extends kr{constructor(){super("hyperbolic",b1)}makeRoute(e){return"/v1/images/generations"}preparePayload(e){return{...Pt(e.args,["inputs","parameters"]),...e.args.parameters,prompt:e.args.inputs,model_name:e.model}}async getResponse(e,t,n,i){if(typeof e=="object"&&"images"in e&&Array.isArray(e.images)&&e.images[0]&&typeof e.images[0].image=="string")return i==="url"?`data:image/jpeg;base64,${e.images[0].image}`:fetch(`data:image/jpeg;base64,${e.images[0].image}`).then(a=>a.blob());throw new xe("Received malformed response from Hyperbolic text-to-image API")}}const zb="https://api.studio.nebius.ai";class dme extends Vr{constructor(){super("nebius",zb)}}class fme extends bd{constructor(){super("nebius",zb)}}class pme extends kr{constructor(){super("nebius",zb)}preparePayload(e){return{...Pt(e.args,["inputs","parameters"]),...e.args.parameters,response_format:"b64_json",prompt:e.args.inputs,model:e.model}}makeRoute(){return"v1/images/generations"}async getResponse(e,t,n,i){if(typeof e=="object"&&"data"in e&&Array.isArray(e.data)&&e.data.length>0&&"b64_json"in e.data[0]&&typeof e.data[0].b64_json=="string"){const a=e.data[0].b64_json;return i==="url"?`data:image/jpeg;base64,${a}`:fetch(`data:image/jpeg;base64,${a}`).then(o=>o.blob())}throw new xe("Received malformed response from Nebius text-to-image API")}}class hme extends kr{constructor(){super("nebius",zb)}preparePayload(e){return{input:e.args.inputs,model:e.model}}makeRoute(){return"v1/embeddings"}async getResponse(e){return e.data.map(t=>t.embedding)}}const y1="https://api.novita.ai";class mme extends bd{constructor(){super("novita",y1)}makeRoute(){return"/v3/openai/chat/completions"}}class gme extends Vr{constructor(){super("novita",y1)}makeRoute(){return"/v3/openai/chat/completions"}}class _me extends kr{constructor(){super("novita",y1)}makeRoute(e){return`/v3/async/${e.model}`}preparePayload(e){const{num_inference_steps:t,...n}=e.args.parameters??{};return{...Pt(e.args,["inputs","parameters"]),...n,steps:t,prompt:e.args.inputs}}async getResponse(e,t,n){if(!t||!n)throw new $t("URL and headers are required for text-to-video task");const i=e.task_id;if(!i)throw new xe("Received malformed response from Novita text-to-video API: no task ID found in the response");const a=new URL(t),s=`${`${a.protocol}//${a.host}${a.host==="router.huggingface.co"?"/novita":""}`}/v3/async/task-result?task_id=${i}`;let u="",l;for(;u!=="TASK_STATUS_SUCCEED"&&u!=="TASK_STATUS_FAILED";){await _1(500);const c=await fetch(s,{headers:n});if(!c.ok)throw new Qu("Failed to fetch task result",{url:s,method:"GET",headers:n},{requestId:c.headers.get("x-request-id")??"",status:c.status,body:await c.text()});try{if(l=await c.json(),l&&typeof l=="object"&&"task"in l&&l.task&&typeof l.task=="object"&&"status"in l.task&&typeof l.task.status=="string")u=l.task.status;else throw new xe("Received malformed response from Novita text-to-video API: failed to get task status")}catch{throw new xe("Received malformed response from Novita text-to-video API: failed to parse task result")}}if(u==="TASK_STATUS_FAILED")throw new xe("Novita text-to-video task failed");if(typeof l=="object"&&l&&"videos"in l&&typeof l.videos=="object"&&l.videos&&Array.isArray(l.videos)&&l.videos.length>0&&"video_url"in l.videos[0]&&typeof l.videos[0].video_url=="string"&&Bb(l.videos[0].video_url))return await(await fetch(l.videos[0].video_url)).blob();throw new xe(`Received malformed response from Novita text-to-video API: expected { videos: [{ video_url: string }] } format, got instead: ${JSON.stringify(l)}`)}}const uW="https://inference.api.nscale.com";class bme extends Vr{constructor(){super("nscale",uW)}}class yme extends kr{constructor(){super("nscale",uW)}preparePayload(e){return{...Pt(e.args,["inputs","parameters"]),...e.args.parameters,response_format:"b64_json",prompt:e.args.inputs,model:e.model}}makeRoute(){return"v1/images/generations"}async getResponse(e,t,n,i){if(typeof e=="object"&&"data"in e&&Array.isArray(e.data)&&e.data.length>0&&"b64_json"in e.data[0]&&typeof e.data[0].b64_json=="string"){const a=e.data[0].b64_json;return i==="url"?`data:image/jpeg;base64,${a}`:fetch(`data:image/jpeg;base64,${a}`).then(o=>o.blob())}throw new xe("Received malformed response from Nscale text-to-image API")}}const vme="https://api.openai.com";class wme extends Vr{constructor(){super("openai",vme,!0)}}const lW="https://oai.endpoints.kepler.ai.cloud.ovh.net";class Sme extends Vr{constructor(){super("ovhcloud",lW)}}class Ome extends bd{constructor(){super("ovhcloud",lW)}preparePayload(e){return{model:e.model,...Pt(e.args,["inputs","parameters"]),...e.args.parameters?{max_tokens:e.args.parameters.max_new_tokens,...Pt(e.args.parameters,"max_new_tokens")}:void 0,prompt:e.args.inputs}}async getResponse(e){if(typeof e=="object"&&"choices"in e&&Array.isArray(e==null?void 0:e.choices)&&typeof(e==null?void 0:e.model)=="string")return{generated_text:e.choices[0].text};throw new xe("Received malformed response from OVHcloud text generation API")}}class v1 extends kr{constructor(e){super("replicate",e||"https://api.replicate.com")}makeRoute(e){return e.model.includes(":")?"v1/predictions":`v1/models/${e.model}/predictions`}preparePayload(e){return{input:{...Pt(e.args,["inputs","parameters"]),...e.args.parameters,prompt:e.args.inputs},version:e.model.includes(":")?e.model.split(":")[1]:void 0}}prepareHeaders(e,t){const n={Authorization:`Bearer ${e.accessToken}`,Prefer:"wait"};return t||(n["Content-Type"]="application/json"),n}makeUrl(e){const t=this.makeBaseUrl(e);return e.model.includes(":")?`${t}/v1/predictions`:`${t}/v1/models/${e.model}/predictions`}}class Eme extends v1{preparePayload(e){var t;return{input:{...Pt(e.args,["inputs","parameters"]),...e.args.parameters,prompt:e.args.inputs,lora_weights:((t=e.mapping)==null?void 0:t.adapter)==="lora"&&e.mapping.adapterWeightsPath?`https://huggingface.co/${e.mapping.hfModelId}`:void 0},version:e.model.includes(":")?e.model.split(":")[1]:void 0}}async getResponse(e,t,n,i){if(typeof e=="object"&&"output"in e&&Array.isArray(e.output)&&e.output.length>0&&typeof e.output[0]=="string")return i==="url"?e.output[0]:await(await fetch(e.output[0])).blob();throw new xe("Received malformed response from Replicate text-to-image API")}}class Rme extends v1{preparePayload(e){const t=super.preparePayload(e),n=t.input;if(typeof n=="object"&&n!==null&&"prompt"in n){const i=n;i.text=i.prompt,delete i.prompt}return t}async getResponse(e){if(e instanceof Blob)return e;if(e&&typeof e=="object"&&"output"in e){if(typeof e.output=="string")return await(await fetch(e.output)).blob();if(Array.isArray(e.output))return await(await fetch(e.output[0])).blob()}throw new xe("Received malformed response from Replicate text-to-speech API")}}class Cme extends v1{async getResponse(e){if(typeof e=="object"&&e&&"output"in e&&typeof e.output=="string"&&Bb(e.output))return await(await fetch(e.output)).blob();throw new xe("Received malformed response from Replicate text-to-video API")}}class Pme extends Vr{constructor(){super("sambanova","https://api.sambanova.ai")}}class jme extends kr{constructor(){super("sambanova","https://api.sambanova.ai")}makeRoute(){return"/v1/embeddings"}async getResponse(e){if(typeof e=="object"&&"data"in e&&Array.isArray(e.data))return e.data.map(t=>t.embedding);throw new xe("Received malformed response from Sambanova feature-extraction (embeddings) API")}preparePayload(e){return{model:e.model,input:e.args.inputs,...e.args}}}const w1="https://api.together.xyz";class Tme extends Vr{constructor(){super("together",w1)}}class Ame extends bd{constructor(){super("together",w1)}preparePayload(e){return{model:e.model,...e.args,prompt:e.args.inputs}}async getResponse(e){if(typeof e=="object"&&"choices"in e&&Array.isArray(e==null?void 0:e.choices)&&typeof(e==null?void 0:e.model)=="string")return{generated_text:e.choices[0].text};throw new xe("Received malformed response from Together text generation API")}}class Mme extends kr{constructor(){super("together",w1)}makeRoute(){return"v1/images/generations"}preparePayload(e){return{...Pt(e.args,["inputs","parameters"]),...e.args.parameters,prompt:e.args.inputs,response_format:"base64",model:e.model}}async getResponse(e,t){if(typeof e=="object"&&"data"in e&&Array.isArray(e.data)&&e.data.length>0&&"b64_json"in e.data[0]&&typeof e.data[0].b64_json=="string"){const n=e.data[0].b64_json;return t==="url"?`data:image/jpeg;base64,${n}`:fetch(`data:image/jpeg;base64,${n}`).then(i=>i.blob())}throw new xe("Received malformed response from Together text-to-image API")}}const lR={"black-forest-labs":{"text-to-image":new Jhe},cerebras:{conversational:new Xhe},cohere:{conversational:new Zhe},"fal-ai":{"text-to-image":new Yhe,"text-to-speech":new rme,"text-to-video":new eme,"automatic-speech-recognition":new tme},"featherless-ai":{conversational:new nme,"text-generation":new ime},"hf-inference":{"text-to-image":new bhe,conversational:new yhe,"text-generation":new vhe,"text-classification":new Ihe,"question-answering":new xhe,"audio-classification":new whe,"automatic-speech-recognition":new She,"fill-mask":new Dhe,"feature-extraction":new Rhe,"image-classification":new Che,"image-segmentation":new Phe,"document-question-answering":new Ehe,"image-to-text":new jhe,"object-detection":new Ahe,"audio-to-audio":new Ohe,"zero-shot-image-classification":new Mhe,"zero-shot-classification":new $he,"image-to-image":new The,"sentence-similarity":new Nhe,"table-question-answering":new z_,"tabular-classification":new Lhe,"text-to-speech":new zhe,"token-classification":new qhe,translation:new Bhe,summarization:new Uhe,"visual-question-answering":new Fhe,"tabular-regression":new khe,"text-to-audio":new Vhe},"fireworks-ai":{conversational:new ame},groq:{conversational:new sme,"text-generation":new ome},hyperbolic:{"text-to-image":new cme,conversational:new ume,"text-generation":new lme},nebius:{"text-to-image":new pme,conversational:new dme,"text-generation":new fme,"feature-extraction":new hme},novita:{conversational:new gme,"text-generation":new mme,"text-to-video":new _me},nscale:{"text-to-image":new yme,conversational:new bme},openai:{conversational:new wme},ovhcloud:{conversational:new Sme,"text-generation":new Ome},replicate:{"text-to-image":new Eme,"text-to-speech":new Rme,"text-to-video":new Cme},sambanova:{conversational:new Pme,"feature-extraction":new jme},together:{"text-to-image":new Mme,conversational:new Tme,"text-generation":new Ame}};function Ime(r,e){if(r==="auto")return new lt;if(!(r in lR))throw new $t(`Provider '${r}' not supported. Available providers: ${Object.keys(lR)}`);const t=lR[r];if(!t||!(e in t))throw new $t(`Task '${e}' not supported for provider '${r}'. Available tasks: ${Object.keys(t??{})}`);return t[e]}const xme="4.0.6",Dme="@huggingface/inference";let cR=null;async function $me(r,e,t){const{model:n}=r,i=e.provider,{task:a}=t??{};if(r.endpointUrl&&i!=="hf-inference")throw new $t("Cannot use endpointUrl with a third-party provider.");if(n&&Bb(n))throw new $t("Model URLs are no longer supported. Use endpointUrl instead.");if(r.endpointUrl)return PV(n??r.endpointUrl,e,r,void 0,t);if(!n&&!a)throw new $t("No model provided, and no task has been specified.");const o=n??await Nme(a);if(e.clientSideRoutingOnly&&!n)throw new $t(`Provider ${i} requires a model ID to be passed directly.`);const s=e.clientSideRoutingOnly?{provider:i,providerId:Bme(n,i),hfModelId:n,status:"live",task:a}:await Khe({modelId:o,task:a,provider:i,accessToken:r.accessToken},{fetch:t==null?void 0:t.fetch});if(!s)throw new $t(`We have not been able to find inference provider information for model ${o}.`);return PV(s.providerId,e,r,s,t)}function PV(r,e,t,n,i){const{accessToken:a,endpointUrl:o,provider:s,model:u,...l}=t,c=e.provider,{includeCredentials:d,task:h,signal:f,billTo:m}=i??{},p=(()=>{if(e.clientSideRoutingOnly&&a&&a.startsWith("hf_"))throw new $t(`Provider ${c} is closed-source and does not support HF tokens.`);return a?a.startsWith("hf_")?"hf-token":"provider-key":d==="include"?"credentials-include":"none"})(),g=o??r,b=e.makeUrl({authMethod:p,model:g,task:h}),_=e.prepareHeaders({accessToken:a,authMethod:p},"data"in t&&!!t.data);m&&(_[ghe]=m);const v=[`${Dme}/${xme}`,typeof navigator<"u"?navigator.userAgent:void 0].filter(P=>P!==void 0).join(" ");_["User-Agent"]=v;const w=e.makeBody({args:l,model:r,task:h,mapping:n});let S;typeof d=="string"?S=d:d===!0&&(S="include");const R={headers:_,method:"POST",body:w,...S?{credentials:S}:void 0,signal:f};return{url:b,info:R}}async function Nme(r){cR||(cR=await qme());const e=cR[r];if(((e==null?void 0:e.models.length)??0)<=0)throw new $t(`No default model defined for task ${r}, please define the model explicitly.`);return e.models[0].id}async function qme(){const r=`${m1}/api/tasks`,e=await fetch(r);if(!e.ok)throw new $h("Failed to load tasks definitions from Hugging Face Hub.",{url:r,method:"GET"},{requestId:e.headers.get("x-request-id")??"",status:e.status,body:await e.text()});return await e.json()}function Bme(r,e){if(!r.startsWith(`${e}/`))throw new $t(`Models from ${e} must be prefixed by "${e}/". Got "${r}".`);return r.slice(e.length+1)}function Ng(r){const e=r;return JSON.parse(JSON.stringify({...e,data:e.data?"[Blob or ArrayBuffer]":null}))}async function cW(r,e,t){var u;const{url:n,info:i}=await $me(r,e,t),a=await((t==null?void 0:t.fetch)??fetch)(n,i),o={url:n,info:i};if((t==null?void 0:t.retry_on_error)!==!1&&a.status===503)return cW(r,e,t);if(!a.ok){const l=a.headers.get("Content-Type");if(["application/json","application/problem+json"].some(d=>l==null?void 0:l.startsWith(d))){const d=await a.json();throw[400,422,404,500].includes(a.status)&&(t!=null&&t.chatCompletion)?new Qu(`Provider ${r.provider} does not seem to support chat completion for model ${r.model} . Error: ${JSON.stringify(d.error)}`,{url:n,method:i.method??"GET",headers:i.headers,body:Ng(r)},{requestId:a.headers.get("x-request-id")??"",status:a.status,body:d}):typeof d.error=="string"||typeof d.detail=="string"||typeof d.message=="string"?new Qu(`Failed to perform inference: ${d.error??d.detail??d.message}`,{url:n,method:i.method??"GET",headers:i.headers,body:Ng(r)},{requestId:a.headers.get("x-request-id")??"",status:a.status,body:d}):new Qu("Failed to perform inference: an HTTP error occurred when requesting the provider.",{url:n,method:i.method??"GET",headers:i.headers,body:Ng(r)},{requestId:a.headers.get("x-request-id")??"",status:a.status,body:d})}const c=l!=null&&l.startsWith("text/plain;")?await a.text():void 0;throw new Qu(`Failed to perform inference: ${c??"an HTTP error occurred when requesting the provider"}`,{url:n,method:i.method??"GET",headers:i.headers,body:Ng(r)},{requestId:a.headers.get("x-request-id")??"",status:a.status,body:c??""})}return(u=a.headers.get("Content-Type"))!=null&&u.startsWith("application/json")?{data:await a.json(),requestContext:o}:{data:await a.blob(),requestContext:o}}async function Ume(r,e){const t=await Whe(r.provider,r.model,r.endpointUrl),n=Ime(t,"text-generation"),{data:i}=await cW(r,n,{...e,task:"text-generation"});return n.getResponse(i)}var ce=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Comment:"Comment"}),ml=class{constructor(r,e){this.value=r,this.type=e}};function jV(r){return/\w/.test(r)}function wh(r){return/[0-9]/.test(r)}var zme=[["{%",ce.OpenStatement],["%}",ce.CloseStatement],["{{",ce.OpenExpression],["}}",ce.CloseExpression],["(",ce.OpenParen],[")",ce.CloseParen],["{",ce.OpenCurlyBracket],["}",ce.CloseCurlyBracket],["[",ce.OpenSquareBracket],["]",ce.CloseSquareBracket],[",",ce.Comma],[".",ce.Dot],[":",ce.Colon],["|",ce.Pipe],["<=",ce.ComparisonBinaryOperator],[">=",ce.ComparisonBinaryOperator],["==",ce.ComparisonBinaryOperator],["!=",ce.ComparisonBinaryOperator],["<",ce.ComparisonBinaryOperator],[">",ce.ComparisonBinaryOperator],["+",ce.AdditiveBinaryOperator],["-",ce.AdditiveBinaryOperator],["~",ce.AdditiveBinaryOperator],["*",ce.MultiplicativeBinaryOperator],["/",ce.MultiplicativeBinaryOperator],["%",ce.MultiplicativeBinaryOperator],["=",ce.Equals]],Lme=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function Fme(r,e={}){return r.endsWith(`
`)&&(r=r.slice(0,-1)),e.lstrip_blocks&&(r=r.replace(/^[ \t]*({[#%-])/gm,"$1")),e.trim_blocks&&(r=r.replace(/([#%-]})\n/g,"$1")),r.replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{").replace(/-#}\s*/g,"#}").replace(/\s*{#-/g,"{#").replace(/{%\s*generation\s*%}.+?{%\s*endgeneration\s*%}/gs,"")}function kme(r,e={}){var s,u;const t=[],n=Fme(r,e);let i=0,a=0;const o=l=>{let c="";for(;l(n[i]);){if(n[i]==="\\"){if(++i,i>=n.length)throw new SyntaxError("Unexpected end of input");const d=n[i++],h=Lme.get(d);if(h===void 0)throw new SyntaxError(`Unexpected escaped character: ${d}`);c+=h;continue}if(c+=n[i++],i>=n.length)throw new SyntaxError("Unexpected end of input")}return c};e:for(;i<n.length;){const l=(s=t.at(-1))==null?void 0:s.type;if(l===void 0||l===ce.CloseStatement||l===ce.CloseExpression||l===ce.Comment){let d="";for(;i<n.length&&!(n[i]==="{"&&(n[i+1]==="%"||n[i+1]==="{"||n[i+1]==="#"));)d+=n[i++];if(d.length>0){t.push(new ml(d,ce.Text));continue}}if(n[i]==="{"&&n[i+1]==="#"){i+=2;let d="";for(;n[i]!=="#"||n[i+1]!=="}";){if(i+2>=n.length)throw new SyntaxError("Missing end of comment tag");d+=n[i++]}t.push(new ml(d,ce.Comment)),i+=2;continue}o(d=>/\s/.test(d));const c=n[i];if(c==="-"||c==="+"){const d=(u=t.at(-1))==null?void 0:u.type;if(d===ce.Text||d===void 0)throw new SyntaxError(`Unexpected character: ${c}`);switch(d){case ce.Identifier:case ce.NumericLiteral:case ce.StringLiteral:case ce.CloseParen:case ce.CloseSquareBracket:break;default:{++i;const h=o(wh);t.push(new ml(`${c}${h}`,h.length>0?ce.NumericLiteral:ce.UnaryOperator));continue}}}for(const[d,h]of zme){if(d==="}}"&&a>0)continue;if(n.slice(i,i+d.length)===d){t.push(new ml(d,h)),h===ce.OpenExpression?a=0:h===ce.OpenCurlyBracket?++a:h===ce.CloseCurlyBracket&&--a,i+=d.length;continue e}}if(c==="'"||c==='"'){++i;const d=o(h=>h!==c);t.push(new ml(d,ce.StringLiteral)),++i;continue}if(wh(c)){let d=o(wh);if(n[i]==="."&&wh(n[i+1])){++i;const h=o(wh);d=`${d}.${h}`}t.push(new ml(d,ce.NumericLiteral));continue}if(jV(c)){const d=o(jV);t.push(new ml(d,ce.Identifier));continue}throw new SyntaxError(`Unexpected character: ${c}`)}return t}var Pu=class{constructor(){Ee(this,"type","Statement")}},Vme=class extends Pu{constructor(e){super();Ee(this,"type","Program");this.body=e}},Hme=class extends Pu{constructor(e,t,n){super();Ee(this,"type","If");this.test=e,this.body=t,this.alternate=n}},Kme=class extends Pu{constructor(e,t,n,i){super();Ee(this,"type","For");this.loopvar=e,this.iterable=t,this.body=n,this.defaultBlock=i}},Wme=class extends Pu{constructor(){super(...arguments);Ee(this,"type","Break")}},Gme=class extends Pu{constructor(){super(...arguments);Ee(this,"type","Continue")}},Jme=class extends Pu{constructor(e,t,n){super();Ee(this,"type","Set");this.assignee=e,this.value=t,this.body=n}},Xme=class extends Pu{constructor(e,t,n){super();Ee(this,"type","Macro");this.name=e,this.args=t,this.body=n}},Zme=class extends Pu{constructor(e){super();Ee(this,"type","Comment");this.value=e}},Hr=class extends Pu{constructor(){super(...arguments);Ee(this,"type","Expression")}},Qme=class extends Hr{constructor(e,t,n){super();Ee(this,"type","MemberExpression");this.object=e,this.property=t,this.computed=n}},TV=class extends Hr{constructor(e,t){super();Ee(this,"type","CallExpression");this.callee=e,this.args=t}},Id=class extends Hr{constructor(e){super();Ee(this,"type","Identifier");this.value=e}},Pf=class extends Hr{constructor(e){super();Ee(this,"type","Literal");this.value=e}},Yme=class extends Pf{constructor(){super(...arguments);Ee(this,"type","IntegerLiteral")}},ege=class extends Pf{constructor(){super(...arguments);Ee(this,"type","FloatLiteral")}},AV=class extends Pf{constructor(){super(...arguments);Ee(this,"type","StringLiteral")}},tge=class extends Pf{constructor(){super(...arguments);Ee(this,"type","ArrayLiteral")}},MV=class extends Pf{constructor(){super(...arguments);Ee(this,"type","TupleLiteral")}},rge=class extends Pf{constructor(){super(...arguments);Ee(this,"type","ObjectLiteral")}},Sh=class extends Hr{constructor(e,t,n){super();Ee(this,"type","BinaryExpression");this.operator=e,this.left=t,this.right=n}},nge=class extends Hr{constructor(e,t){super();Ee(this,"type","FilterExpression");this.operand=e,this.filter=t}},ige=class extends Pu{constructor(e,t){super();Ee(this,"type","FilterStatement");this.filter=e,this.body=t}},age=class extends Hr{constructor(e,t){super();Ee(this,"type","SelectExpression");this.lhs=e,this.test=t}},oge=class extends Hr{constructor(e,t,n){super();Ee(this,"type","TestExpression");this.operand=e,this.negate=t,this.test=n}},sge=class extends Hr{constructor(e,t){super();Ee(this,"type","UnaryExpression");this.operator=e,this.argument=t}},uge=class extends Hr{constructor(e=void 0,t=void 0,n=void 0){super();Ee(this,"type","SliceExpression");this.start=e,this.stop=t,this.step=n}},lge=class extends Hr{constructor(e,t){super();Ee(this,"type","KeywordArgumentExpression");this.key=e,this.value=t}},cge=class extends Hr{constructor(e){super();Ee(this,"type","SpreadExpression");this.argument=e}},dge=class extends Pu{constructor(e,t,n){super();Ee(this,"type","CallStatement");this.call=e,this.callerArgs=t,this.body=n}},fge=class extends Hr{constructor(e,t,n){super();Ee(this,"type","Ternary");this.condition=e,this.trueExpr=t,this.falseExpr=n}};function pge(r){const e=new Vme([]);let t=0;function n(I,q){const T=r[t++];if(!T||T.type!==I)throw new Error(`Parser Error: ${q}. ${T.type} !== ${I}.`);return T}function i(I){if(!u(I))throw new SyntaxError(`Expected ${I}`);++t}function a(){switch(r[t].type){case ce.Comment:return new Zme(r[t++].value);case ce.Text:return l();case ce.OpenStatement:return c();case ce.OpenExpression:return d();default:throw new SyntaxError(`Unexpected token type: ${r[t].type}`)}}function o(...I){return t+I.length<=r.length&&I.every((q,T)=>q===r[t+T].type)}function s(...I){var q,T,V;return((q=r[t])==null?void 0:q.type)===ce.OpenStatement&&((T=r[t+1])==null?void 0:T.type)===ce.Identifier&&I.includes((V=r[t+1])==null?void 0:V.value)}function u(...I){return t+I.length<=r.length&&I.every((q,T)=>r[t+T].type==="Identifier"&&q===r[t+T].value)}function l(){return new AV(n(ce.Text,"Expected text token").value)}function c(){if(n(ce.OpenStatement,"Expected opening statement token"),r[t].type!==ce.Identifier)throw new SyntaxError(`Unknown statement, got ${r[t].type}`);const I=r[t].value;let q;switch(I){case"set":++t,q=h();break;case"if":++t,q=f(),n(ce.OpenStatement,"Expected {% token"),i("endif"),n(ce.CloseStatement,"Expected %} token");break;case"macro":++t,q=m(),n(ce.OpenStatement,"Expected {% token"),i("endmacro"),n(ce.CloseStatement,"Expected %} token");break;case"for":++t,q=g(),n(ce.OpenStatement,"Expected {% token"),i("endfor"),n(ce.CloseStatement,"Expected %} token");break;case"call":{++t;let T=null;o(ce.OpenParen)&&(T=A());const V=oe();if(V.type!=="Identifier")throw new SyntaxError("Expected identifier following call statement");const re=A();n(ce.CloseStatement,"Expected closing statement token");const Z=[];for(;!s("endcall");)Z.push(a());n(ce.OpenStatement,"Expected '{%'"),i("endcall"),n(ce.CloseStatement,"Expected closing statement token");const fe=new TV(V,re);q=new dge(fe,T,Z);break}case"break":++t,n(ce.CloseStatement,"Expected closing statement token"),q=new Wme;break;case"continue":++t,n(ce.CloseStatement,"Expected closing statement token"),q=new Gme;break;case"filter":{++t;let T=oe();T instanceof Id&&o(ce.OpenParen)&&(T=C(T)),n(ce.CloseStatement,"Expected closing statement token");const V=[];for(;!s("endfilter");)V.push(a());n(ce.OpenStatement,"Expected '{%'"),i("endfilter"),n(ce.CloseStatement,"Expected '%}'"),q=new ige(T,V);break}default:throw new SyntaxError(`Unknown statement type: ${I}`)}return q}function d(){n(ce.OpenExpression,"Expected opening expression token");const I=b();return n(ce.CloseExpression,"Expected closing expression token"),I}function h(){const I=p();let q=null;const T=[];if(o(ce.Equals))++t,q=p();else{for(n(ce.CloseStatement,"Expected %} token");!s("endset");)T.push(a());n(ce.OpenStatement,"Expected {% token"),i("endset")}return n(ce.CloseStatement,"Expected closing statement token"),new Jme(I,q,T)}function f(){const I=b();n(ce.CloseStatement,"Expected closing statement token");const q=[],T=[];for(;!s("elif","else","endif");)q.push(a());if(s("elif")){++t,++t;const V=f();T.push(V)}else if(s("else"))for(++t,++t,n(ce.CloseStatement,"Expected closing statement token");!s("endif");)T.push(a());return new Hme(I,q,T)}function m(){const I=oe();if(I.type!=="Identifier")throw new SyntaxError("Expected identifier following macro statement");const q=A();n(ce.CloseStatement,"Expected closing statement token");const T=[];for(;!s("endmacro");)T.push(a());return new Xme(I,q,T)}function p(I=!1){const q=I?oe:b,T=[q()],V=o(ce.Comma);for(;V&&(++t,T.push(q()),!!o(ce.Comma)););return V?new MV(T):T[0]}function g(){const I=p(!0);if(!(I instanceof Id||I instanceof MV))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${I.type} instead`);if(!u("in"))throw new SyntaxError("Expected `in` keyword following loop variable");++t;const q=b();n(ce.CloseStatement,"Expected closing statement token");const T=[];for(;!s("endfor","else");)T.push(a());const V=[];if(s("else"))for(++t,++t,n(ce.CloseStatement,"Expected closing statement token");!s("endfor");)V.push(a());return new Kme(I,q,T,V)}function b(){return _()}function _(){const I=y();if(u("if")){++t;const q=y();if(u("else")){++t;const T=_();return new fge(q,I,T)}else return new age(I,q)}return I}function y(){let I=v();for(;u("or");){const q=r[t];++t;const T=v();I=new Sh(q,I,T)}return I}function v(){let I=w();for(;u("and");){const q=r[t];++t;const T=w();I=new Sh(q,I,T)}return I}function w(){let I;for(;u("not");){const q=r[t];++t;const T=w();I=new sge(q,T)}return I??S()}function S(){let I=R();for(;;){let q;if(u("not","in"))q=new ml("not in",ce.Identifier),t+=2;else if(u("in"))q=r[t++];else if(o(ce.ComparisonBinaryOperator))q=r[t++];else break;const T=R();I=new Sh(q,I,T)}return I}function R(){let I=z();for(;o(ce.AdditiveBinaryOperator);){const q=r[t];++t;const T=z();I=new Sh(q,I,T)}return I}function P(){const I=U(oe());return o(ce.OpenParen)?C(I):I}function C(I){let q=new TV(I,A());return q=U(q),o(ce.OpenParen)&&(q=C(q)),q}function A(){n(ce.OpenParen,"Expected opening parenthesis for arguments list");const I=M();return n(ce.CloseParen,"Expected closing parenthesis for arguments list"),I}function M(){const I=[];for(;!o(ce.CloseParen);){let q;if(r[t].type===ce.MultiplicativeBinaryOperator&&r[t].value==="*"){++t;const T=b();q=new cge(T)}else if(q=b(),o(ce.Equals)){if(++t,!(q instanceof Id))throw new SyntaxError("Expected identifier for keyword argument");const T=b();q=new lge(q,T)}I.push(q),o(ce.Comma)&&++t}return I}function G(){const I=[];let q=!1;for(;!o(ce.CloseSquareBracket);)o(ce.Colon)?(I.push(void 0),++t,q=!0):(I.push(b()),o(ce.Colon)&&(++t,q=!0));if(I.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(q){if(I.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new uge(...I)}return I[0]}function U(I){for(;o(ce.Dot)||o(ce.OpenSquareBracket);){const q=r[t];++t;let T;const V=q.type===ce.OpenSquareBracket;if(V)T=G(),n(ce.CloseSquareBracket,"Expected closing square bracket");else if(T=oe(),T.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");I=new Qme(I,T,V)}return I}function z(){let I=W();for(;o(ce.MultiplicativeBinaryOperator);){const q=r[t++],T=W();I=new Sh(q,I,T)}return I}function W(){let I=Y();for(;u("is");){++t;const q=u("not");q&&++t;const T=oe();if(!(T instanceof Id))throw new SyntaxError("Expected identifier for the test");I=new oge(I,q,T)}return I}function Y(){let I=P();for(;o(ce.Pipe);){++t;let q=oe();if(!(q instanceof Id))throw new SyntaxError("Expected identifier for the filter");o(ce.OpenParen)&&(q=C(q)),I=new nge(I,q)}return I}function oe(){const I=r[t++];switch(I.type){case ce.NumericLiteral:{const q=I.value;return q.includes(".")?new ege(Number(q)):new Yme(Number(q))}case ce.StringLiteral:{let q=I.value;for(;o(ce.StringLiteral);)q+=r[t++].value;return new AV(q)}case ce.Identifier:return new Id(I.value);case ce.OpenParen:{const q=p();return n(ce.CloseParen,"Expected closing parenthesis, got ${tokens[current].type} instead."),q}case ce.OpenSquareBracket:{const q=[];for(;!o(ce.CloseSquareBracket);)q.push(b()),o(ce.Comma)&&++t;return++t,new tge(q)}case ce.OpenCurlyBracket:{const q=new Map;for(;!o(ce.CloseCurlyBracket);){const T=b();n(ce.Colon,"Expected colon between key and value in object literal");const V=b();q.set(T,V),o(ce.Comma)&&++t}return++t,new rge(q)}default:throw new SyntaxError(`Unexpected token: ${I.type}`)}}for(;t<r.length;)e.body.push(a());return e}function hge(r,e,t=1){e===void 0&&(e=r,r=0);const n=[];for(let i=r;i<e;i+=t)n.push(i);return n}function IV(r,e,t,n=1){const i=Math.sign(n);i>=0?(e=(e??(e=0))<0?Math.max(r.length+e,0):Math.min(e,r.length),t=(t??(t=r.length))<0?Math.max(r.length+t,0):Math.min(t,r.length)):(e=(e??(e=r.length-1))<0?Math.max(r.length+e,-1):Math.min(e,r.length-1),t=(t??(t=-1))<-1?Math.max(r.length+t,-1):Math.min(t,r.length-1));const a=[];for(let o=e;i*o<i*t;o+=n)a.push(r[o]);return a}function mge(r){return r.replace(/\b\w/g,e=>e.toUpperCase())}function gge(r){return _ge(new Date,r)}function _ge(r,e){const t=new Intl.DateTimeFormat(void 0,{month:"long"}),n=new Intl.DateTimeFormat(void 0,{month:"short"}),i=a=>a<10?"0"+a:a.toString();return e.replace(/%[YmdbBHM%]/g,a=>{switch(a){case"%Y":return r.getFullYear().toString();case"%m":return i(r.getMonth()+1);case"%d":return i(r.getDate());case"%b":return n.format(r);case"%B":return t.format(r);case"%H":return i(r.getHours());case"%M":return i(r.getMinutes());case"%%":return"%";default:return a}})}function bge(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function yge(r,e,t,n){if(n===0)return r;let i=n==null||n<0?1/0:n;const a=e.length===0?new RegExp("(?=)","gu"):new RegExp(bge(e),"gu");return r.replaceAll(a,o=>i>0?(--i,t):o)}var xV=class extends Error{},DV=class extends Error{},Bu=class{constructor(r=void 0){Ee(this,"type","RuntimeValue");Ee(this,"value");Ee(this,"builtins",new Map);this.value=r}__bool__(){return new Ze(!!this.value)}toString(){return String(this.value)}},We=class extends Bu{constructor(){super(...arguments);Ee(this,"type","IntegerValue")}},St=class extends Bu{constructor(){super(...arguments);Ee(this,"type","FloatValue")}toString(){return this.value%1===0?this.value.toFixed(1):this.value.toString()}},Te=class extends Bu{constructor(){super(...arguments);Ee(this,"type","StringValue");Ee(this,"builtins",new Map([["upper",new vt(()=>new Te(this.value.toUpperCase()))],["lower",new vt(()=>new Te(this.value.toLowerCase()))],["strip",new vt(()=>new Te(this.value.trim()))],["title",new vt(()=>new Te(mge(this.value)))],["capitalize",new vt(()=>new Te(this.value.charAt(0).toUpperCase()+this.value.slice(1)))],["length",new We(this.value.length)],["rstrip",new vt(()=>new Te(this.value.trimEnd()))],["lstrip",new vt(()=>new Te(this.value.trimStart()))],["startswith",new vt(e=>{if(e.length===0)throw new Error("startswith() requires at least one argument");const t=e[0];if(t instanceof Te)return new Ze(this.value.startsWith(t.value));if(t instanceof rt){for(const n of t.value){if(!(n instanceof Te))throw new Error("startswith() tuple elements must be strings");if(this.value.startsWith(n.value))return new Ze(!0)}return new Ze(!1)}throw new Error("startswith() argument must be a string or tuple of strings")})],["endswith",new vt(e=>{if(e.length===0)throw new Error("endswith() requires at least one argument");const t=e[0];if(t instanceof Te)return new Ze(this.value.endsWith(t.value));if(t instanceof rt){for(const n of t.value){if(!(n instanceof Te))throw new Error("endswith() tuple elements must be strings");if(this.value.endsWith(n.value))return new Ze(!0)}return new Ze(!1)}throw new Error("endswith() argument must be a string or tuple of strings")})],["split",new vt(e=>{const t=e[0]??new dr;if(!(t instanceof Te||t instanceof dr))throw new Error("sep argument must be a string or null");const n=e[1]??new We(-1);if(!(n instanceof We))throw new Error("maxsplit argument must be a number");let i=[];if(t instanceof dr){const a=this.value.trimStart();for(const{0:o,index:s}of a.matchAll(/\S+/g)){if(n.value!==-1&&i.length>=n.value&&s!==void 0){i.push(o+a.slice(s+o.length));break}i.push(o)}}else{if(t.value==="")throw new Error("empty separator");i=this.value.split(t.value),n.value!==-1&&i.length>n.value&&i.push(i.splice(n.value).join(t.value))}return new rt(i.map(a=>new Te(a)))})],["replace",new vt(e=>{if(e.length<2)throw new Error("replace() requires at least two arguments");const t=e[0],n=e[1];if(!(t instanceof Te&&n instanceof Te))throw new Error("replace() arguments must be strings");let i;if(e.length>2?e[2].type==="KeywordArgumentsValue"?i=e[2].value.get("count")??new dr:i=e[2]:i=new dr,!(i instanceof We||i instanceof dr))throw new Error("replace() count argument must be a number or null");return new Te(yge(this.value,t.value,n.value,i.value))})]]))}},Ze=class extends Bu{constructor(){super(...arguments);Ee(this,"type","BooleanValue")}},yr=class extends Bu{constructor(){super(...arguments);Ee(this,"type","ObjectValue");Ee(this,"builtins",new Map([["get",new vt(([e,t])=>{if(!(e instanceof Te))throw new Error(`Object key must be a string: got ${e.type}`);return this.value.get(e.value)??t??new dr})],["items",new vt(()=>this.items())],["keys",new vt(()=>this.keys())],["values",new vt(()=>this.values())]]))}__bool__(){return new Ze(this.value.size>0)}items(){return new rt(Array.from(this.value.entries()).map(([e,t])=>new rt([new Te(e),t])))}keys(){return new rt(Array.from(this.value.keys()).map(e=>new Te(e)))}values(){return new rt(Array.from(this.value.values()))}},dR=class extends yr{constructor(){super(...arguments);Ee(this,"type","KeywordArgumentsValue")}},rt=class extends Bu{constructor(){super(...arguments);Ee(this,"type","ArrayValue");Ee(this,"builtins",new Map([["length",new We(this.value.length)]]))}__bool__(){return new Ze(this.value.length>0)}},vge=class extends rt{constructor(){super(...arguments);Ee(this,"type","TupleValue")}},vt=class extends Bu{constructor(){super(...arguments);Ee(this,"type","FunctionValue")}},dr=class extends Bu{constructor(){super(...arguments);Ee(this,"type","NullValue")}},Vt=class extends Bu{constructor(){super(...arguments);Ee(this,"type","UndefinedValue")}},rd=class{constructor(r){Ee(this,"variables",new Map([["namespace",new vt(r=>{if(r.length===0)return new yr(new Map);if(r.length!==1||!(r[0]instanceof yr))throw new Error("`namespace` expects either zero arguments or a single object argument");return r[0]})]]));Ee(this,"tests",new Map([["boolean",r=>r.type==="BooleanValue"],["callable",r=>r instanceof vt],["odd",r=>{if(!(r instanceof We))throw new Error(`cannot odd on ${r.type}`);return r.value%2!==0}],["even",r=>{if(!(r instanceof We))throw new Error(`cannot even on ${r.type}`);return r.value%2===0}],["false",r=>r.type==="BooleanValue"&&!r.value],["true",r=>r.type==="BooleanValue"&&r.value],["none",r=>r.type==="NullValue"],["string",r=>r.type==="StringValue"],["number",r=>r instanceof We||r instanceof St],["integer",r=>r instanceof We],["iterable",r=>r.type==="ArrayValue"||r.type==="StringValue"],["mapping",r=>r.type==="ObjectValue"],["lower",r=>{const e=r.value;return r.type==="StringValue"&&e===e.toLowerCase()}],["upper",r=>{const e=r.value;return r.type==="StringValue"&&e===e.toUpperCase()}],["none",r=>r.type==="NullValue"],["defined",r=>r.type!=="UndefinedValue"],["undefined",r=>r.type==="UndefinedValue"],["equalto",(r,e)=>r.value===e.value],["eq",(r,e)=>r.value===e.value]]));this.parent=r}set(r,e){return this.declareVariable(r,r_(e))}declareVariable(r,e){if(this.variables.has(r))throw new SyntaxError(`Variable already declared: ${r}`);return this.variables.set(r,e),e}setVariable(r,e){return this.variables.set(r,e),e}resolve(r){if(this.variables.has(r))return this;if(this.parent)return this.parent.resolve(r);throw new Error(`Unknown variable: ${r}`)}lookupVariable(r){try{return this.resolve(r).variables.get(r)??new Vt}catch{return new Vt}}};function wge(r){r.set("false",!1),r.set("true",!0),r.set("none",null),r.set("raise_exception",e=>{throw new Error(e)}),r.set("range",hge),r.set("strftime_now",gge),r.set("True",!0),r.set("False",!1),r.set("None",null)}var Sge=class{constructor(r){Ee(this,"global");this.global=r??new rd}run(r){return this.evaluate(r,this.global)}evaluateBinaryExpression(r,e){const t=this.evaluate(r.left,e);switch(r.operator.value){case"and":return t.__bool__().value?this.evaluate(r.right,e):t;case"or":return t.__bool__().value?t:this.evaluate(r.right,e)}const n=this.evaluate(r.right,e);switch(r.operator.value){case"==":return new Ze(t.value==n.value);case"!=":return new Ze(t.value!=n.value)}if(t instanceof Vt||n instanceof Vt){if(n instanceof Vt&&["in","not in"].includes(r.operator.value))return new Ze(r.operator.value==="not in");throw new Error(`Cannot perform operation ${r.operator.value} on undefined values`)}else{if(t instanceof dr||n instanceof dr)throw new Error("Cannot perform operation on null values");if(r.operator.value==="~")return new Te(t.value.toString()+n.value.toString());if((t instanceof We||t instanceof St)&&(n instanceof We||n instanceof St)){const i=t.value,a=n.value;switch(r.operator.value){case"+":case"-":case"*":{const o=r.operator.value==="+"?i+a:r.operator.value==="-"?i-a:i*a;return t instanceof St||n instanceof St?new St(o):new We(o)}case"/":return new St(i/a);case"%":{const o=i%a;return t instanceof St||n instanceof St?new St(o):new We(o)}case"<":return new Ze(i<a);case">":return new Ze(i>a);case">=":return new Ze(i>=a);case"<=":return new Ze(i<=a)}}else if(t instanceof rt&&n instanceof rt)switch(r.operator.value){case"+":return new rt(t.value.concat(n.value))}else if(n instanceof rt){const i=n.value.find(a=>a.value===t.value)!==void 0;switch(r.operator.value){case"in":return new Ze(i);case"not in":return new Ze(!i)}}}if(t instanceof Te||n instanceof Te)switch(r.operator.value){case"+":return new Te(t.value.toString()+n.value.toString())}if(t instanceof Te&&n instanceof Te)switch(r.operator.value){case"in":return new Ze(n.value.includes(t.value));case"not in":return new Ze(!n.value.includes(t.value))}if(t instanceof Te&&n instanceof yr)switch(r.operator.value){case"in":return new Ze(n.value.has(t.value));case"not in":return new Ze(!n.value.has(t.value))}throw new SyntaxError(`Unknown operator "${r.operator.value}" between ${t.type} and ${n.type}`)}evaluateArguments(r,e){const t=[],n=new Map;for(const i of r)if(i.type==="SpreadExpression"){const a=i,o=this.evaluate(a.argument,e);if(!(o instanceof rt))throw new Error(`Cannot unpack non-iterable type: ${o.type}`);for(const s of o.value)t.push(s)}else if(i.type==="KeywordArgumentExpression"){const a=i;n.set(a.key.value,this.evaluate(a.value,e))}else{if(n.size>0)throw new Error("Positional arguments must come before keyword arguments");t.push(this.evaluate(i,e))}return[t,n]}applyFilter(r,e,t){if(e.type==="Identifier"){const n=e;if(n.value==="tojson")return new Te(Xh(r));if(r instanceof rt)switch(n.value){case"list":return r;case"first":return r.value[0];case"last":return r.value[r.value.length-1];case"length":return new We(r.value.length);case"reverse":return new rt(r.value.reverse());case"sort":return new rt(r.value.sort((i,a)=>{if(i.type!==a.type)throw new Error(`Cannot compare different types: ${i.type} and ${a.type}`);switch(i.type){case"IntegerValue":case"FloatValue":return i.value-a.value;case"StringValue":return i.value.localeCompare(a.value);default:throw new Error(`Cannot compare type: ${i.type}`)}}));case"join":return new Te(r.value.map(i=>i.value).join(""));case"string":return new Te(Xh(r));case"unique":{const i=new Set,a=[];for(const o of r.value)i.has(o.value)||(i.add(o.value),a.push(o));return new rt(a)}default:throw new Error(`Unknown ArrayValue filter: ${n.value}`)}else if(r instanceof Te)switch(n.value){case"length":case"upper":case"lower":case"title":case"capitalize":{const i=r.builtins.get(n.value);if(i instanceof vt)return i.value([],t);if(i instanceof We)return i;throw new Error(`Unknown StringValue filter: ${n.value}`)}case"trim":return new Te(r.value.trim());case"indent":return new Te(r.value.split(`
`).map((i,a)=>a===0||i.length===0?i:"    "+i).join(`
`));case"join":case"string":return r;case"int":{const i=parseInt(r.value,10);return new We(isNaN(i)?0:i)}case"float":{const i=parseFloat(r.value);return new St(isNaN(i)?0:i)}default:throw new Error(`Unknown StringValue filter: ${n.value}`)}else if(r instanceof We||r instanceof St)switch(n.value){case"abs":return r instanceof We?new We(Math.abs(r.value)):new St(Math.abs(r.value));case"int":return new We(Math.floor(r.value));case"float":return new St(r.value);default:throw new Error(`Unknown NumericValue filter: ${n.value}`)}else if(r instanceof yr)switch(n.value){case"items":return new rt(Array.from(r.value.entries()).map(([i,a])=>new rt([new Te(i),a])));case"length":return new We(r.value.size);default:throw new Error(`Unknown ObjectValue filter: ${n.value}`)}else if(r instanceof Ze)switch(n.value){case"bool":return new Ze(r.value);case"int":return new We(r.value?1:0);case"float":return new St(r.value?1:0);case"string":return new Te(r.value?"true":"false");default:throw new Error(`Unknown BooleanValue filter: ${n.value}`)}throw new Error(`Cannot apply filter "${n.value}" to type: ${r.type}`)}else if(e.type==="CallExpression"){const n=e;if(n.callee.type!=="Identifier")throw new Error(`Unknown filter: ${n.callee.type}`);const i=n.callee.value;if(i==="tojson"){const[,a]=this.evaluateArguments(n.args,t),o=a.get("indent")??new dr;if(!(o instanceof We||o instanceof dr))throw new Error("If set, indent must be a number");return new Te(Xh(r,o.value))}else if(i==="join"){let a;if(r instanceof Te)a=Array.from(r.value);else if(r instanceof rt)a=r.value.map(l=>l.value);else throw new Error(`Cannot apply filter "${i}" to type: ${r.type}`);const[o,s]=this.evaluateArguments(n.args,t),u=o.at(0)??s.get("separator")??new Te("");if(!(u instanceof Te))throw new Error("separator must be a string");return new Te(a.join(u.value))}else if(i==="int"||i==="float"){const[a,o]=this.evaluateArguments(n.args,t),s=a.at(0)??o.get("default")??(i==="int"?new We(0):new St(0));if(r instanceof Te){const u=i==="int"?parseInt(r.value,10):parseFloat(r.value);return isNaN(u)?s:i==="int"?new We(u):new St(u)}else{if(r instanceof We||r instanceof St)return r;if(r instanceof Ze)return i==="int"?new We(r.value?1:0):new St(r.value?1:0);throw new Error(`Cannot apply filter "${i}" to type: ${r.type}`)}}else if(i==="default"){const[a,o]=this.evaluateArguments(n.args,t),s=a[0]??new Te(""),u=a[1]??o.get("boolean")??new Ze(!1);if(!(u instanceof Ze))throw new Error("`default` filter flag must be a boolean");return r instanceof Vt||u.value&&!r.__bool__().value?s:r}if(r instanceof rt){switch(i){case"selectattr":case"rejectattr":{const a=i==="selectattr";if(r.value.some(d=>!(d instanceof yr)))throw new Error(`\`${i}\` can only be applied to array of objects`);if(n.args.some(d=>d.type!=="StringLiteral"))throw new Error(`arguments of \`${i}\` must be strings`);const[o,s,u]=n.args.map(d=>this.evaluate(d,t));let l;if(s){const d=t.tests.get(s.value);if(!d)throw new Error(`Unknown test: ${s.value}`);l=d}else l=(...d)=>d[0].__bool__().value;const c=r.value.filter(d=>{const h=d.value.get(o.value),f=h?l(h,u):!1;return a?f:!f});return new rt(c)}case"map":{const[,a]=this.evaluateArguments(n.args,t);if(a.has("attribute")){const o=a.get("attribute");if(!(o instanceof Te))throw new Error("attribute must be a string");const s=a.get("default"),u=r.value.map(l=>{if(!(l instanceof yr))throw new Error("items in map must be an object");return l.value.get(o.value)??s??new Vt});return new rt(u)}else throw new Error("`map` expressions without `attribute` set are not currently supported.")}}throw new Error(`Unknown ArrayValue filter: ${i}`)}else if(r instanceof Te){switch(i){case"indent":{const[a,o]=this.evaluateArguments(n.args,t),s=a.at(0)??o.get("width")??new We(4);if(!(s instanceof We))throw new Error("width must be a number");const u=a.at(1)??o.get("first")??new Ze(!1),l=a.at(2)??o.get("blank")??new Ze(!1),c=r.value.split(`
`),d=" ".repeat(s.value),h=c.map((f,m)=>!u.value&&m===0||!l.value&&f.length===0?f:d+f);return new Te(h.join(`
`))}case"replace":{const a=r.builtins.get("replace");if(!(a instanceof vt))throw new Error("replace filter not available");const[o,s]=this.evaluateArguments(n.args,t);return a.value([...o,new dR(s)],t)}}throw new Error(`Unknown StringValue filter: ${i}`)}else throw new Error(`Cannot apply filter "${i}" to type: ${r.type}`)}throw new Error(`Unknown filter: ${e.type}`)}evaluateFilterExpression(r,e){const t=this.evaluate(r.operand,e);return this.applyFilter(t,r.filter,e)}evaluateTestExpression(r,e){const t=this.evaluate(r.operand,e),n=e.tests.get(r.test.value);if(!n)throw new Error(`Unknown test: ${r.test.value}`);const i=n(t);return new Ze(r.negate?!i:i)}evaluateSelectExpression(r,e){return this.evaluate(r.test,e).__bool__().value?this.evaluate(r.lhs,e):new Vt}evaluateUnaryExpression(r,e){const t=this.evaluate(r.argument,e);switch(r.operator.value){case"not":return new Ze(!t.value);default:throw new SyntaxError(`Unknown operator: ${r.operator.value}`)}}evaluateTernaryExpression(r,e){return this.evaluate(r.condition,e).__bool__().value?this.evaluate(r.trueExpr,e):this.evaluate(r.falseExpr,e)}evalProgram(r,e){return this.evaluateBlock(r.body,e)}evaluateBlock(r,e){let t="";for(const n of r){const i=this.evaluate(n,e);i.type!=="NullValue"&&i.type!=="UndefinedValue"&&(t+=i.toString())}return new Te(t)}evaluateIdentifier(r,e){return e.lookupVariable(r.value)}evaluateCallExpression(r,e){const[t,n]=this.evaluateArguments(r.args,e);n.size>0&&t.push(new dR(n));const i=this.evaluate(r.callee,e);if(i.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${i.type}`);return i.value(t,e)}evaluateSliceExpression(r,e,t){if(!(r instanceof rt||r instanceof Te))throw new Error("Slice object must be an array or string");const n=this.evaluate(e.start,t),i=this.evaluate(e.stop,t),a=this.evaluate(e.step,t);if(!(n instanceof We||n instanceof Vt))throw new Error("Slice start must be numeric or undefined");if(!(i instanceof We||i instanceof Vt))throw new Error("Slice stop must be numeric or undefined");if(!(a instanceof We||a instanceof Vt))throw new Error("Slice step must be numeric or undefined");return r instanceof rt?new rt(IV(r.value,n.value,i.value,a.value)):new Te(IV(Array.from(r.value),n.value,i.value,a.value).join(""))}evaluateMemberExpression(r,e){const t=this.evaluate(r.object,e);let n;if(r.computed){if(r.property.type==="SliceExpression")return this.evaluateSliceExpression(t,r.property,e);n=this.evaluate(r.property,e)}else n=new Te(r.property.value);let i;if(t instanceof yr){if(!(n instanceof Te))throw new Error(`Cannot access property with non-string: got ${n.type}`);i=t.value.get(n.value)??t.builtins.get(n.value)}else if(t instanceof rt||t instanceof Te)if(n instanceof We)i=t.value.at(n.value),t instanceof Te&&(i=new Te(t.value.at(n.value)));else if(n instanceof Te)i=t.builtins.get(n.value);else throw new Error(`Cannot access property with non-string/non-number: got ${n.type}`);else{if(!(n instanceof Te))throw new Error(`Cannot access property with non-string: got ${n.type}`);i=t.builtins.get(n.value)}return i instanceof Bu?i:new Vt}evaluateSet(r,e){const t=r.value?this.evaluate(r.value,e):this.evaluateBlock(r.body,e);if(r.assignee.type==="Identifier"){const n=r.assignee.value;e.setVariable(n,t)}else if(r.assignee.type==="TupleLiteral"){const n=r.assignee;if(!(t instanceof rt))throw new Error(`Cannot unpack non-iterable type in set: ${t.type}`);const i=t.value;if(i.length!==n.value.length)throw new Error(`Too ${n.value.length>i.length?"few":"many"} items to unpack in set`);for(let a=0;a<n.value.length;++a){const o=n.value[a];if(o.type!=="Identifier")throw new Error(`Cannot unpack to non-identifier in set: ${o.type}`);e.setVariable(o.value,i[a])}}else if(r.assignee.type==="MemberExpression"){const n=r.assignee,i=this.evaluate(n.object,e);if(!(i instanceof yr))throw new Error("Cannot assign to member of non-object");if(n.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");i.value.set(n.property.value,t)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(r.assignee)}`);return new dr}evaluateIf(r,e){const t=this.evaluate(r.test,e);return this.evaluateBlock(t.__bool__().value?r.body:r.alternate,e)}evaluateFor(r,e){const t=new rd(e);let n,i;if(r.iterable.type==="SelectExpression"){const l=r.iterable;i=this.evaluate(l.lhs,t),n=l.test}else i=this.evaluate(r.iterable,t);if(!(i instanceof rt||i instanceof yr))throw new Error(`Expected iterable or object type in for loop: got ${i.type}`);i instanceof yr&&(i=i.keys());const a=[],o=[];for(let l=0;l<i.value.length;++l){const c=new rd(t),d=i.value[l];let h;if(r.loopvar.type==="Identifier")h=f=>f.setVariable(r.loopvar.value,d);else if(r.loopvar.type==="TupleLiteral"){const f=r.loopvar;if(d.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${d.type}`);const m=d;if(f.value.length!==m.value.length)throw new Error(`Too ${f.value.length>m.value.length?"few":"many"} items to unpack`);h=p=>{for(let g=0;g<f.value.length;++g){if(f.value[g].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${f.value[g].type}`);p.setVariable(f.value[g].value,m.value[g])}}}else throw new Error(`Invalid loop variable(s): ${r.loopvar.type}`);n&&(h(c),!this.evaluate(n,c).__bool__().value)||(a.push(d),o.push(h))}let s="",u=!0;for(let l=0;l<a.length;++l){const c=new Map([["index",new We(l+1)],["index0",new We(l)],["revindex",new We(a.length-l)],["revindex0",new We(a.length-l-1)],["first",new Ze(l===0)],["last",new Ze(l===a.length-1)],["length",new We(a.length)],["previtem",l>0?a[l-1]:new Vt],["nextitem",l<a.length-1?a[l+1]:new Vt]]);t.setVariable("loop",new yr(c)),o[l](t);try{const d=this.evaluateBlock(r.body,t);s+=d.value}catch(d){if(d instanceof DV)continue;if(d instanceof xV)break;throw d}u=!1}if(u){const l=this.evaluateBlock(r.defaultBlock,t);s+=l.value}return new Te(s)}evaluateMacro(r,e){return e.setVariable(r.name.value,new vt((t,n)=>{var o;const i=new rd(n);t=t.slice();let a;((o=t.at(-1))==null?void 0:o.type)==="KeywordArgumentsValue"&&(a=t.pop());for(let s=0;s<r.args.length;++s){const u=r.args[s],l=t[s];if(u.type==="Identifier"){const c=u;if(!l)throw new Error(`Missing positional argument: ${c.value}`);i.setVariable(c.value,l)}else if(u.type==="KeywordArgumentExpression"){const c=u,d=l??(a==null?void 0:a.value.get(c.key.value))??this.evaluate(c.value,i);i.setVariable(c.key.value,d)}else throw new Error(`Unknown argument type: ${u.type}`)}return this.evaluateBlock(r.body,i)})),new dr}evaluateCallStatement(r,e){const t=new vt((s,u)=>{const l=new rd(u);if(r.callerArgs)for(let c=0;c<r.callerArgs.length;++c){const d=r.callerArgs[c];if(d.type!=="Identifier")throw new Error(`Caller parameter must be an identifier, got ${d.type}`);l.setVariable(d.value,s[c]??new Vt)}return this.evaluateBlock(r.body,l)}),[n,i]=this.evaluateArguments(r.call.args,e);n.push(new dR(i));const a=this.evaluate(r.call.callee,e);if(a.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${a.type}`);const o=new rd(e);return o.setVariable("caller",t),a.value(n,o)}evaluateFilterStatement(r,e){const t=this.evaluateBlock(r.body,e);return this.applyFilter(t,r.filter,e)}evaluate(r,e){if(!r)return new Vt;switch(r.type){case"Program":return this.evalProgram(r,e);case"Set":return this.evaluateSet(r,e);case"If":return this.evaluateIf(r,e);case"For":return this.evaluateFor(r,e);case"Macro":return this.evaluateMacro(r,e);case"CallStatement":return this.evaluateCallStatement(r,e);case"Break":throw new xV;case"Continue":throw new DV;case"IntegerLiteral":return new We(r.value);case"FloatLiteral":return new St(r.value);case"StringLiteral":return new Te(r.value);case"ArrayLiteral":return new rt(r.value.map(t=>this.evaluate(t,e)));case"TupleLiteral":return new vge(r.value.map(t=>this.evaluate(t,e)));case"ObjectLiteral":{const t=new Map;for(const[n,i]of r.value){const a=this.evaluate(n,e);if(!(a instanceof Te))throw new Error(`Object keys must be strings: got ${a.type}`);t.set(a.value,this.evaluate(i,e))}return new yr(t)}case"Identifier":return this.evaluateIdentifier(r,e);case"CallExpression":return this.evaluateCallExpression(r,e);case"MemberExpression":return this.evaluateMemberExpression(r,e);case"UnaryExpression":return this.evaluateUnaryExpression(r,e);case"BinaryExpression":return this.evaluateBinaryExpression(r,e);case"FilterExpression":return this.evaluateFilterExpression(r,e);case"FilterStatement":return this.evaluateFilterStatement(r,e);case"TestExpression":return this.evaluateTestExpression(r,e);case"SelectExpression":return this.evaluateSelectExpression(r,e);case"Ternary":return this.evaluateTernaryExpression(r,e);case"Comment":return new dr;default:throw new SyntaxError(`Unknown node type: ${r.type}`)}}};function r_(r){switch(typeof r){case"number":return Number.isInteger(r)?new We(r):new St(r);case"string":return new Te(r);case"boolean":return new Ze(r);case"undefined":return new Vt;case"object":return r===null?new dr:Array.isArray(r)?new rt(r.map(r_)):new yr(new Map(Object.entries(r).map(([e,t])=>[e,r_(t)])));case"function":return new vt((e,t)=>{const n=r(...e.map(i=>i.value))??null;return r_(n)});default:throw new Error(`Cannot convert to runtime value: ${r}`)}}function Xh(r,e,t){const n=t??0;switch(r.type){case"NullValue":case"UndefinedValue":return"null";case"IntegerValue":case"FloatValue":case"StringValue":case"BooleanValue":return JSON.stringify(r.value);case"ArrayValue":case"ObjectValue":{const i=e?" ".repeat(e):"",a=`
`+i.repeat(n),o=a+i;if(r.type==="ArrayValue"){const s=r.value.map(u=>Xh(u,e,n+1));return e?`[${o}${s.join(`,${o}`)}${a}]`:`[${s.join(", ")}]`}else{const s=Array.from(r.value.entries()).map(([u,l])=>{const c=`"${u}": ${Xh(l,e,n+1)}`;return e?`${o}${c}`:c});return e?`{${s.join(",")}${a}}`:`{${s.join(", ")}}`}}default:throw new Error(`Cannot convert to JSON: ${r.type}`)}}var Dt=`
`,Oge="{%- ",Ege=" -%}";function Rge(r){switch(r.operator.type){case"MultiplicativeBinaryOperator":return 4;case"AdditiveBinaryOperator":return 3;case"ComparisonBinaryOperator":return 2;case"Identifier":return r.operator.value==="and"?1:r.operator.value==="in"||r.operator.value==="not in"?2:0}return 0}function Cge(r,e="	"){const t=typeof e=="number"?" ".repeat(e):e;return wu(r.body,0,t).replace(/\n$/,"")}function Kt(...r){return Oge+r.join(" ")+Ege}function wu(r,e,t){return r.map(n=>Pge(n,e,t)).join(Dt)}function Pge(r,e,t){const n=t.repeat(e);switch(r.type){case"Program":return wu(r.body,e,t);case"If":return jge(r,e,t);case"For":return Tge(r,e,t);case"Set":return Age(r,e,t);case"Macro":return Mge(r,e,t);case"Break":return n+Kt("break");case"Continue":return n+Kt("continue");case"CallStatement":return Ige(r,e,t);case"FilterStatement":return xge(r,e,t);case"Comment":return n+"{# "+r.value+" #}";default:return n+"{{- "+Xe(r)+" -}}"}}function jge(r,e,t){const n=t.repeat(e),i=[];let a=r;for(;a&&(i.push({test:a.test,body:a.body}),a.alternate.length===1&&a.alternate[0].type==="If");)a=a.alternate[0];let o=n+Kt("if",Xe(i[0].test))+Dt+wu(i[0].body,e+1,t);for(let s=1;s<i.length;++s)o+=Dt+n+Kt("elif",Xe(i[s].test))+Dt+wu(i[s].body,e+1,t);return a&&a.alternate.length>0&&(o+=Dt+n+Kt("else")+Dt+wu(a.alternate,e+1,t)),o+=Dt+n+Kt("endif"),o}function Tge(r,e,t){const n=t.repeat(e);let i="";if(r.iterable.type==="SelectExpression"){const o=r.iterable;i=`${Xe(o.lhs)} if ${Xe(o.test)}`}else i=Xe(r.iterable);let a=n+Kt("for",Xe(r.loopvar),"in",i)+Dt+wu(r.body,e+1,t);return r.defaultBlock.length>0&&(a+=Dt+n+Kt("else")+Dt+wu(r.defaultBlock,e+1,t)),a+=Dt+n+Kt("endfor"),a}function Age(r,e,t){const n=t.repeat(e),i=Xe(r.assignee),a=r.value?Xe(r.value):"",o=n+Kt("set",`${i}${r.value?" = "+a:""}`);return r.body.length===0?o:o+Dt+wu(r.body,e+1,t)+Dt+n+Kt("endset")}function Mge(r,e,t){const n=t.repeat(e),i=r.args.map(Xe).join(", ");return n+Kt("macro",`${r.name.value}(${i})`)+Dt+wu(r.body,e+1,t)+Dt+n+Kt("endmacro")}function Ige(r,e,t){const n=t.repeat(e),i=r.callerArgs&&r.callerArgs.length>0?`(${r.callerArgs.map(Xe).join(", ")})`:"",a=Xe(r.call);let o=n+Kt(`call${i}`,a)+Dt;return o+=wu(r.body,e+1,t)+Dt,o+=n+Kt("endcall"),o}function xge(r,e,t){const n=t.repeat(e),i=r.filter.type==="Identifier"?r.filter.value:Xe(r.filter);let a=n+Kt("filter",i)+Dt;return a+=wu(r.body,e+1,t)+Dt,a+=n+Kt("endfilter"),a}function Xe(r,e=-1){switch(r.type){case"SpreadExpression":return`*${Xe(r.argument)}`;case"Identifier":return r.value;case"IntegerLiteral":return`${r.value}`;case"FloatLiteral":return`${r.value}`;case"StringLiteral":return JSON.stringify(r.value);case"BinaryExpression":{const t=r,n=Rge(t),i=Xe(t.left,n),a=Xe(t.right,n+1),o=`${i} ${t.operator.value} ${a}`;return n<e?`(${o})`:o}case"UnaryExpression":{const t=r;return t.operator.value+(t.operator.value==="not"?" ":"")+Xe(t.argument,1/0)}case"CallExpression":{const t=r,n=t.args.map(Xe).join(", ");return`${Xe(t.callee)}(${n})`}case"MemberExpression":{const t=r;let n=Xe(t.object);["Identifier","MemberExpression","CallExpression","StringLiteral","IntegerLiteral","FloatLiteral","ArrayLiteral","TupleLiteral","ObjectLiteral"].includes(t.object.type)||(n=`(${n})`);let i=Xe(t.property);return!t.computed&&t.property.type!=="Identifier"&&(i=`(${i})`),t.computed?`${n}[${i}]`:`${n}.${i}`}case"FilterExpression":{const t=r,n=Xe(t.operand,1/0);return t.filter.type==="CallExpression"?`${n} | ${Xe(t.filter)}`:`${n} | ${t.filter.value}`}case"SelectExpression":{const t=r;return`${Xe(t.lhs)} if ${Xe(t.test)}`}case"TestExpression":{const t=r;return`${Xe(t.operand)} is${t.negate?" not":""} ${t.test.value}`}case"ArrayLiteral":case"TupleLiteral":{const t=r.value.map(Xe),n=r.type==="ArrayLiteral"?"[]":"()";return`${n[0]}${t.join(", ")}${n[1]}`}case"ObjectLiteral":return`{${Array.from(r.value.entries()).map(([n,i])=>`${Xe(n)}: ${Xe(i)}`).join(", ")}}`;case"SliceExpression":{const t=r,n=t.start?Xe(t.start):"",i=t.stop?Xe(t.stop):"",a=t.step?`:${Xe(t.step)}`:"";return`${n}:${i}${a}`}case"KeywordArgumentExpression":{const t=r;return`${t.key.value}=${Xe(t.value)}`}case"Ternary":{const t=r,n=`${Xe(t.trueExpr)} if ${Xe(t.condition,0)} else ${Xe(t.falseExpr)}`;return e>-1?`(${n})`:n}default:throw new Error(`Unknown expression type: ${r.type}`)}}var Dge=class{constructor(r){Ee(this,"parsed");const e=kme(r,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=pge(e)}render(r){const e=new rd;if(wge(e),r)for(const[i,a]of Object.entries(r))e.set(i,a);return new Sge(e).run(this.parsed).value}format(r){return Cge(this.parsed,(r==null?void 0:r.indent)||"	")}};const $ge={transformers:["audio-classification","automatic-speech-recognition","depth-estimation","document-question-answering","feature-extraction","fill-mask","image-classification","image-feature-extraction","image-segmentation","image-to-image","image-to-text","image-text-to-text","mask-generation","object-detection","question-answering","summarization","table-question-answering","text2text-generation","text-classification","text-generation","text-to-audio","text-to-speech","token-classification","translation","video-classification","visual-question-answering","zero-shot-classification","zero-shot-image-classification","zero-shot-object-detection"]},S1={"text-classification":{name:"Text Classification",subtasks:[{type:"acceptability-classification",name:"Acceptability Classification"},{type:"entity-linking-classification",name:"Entity Linking Classification"},{type:"fact-checking",name:"Fact Checking"},{type:"intent-classification",name:"Intent Classification"},{type:"language-identification",name:"Language Identification"},{type:"multi-class-classification",name:"Multi Class Classification"},{type:"multi-label-classification",name:"Multi Label Classification"},{type:"multi-input-text-classification",name:"Multi-input Text Classification"},{type:"natural-language-inference",name:"Natural Language Inference"},{type:"semantic-similarity-classification",name:"Semantic Similarity Classification"},{type:"sentiment-classification",name:"Sentiment Classification"},{type:"topic-classification",name:"Topic Classification"},{type:"semantic-similarity-scoring",name:"Semantic Similarity Scoring"},{type:"sentiment-scoring",name:"Sentiment Scoring"},{type:"sentiment-analysis",name:"Sentiment Analysis"},{type:"hate-speech-detection",name:"Hate Speech Detection"},{type:"text-scoring",name:"Text Scoring"}],modality:"nlp"},"token-classification":{name:"Token Classification",subtasks:[{type:"named-entity-recognition",name:"Named Entity Recognition"},{type:"part-of-speech",name:"Part of Speech"},{type:"parsing",name:"Parsing"},{type:"lemmatization",name:"Lemmatization"},{type:"word-sense-disambiguation",name:"Word Sense Disambiguation"},{type:"coreference-resolution",name:"Coreference-resolution"}],modality:"nlp"},"table-question-answering":{name:"Table Question Answering",modality:"nlp"},"question-answering":{name:"Question Answering",subtasks:[{type:"extractive-qa",name:"Extractive QA"},{type:"open-domain-qa",name:"Open Domain QA"},{type:"closed-domain-qa",name:"Closed Domain QA"}],modality:"nlp"},"zero-shot-classification":{name:"Zero-Shot Classification",modality:"nlp"},translation:{name:"Translation",modality:"nlp"},summarization:{name:"Summarization",subtasks:[{type:"news-articles-summarization",name:"News Articles Summarization"},{type:"news-articles-headline-generation",name:"News Articles Headline Generation"}],modality:"nlp"},"feature-extraction":{name:"Feature Extraction",modality:"nlp"},"text-generation":{name:"Text Generation",subtasks:[{type:"dialogue-modeling",name:"Dialogue Modeling"},{type:"dialogue-generation",name:"Dialogue Generation"},{type:"conversational",name:"Conversational"},{type:"language-modeling",name:"Language Modeling"}],modality:"nlp"},"text2text-generation":{name:"Text2Text Generation",subtasks:[{type:"text-simplification",name:"Text simplification"},{type:"explanation-generation",name:"Explanation Generation"},{type:"abstractive-qa",name:"Abstractive QA"},{type:"open-domain-abstractive-qa",name:"Open Domain Abstractive QA"},{type:"closed-domain-qa",name:"Closed Domain QA"},{type:"open-book-qa",name:"Open Book QA"},{type:"closed-book-qa",name:"Closed Book QA"}],modality:"nlp"},"fill-mask":{name:"Fill-Mask",subtasks:[{type:"slot-filling",name:"Slot Filling"},{type:"masked-language-modeling",name:"Masked Language Modeling"}],modality:"nlp"},"sentence-similarity":{name:"Sentence Similarity",modality:"nlp"},"text-to-speech":{name:"Text-to-Speech",modality:"audio"},"text-to-audio":{name:"Text-to-Audio",modality:"audio"},"automatic-speech-recognition":{name:"Automatic Speech Recognition",modality:"audio"},"audio-to-audio":{name:"Audio-to-Audio",modality:"audio"},"audio-classification":{name:"Audio Classification",subtasks:[{type:"keyword-spotting",name:"Keyword Spotting"},{type:"speaker-identification",name:"Speaker Identification"},{type:"audio-intent-classification",name:"Audio Intent Classification"},{type:"audio-emotion-recognition",name:"Audio Emotion Recognition"},{type:"audio-language-identification",name:"Audio Language Identification"}],modality:"audio"},"audio-text-to-text":{name:"Audio-Text-to-Text",modality:"multimodal",hideInDatasets:!0},"voice-activity-detection":{name:"Voice Activity Detection",modality:"audio"},"depth-estimation":{name:"Depth Estimation",modality:"cv"},"image-classification":{name:"Image Classification",subtasks:[{type:"multi-label-image-classification",name:"Multi Label Image Classification"},{type:"multi-class-image-classification",name:"Multi Class Image Classification"}],modality:"cv"},"object-detection":{name:"Object Detection",subtasks:[{type:"face-detection",name:"Face Detection"},{type:"vehicle-detection",name:"Vehicle Detection"}],modality:"cv"},"image-segmentation":{name:"Image Segmentation",subtasks:[{type:"instance-segmentation",name:"Instance Segmentation"},{type:"semantic-segmentation",name:"Semantic Segmentation"},{type:"panoptic-segmentation",name:"Panoptic Segmentation"}],modality:"cv"},"text-to-image":{name:"Text-to-Image",modality:"cv"},"image-to-text":{name:"Image-to-Text",subtasks:[{type:"image-captioning",name:"Image Captioning"}],modality:"cv"},"image-to-image":{name:"Image-to-Image",subtasks:[{type:"image-inpainting",name:"Image Inpainting"},{type:"image-colorization",name:"Image Colorization"},{type:"super-resolution",name:"Super Resolution"}],modality:"cv"},"image-to-video":{name:"Image-to-Video",modality:"cv"},"unconditional-image-generation":{name:"Unconditional Image Generation",modality:"cv"},"video-classification":{name:"Video Classification",modality:"cv"},"reinforcement-learning":{name:"Reinforcement Learning",modality:"rl"},robotics:{name:"Robotics",modality:"rl",subtasks:[{type:"grasping",name:"Grasping"},{type:"task-planning",name:"Task Planning"}]},"tabular-classification":{name:"Tabular Classification",modality:"tabular",subtasks:[{type:"tabular-multi-class-classification",name:"Tabular Multi Class Classification"},{type:"tabular-multi-label-classification",name:"Tabular Multi Label Classification"}]},"tabular-regression":{name:"Tabular Regression",modality:"tabular",subtasks:[{type:"tabular-single-column-regression",name:"Tabular Single Column Regression"}]},"tabular-to-text":{name:"Tabular to Text",modality:"tabular",subtasks:[{type:"rdf-to-text",name:"RDF to text"}],hideInModels:!0},"table-to-text":{name:"Table to Text",modality:"nlp",hideInModels:!0},"multiple-choice":{name:"Multiple Choice",subtasks:[{type:"multiple-choice-qa",name:"Multiple Choice QA"},{type:"multiple-choice-coreference-resolution",name:"Multiple Choice Coreference Resolution"}],modality:"nlp",hideInModels:!0},"text-ranking":{name:"Text Ranking",modality:"nlp"},"text-retrieval":{name:"Text Retrieval",subtasks:[{type:"document-retrieval",name:"Document Retrieval"},{type:"utterance-retrieval",name:"Utterance Retrieval"},{type:"entity-linking-retrieval",name:"Entity Linking Retrieval"},{type:"fact-checking-retrieval",name:"Fact Checking Retrieval"}],modality:"nlp",hideInModels:!0},"time-series-forecasting":{name:"Time Series Forecasting",modality:"tabular",subtasks:[{type:"univariate-time-series-forecasting",name:"Univariate Time Series Forecasting"},{type:"multivariate-time-series-forecasting",name:"Multivariate Time Series Forecasting"}]},"text-to-video":{name:"Text-to-Video",modality:"cv"},"image-text-to-text":{name:"Image-Text-to-Text",modality:"multimodal",hideInDatasets:!0},"visual-question-answering":{name:"Visual Question Answering",subtasks:[{type:"visual-question-answering",name:"Visual Question Answering"}],modality:"multimodal"},"document-question-answering":{name:"Document Question Answering",subtasks:[{type:"document-question-answering",name:"Document Question Answering"}],modality:"multimodal",hideInDatasets:!0},"zero-shot-image-classification":{name:"Zero-Shot Image Classification",modality:"cv"},"graph-ml":{name:"Graph Machine Learning",modality:"other"},"mask-generation":{name:"Mask Generation",modality:"cv"},"zero-shot-object-detection":{name:"Zero-Shot Object Detection",modality:"cv"},"text-to-3d":{name:"Text-to-3D",modality:"cv"},"image-to-3d":{name:"Image-to-3D",modality:"cv"},"image-feature-extraction":{name:"Image Feature Extraction",modality:"cv"},"video-text-to-text":{name:"Video-Text-to-Text",modality:"multimodal",hideInDatasets:!1},"keypoint-detection":{name:"Keypoint Detection",subtasks:[{type:"pose-estimation",name:"Pose Estimation"}],modality:"cv",hideInDatasets:!0},"visual-document-retrieval":{name:"Visual Document Retrieval",modality:"multimodal",hideInDatasets:!0},"any-to-any":{name:"Any-to-Any",modality:"multimodal",hideInDatasets:!0},other:{name:"Other",modality:"other",hideInModels:!0,hideInDatasets:!0}},Nge=Object.keys(S1);Object.values(S1).flatMap(r=>"subtasks"in r?r.subtasks:[]).map(r=>r.type);new Set(Nge);const qge={datasets:[{description:"A dataset with multiple modality input and output pairs.",id:"PKU-Alignment/align-anything"}],demo:{inputs:[{filename:"any-to-any-input.jpg",type:"img"},{label:"Text Prompt",content:"What is the significance of this place?",type:"text"}],outputs:[{label:"Generated Text",content:"The place in the picture is Osaka Castle, located in Osaka, Japan. Osaka Castle is a historic castle that was originally built in the 16th century by Toyotomi Hideyoshi, a powerful warlord of the time. It is one of the most famous landmarks in Osaka and is known for its distinctive white walls and black roof tiles. The castle has been rebuilt several times over the centuries and is now a popular tourist attraction, offering visitors a glimpse into Japan's rich history and culture.",type:"text"},{filename:"any-to-any-output.wav",type:"audio"}]},metrics:[],models:[{description:"Strong model that can take in video, audio, image, text and output text and natural speech.",id:"Qwen/Qwen2.5-Omni-7B"},{description:"Robust model that can take in image and text and generate image and text.",id:"deepseek-ai/Janus-Pro-7B"},{description:"Any-to-any model with speech, video, audio, image and text understanding capabilities.",id:"openbmb/MiniCPM-o-2_6"},{description:"A model that can understand image and text and generate image and text.",id:"EPFL-VILAB/4M-21_XL"}],spaces:[{description:"An application to chat with an any-to-any (image & text) model.",id:"deepseek-ai/Janus-Pro-7B"}],summary:"Any-to-any models can understand two or more modalities and output two or more modalities.",widgetModels:[],youtubeId:""},Bge={datasets:[{description:"A benchmark of 10 different audio tasks.",id:"s3prl/superb"},{description:"A dataset of YouTube clips and their sound categories.",id:"agkphysics/AudioSet"}],demo:{inputs:[{filename:"audio.wav",type:"audio"}],outputs:[{data:[{label:"Up",score:.2},{label:"Down",score:.8}],type:"chart"}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"",id:"f1"}],models:[{description:"An easy-to-use model for command recognition.",id:"speechbrain/google_speech_command_xvector"},{description:"An emotion recognition model.",id:"ehcalabres/wav2vec2-lg-xlsr-en-speech-emotion-recognition"},{description:"A language identification model.",id:"facebook/mms-lid-126"}],spaces:[{description:"An application that can classify music into different genre.",id:"kurianbenoy/audioclassification"}],summary:"Audio classification is the task of assigning a label or class to a given audio. It can be used for recognizing which command a user is giving or the emotion of a statement, as well as identifying a speaker.",widgetModels:["MIT/ast-finetuned-audioset-10-10-0.4593"],youtubeId:"KWwzcmG98Ds"},Uge={datasets:[{description:"512-element X-vector embeddings of speakers from CMU ARCTIC dataset.",id:"Matthijs/cmu-arctic-xvectors"}],demo:{inputs:[{filename:"input.wav",type:"audio"}],outputs:[{filename:"label-0.wav",type:"audio"},{filename:"label-1.wav",type:"audio"}]},metrics:[{description:"The Signal-to-Noise ratio is the relationship between the target signal level and the background noise level. It is calculated as the logarithm of the target signal divided by the background noise, in decibels.",id:"snri"},{description:"The Signal-to-Distortion ratio is the relationship between the target signal and the sum of noise, interference, and artifact errors",id:"sdri"}],models:[{description:"A speech enhancement model.",id:"ResembleAI/resemble-enhance"},{description:"A model that can change the voice in a speech recording.",id:"microsoft/speecht5_vc"}],spaces:[{description:"An application for speech separation.",id:"younver/speechbrain-speech-separation"},{description:"An application for audio style transfer.",id:"nakas/audio-diffusion_style_transfer"}],summary:"Audio-to-Audio is a family of tasks in which the input is an audio and the output is one or multiple generated audios. Some example tasks are speech enhancement and source separation.",widgetModels:["speechbrain/sepformer-wham"],youtubeId:"iohj7nCCYoM"},zge={datasets:[{description:"31,175 hours of multilingual audio-text dataset in 108 languages.",id:"mozilla-foundation/common_voice_17_0"},{description:"Multilingual and diverse audio dataset with 101k hours of audio.",id:"amphion/Emilia-Dataset"},{description:"A dataset with 44.6k hours of English speaker data and 6k hours of other language speakers.",id:"parler-tts/mls_eng"},{description:"A multilingual audio dataset with 370K hours of audio.",id:"espnet/yodas"}],demo:{inputs:[{filename:"input.flac",type:"audio"}],outputs:[{label:"Transcript",content:"Going along slushy country roads and speaking to damp audiences in...",type:"text"}]},metrics:[{description:"",id:"wer"},{description:"",id:"cer"}],models:[{description:"A powerful ASR model by OpenAI.",id:"openai/whisper-large-v3"},{description:"A good generic speech model by MetaAI for fine-tuning.",id:"facebook/w2v-bert-2.0"},{description:"An end-to-end model that performs ASR and Speech Translation by MetaAI.",id:"facebook/seamless-m4t-v2-large"},{description:"A powerful multilingual ASR and Speech Translation model by Nvidia.",id:"nvidia/canary-1b"},{description:"Powerful speaker diarization model.",id:"pyannote/speaker-diarization-3.1"}],spaces:[{description:"A powerful general-purpose speech recognition application.",id:"hf-audio/whisper-large-v3"},{description:"Latest ASR model from Useful Sensors.",id:"mrfakename/Moonshinex"},{description:"A high quality speech and text translation model by Meta.",id:"facebook/seamless_m4t"},{description:"A powerful multilingual ASR and Speech Translation model by Nvidia",id:"nvidia/canary-1b"}],summary:"Automatic Speech Recognition (ASR), also known as Speech to Text (STT), is the task of transcribing a given audio to text. It has many applications, such as voice user interfaces.",widgetModels:["openai/whisper-large-v3"],youtubeId:"TksaY_FDgnk"},Lge={datasets:[{description:"Largest document understanding dataset.",id:"HuggingFaceM4/Docmatix"},{description:"Dataset from the 2020 DocVQA challenge. The documents are taken from the UCSF Industry Documents Library.",id:"eliolio/docvqa"}],demo:{inputs:[{label:"Question",content:"What is the idea behind the consumer relations efficiency team?",type:"text"},{filename:"document-question-answering-input.png",type:"img"}],outputs:[{label:"Answer",content:"Balance cost efficiency with quality customer service",type:"text"}]},metrics:[{description:"The evaluation metric for the DocVQA challenge is the Average Normalized Levenshtein Similarity (ANLS). This metric is flexible to character regognition errors and compares the predicted answer with the ground truth answer.",id:"anls"},{description:"Exact Match is a metric based on the strict character match of the predicted answer and the right answer. For answers predicted correctly, the Exact Match will be 1. Even if only one character is different, Exact Match will be 0",id:"exact-match"}],models:[{description:"A robust document question answering model.",id:"impira/layoutlm-document-qa"},{description:"A document question answering model specialized in invoices.",id:"impira/layoutlm-invoices"},{description:"A special model for OCR-free document question answering.",id:"microsoft/udop-large"},{description:"A powerful model for document question answering.",id:"google/pix2struct-docvqa-large"}],spaces:[{description:"A robust document question answering application.",id:"impira/docquery"},{description:"An application that can answer questions from invoices.",id:"impira/invoices"},{description:"An application to compare different document question answering models.",id:"merve/compare_docvqa_models"}],summary:"Document Question Answering (also known as Document Visual Question Answering) is the task of answering questions on document images. Document question answering models take a (document, question) pair as input and return an answer in natural language. Models usually rely on multi-modal features, combining text, position of words (bounding-boxes) and image.",widgetModels:["impira/layoutlm-invoices"],youtubeId:""},Fge={datasets:[{description:"Wikipedia dataset containing cleaned articles of all languages. Can be used to train `feature-extraction` models.",id:"wikipedia"}],demo:{inputs:[{label:"Input",content:"India, officially the Republic of India, is a country in South Asia.",type:"text"}],outputs:[{table:[["Dimension 1","Dimension 2","Dimension 3"],["2.583383083343506","2.757075071334839","0.9023529887199402"],["8.29393482208252","1.1071064472198486","2.03399395942688"],["-0.7754912972450256","-1.647324562072754","-0.6113331913948059"],["0.07087723910808563","1.5942802429199219","1.4610432386398315"]],type:"tabular"}]},metrics:[],models:[{description:"A powerful feature extraction model for natural language processing tasks.",id:"thenlper/gte-large"},{description:"A strong feature extraction model for retrieval.",id:"Alibaba-NLP/gte-Qwen1.5-7B-instruct"}],spaces:[{description:"A leaderboard to rank text feature extraction models based on a benchmark.",id:"mteb/leaderboard"},{description:"A leaderboard to rank best feature extraction models based on human feedback.",id:"mteb/arena"}],summary:"Feature extraction is the task of extracting features learnt in a model.",widgetModels:["facebook/bart-base"]},kge={datasets:[{description:"A common dataset that is used to train models for many languages.",id:"wikipedia"},{description:"A large English dataset with text crawled from the web.",id:"c4"}],demo:{inputs:[{label:"Input",content:"The <mask> barked at me",type:"text"}],outputs:[{type:"chart",data:[{label:"wolf",score:.487},{label:"dog",score:.061},{label:"cat",score:.058},{label:"fox",score:.047},{label:"squirrel",score:.025}]}]},metrics:[{description:"Cross Entropy is a metric that calculates the difference between two probability distributions. Each probability distribution is the distribution of predicted words",id:"cross_entropy"},{description:"Perplexity is the exponential of the cross-entropy loss. It evaluates the probabilities assigned to the next word by the model. Lower perplexity indicates better performance",id:"perplexity"}],models:[{description:"State-of-the-art masked language model.",id:"answerdotai/ModernBERT-large"},{description:"A multilingual model trained on 100 languages.",id:"FacebookAI/xlm-roberta-base"}],spaces:[],summary:"Masked language modeling is the task of masking some of the words in a sentence and predicting which words should replace those masks. These models are useful when we want to get a statistical understanding of the language in which the model is trained in.",widgetModels:["distilroberta-base"],youtubeId:"mqElG5QJWUg"},Vge={datasets:[{description:"Benchmark dataset used for image classification with images that belong to 100 classes.",id:"cifar100"},{description:"Dataset consisting of images of garments.",id:"fashion_mnist"}],demo:{inputs:[{filename:"image-classification-input.jpeg",type:"img"}],outputs:[{type:"chart",data:[{label:"Egyptian cat",score:.514},{label:"Tabby cat",score:.193},{label:"Tiger cat",score:.068}]}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"",id:"f1"}],models:[{description:"A strong image classification model.",id:"google/vit-base-patch16-224"},{description:"A robust image classification model.",id:"facebook/deit-base-distilled-patch16-224"},{description:"A strong image classification model.",id:"facebook/convnext-large-224"}],spaces:[{description:"A leaderboard to evaluate different image classification models.",id:"timm/leaderboard"}],summary:"Image classification is the task of assigning a label or class to an entire image. Images are expected to have only one class for each image. Image classification models take an image as input and return a prediction about which class the image belongs to.",widgetModels:["google/vit-base-patch16-224"],youtubeId:"tjAIM7BOYhw"},Hge={datasets:[{description:"ImageNet-1K is a image classification dataset in which images are used to train image-feature-extraction models.",id:"imagenet-1k"}],demo:{inputs:[{filename:"mask-generation-input.png",type:"img"}],outputs:[{table:[["Dimension 1","Dimension 2","Dimension 3"],["0.21236686408519745","1.0919708013534546","0.8512550592422485"],["0.809657871723175","-0.18544459342956543","-0.7851548194885254"],["1.3103108406066895","-0.2479034662246704","-0.9107287526130676"],["1.8536205291748047","-0.36419737339019775","0.09717650711536407"]],type:"tabular"}]},metrics:[],models:[{description:"A powerful image feature extraction model.",id:"timm/vit_large_patch14_dinov2.lvd142m"},{description:"A strong image feature extraction model.",id:"nvidia/MambaVision-T-1K"},{description:"A robust image feature extraction model.",id:"facebook/dino-vitb16"},{description:"Cutting-edge image feature extraction model.",id:"apple/aimv2-large-patch14-336-distilled"},{description:"Strong image feature extraction model that can be used on images and documents.",id:"OpenGVLab/InternViT-6B-448px-V1-2"}],spaces:[{description:"A leaderboard to evaluate different image-feature-extraction models on classification performances",id:"timm/leaderboard"}],summary:"Image feature extraction is the task of extracting features learnt in a computer vision model.",widgetModels:[]},Kge={datasets:[{description:"Synthetic dataset, for image relighting",id:"VIDIT"},{description:"Multiple images of celebrities, used for facial expression translation",id:"huggan/CelebA-faces"},{description:"12M image-caption pairs.",id:"Spawning/PD12M"}],demo:{inputs:[{filename:"image-to-image-input.jpeg",type:"img"}],outputs:[{filename:"image-to-image-output.png",type:"img"}]},isPlaceholder:!1,metrics:[{description:"Peak Signal to Noise Ratio (PSNR) is an approximation of the human perception, considering the ratio of the absolute intensity with respect to the variations. Measured in dB, a high value indicates a high fidelity.",id:"PSNR"},{description:"Structural Similarity Index (SSIM) is a perceptual metric which compares the luminance, contrast and structure of two images. The values of SSIM range between -1 and 1, and higher values indicate closer resemblance to the original image.",id:"SSIM"},{description:"Inception Score (IS) is an analysis of the labels predicted by an image classification model when presented with a sample of the generated images.",id:"IS"}],models:[{description:"An image-to-image model to improve image resolution.",id:"fal/AuraSR-v2"},{description:"A model that increases the resolution of an image.",id:"keras-io/super-resolution"},{description:"A model for applying edits to images through image controls.",id:"Yuanshi/OminiControl"},{description:"A model that generates images based on segments in the input image and the text prompt.",id:"mfidabel/controlnet-segment-anything"},{description:"Strong model for inpainting and outpainting.",id:"black-forest-labs/FLUX.1-Fill-dev"},{description:"Strong model for image editing using depth maps.",id:"black-forest-labs/FLUX.1-Depth-dev-lora"}],spaces:[{description:"Image enhancer application for low light.",id:"keras-io/low-light-image-enhancement"},{description:"Style transfer application.",id:"keras-io/neural-style-transfer"},{description:"An application that generates images based on segment control.",id:"mfidabel/controlnet-segment-anything"},{description:"Image generation application that takes image control and text prompt.",id:"hysts/ControlNet"},{description:"Colorize any image using this app.",id:"ioclab/brightness-controlnet"},{description:"Edit images with instructions.",id:"timbrooks/instruct-pix2pix"}],summary:"Image-to-image is the task of transforming an input image through a variety of possible manipulations and enhancements, such as super-resolution, image inpainting, colorization, and more.",widgetModels:["stabilityai/stable-diffusion-2-inpainting"],youtubeId:""},Wge={datasets:[{description:"Dataset from 12M image-text of Reddit",id:"red_caps"},{description:"Dataset from 3.3M images of Google",id:"datasets/conceptual_captions"}],demo:{inputs:[{filename:"savanna.jpg",type:"img"}],outputs:[{label:"Detailed description",content:"a herd of giraffes and zebras grazing in a field",type:"text"}]},metrics:[],models:[{description:"A robust image captioning model.",id:"Salesforce/blip2-opt-2.7b"},{description:"A powerful and accurate image-to-text model that can also localize concepts in images.",id:"microsoft/kosmos-2-patch14-224"},{description:"A strong optical character recognition model.",id:"facebook/nougat-base"},{description:"A powerful model that lets you have a conversation with the image.",id:"llava-hf/llava-1.5-7b-hf"}],spaces:[{description:"An application that compares various image captioning models.",id:"nielsr/comparing-captioning-models"},{description:"A robust image captioning application.",id:"flax-community/image-captioning"},{description:"An application that transcribes handwritings into text.",id:"nielsr/TrOCR-handwritten"},{description:"An application that can caption images and answer questions about a given image.",id:"Salesforce/BLIP"},{description:"An application that can caption images and answer questions with a conversational agent.",id:"Salesforce/BLIP2"},{description:"An image captioning application that demonstrates the effect of noise on captions.",id:"johko/capdec-image-captioning"}],summary:"Image to text models output a text from a given image. Image captioning or optical character recognition can be considered as the most common applications of image to text.",widgetModels:["Salesforce/blip-image-captioning-large"],youtubeId:""},Gge={datasets:[{description:"Instructions composed of image and text.",id:"liuhaotian/LLaVA-Instruct-150K"},{description:"Collection of image-text pairs on scientific topics.",id:"DAMO-NLP-SG/multimodal_textbook"},{description:"A collection of datasets made for model fine-tuning.",id:"HuggingFaceM4/the_cauldron"},{description:"Screenshots of websites with their HTML/CSS codes.",id:"HuggingFaceM4/WebSight"}],demo:{inputs:[{filename:"image-text-to-text-input.png",type:"img"},{label:"Text Prompt",content:"Describe the position of the bee in detail.",type:"text"}],outputs:[{label:"Answer",content:"The bee is sitting on a pink flower, surrounded by other flowers. The bee is positioned in the center of the flower, with its head and front legs sticking out.",type:"text"}]},metrics:[],models:[{description:"Small and efficient yet powerful vision language model.",id:"HuggingFaceTB/SmolVLM-Instruct"},{description:"A screenshot understanding model used to control computers.",id:"microsoft/OmniParser-v2.0"},{description:"Cutting-edge vision language model.",id:"allenai/Molmo-7B-D-0924"},{description:"Small yet powerful model.",id:"vikhyatk/moondream2"},{description:"Strong image-text-to-text model.",id:"Qwen/Qwen2.5-VL-7B-Instruct"},{description:"Image-text-to-text model with agentic capabilities.",id:"microsoft/Magma-8B"},{description:"Strong image-text-to-text model focused on documents.",id:"allenai/olmOCR-7B-0225-preview"},{description:"Small yet strong image-text-to-text model.",id:"ibm-granite/granite-vision-3.2-2b"}],spaces:[{description:"Leaderboard to evaluate vision language models.",id:"opencompass/open_vlm_leaderboard"},{description:"Vision language models arena, where models are ranked by votes of users.",id:"WildVision/vision-arena"},{description:"Powerful vision-language model assistant.",id:"akhaliq/Molmo-7B-D-0924"},{description:"Powerful vision language assistant that can understand multiple images.",id:"HuggingFaceTB/SmolVLM2"},{description:"An application for chatting with an image-text-to-text model.",id:"GanymedeNil/Qwen2-VL-7B"},{description:"An application that parses screenshots into actions.",id:"showlab/ShowUI"},{description:"An application that detects gaze.",id:"moondream/gaze-demo"}],summary:"Image-text-to-text models take in an image and text prompt and output text. These models are also called vision-language models, or VLMs. The difference from image-to-text models is that these models take an additional text input, not restricting the model to certain use cases like image captioning, and may also be trained to accept a conversation as input.",widgetModels:["Qwen/Qwen2-VL-7B-Instruct"],youtubeId:"IoGaGfU1CIg"},Jge={datasets:[{description:"Scene segmentation dataset.",id:"scene_parse_150"}],demo:{inputs:[{filename:"image-segmentation-input.jpeg",type:"img"}],outputs:[{filename:"image-segmentation-output.png",type:"img"}]},metrics:[{description:"Average Precision (AP) is the Area Under the PR Curve (AUC-PR). It is calculated for each semantic class separately",id:"Average Precision"},{description:"Mean Average Precision (mAP) is the overall average of the AP values",id:"Mean Average Precision"},{description:"Intersection over Union (IoU) is the overlap of segmentation masks. Mean IoU is the average of the IoU of all semantic classes",id:"Mean Intersection over Union"},{description:"APα is the Average Precision at the IoU threshold of a α value, for example, AP50 and AP75",id:"APα"}],models:[{description:"Solid semantic segmentation model trained on ADE20k.",id:"openmmlab/upernet-convnext-small"},{description:"Background removal model.",id:"briaai/RMBG-1.4"},{description:"A multipurpose image segmentation model for high resolution images.",id:"ZhengPeng7/BiRefNet"},{description:"Powerful human-centric image segmentation model.",id:"facebook/sapiens-seg-1b"},{description:"Panoptic segmentation model trained on the COCO (common objects) dataset.",id:"facebook/mask2former-swin-large-coco-panoptic"}],spaces:[{description:"A semantic segmentation application that can predict unseen instances out of the box.",id:"facebook/ov-seg"},{description:"One of the strongest segmentation applications.",id:"jbrinkma/segment-anything"},{description:"A human-centric segmentation model.",id:"facebook/sapiens-pose"},{description:"An instance segmentation application to predict neuronal cell types from microscopy images.",id:"rashmi/sartorius-cell-instance-segmentation"},{description:"An application that segments videos.",id:"ArtGAN/Segment-Anything-Video"},{description:"An panoptic segmentation application built for outdoor environments.",id:"segments/panoptic-segment-anything"}],summary:"Image Segmentation divides an image into segments where each pixel in the image is mapped to an object. This task has multiple variants such as instance segmentation, panoptic segmentation and semantic segmentation.",widgetModels:["nvidia/segformer-b0-finetuned-ade-512-512"],youtubeId:"dKE8SIt9C-w"},Xge={datasets:[{description:"A benchmark dataset for reference image controlled video generation.",id:"ali-vilab/VACE-Benchmark"},{description:"A dataset of video generation style preferences.",id:"Rapidata/sora-video-generation-style-likert-scoring"},{description:"A dataset with videos and captions throughout the videos.",id:"BestWishYsh/ChronoMagic"}],demo:{inputs:[{filename:"image-to-video-input.jpg",type:"img"},{label:"Optional Text Prompt",content:"This penguin is dancing",type:"text"}],outputs:[{filename:"image-to-video-output.gif",type:"img"}]},metrics:[{description:"Fréchet Video Distance (FVD) measures the perceptual similarity between the distributions of generated videos and a set of real videos, assessing overall visual quality and temporal coherence of the video generated from an input image.",id:"fvd"},{description:"CLIP Score measures the semantic similarity between a textual prompt (if provided alongside the input image) and the generated video frames. It evaluates how well the video's generated content and motion align with the textual description, conditioned on the initial image.",id:"clip_score"},{description:"First Frame Fidelity, often measured using LPIPS (Learned Perceptual Image Patch Similarity), PSNR, or SSIM, quantifies how closely the first frame of the generated video matches the input conditioning image.",id:"lpips"},{description:"Identity Preservation Score measures the consistency of identity (e.g., a person's face or a specific object's characteristics) between the input image and throughout the generated video frames, often calculated using features from specialized models like face recognition (e.g., ArcFace) or re-identification models.",id:"identity_preservation"},{description:"Motion Score evaluates the quality, realism, and temporal consistency of motion in the video generated from a static image. This can be based on optical flow analysis (e.g., smoothness, magnitude), consistency of object trajectories, or specific motion plausibility assessments.",id:"motion_score"}],models:[{description:"LTX-Video, a 13B parameter model for high quality video generation",id:"Lightricks/LTX-Video-0.9.7-dev"},{description:"A 14B parameter model for reference image controlled video generation",id:"Wan-AI/Wan2.1-VACE-14B"},{description:"An image-to-video generation model using FramePack F1 methodology with Hunyuan-DiT architecture",id:"lllyasviel/FramePack_F1_I2V_HY_20250503"},{description:"A distilled version of the LTX-Video-0.9.7-dev model for faster inference",id:"Lightricks/LTX-Video-0.9.7-distilled"},{description:"An image-to-video generation model by Skywork AI, 14B parameters, producing 720p videos.",id:"Skywork/SkyReels-V2-I2V-14B-720P"},{description:"Image-to-video variant of Tencent's HunyuanVideo.",id:"tencent/HunyuanVideo-I2V"},{description:"A 14B parameter model for 720p image-to-video generation by Wan-AI.",id:"Wan-AI/Wan2.1-I2V-14B-720P"},{description:"A Diffusers version of the Wan2.1-I2V-14B-720P model for 720p image-to-video generation.",id:"Wan-AI/Wan2.1-I2V-14B-720P-Diffusers"}],spaces:[{description:"An application to generate videos fast.",id:"Lightricks/ltx-video-distilled"},{description:"Generate videos with the FramePack-F1",id:"linoyts/FramePack-F1"},{description:"Generate videos with the FramePack",id:"lisonallen/framepack-i2v"},{description:"Wan2.1 with CausVid LoRA",id:"multimodalart/wan2-1-fast"},{description:"A demo for Stable Video Diffusion",id:"multimodalart/stable-video-diffusion"}],summary:"Image-to-video models take a still image as input and generate a video. These models can be guided by text prompts to influence the content and style of the output video.",widgetModels:[],youtubeId:void 0},Zge={datasets:[{description:"Widely used benchmark dataset for multiple Vision tasks.",id:"merve/coco2017"},{description:"Medical Imaging dataset of the Human Brain for segmentation and mask generating tasks",id:"rocky93/BraTS_segmentation"}],demo:{inputs:[{filename:"mask-generation-input.png",type:"img"}],outputs:[{filename:"mask-generation-output.png",type:"img"}]},metrics:[{description:"IoU is used to measure the overlap between predicted mask and the ground truth mask.",id:"Intersection over Union (IoU)"}],models:[{description:"Small yet powerful mask generation model.",id:"Zigeng/SlimSAM-uniform-50"},{description:"Very strong mask generation model.",id:"facebook/sam2-hiera-large"}],spaces:[{description:"An application that combines a mask generation model with a zero-shot object detection model for text-guided image segmentation.",id:"merve/OWLSAM2"},{description:"An application that compares the performance of a large and a small mask generation model.",id:"merve/slimsam"},{description:"An application based on an improved mask generation model.",id:"SkalskiP/segment-anything-model-2"},{description:"An application to remove objects from videos using mask generation models.",id:"SkalskiP/SAM_and_ProPainter"}],summary:"Mask generation is the task of generating masks that identify a specific object or region of interest in a given image. Masks are often used in segmentation tasks, where they provide a precise way to isolate the object of interest for further processing or analysis.",widgetModels:[],youtubeId:""},Qge={datasets:[{description:"Widely used benchmark dataset for multiple vision tasks.",id:"merve/coco2017"},{description:"Multi-task computer vision benchmark.",id:"merve/pascal-voc"}],demo:{inputs:[{filename:"object-detection-input.jpg",type:"img"}],outputs:[{filename:"object-detection-output.jpg",type:"img"}]},metrics:[{description:"The Average Precision (AP) metric is the Area Under the PR Curve (AUC-PR). It is calculated for each class separately",id:"Average Precision"},{description:"The Mean Average Precision (mAP) metric is the overall average of the AP values",id:"Mean Average Precision"},{description:"The APα metric is the Average Precision at the IoU threshold of a α value, for example, AP50 and AP75",id:"APα"}],models:[{description:"Solid object detection model pre-trained on the COCO 2017 dataset.",id:"facebook/detr-resnet-50"},{description:"Accurate object detection model.",id:"IDEA-Research/dab-detr-resnet-50"},{description:"Fast and accurate object detection model.",id:"PekingU/rtdetr_v2_r50vd"},{description:"Object detection model for low-lying objects.",id:"StephanST/WALDO30"}],spaces:[{description:"Leaderboard to compare various object detection models across several metrics.",id:"hf-vision/object_detection_leaderboard"},{description:"An application that contains various object detection models to try from.",id:"Gradio-Blocks/Object-Detection-With-DETR-and-YOLOS"},{description:"A cutting-edge object detection application.",id:"sunsmarterjieleaf/yolov12"},{description:"An object tracking, segmentation and inpainting application.",id:"VIPLab/Track-Anything"},{description:"Very fast object tracking application based on object detection.",id:"merve/RT-DETR-tracking-coco"}],summary:"Object Detection models allow users to identify objects of certain defined classes. Object detection models receive an image as input and output the images with bounding boxes and labels on detected objects.",widgetModels:["facebook/detr-resnet-50"],youtubeId:"WdAeKSOpxhw"},Yge={datasets:[{description:"NYU Depth V2 Dataset: Video dataset containing both RGB and depth sensor data.",id:"sayakpaul/nyu_depth_v2"},{description:"Monocular depth estimation benchmark based without noise and errors.",id:"depth-anything/DA-2K"}],demo:{inputs:[{filename:"depth-estimation-input.jpg",type:"img"}],outputs:[{filename:"depth-estimation-output.png",type:"img"}]},metrics:[],models:[{description:"Cutting-edge depth estimation model.",id:"depth-anything/Depth-Anything-V2-Large"},{description:"A strong monocular depth estimation model.",id:"jingheya/lotus-depth-g-v1-0"},{description:"A depth estimation model that predicts depth in videos.",id:"tencent/DepthCrafter"},{description:"A robust depth estimation model.",id:"apple/DepthPro-hf"}],spaces:[{description:"An application that predicts the depth of an image and then reconstruct the 3D model as voxels.",id:"radames/dpt-depth-estimation-3d-voxels"},{description:"An application for bleeding-edge depth estimation.",id:"akhaliq/depth-pro"},{description:"An application on cutting-edge depth estimation in videos.",id:"tencent/DepthCrafter"},{description:"A human-centric depth estimation application.",id:"facebook/sapiens-depth"}],summary:"Depth estimation is the task of predicting depth of the objects present in an image.",widgetModels:[""],youtubeId:""},dW={datasets:[],demo:{inputs:[],outputs:[]},isPlaceholder:!0,metrics:[],models:[],spaces:[],summary:"",widgetModels:[],youtubeId:void 0,canonicalId:void 0},e_e={datasets:[{description:"A curation of widely used datasets for Data Driven Deep Reinforcement Learning (D4RL)",id:"edbeeching/decision_transformer_gym_replay"}],demo:{inputs:[{label:"State",content:"Red traffic light, pedestrians are about to pass.",type:"text"}],outputs:[{label:"Action",content:"Stop the car.",type:"text"},{label:"Next State",content:"Yellow light, pedestrians have crossed.",type:"text"}]},metrics:[{description:"Accumulated reward across all time steps discounted by a factor that ranges between 0 and 1 and determines how much the agent optimizes for future relative to immediate rewards. Measures how good is the policy ultimately found by a given algorithm considering uncertainty over the future.",id:"Discounted Total Reward"},{description:"Average return obtained after running the policy for a certain number of evaluation episodes. As opposed to total reward, mean reward considers how much reward a given algorithm receives while learning.",id:"Mean Reward"},{description:"Measures how good a given algorithm is after a predefined time. Some algorithms may be guaranteed to converge to optimal behavior across many time steps. However, an agent that reaches an acceptable level of optimality after a given time horizon may be preferable to one that ultimately reaches optimality but takes a long time.",id:"Level of Performance After Some Time"}],models:[{description:"A Reinforcement Learning model trained on expert data from the Gym Hopper environment",id:"edbeeching/decision-transformer-gym-hopper-expert"},{description:"A PPO agent playing seals/CartPole-v0 using the stable-baselines3 library and the RL Zoo.",id:"HumanCompatibleAI/ppo-seals-CartPole-v0"}],spaces:[{description:"An application for a cute puppy agent learning to catch a stick.",id:"ThomasSimonini/Huggy"},{description:"An application to play Snowball Fight with a reinforcement learning agent.",id:"ThomasSimonini/SnowballFight"}],summary:"Reinforcement learning is the computational approach of learning from action by interacting with an environment through trial and error and receiving rewards (negative or positive) as feedback",widgetModels:[],youtubeId:"q0BiUn5LiBc"},t_e={datasets:[{description:"A famous question answering dataset based on English articles from Wikipedia.",id:"squad_v2"},{description:"A dataset of aggregated anonymized actual queries issued to the Google search engine.",id:"natural_questions"}],demo:{inputs:[{label:"Question",content:"Which name is also used to describe the Amazon rainforest in English?",type:"text"},{label:"Context",content:"The Amazon rainforest, also known in English as Amazonia or the Amazon Jungle",type:"text"}],outputs:[{label:"Answer",content:"Amazonia",type:"text"}]},metrics:[{description:"Exact Match is a metric based on the strict character match of the predicted answer and the right answer. For answers predicted correctly, the Exact Match will be 1. Even if only one character is different, Exact Match will be 0",id:"exact-match"},{description:" The F1-Score metric is useful if we value both false positives and false negatives equally. The F1-Score is calculated on each word in the predicted sequence against the correct answer",id:"f1"}],models:[{description:"A robust baseline model for most question answering domains.",id:"deepset/roberta-base-squad2"},{description:"Small yet robust model that can answer questions.",id:"distilbert/distilbert-base-cased-distilled-squad"},{description:"A special model that can answer questions from tables.",id:"google/tapas-base-finetuned-wtq"}],spaces:[{description:"An application that can answer a long question from Wikipedia.",id:"deepset/wikipedia-assistant"}],summary:"Question Answering models can retrieve the answer to a question from a given text, which is useful for searching for an answer in a document. Some question answering models can generate answers without context!",widgetModels:["deepset/roberta-base-squad2"],youtubeId:"ajPx5LwJD-I"},r_e={datasets:[{description:"Bing queries with relevant passages from various web sources.",id:"microsoft/ms_marco"}],demo:{inputs:[{label:"Source sentence",content:"Machine learning is so easy.",type:"text"},{label:"Sentences to compare to",content:"Deep learning is so straightforward.",type:"text"},{label:"",content:"This is so difficult, like rocket science.",type:"text"},{label:"",content:"I can't believe how much I struggled with this.",type:"text"}],outputs:[{type:"chart",data:[{label:"Deep learning is so straightforward.",score:.623},{label:"This is so difficult, like rocket science.",score:.413},{label:"I can't believe how much I struggled with this.",score:.256}]}]},metrics:[{description:"Reciprocal Rank is a measure used to rank the relevancy of documents given a set of documents. Reciprocal Rank is the reciprocal of the rank of the document retrieved, meaning, if the rank is 3, the Reciprocal Rank is 0.33. If the rank is 1, the Reciprocal Rank is 1",id:"Mean Reciprocal Rank"},{description:"The similarity of the embeddings is evaluated mainly on cosine similarity. It is calculated as the cosine of the angle between two vectors. It is particularly useful when your texts are not the same length",id:"Cosine Similarity"}],models:[{description:"This model works well for sentences and paragraphs and can be used for clustering/grouping and semantic searches.",id:"sentence-transformers/all-mpnet-base-v2"},{description:"A multilingual robust sentence similarity model.",id:"BAAI/bge-m3"},{description:"A robust sentence similarity model.",id:"HIT-TMG/KaLM-embedding-multilingual-mini-instruct-v1.5"}],spaces:[{description:"An application that leverages sentence similarity to answer questions from YouTube videos.",id:"Gradio-Blocks/Ask_Questions_To_YouTube_Videos"},{description:"An application that retrieves relevant PubMed abstracts for a given online article which can be used as further references.",id:"Gradio-Blocks/pubmed-abstract-retriever"},{description:"An application that leverages sentence similarity to summarize text.",id:"nickmuchi/article-text-summarizer"},{description:"A guide that explains how Sentence Transformers can be used for semantic search.",id:"sentence-transformers/Sentence_Transformers_for_semantic_search"}],summary:"Sentence Similarity is the task of determining how similar two texts are. Sentence similarity models convert input texts into vectors (embeddings) that capture semantic information and calculate how close (similar) they are between them. This task is particularly useful for information retrieval and clustering/grouping.",widgetModels:["BAAI/bge-small-en-v1.5"],youtubeId:"VCZq5AkbNEU"},n_e={canonicalId:"text2text-generation",datasets:[{description:"News articles in five different languages along with their summaries. Widely used for benchmarking multilingual summarization models.",id:"mlsum"},{description:"English conversations and their summaries. Useful for benchmarking conversational agents.",id:"samsum"}],demo:{inputs:[{label:"Input",content:"The tower is 324 metres (1,063 ft) tall, about the same height as an 81-storey building, and the tallest structure in Paris. Its base is square, measuring 125 metres (410 ft) on each side. It was the first structure to reach a height of 300 metres. Excluding transmitters, the Eiffel Tower is the second tallest free-standing structure in France after the Millau Viaduct.",type:"text"}],outputs:[{label:"Output",content:"The tower is 324 metres (1,063 ft) tall, about the same height as an 81-storey building. It was the first structure to reach a height of 300 metres.",type:"text"}]},metrics:[{description:"The generated sequence is compared against its summary, and the overlap of tokens are counted. ROUGE-N refers to overlap of N subsequent tokens, ROUGE-1 refers to overlap of single tokens and ROUGE-2 is the overlap of two subsequent tokens.",id:"rouge"}],models:[{description:"A strong summarization model trained on English news articles. Excels at generating factual summaries.",id:"facebook/bart-large-cnn"},{description:"A summarization model trained on medical articles.",id:"Falconsai/medical_summarization"}],spaces:[{description:"An application that can summarize long paragraphs.",id:"pszemraj/summarize-long-text"},{description:"A much needed summarization application for terms and conditions.",id:"ml6team/distilbart-tos-summarizer-tosdr"},{description:"An application that summarizes long documents.",id:"pszemraj/document-summarization"},{description:"An application that can detect errors in abstractive summarization.",id:"ml6team/post-processing-summarization"}],summary:"Summarization is the task of producing a shorter version of a document while preserving its important information. Some models can extract text from the original input, while other models can generate entirely new text.",widgetModels:["facebook/bart-large-cnn"],youtubeId:"yHnr5Dk2zCI"},i_e={datasets:[{description:"The WikiTableQuestions dataset is a large-scale dataset for the task of question answering on semi-structured tables.",id:"wikitablequestions"},{description:"WikiSQL is a dataset of 80654 hand-annotated examples of questions and SQL queries distributed across 24241 tables from Wikipedia.",id:"wikisql"}],demo:{inputs:[{table:[["Rank","Name","No.of reigns","Combined days"],["1","lou Thesz","3","3749"],["2","Ric Flair","8","3103"],["3","Harley Race","7","1799"]],type:"tabular"},{label:"Question",content:"What is the number of reigns for Harley Race?",type:"text"}],outputs:[{label:"Result",content:"7",type:"text"}]},metrics:[{description:"Checks whether the predicted answer(s) is the same as the ground-truth answer(s).",id:"Denotation Accuracy"}],models:[{description:"A table question answering model that is capable of neural SQL execution, i.e., employ TAPEX to execute a SQL query on a given table.",id:"microsoft/tapex-base"},{description:"A robust table question answering model.",id:"google/tapas-base-finetuned-wtq"}],spaces:[{description:"An application that answers questions based on table CSV files.",id:"katanaml/table-query"}],summary:"Table Question Answering (Table QA) is the answering a question about an information on a given table.",widgetModels:["google/tapas-base-finetuned-wtq"]},a_e={datasets:[{description:"A comprehensive curation of datasets covering all benchmarks.",id:"inria-soda/tabular-benchmark"}],demo:{inputs:[{table:[["Glucose","Blood Pressure ","Skin Thickness","Insulin","BMI"],["148","72","35","0","33.6"],["150","50","30","0","35.1"],["141","60","29","1","39.2"]],type:"tabular"}],outputs:[{table:[["Diabetes"],["1"],["1"],["0"]],type:"tabular"}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"",id:"f1"}],models:[{description:"Breast cancer prediction model based on decision trees.",id:"scikit-learn/cancer-prediction-trees"}],spaces:[{description:"An application that can predict defective products on a production line.",id:"scikit-learn/tabular-playground"},{description:"An application that compares various tabular classification techniques on different datasets.",id:"scikit-learn/classification"}],summary:"Tabular classification is the task of classifying a target category (a group) based on set of attributes.",widgetModels:["scikit-learn/tabular-playground"],youtubeId:""},o_e={datasets:[{description:"A comprehensive curation of datasets covering all benchmarks.",id:"inria-soda/tabular-benchmark"}],demo:{inputs:[{table:[["Car Name","Horsepower","Weight"],["ford torino","140","3,449"],["amc hornet","97","2,774"],["toyota corolla","65","1,773"]],type:"tabular"}],outputs:[{table:[["MPG (miles per gallon)"],["17"],["18"],["31"]],type:"tabular"}]},metrics:[{description:"",id:"mse"},{description:"Coefficient of determination (or R-squared) is a measure of how well the model fits the data. Higher R-squared is considered a better fit.",id:"r-squared"}],models:[{description:"Fish weight prediction based on length measurements and species.",id:"scikit-learn/Fish-Weight"}],spaces:[{description:"An application that can predict weight of a fish based on set of attributes.",id:"scikit-learn/fish-weight-prediction"}],summary:"Tabular regression is the task of predicting a numerical value given a set of attributes.",widgetModels:["scikit-learn/Fish-Weight"],youtubeId:""},s_e={datasets:[{description:"RedCaps is a large-scale dataset of 12M image-text pairs collected from Reddit.",id:"red_caps"},{description:"Conceptual Captions is a dataset consisting of ~3.3M images annotated with captions.",id:"conceptual_captions"},{description:"12M image-caption pairs.",id:"Spawning/PD12M"}],demo:{inputs:[{label:"Input",content:"A city above clouds, pastel colors, Victorian style",type:"text"}],outputs:[{filename:"image.jpeg",type:"img"}]},metrics:[{description:"The Inception Score (IS) measure assesses diversity and meaningfulness. It uses a generated image sample to predict its label. A higher score signifies more diverse and meaningful images.",id:"IS"},{description:"The Fréchet Inception Distance (FID) calculates the distance between distributions between synthetic and real samples. A lower FID score indicates better similarity between the distributions of real and generated images.",id:"FID"},{description:"R-precision assesses how the generated image aligns with the provided text description. It uses the generated images as queries to retrieve relevant text descriptions. The top 'r' relevant descriptions are selected and used to calculate R-precision as r/R, where 'R' is the number of ground truth descriptions associated with the generated images. A higher R-precision value indicates a better model.",id:"R-Precision"}],models:[{description:"One of the most powerful image generation models that can generate realistic outputs.",id:"black-forest-labs/FLUX.1-dev"},{description:"A powerful yet fast image generation model.",id:"latent-consistency/lcm-lora-sdxl"},{description:"Text-to-image model for photorealistic generation.",id:"Kwai-Kolors/Kolors"},{description:"A powerful text-to-image model.",id:"stabilityai/stable-diffusion-3-medium-diffusers"}],spaces:[{description:"A powerful text-to-image application.",id:"stabilityai/stable-diffusion-3-medium"},{description:"A text-to-image application to generate comics.",id:"jbilcke-hf/ai-comic-factory"},{description:"An application to match multiple custom image generation models.",id:"multimodalart/flux-lora-lab"},{description:"A powerful yet very fast image generation application.",id:"latent-consistency/lcm-lora-for-sdxl"},{description:"A gallery to explore various text-to-image models.",id:"multimodalart/LoraTheExplorer"},{description:"An application for `text-to-image`, `image-to-image` and image inpainting.",id:"ArtGAN/Stable-Diffusion-ControlNet-WebUI"},{description:"An application to generate realistic images given photos of a person and a prompt.",id:"InstantX/InstantID"}],summary:"Text-to-image is the task of generating images from input text. These pipelines can also be used to modify and edit images based on text prompts.",widgetModels:["black-forest-labs/FLUX.1-dev"],youtubeId:""},u_e={canonicalId:"text-to-audio",datasets:[{description:"10K hours of multi-speaker English dataset.",id:"parler-tts/mls_eng_10k"},{description:"Multi-speaker English dataset.",id:"mythicinfinity/libritts_r"},{description:"Multi-lingual dataset.",id:"facebook/multilingual_librispeech"}],demo:{inputs:[{label:"Input",content:"I love audio models on the Hub!",type:"text"}],outputs:[{filename:"audio.wav",type:"audio"}]},metrics:[{description:"The Mel Cepstral Distortion (MCD) metric is used to calculate the quality of generated speech.",id:"mel cepstral distortion"}],models:[{description:"A prompt based, powerful TTS model.",id:"parler-tts/parler-tts-large-v1"},{description:"A powerful TTS model that supports English and Chinese.",id:"SWivid/F5-TTS"},{description:"A massively multi-lingual TTS model.",id:"fishaudio/fish-speech-1.5"},{description:"A powerful TTS model.",id:"OuteAI/OuteTTS-0.1-350M"},{description:"Small yet powerful TTS model.",id:"hexgrad/Kokoro-82M"}],spaces:[{description:"An application for generate high quality speech in different languages.",id:"hexgrad/Kokoro-TTS"},{description:"A multilingual text-to-speech application.",id:"fishaudio/fish-speech-1"},{description:"An application that generates speech in different styles in English and Chinese.",id:"mrfakename/E2-F5-TTS"},{description:"An application that synthesizes emotional speech for diverse speaker prompts.",id:"parler-tts/parler-tts-expresso"},{description:"An application that generates podcast episodes.",id:"ngxson/kokoro-podcast-generator"}],summary:"Text-to-Speech (TTS) is the task of generating natural sounding speech given text input. TTS models can be extended to have a single model that generates speech for multiple speakers and multiple languages.",widgetModels:["suno/bark"],youtubeId:"NW62DpzJ274"},l_e={datasets:[{description:"A widely used dataset useful to benchmark named entity recognition models.",id:"eriktks/conll2003"},{description:"A multilingual dataset of Wikipedia articles annotated for named entity recognition in over 150 different languages.",id:"unimelb-nlp/wikiann"}],demo:{inputs:[{label:"Input",content:"My name is Omar and I live in Zürich.",type:"text"}],outputs:[{text:"My name is Omar and I live in Zürich.",tokens:[{type:"PERSON",start:11,end:15},{type:"GPE",start:30,end:36}],type:"text-with-tokens"}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"",id:"f1"}],models:[{description:"A robust performance model to identify people, locations, organizations and names of miscellaneous entities.",id:"dslim/bert-base-NER"},{description:"A strong model to identify people, locations, organizations and names in multiple languages.",id:"FacebookAI/xlm-roberta-large-finetuned-conll03-english"},{description:"A token classification model specialized on medical entity recognition.",id:"blaze999/Medical-NER"},{description:"Flair models are typically the state of the art in named entity recognition tasks.",id:"flair/ner-english"}],spaces:[{description:"An application that can recognizes entities, extracts noun chunks and recognizes various linguistic features of each token.",id:"spacy/gradio_pipeline_visualizer"}],summary:"Token classification is a natural language understanding task in which a label is assigned to some tokens in a text. Some popular token classification subtasks are Named Entity Recognition (NER) and Part-of-Speech (PoS) tagging. NER models could be trained to identify specific entities in a text, such as dates, individuals and places; and PoS tagging would identify, for example, which words in a text are verbs, nouns, and punctuation marks.",widgetModels:["FacebookAI/xlm-roberta-large-finetuned-conll03-english"],youtubeId:"wVHdVlPScxA"},c_e={canonicalId:"text2text-generation",datasets:[{description:"A dataset of copyright-free books translated into 16 different languages.",id:"Helsinki-NLP/opus_books"},{description:"An example of translation between programming languages. This dataset consists of functions in Java and C#.",id:"google/code_x_glue_cc_code_to_code_trans"}],demo:{inputs:[{label:"Input",content:"My name is Omar and I live in Zürich.",type:"text"}],outputs:[{label:"Output",content:"Mein Name ist Omar und ich wohne in Zürich.",type:"text"}]},metrics:[{description:"BLEU score is calculated by counting the number of shared single or subsequent tokens between the generated sequence and the reference. Subsequent n tokens are called “n-grams”. Unigram refers to a single token while bi-gram refers to token pairs and n-grams refer to n subsequent tokens. The score ranges from 0 to 1, where 1 means the translation perfectly matched and 0 did not match at all",id:"bleu"},{description:"",id:"sacrebleu"}],models:[{description:"Very powerful model that can translate many languages between each other, especially low-resource languages.",id:"facebook/nllb-200-1.3B"},{description:"A general-purpose Transformer that can be used to translate from English to German, French, or Romanian.",id:"google-t5/t5-base"}],spaces:[{description:"An application that can translate between 100 languages.",id:"Iker/Translate-100-languages"},{description:"An application that can translate between many languages.",id:"Geonmo/nllb-translation-demo"}],summary:"Translation is the task of converting text from one language to another.",widgetModels:["facebook/mbart-large-50-many-to-many-mmt"],youtubeId:"1JvfrvZgi6c"},d_e={datasets:[{description:"A widely used dataset used to benchmark multiple variants of text classification.",id:"nyu-mll/glue"},{description:"A text classification dataset used to benchmark natural language inference models",id:"stanfordnlp/snli"}],demo:{inputs:[{label:"Input",content:"I love Hugging Face!",type:"text"}],outputs:[{type:"chart",data:[{label:"POSITIVE",score:.9},{label:"NEUTRAL",score:.1},{label:"NEGATIVE",score:0}]}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"The F1 metric is the harmonic mean of the precision and recall. It can be calculated as: F1 = 2 * (precision * recall) / (precision + recall)",id:"f1"}],models:[{description:"A robust model trained for sentiment analysis.",id:"distilbert/distilbert-base-uncased-finetuned-sst-2-english"},{description:"A sentiment analysis model specialized in financial sentiment.",id:"ProsusAI/finbert"},{description:"A sentiment analysis model specialized in analyzing tweets.",id:"cardiffnlp/twitter-roberta-base-sentiment-latest"},{description:"A model that can classify languages.",id:"papluca/xlm-roberta-base-language-detection"},{description:"A model that can classify text generation attacks.",id:"meta-llama/Prompt-Guard-86M"}],spaces:[{description:"An application that can classify financial sentiment.",id:"IoannisTr/Tech_Stocks_Trading_Assistant"},{description:"A dashboard that contains various text classification tasks.",id:"miesnerjacob/Multi-task-NLP"},{description:"An application that analyzes user reviews in healthcare.",id:"spacy/healthsea-demo"}],summary:"Text Classification is the task of assigning a label or class to a given text. Some use cases are sentiment analysis, natural language inference, and assessing grammatical correctness.",widgetModels:["distilbert/distilbert-base-uncased-finetuned-sst-2-english"],youtubeId:"leNG9fN9FQU"},f_e={datasets:[{description:"Multilingual dataset used to evaluate text generation models.",id:"CohereForAI/Global-MMLU"},{description:"High quality multilingual data used to train text-generation models.",id:"HuggingFaceFW/fineweb-2"},{description:"Truly open-source, curated and cleaned dialogue dataset.",id:"HuggingFaceH4/ultrachat_200k"},{description:"A reasoning dataset.",id:"open-r1/OpenThoughts-114k-math"},{description:"A multilingual instruction dataset with preference ratings on responses.",id:"allenai/tulu-3-sft-mixture"},{description:"A large synthetic dataset for alignment of text generation models.",id:"HuggingFaceTB/smoltalk"},{description:"A dataset made for training text generation models solving math questions.",id:"HuggingFaceTB/finemath"}],demo:{inputs:[{label:"Input",content:"Once upon a time,",type:"text"}],outputs:[{label:"Output",content:"Once upon a time, we knew that our ancestors were on the verge of extinction. The great explorers and poets of the Old World, from Alexander the Great to Chaucer, are dead and gone. A good many of our ancient explorers and poets have",type:"text"}]},metrics:[{description:"Cross Entropy is a metric that calculates the difference between two probability distributions. Each probability distribution is the distribution of predicted words",id:"Cross Entropy"},{description:"The Perplexity metric is the exponential of the cross-entropy loss. It evaluates the probabilities assigned to the next word by the model. Lower perplexity indicates better performance",id:"Perplexity"}],models:[{description:"A text-generation model trained to follow instructions.",id:"google/gemma-2-2b-it"},{description:"Smaller variant of one of the most powerful models.",id:"deepseek-ai/DeepSeek-R1-Distill-Qwen-1.5B"},{description:"Very powerful text generation model trained to follow instructions.",id:"meta-llama/Meta-Llama-3.1-8B-Instruct"},{description:"Powerful text generation model by Microsoft.",id:"microsoft/phi-4"},{description:"A very powerful model with reasoning capabilities.",id:"simplescaling/s1.1-32B"},{description:"Strong conversational model that supports very long instructions.",id:"Qwen/Qwen2.5-7B-Instruct-1M"},{description:"Text generation model used to write code.",id:"Qwen/Qwen2.5-Coder-32B-Instruct"},{description:"Powerful reasoning based open large language model.",id:"deepseek-ai/DeepSeek-R1"}],spaces:[{description:"A leaderboard to compare different open-source text generation models based on various benchmarks.",id:"open-llm-leaderboard/open_llm_leaderboard"},{description:"A leaderboard for comparing chain-of-thought performance of models.",id:"logikon/open_cot_leaderboard"},{description:"An text generation based application based on a very powerful LLaMA2 model.",id:"ysharma/Explore_llamav2_with_TGI"},{description:"An text generation based application to converse with Zephyr model.",id:"HuggingFaceH4/zephyr-chat"},{description:"A leaderboard that ranks text generation models based on blind votes from people.",id:"lmsys/chatbot-arena-leaderboard"},{description:"An chatbot to converse with a very powerful text generation model.",id:"mlabonne/phixtral-chat"}],summary:"Generating text is the task of generating new text given another text. These models can, for example, fill in incomplete text or paraphrase.",widgetModels:["mistralai/Mistral-Nemo-Instruct-2407"],youtubeId:"e9gNEAlsOvU"},p_e={datasets:[{description:"Bing queries with relevant passages from various web sources.",id:"microsoft/ms_marco"}],demo:{inputs:[{label:"Source sentence",content:"Machine learning is so easy.",type:"text"},{label:"Sentences to compare to",content:"Deep learning is so straightforward.",type:"text"},{label:"",content:"This is so difficult, like rocket science.",type:"text"},{label:"",content:"I can't believe how much I struggled with this.",type:"text"}],outputs:[{type:"chart",data:[{label:"Deep learning is so straightforward.",score:2.2006407},{label:"This is so difficult, like rocket science.",score:-6.2634873},{label:"I can't believe how much I struggled with this.",score:-10.251488}]}]},metrics:[{description:"Discounted Cumulative Gain (DCG) measures the gain, or usefulness, of search results discounted by their position. The normalization is done by dividing the DCG by the ideal DCG, which is the DCG of the perfect ranking.",id:"Normalized Discounted Cumulative Gain"},{description:"Reciprocal Rank is a measure used to rank the relevancy of documents given a set of documents. Reciprocal Rank is the reciprocal of the rank of the document retrieved, meaning, if the rank is 3, the Reciprocal Rank is 0.33. If the rank is 1, the Reciprocal Rank is 1",id:"Mean Reciprocal Rank"},{description:"Mean Average Precision (mAP) is the overall average of the Average Precision (AP) values, where AP is the Area Under the PR Curve (AUC-PR)",id:"Mean Average Precision"}],models:[{description:"An extremely efficient text ranking model trained on a web search dataset.",id:"cross-encoder/ms-marco-MiniLM-L6-v2"},{description:"A strong multilingual text reranker model.",id:"Alibaba-NLP/gte-multilingual-reranker-base"},{description:"An efficient text ranking model that punches above its weight.",id:"Alibaba-NLP/gte-reranker-modernbert-base"}],spaces:[],summary:"Text Ranking is the task of ranking a set of texts based on their relevance to a query. Text ranking models are trained on large datasets of queries and relevant documents to learn how to rank documents based on their relevance to the query. This task is particularly useful for search engines and information retrieval systems.",widgetModels:["cross-encoder/ms-marco-MiniLM-L6-v2"],youtubeId:""},h_e={datasets:[{description:"Microsoft Research Video to Text is a large-scale dataset for open domain video captioning",id:"iejMac/CLIP-MSR-VTT"},{description:"UCF101 Human Actions dataset consists of 13,320 video clips from YouTube, with 101 classes.",id:"quchenyuan/UCF101-ZIP"},{description:"A high-quality dataset for human action recognition in YouTube videos.",id:"nateraw/kinetics"},{description:"A dataset of video clips of humans performing pre-defined basic actions with everyday objects.",id:"HuggingFaceM4/something_something_v2"},{description:"This dataset consists of text-video pairs and contains noisy samples with irrelevant video descriptions",id:"HuggingFaceM4/webvid"},{description:"A dataset of short Flickr videos for the temporal localization of events with descriptions.",id:"iejMac/CLIP-DiDeMo"}],demo:{inputs:[{label:"Input",content:"Darth Vader is surfing on the waves.",type:"text"}],outputs:[{filename:"text-to-video-output.gif",type:"img"}]},metrics:[{description:"Inception Score uses an image classification model that predicts class labels and evaluates how distinct and diverse the images are. A higher score indicates better video generation.",id:"is"},{description:"Frechet Inception Distance uses an image classification model to obtain image embeddings. The metric compares mean and standard deviation of the embeddings of real and generated images. A smaller score indicates better video generation.",id:"fid"},{description:"Frechet Video Distance uses a model that captures coherence for changes in frames and the quality of each frame. A smaller score indicates better video generation.",id:"fvd"},{description:"CLIPSIM measures similarity between video frames and text using an image-text similarity model. A higher score indicates better video generation.",id:"clipsim"}],models:[{description:"A strong model for consistent video generation.",id:"tencent/HunyuanVideo"},{description:"A text-to-video model with high fidelity motion and strong prompt adherence.",id:"Lightricks/LTX-Video"},{description:"A text-to-video model focusing on physics-aware applications like robotics.",id:"nvidia/Cosmos-1.0-Diffusion-7B-Text2World"},{description:"A robust model for video generation.",id:"Wan-AI/Wan2.1-T2V-1.3B"}],spaces:[{description:"An application that generates video from text.",id:"VideoCrafter/VideoCrafter"},{description:"Consistent video generation application.",id:"Wan-AI/Wan2.1"},{description:"A cutting edge video generation application.",id:"Pyramid-Flow/pyramid-flow"}],summary:"Text-to-video models can be used in any application that requires generating consistent sequence of images from text. ",widgetModels:["Wan-AI/Wan2.1-T2V-14B"],youtubeId:void 0},m_e={datasets:[{description:"The CIFAR-100 dataset consists of 60000 32x32 colour images in 100 classes, with 600 images per class.",id:"cifar100"},{description:"Multiple images of celebrities, used for facial expression translation.",id:"CelebA"}],demo:{inputs:[{label:"Seed",content:"42",type:"text"},{label:"Number of images to generate:",content:"4",type:"text"}],outputs:[{filename:"unconditional-image-generation-output.jpeg",type:"img"}]},metrics:[{description:"The inception score (IS) evaluates the quality of generated images. It measures the diversity of the generated images (the model predictions are evenly distributed across all possible labels) and their 'distinction' or 'sharpness' (the model confidently predicts a single label for each image).",id:"Inception score (IS)"},{description:"The Fréchet Inception Distance (FID) evaluates the quality of images created by a generative model by calculating the distance between feature vectors for real and generated images.",id:"Frećhet Inception Distance (FID)"}],models:[{description:"High-quality image generation model trained on the CIFAR-10 dataset. It synthesizes images of the ten classes presented in the dataset using diffusion probabilistic models, a class of latent variable models inspired by considerations from nonequilibrium thermodynamics.",id:"google/ddpm-cifar10-32"},{description:"High-quality image generation model trained on the 256x256 CelebA-HQ dataset. It synthesizes images of faces using diffusion probabilistic models, a class of latent variable models inspired by considerations from nonequilibrium thermodynamics.",id:"google/ddpm-celebahq-256"}],spaces:[{description:"An application that can generate realistic faces.",id:"CompVis/celeba-latent-diffusion"}],summary:"Unconditional image generation is the task of generating images with no condition in any context (like a prompt text or another image). Once trained, the model will create images that resemble its training data distribution.",widgetModels:[""],youtubeId:""},g_e={datasets:[{description:"Benchmark dataset used for video classification with videos that belong to 400 classes.",id:"kinetics400"}],demo:{inputs:[{filename:"video-classification-input.gif",type:"img"}],outputs:[{type:"chart",data:[{label:"Playing Guitar",score:.514},{label:"Playing Tennis",score:.193},{label:"Cooking",score:.068}]}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"",id:"f1"}],models:[{description:"Strong Video Classification model trained on the Kinetics 400 dataset.",id:"google/vivit-b-16x2-kinetics400"},{description:"Strong Video Classification model trained on the Kinetics 400 dataset.",id:"microsoft/xclip-base-patch32"}],spaces:[{description:"An application that classifies video at different timestamps.",id:"nateraw/lavila"},{description:"An application that classifies video.",id:"fcakyon/video-classification"}],summary:"Video classification is the task of assigning a label or class to an entire video. Videos are expected to have only one class for each video. Video classification models take a video as input and return a prediction about which class the video belongs to.",widgetModels:[],youtubeId:""},__e={datasets:[{description:"A large dataset used to train visual document retrieval models.",id:"vidore/colpali_train_set"}],demo:{inputs:[{filename:"input.png",type:"img"},{label:"Question",content:"Is the model in this paper the fastest for inference?",type:"text"}],outputs:[{type:"chart",data:[{label:"Page 10",score:.7},{label:"Page 11",score:.06},{label:"Page 9",score:.003}]}]},isPlaceholder:!1,metrics:[{description:"NDCG@k scores ranked recommendation lists for top-k results. 0 is the worst, 1 is the best.",id:"Normalized Discounted Cumulative Gain at K"}],models:[{description:"Very accurate visual document retrieval model for multilingual queries and documents.",id:"vidore/colqwen2-v1.0"},{description:"Very fast and efficient visual document retrieval model that works on five languages.",id:"marco/mcdse-2b-v1"}],spaces:[{description:"A leaderboard of visual document retrieval models.",id:"vidore/vidore-leaderboard"}],summary:"Visual document retrieval is the task of searching for relevant image-based documents, such as PDFs. These models take a text query and multiple documents as input and return the top-most relevant documents and relevancy scores as output.",widgetModels:[""],youtubeId:""},b_e={datasets:[{description:"A widely used dataset containing questions (with answers) about images.",id:"Graphcore/vqa"},{description:"A dataset to benchmark visual reasoning based on text in images.",id:"facebook/textvqa"}],demo:{inputs:[{filename:"elephant.jpeg",type:"img"},{label:"Question",content:"What is in this image?",type:"text"}],outputs:[{type:"chart",data:[{label:"elephant",score:.97},{label:"elephants",score:.06},{label:"animal",score:.003}]}]},isPlaceholder:!1,metrics:[{description:"",id:"accuracy"},{description:"Measures how much a predicted answer differs from the ground truth based on the difference in their semantic meaning.",id:"wu-palmer similarity"}],models:[{description:"A visual question answering model trained to convert charts and plots to text.",id:"google/deplot"},{description:"A visual question answering model trained for mathematical reasoning and chart derendering from images.",id:"google/matcha-base"},{description:"A strong visual question answering that answers questions from book covers.",id:"google/pix2struct-ocrvqa-large"}],spaces:[{description:"An application that compares visual question answering models across different tasks.",id:"merve/pix2struct"},{description:"An application that can answer questions based on images.",id:"nielsr/vilt-vqa"},{description:"An application that can caption images and answer questions about a given image. ",id:"Salesforce/BLIP"},{description:"An application that can caption images and answer questions about a given image. ",id:"vumichien/Img2Prompt"}],summary:"Visual Question Answering is the task of answering open-ended questions based on an image. They output natural language responses to natural language questions.",widgetModels:["dandelin/vilt-b32-finetuned-vqa"],youtubeId:""},y_e={datasets:[{description:"A widely used dataset used to benchmark multiple variants of text classification.",id:"nyu-mll/glue"},{description:"The Multi-Genre Natural Language Inference (MultiNLI) corpus is a crowd-sourced collection of 433k sentence pairs annotated with textual entailment information.",id:"nyu-mll/multi_nli"},{description:"FEVER is a publicly available dataset for fact extraction and verification against textual sources.",id:"fever/fever"}],demo:{inputs:[{label:"Text Input",content:"Dune is the best movie ever.",type:"text"},{label:"Candidate Labels",content:"CINEMA, ART, MUSIC",type:"text"}],outputs:[{type:"chart",data:[{label:"CINEMA",score:.9},{label:"ART",score:.1},{label:"MUSIC",score:0}]}]},metrics:[],models:[{description:"Powerful zero-shot text classification model.",id:"facebook/bart-large-mnli"},{description:"Cutting-edge zero-shot multilingual text classification model.",id:"MoritzLaurer/ModernBERT-large-zeroshot-v2.0"},{description:"Zero-shot text classification model that can be used for topic and sentiment classification.",id:"knowledgator/gliclass-modern-base-v2.0-init"}],spaces:[],summary:"Zero-shot text classification is a task in natural language processing where a model is trained on a set of labeled examples but is then able to classify new examples from previously unseen classes.",widgetModels:["facebook/bart-large-mnli"]},v_e={datasets:[{description:"",id:""}],demo:{inputs:[{filename:"image-classification-input.jpeg",type:"img"},{label:"Classes",content:"cat, dog, bird",type:"text"}],outputs:[{type:"chart",data:[{label:"Cat",score:.664},{label:"Dog",score:.329},{label:"Bird",score:.008}]}]},metrics:[{description:"Computes the number of times the correct label appears in top K labels predicted",id:"top-K accuracy"}],models:[{description:"Multilingual image classification model for 80 languages.",id:"visheratin/mexma-siglip"},{description:"Strong zero-shot image classification model.",id:"google/siglip2-base-patch16-224"},{description:"Robust zero-shot image classification model.",id:"intfloat/mmE5-mllama-11b-instruct"},{description:"Powerful zero-shot image classification model supporting 94 languages.",id:"jinaai/jina-clip-v2"},{description:"Strong image classification model for biomedical domain.",id:"microsoft/BiomedCLIP-PubMedBERT_256-vit_base_patch16_224"}],spaces:[{description:"An application that leverages zero-shot image classification to find best captions to generate an image. ",id:"pharma/CLIP-Interrogator"},{description:"An application to compare different zero-shot image classification models. ",id:"merve/compare_clip_siglip"}],summary:"Zero-shot image classification is the task of classifying previously unseen classes during training of a model.",widgetModels:["google/siglip-so400m-patch14-224"],youtubeId:""},w_e={datasets:[],demo:{inputs:[{filename:"zero-shot-object-detection-input.jpg",type:"img"},{label:"Classes",content:"cat, dog, bird",type:"text"}],outputs:[{filename:"zero-shot-object-detection-output.jpg",type:"img"}]},metrics:[{description:"The Average Precision (AP) metric is the Area Under the PR Curve (AUC-PR). It is calculated for each class separately",id:"Average Precision"},{description:"The Mean Average Precision (mAP) metric is the overall average of the AP values",id:"Mean Average Precision"},{description:"The APα metric is the Average Precision at the IoU threshold of a α value, for example, AP50 and AP75",id:"APα"}],models:[{description:"Solid zero-shot object detection model.",id:"IDEA-Research/grounding-dino-base"},{description:"Cutting-edge zero-shot object detection model.",id:"google/owlv2-base-patch16-ensemble"}],spaces:[{description:"A demo to try the state-of-the-art zero-shot object detection model, OWLv2.",id:"merve/owlv2"},{description:"A demo that combines a zero-shot object detection and mask generation model for zero-shot segmentation.",id:"merve/OWLSAM"}],summary:"Zero-shot object detection is a computer vision task to detect objects and their classes in images, without any prior training or knowledge of the classes. Zero-shot object detection models receive an image as input, as well as a list of candidate classes, and output the bounding boxes and labels where the objects have been detected.",widgetModels:[],youtubeId:""},S_e={datasets:[{description:"A large dataset of over 10 million 3D objects.",id:"allenai/objaverse-xl"},{description:"A dataset of isolated object images for evaluating image-to-3D models.",id:"dylanebert/iso3d"}],demo:{inputs:[{filename:"image-to-3d-image-input.png",type:"img"}],outputs:[{label:"Result",content:"image-to-3d-3d-output-filename.glb",type:"text"}]},metrics:[],models:[{description:"Fast image-to-3D mesh model by Tencent.",id:"TencentARC/InstantMesh"},{description:"Fast image-to-3D mesh model by StabilityAI",id:"stabilityai/TripoSR"},{description:"A scaled up image-to-3D mesh model derived from TripoSR.",id:"hwjiang/Real3D"},{description:"Consistent image-to-3d generation model.",id:"stabilityai/stable-point-aware-3d"}],spaces:[{description:"Leaderboard to evaluate image-to-3D models.",id:"dylanebert/3d-arena"},{description:"Image-to-3D demo with mesh outputs.",id:"TencentARC/InstantMesh"},{description:"Image-to-3D demo.",id:"stabilityai/stable-point-aware-3d"},{description:"Image-to-3D demo with mesh outputs.",id:"hwjiang/Real3D"},{description:"Image-to-3D demo with splat outputs.",id:"dylanebert/LGM-mini"}],summary:"Image-to-3D models take in image input and produce 3D output.",widgetModels:[],youtubeId:""},O_e={datasets:[{description:"A large dataset of over 10 million 3D objects.",id:"allenai/objaverse-xl"},{description:"Descriptive captions for 3D objects in Objaverse.",id:"tiange/Cap3D"}],demo:{inputs:[{label:"Prompt",content:"a cat statue",type:"text"}],outputs:[{label:"Result",content:"text-to-3d-3d-output-filename.glb",type:"text"}]},metrics:[],models:[{description:"Text-to-3D mesh model by OpenAI",id:"openai/shap-e"},{description:"Generative 3D gaussian splatting model.",id:"ashawkey/LGM"}],spaces:[{description:"Text-to-3D demo with mesh outputs.",id:"hysts/Shap-E"},{description:"Text/image-to-3D demo with splat outputs.",id:"ashawkey/LGM"}],summary:"Text-to-3D models take in text input and produce 3D output.",widgetModels:[],youtubeId:""},E_e={datasets:[{description:"A dataset of hand keypoints of over 500k examples.",id:"Vincent-luo/hagrid-mediapipe-hands"}],demo:{inputs:[{filename:"keypoint-detection-input.png",type:"img"}],outputs:[{filename:"keypoint-detection-output.png",type:"img"}]},metrics:[],models:[{description:"A robust keypoint detection model.",id:"magic-leap-community/superpoint"},{description:"A robust keypoint matching model.",id:"magic-leap-community/superglue_outdoor"},{description:"Strong keypoint detection model used to detect human pose.",id:"facebook/sapiens-pose-1b"},{description:"Powerful keypoint detection model used to detect human pose.",id:"usyd-community/vitpose-plus-base"}],spaces:[{description:"An application that detects hand keypoints in real-time.",id:"datasciencedojo/Hand-Keypoint-Detection-Realtime"},{description:"An application to try a universal keypoint detection model.",id:"merve/SuperPoint"}],summary:"Keypoint detection is the task of identifying meaningful distinctive points or features in an image.",widgetModels:[],youtubeId:""},R_e={datasets:[{description:"Multiple-choice questions and answers about videos.",id:"lmms-lab/Video-MME"},{description:"A dataset of instructions and question-answer pairs about videos.",id:"lmms-lab/VideoChatGPT"},{description:"Large video understanding dataset.",id:"HuggingFaceFV/finevideo"}],demo:{inputs:[{filename:"video-text-to-text-input.gif",type:"img"},{label:"Text Prompt",content:"What is happening in this video?",type:"text"}],outputs:[{label:"Answer",content:"The video shows a series of images showing a fountain with water jets and a variety of colorful flowers and butterflies in the background.",type:"text"}]},metrics:[],models:[{description:"A robust video-text-to-text model.",id:"Vision-CAIR/LongVU_Qwen2_7B"},{description:"Strong video-text-to-text model with reasoning capabilities.",id:"GoodiesHere/Apollo-LMMs-Apollo-7B-t32"},{description:"Strong video-text-to-text model.",id:"HuggingFaceTB/SmolVLM2-2.2B-Instruct"}],spaces:[{description:"An application to chat with a video-text-to-text model.",id:"llava-hf/video-llava"},{description:"A leaderboard for various video-text-to-text models.",id:"opencompass/openvlm_video_leaderboard"},{description:"An application to generate highlights from a video.",id:"HuggingFaceTB/SmolVLM2-HighlightGenerator"}],summary:"Video-text-to-text models take in a video and a text prompt and output text. These models are also called video-language models.",widgetModels:[""],youtubeId:""},C_e={"audio-classification":["speechbrain","transformers","transformers.js"],"audio-to-audio":["asteroid","fairseq","speechbrain"],"automatic-speech-recognition":["espnet","nemo","speechbrain","transformers","transformers.js"],"audio-text-to-text":[],"depth-estimation":["transformers","transformers.js"],"document-question-answering":["transformers","transformers.js"],"feature-extraction":["sentence-transformers","transformers","transformers.js"],"fill-mask":["transformers","transformers.js"],"graph-ml":["transformers"],"image-classification":["keras","timm","transformers","transformers.js"],"image-feature-extraction":["timm","transformers"],"image-segmentation":["transformers","transformers.js"],"image-text-to-text":["transformers"],"image-to-image":["diffusers","transformers","transformers.js"],"image-to-text":["transformers","transformers.js"],"image-to-video":["diffusers"],"keypoint-detection":["transformers"],"video-classification":["transformers"],"mask-generation":["transformers"],"multiple-choice":["transformers"],"object-detection":["transformers","transformers.js","ultralytics"],other:[],"question-answering":["adapter-transformers","allennlp","transformers","transformers.js"],robotics:[],"reinforcement-learning":["transformers","stable-baselines3","ml-agents","sample-factory"],"sentence-similarity":["sentence-transformers","spacy","transformers.js"],summarization:["transformers","transformers.js"],"table-question-answering":["transformers"],"table-to-text":["transformers"],"tabular-classification":["sklearn"],"tabular-regression":["sklearn"],"tabular-to-text":["transformers"],"text-classification":["adapter-transformers","setfit","spacy","transformers","transformers.js"],"text-generation":["transformers","transformers.js"],"text-ranking":["sentence-transformers","transformers"],"text-retrieval":[],"text-to-image":["diffusers"],"text-to-speech":["espnet","tensorflowtts","transformers","transformers.js"],"text-to-audio":["transformers","transformers.js"],"text-to-video":["diffusers"],"text2text-generation":["transformers","transformers.js"],"time-series-forecasting":[],"token-classification":["adapter-transformers","flair","spacy","span-marker","stanza","transformers","transformers.js"],translation:["transformers","transformers.js"],"unconditional-image-generation":["diffusers"],"video-text-to-text":["transformers"],"visual-question-answering":["transformers","transformers.js"],"voice-activity-detection":[],"zero-shot-classification":["transformers","transformers.js"],"zero-shot-image-classification":["transformers","transformers.js"],"zero-shot-object-detection":["transformers","transformers.js"],"text-to-3d":["diffusers"],"image-to-3d":["diffusers"],"any-to-any":["transformers"],"visual-document-retrieval":["transformers"]};function Be(r,e=dW){return{...e,id:r,label:S1[r].name,libraries:C_e[r]}}Be("any-to-any",qge),Be("audio-classification",Bge),Be("audio-to-audio",Uge),Be("audio-text-to-text",dW),Be("automatic-speech-recognition",zge),Be("depth-estimation",Yge),Be("document-question-answering",Lge),Be("visual-document-retrieval",__e),Be("feature-extraction",Fge),Be("fill-mask",kge),Be("image-classification",Vge),Be("image-feature-extraction",Hge),Be("image-segmentation",Jge),Be("image-to-image",Kge),Be("image-text-to-text",Gge),Be("image-to-text",Wge),Be("image-to-video",Xge),Be("keypoint-detection",E_e),Be("mask-generation",Zge),Be("object-detection",Qge),Be("video-classification",g_e),Be("question-answering",t_e),Be("reinforcement-learning",e_e),Be("sentence-similarity",r_e),Be("summarization",n_e),Be("table-question-answering",i_e),Be("tabular-classification",a_e),Be("tabular-regression",o_e),Be("text-classification",d_e),Be("text-generation",f_e),Be("text-ranking",p_e),Be("text-to-image",s_e),Be("text-to-speech",u_e),Be("text-to-video",h_e),Be("token-classification",l_e),Be("translation",c_e),Be("unconditional-image-generation",m_e),Be("video-text-to-text",R_e),Be("visual-question-answering",b_e),Be("zero-shot-classification",y_e),Be("zero-shot-image-classification",v_e),Be("zero-shot-object-detection",w_e),Be("text-to-3d",O_e),Be("image-to-3d",S_e);const P_e=()=>'"Hi, I recently bought a device from your company but it is not working as advertised and I would like to get reimbursed!"',j_e=()=>'"Меня зовут Вольфганг и я живу в Берлине"',T_e=()=>'"The tower is 324 metres (1,063 ft) tall, about the same height as an 81-storey building, and the tallest structure in Paris. Its base is square, measuring 125 metres (410 ft) on each side. During its construction, the Eiffel Tower surpassed the Washington Monument to become the tallest man-made structure in the world, a title it held for 41 years until the Chrysler Building in New York City was finished in 1930. It was the first structure to reach a height of 300 metres. Due to the addition of a broadcasting aerial at the top of the tower in 1957, it is now taller than the Chrysler Building by 5.2 metres (17 ft). Excluding transmitters, the Eiffel Tower is the second tallest free-standing structure in France after the Millau Viaduct."',A_e=()=>`{
    "query": "How many stars does the transformers repository have?",
    "table": {
        "Repository": ["Transformers", "Datasets", "Tokenizers"],
        "Stars": ["36542", "4512", "3934"],
        "Contributors": ["651", "77", "34"],
        "Programming language": [
            "Python",
            "Python",
            "Rust, Python and NodeJS"
        ]
    }
}`,M_e=()=>`{
        "image": "cat.png",
        "question": "What is in this image?"
    }`,I_e=()=>`{
    "question": "What is my name?",
    "context": "My name is Clara and I live in Berkeley."
}`,x_e=()=>'"I like you. I love you"',D_e=()=>'"My name is Sarah Jessica Parker but you can call me Jessica"',$V=r=>r.tags.includes("conversational")?r.pipeline_tag==="text-generation"?[{role:"user",content:"What is the capital of France?"}]:[{role:"user",content:[{type:"text",text:"Describe this image in one sentence."},{type:"image_url",image_url:{url:"https://cdn.britannica.com/61/93061-050-99147DCE/Statue-of-Liberty-Island-New-York-Bay.jpg"}}]}]:'"Can you please let us know more details about your "',$_e=()=>'"The answer to the universe is"',N_e=r=>`"The answer to the universe is ${r.mask_token}."`,q_e=()=>`{
    "source_sentence": "That is a happy person",
    "sentences": [
        "That is a happy dog",
        "That is a very happy person",
        "Today is a sunny day"
    ]
}`,B_e=()=>'"Today is a sunny day and I will get some ice cream."',U_e=()=>'"cats.jpg"',z_e=()=>'"cats.jpg"',L_e=()=>`{
    "image": "cat.png",
    "prompt": "Turn the cat into a tiger."
}`,F_e=()=>`{
    "image": "cat.png",
    "prompt": "The cat starts to dance"
}`,k_e=()=>'"cats.jpg"',V_e=()=>'"cats.jpg"',H_e=()=>'"sample1.flac"',K_e=()=>'"sample1.flac"',W_e=()=>'"Astronaut riding a horse"',G_e=()=>'"A young man walking on the street"',J_e=()=>'"The answer to the universe is 42"',X_e=()=>'"liquid drum and bass, atmospheric synths, airy sounds"',Z_e=()=>'"sample1.flac"',NV=()=>`'{"Height":[11.52,12.48],"Length1":[23.2,24.0],"Length2":[25.4,26.3],"Species": ["Bream","Bream"]}'`,Q_e=()=>'"cats.jpg"',Y_e={"audio-to-audio":H_e,"audio-classification":K_e,"automatic-speech-recognition":Z_e,"document-question-answering":M_e,"feature-extraction":B_e,"fill-mask":N_e,"image-classification":U_e,"image-to-text":z_e,"image-to-image":L_e,"image-to-video":F_e,"image-segmentation":k_e,"object-detection":V_e,"question-answering":I_e,"sentence-similarity":q_e,summarization:T_e,"table-question-answering":A_e,"tabular-regression":NV,"tabular-classification":NV,"text-classification":x_e,"text-generation":$V,"image-text-to-text":$V,"text-to-image":W_e,"text-to-video":G_e,"text-to-speech":J_e,"text-to-audio":X_e,"text2text-generation":$_e,"token-classification":D_e,translation:j_e,"zero-shot-classification":P_e,"zero-shot-image-classification":Q_e};function ebe(r,e=!1,t=!1){if(r.pipeline_tag){const n=Y_e[r.pipeline_tag];if(n){let i=n(r);if(typeof i=="string"&&(e&&(i=i.replace(/(?:(?:\r?\n|\r)\t*)|\t+/g," ")),t)){const a=/^"(.+)"$/s,o=i.match(a);i=o?o[1]:i}return i}}return"No input example has been defined for this model task."}function tbe(r,e){let t=JSON.stringify(r,null,"	");return e!=null&&e.indent&&(t=t.replaceAll(`
`,`
${e.indent}`)),e!=null&&e.attributeKeyQuotes||(t=t.replace(/"([^"]+)":/g,"$1:")),e!=null&&e.customContentEscaper&&(t=e.customContentEscaper(t)),t}const fW="custom_code";function El(r){const e=r.split("/");return e.length===1?e[0]:e[1]}const rbe=r=>JSON.stringify(r).slice(1,-1),nbe=r=>{var e,t;return[`from adapters import AutoAdapterModel

model = AutoAdapterModel.from_pretrained("${(t=(e=r.config)==null?void 0:e.adapter_transformers)==null?void 0:t.model_name}")
model.load_adapter("${r.id}", set_active=True)`]},ibe=r=>[`import allennlp_models
from allennlp.predictors.predictor import Predictor

predictor = Predictor.from_path("hf://${r.id}")`],abe=r=>[`import allennlp_models
from allennlp.predictors.predictor import Predictor

predictor = Predictor.from_path("hf://${r.id}")
predictor_input = {"passage": "My name is Wolfgang and I live in Berlin", "question": "Where do I live?"}
predictions = predictor.predict_json(predictor_input)`],obe=r=>r.tags.includes("question-answering")?abe(r):ibe(r),sbe=r=>[`from araclip import AraClip

model = AraClip.from_pretrained("${r.id}")`],ube=r=>[`from asteroid.models import BaseModel

model = BaseModel.from_pretrained("${r.id}")`],lbe=r=>{const e=`# Watermark Generator
from audioseal import AudioSeal

model = AudioSeal.load_generator("${r.id}")
# pass a tensor (tensor_wav) of shape (batch, channels, samples) and a sample rate
wav, sr = tensor_wav, 16000
	
watermark = model.get_watermark(wav, sr)
watermarked_audio = wav + watermark`,t=`# Watermark Detector
from audioseal import AudioSeal

detector = AudioSeal.load_detector("${r.id}")
	
result, message = detector.detect_watermark(watermarked_audio, sr)`;return[e,t]};function O1(r){var e,t;return((t=(e=r.cardData)==null?void 0:e.base_model)==null?void 0:t.toString())??"fill-in-base-model"}function pW(r){var t,n,i;const e=((n=(t=r.widgetData)==null?void 0:t[0])==null?void 0:n.text)??((i=r.cardData)==null?void 0:i.instance_prompt);if(e)return rbe(e)}const cbe=r=>[`import requests
from PIL import Image
from ben2 import AutoModel

url = "https://huggingface.co/datasets/mishig/sample_images/resolve/main/teapot.jpg"
image = Image.open(requests.get(url, stream=True).raw)

model = AutoModel.from_pretrained("${r.id}")
model.to("cuda").eval()
foreground = model.inference(image)
`],dbe=r=>[`from bertopic import BERTopic

model = BERTopic.load("${r.id}")`],fbe=r=>[`from bm25s.hf import BM25HF

retriever = BM25HF.load_from_hub("${r.id}")`],pbe=()=>[`# pip install chatterbox-tts
import torchaudio as ta
from chatterbox.tts import ChatterboxTTS

model = ChatterboxTTS.from_pretrained(device="cuda")

text = "Ezreal and Jinx teamed up with Ahri, Yasuo, and Teemo to take down the enemy's Nexus in an epic late-game pentakill."
wav = model.generate(text)
ta.save("test-1.wav", wav, model.sr)

# If you want to synthesize with a different voice, specify the audio prompt
AUDIO_PROMPT_PATH="YOUR_FILE.wav"
wav = model.generate(text, audio_prompt_path=AUDIO_PROMPT_PATH)
ta.save("test-2.wav", wav, model.sr)`],hbe=()=>["pip install git+https://github.com/SAP-samples/contexttab",`# Run a classification task
from sklearn.datasets import load_breast_cancer
from sklearn.metrics import accuracy_score
from sklearn.model_selection import train_test_split

from contexttab import ConTextTabClassifier

# Load sample data
X, y = load_breast_cancer(return_X_y=True)
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.5, random_state=42)

# Initialize a classifier
# You can omit checkpoint and checkpoint_revision to use the default model
clf = ConTextTabClassifier(checkpoint="l2/base.pt", checkpoint_revision="v1.0.0", bagging=1, max_context_size=2048)

clf.fit(X_train, y_train)

# Predict probabilities
prediction_probabilities = clf.predict_proba(X_test)
# Predict labels
predictions = clf.predict(X_test)
print("Accuracy", accuracy_score(y_test, predictions))`,`# Run a regression task
from sklearn.datasets import fetch_openml
from sklearn.metrics import r2_score
from sklearn.model_selection import train_test_split

from contexttab import ConTextTabRegressor


# Load sample data
df = fetch_openml(data_id=531, as_frame=True)
X = df.data
y = df.target.astype(float)

# Train-test split
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.5, random_state=42)

# Initialize the regressor
# You can omit checkpoint and checkpoint_revision to use the default model
regressor = ConTextTabRegressor(checkpoint="l2/base.pt", checkpoint_revision="v1.0.0", bagging=1, max_context_size=2048)

regressor.fit(X_train, y_train)

# Predict on the test set
predictions = regressor.predict(X_test)

r2 = r2_score(y_test, predictions)
print("R² Score:", r2)`],mbe=()=>[`# pip install git+https://github.com/Google-Health/cxr-foundation.git#subdirectory=python

# Load image as grayscale (Stillwaterising, CC0, via Wikimedia Commons)
import requests
from PIL import Image
from io import BytesIO
image_url = "https://upload.wikimedia.org/wikipedia/commons/c/c8/Chest_Xray_PA_3-8-2010.png"
img = Image.open(requests.get(image_url, headers={'User-Agent': 'Demo'}, stream=True).raw).convert('L')

# Run inference
from clientside.clients import make_hugging_face_client
cxr_client = make_hugging_face_client('cxr_model')
print(cxr_client.get_image_embeddings_from_images([img]))`],gbe=r=>{let e,t,n;return e="<ENCODER>",t="<NUMBER_OF_FEATURES>",n="<OUT_CHANNELS>",r.id==="depth-anything/Depth-Anything-V2-Small"?(e="vits",t="64",n="[48, 96, 192, 384]"):r.id==="depth-anything/Depth-Anything-V2-Base"?(e="vitb",t="128",n="[96, 192, 384, 768]"):r.id==="depth-anything/Depth-Anything-V2-Large"&&(e="vitl",t="256",n="[256, 512, 1024, 1024"),[`
# Install from https://github.com/DepthAnything/Depth-Anything-V2

# Load the model and infer depth from an image
import cv2
import torch

from depth_anything_v2.dpt import DepthAnythingV2

# instantiate the model
model = DepthAnythingV2(encoder="${e}", features=${t}, out_channels=${n})

# load the weights
filepath = hf_hub_download(repo_id="${r.id}", filename="depth_anything_v2_${e}.pth", repo_type="model")
state_dict = torch.load(filepath, map_location="cpu")
model.load_state_dict(state_dict).eval()

raw_img = cv2.imread("your/image/path")
depth = model.infer_image(raw_img) # HxW raw depth map in numpy
    `]},_be=r=>[`# Download checkpoint
pip install huggingface-hub
huggingface-cli download --local-dir checkpoints ${r.id}`,`import depth_pro

# Load model and preprocessing transform
model, transform = depth_pro.create_model_and_transforms()
model.eval()

# Load and preprocess an image.
image, _, f_px = depth_pro.load_rgb("example.png")
image = transform(image)

# Run inference.
prediction = model.infer(image, f_px=f_px)

# Results: 1. Depth in meters
depth = prediction["depth"]
# Results: 2. Focal length in pixels
focallength_px = prediction["focallength_px"]`],bbe=()=>[`from huggingface_hub import from_pretrained_keras
import tensorflow as tf, requests

# Load and format input
IMAGE_URL = "https://storage.googleapis.com/dx-scin-public-data/dataset/images/3445096909671059178.png"
input_tensor = tf.train.Example(
    features=tf.train.Features(
        feature={
            "image/encoded": tf.train.Feature(
                bytes_list=tf.train.BytesList(value=[requests.get(IMAGE_URL, stream=True).content])
            )
        }
    )
).SerializeToString()

# Load model and run inference
loaded_model = from_pretrained_keras("google/derm-foundation")
infer = loaded_model.signatures["serving_default"]
print(infer(inputs=tf.constant([input_tensor])))`],ybe=r=>[`import soundfile as sf
from dia.model import Dia

model = Dia.from_pretrained("${r.id}")
text = "[S1] Dia is an open weights text to dialogue model. [S2] You get full control over scripts and voices. [S1] Wow. Amazing. (laughs) [S2] Try it now on Git hub or Hugging Face."
output = model.generate(text)

sf.write("simple.mp3", output, 44100)`],vbe=r=>[`# pip install git+https://github.com/NVlabs/describe-anything
from huggingface_hub import snapshot_download
from dam import DescribeAnythingModel

snapshot_download(${r.id}, local_dir="checkpoints")

dam = DescribeAnythingModel(
	model_path="checkpoints",
	conv_mode="v1",
	prompt_mode="focal_prompt",
)`],hW="Astronaut in a jungle, cold color palette, muted colors, detailed, 8k",wbe=r=>[`from diffusers import DiffusionPipeline

pipe = DiffusionPipeline.from_pretrained("${r.id}")

prompt = "${pW(r)??hW}"
image = pipe(prompt).images[0]`],Sbe=r=>[`from diffusers import ControlNetModel, StableDiffusionControlNetPipeline

controlnet = ControlNetModel.from_pretrained("${r.id}")
pipe = StableDiffusionControlNetPipeline.from_pretrained(
	"${O1(r)}", controlnet=controlnet
)`],Obe=r=>[`from diffusers import DiffusionPipeline

pipe = DiffusionPipeline.from_pretrained("${O1(r)}")
pipe.load_lora_weights("${r.id}")

prompt = "${pW(r)??hW}"
image = pipe(prompt).images[0]`],Ebe=r=>[`from diffusers import DiffusionPipeline

pipe = DiffusionPipeline.from_pretrained("${O1(r)}")
pipe.load_textual_inversion("${r.id}")`],Rbe=r=>r.tags.includes("controlnet")?Sbe(r):r.tags.includes("lora")?Obe(r):r.tags.includes("textual_inversion")?Ebe(r):wbe(r),Cbe=r=>{const e=`# Pipeline for Stable Diffusion 3
from diffusionkit.mlx import DiffusionPipeline

pipeline = DiffusionPipeline(
	shift=3.0,
	use_t5=False,
	model_version=${r.id},
	low_memory_mode=True,
	a16=True,
	w16=True,
)`,t=`# Pipeline for Flux
from diffusionkit.mlx import FluxPipeline

pipeline = FluxPipeline(
  shift=1.0,
  model_version=${r.id},
  low_memory_mode=True,
  a16=True,
  w16=True,
)`,n=`# Image Generation
HEIGHT = 512
WIDTH = 512
NUM_STEPS = ${r.tags.includes("flux")?4:50}
CFG_WEIGHT = ${r.tags.includes("flux")?0:5}

image, _ = pipeline.generate_image(
  "a photo of a cat",
  cfg_weight=CFG_WEIGHT,
  num_steps=NUM_STEPS,
  latent_size=(HEIGHT // 8, WIDTH // 8),
)`;return[r.tags.includes("flux")?t:e,n]},Pbe=r=>[`# pip install --no-binary :all: cartesia-pytorch
from cartesia_pytorch import ReneLMHeadModel
from transformers import AutoTokenizer

model = ReneLMHeadModel.from_pretrained("${r.id}")
tokenizer = AutoTokenizer.from_pretrained("allenai/OLMo-1B-hf")

in_message = ["Rene Descartes was"]
inputs = tokenizer(in_message, return_tensors="pt")

outputs = model.generate(inputs.input_ids, max_length=50, top_k=100, top_p=0.99)
out_message = tokenizer.batch_decode(outputs, skip_special_tokens=True)[0]

print(out_message)
)`],jbe=r=>[`import mlx.core as mx
import cartesia_mlx as cmx

model = cmx.from_pretrained("${r.id}")
model.set_dtype(mx.float32)   

prompt = "Rene Descartes was"

for text in model.generate(
    prompt,
    max_tokens=500,
    eval_every_n=5,
    verbose=True,
    top_p=0.99,
    temperature=0.85,
):
    print(text, end="", flush=True)
`],Tbe=r=>{const e=El(r.id).replaceAll("-","_");return[`# Load it from the Hub directly
import edsnlp
nlp = edsnlp.load("${r.id}")
`,`# Or install it as a package
!pip install git+https://huggingface.co/${r.id}

# and import it as a module
import ${e}

nlp = ${e}.load()  # or edsnlp.load("${e}")
`]},Abe=r=>[`from espnet2.bin.tts_inference import Text2Speech

model = Text2Speech.from_pretrained("${r.id}")

speech, *_ = model("text to generate speech from")`],Mbe=r=>[`from espnet2.bin.asr_inference import Speech2Text

model = Speech2Text.from_pretrained(
  "${r.id}"
)

speech, rate = soundfile.read("speech.wav")
text, *_ = model(speech)[0]`],Ibe=()=>["unknown model type (must be text-to-speech or automatic-speech-recognition)"],xbe=r=>r.tags.includes("text-to-speech")?Abe(r):r.tags.includes("automatic-speech-recognition")?Mbe(r):Ibe(),Dbe=r=>[`from fairseq.checkpoint_utils import load_model_ensemble_and_task_from_hf_hub

models, cfg, task = load_model_ensemble_and_task_from_hf_hub(
    "${r.id}"
)`],$be=r=>[`from flair.models import SequenceTagger

tagger = SequenceTagger.load("${r.id}")`],Nbe=r=>[`from gliner import GLiNER

model = GLiNER.from_pretrained("${r.id}")`],qbe=r=>[`# Download model
from huggingface_hub import snapshot_download

snapshot_download(${r.id}, local_dir="checkpoints")

from indextts.infer import IndexTTS

# Ensure config.yaml is present in the checkpoints directory
tts = IndexTTS(model_dir="checkpoints", cfg_path="checkpoints/config.yaml")

voice = "path/to/your/reference_voice.wav"  # Path to the voice reference audio file
text = "Hello, how are you?"
output_path = "output_index.wav"

tts.infer(voice, text, output_path)`],Bbe=r=>[`# CLI usage
# see docs: https://ai-riksarkivet.github.io/htrflow/latest/getting_started/quick_start.html
htrflow pipeline <path/to/pipeline.yaml> <path/to/image>`,`# Python usage
from htrflow.pipeline.pipeline import Pipeline
from htrflow.pipeline.steps import Task
from htrflow.models.framework.model import ModelClass

pipeline = Pipeline(
    [
        Task(
            ModelClass, {"model": "${r.id}"}, {}
        ),
    ])`],Ube=r=>[`# Available backend options are: "jax", "torch", "tensorflow".
import os
os.environ["KERAS_BACKEND"] = "jax"
	
import keras

model = keras.saving.load_model("hf://${r.id}")
`],zbe=r=>`
import keras_hub

# Load CausalLM model (optional: use half precision for inference)
causal_lm = keras_hub.models.CausalLM.from_preset("hf://${r}", dtype="bfloat16")
causal_lm.compile(sampler="greedy")  # (optional) specify a sampler

# Generate text
causal_lm.generate("Keras: deep learning for", max_length=64)
`,Lbe=r=>`
import keras_hub

# Load TextToImage model (optional: use half precision for inference)
text_to_image = keras_hub.models.TextToImage.from_preset("hf://${r}", dtype="bfloat16")

# Generate images with a TextToImage model.
text_to_image.generate("Astronaut in a jungle")
`,Fbe=r=>`
import keras_hub

# Load TextClassifier model
text_classifier = keras_hub.models.TextClassifier.from_preset(
    "hf://${r}",
    num_classes=2,
)
# Fine-tune
text_classifier.fit(x=["Thilling adventure!", "Total snoozefest."], y=[1, 0])
# Classify text
text_classifier.predict(["Not my cup of tea."])
`,kbe=r=>`
import keras_hub
import keras

# Load ImageClassifier model
image_classifier = keras_hub.models.ImageClassifier.from_preset(
    "hf://${r}",
    num_classes=2,
)
# Fine-tune
image_classifier.fit(
    x=keras.random.randint((32, 64, 64, 3), 0, 256),
    y=keras.random.randint((32, 1), 0, 2),
)
# Classify image
image_classifier.predict(keras.random.randint((1, 64, 64, 3), 0, 256))
`,qV={CausalLM:zbe,TextToImage:Lbe,TextClassifier:Fbe,ImageClassifier:kbe},Vbe=(r,e)=>`
import keras_hub

# Create a ${r} model
task = keras_hub.models.${r}.from_preset("hf://${e}")
`,Hbe=r=>`
import keras_hub

# Create a Backbone model unspecialized for any task
backbone = keras_hub.models.Backbone.from_preset("hf://${r}")
`,Kbe=r=>{var i,a;const e=r.id,t=((a=(i=r.config)==null?void 0:i.keras_hub)==null?void 0:a.tasks)??[],n=[];for(const[o,s]of Object.entries(qV))t.includes(o)&&n.push(s(e));for(const o of t)Object.keys(qV).includes(o)||n.push(Vbe(o,e));return n.push(Hbe(e)),n},Wbe=r=>[`# Example usage for KimiAudio
# pip install git+https://github.com/MoonshotAI/Kimi-Audio.git

from kimia_infer.api.kimia import KimiAudio

model = KimiAudio(model_path="${r.id}", load_detokenizer=True)

sampling_params = {
    "audio_temperature": 0.8,
    "audio_top_k": 10,
    "text_temperature": 0.0,
    "text_top_k": 5,
}

# For ASR
asr_audio = "asr_example.wav"
messages_asr = [
    {"role": "user", "message_type": "text", "content": "Please transcribe the following audio:"},
    {"role": "user", "message_type": "audio", "content": asr_audio}
]
_, text = model.generate(messages_asr, **sampling_params, output_type="text")
print(text)

# For Q&A
qa_audio = "qa_example.wav"
messages_conv = [{"role": "user", "message_type": "audio", "content": qa_audio}]
wav, text = model.generate(messages_conv, **sampling_params, output_type="both")
sf.write("output_audio.wav", wav.cpu().view(-1).numpy(), 24000)
print(text)
`],Gbe=r=>r.tags.includes("bi-encoder")?[`#install from https://github.com/webis-de/lightning-ir

from lightning_ir import BiEncoderModule
model = BiEncoderModule("${r.id}")

model.score("query", ["doc1", "doc2", "doc3"])`]:r.tags.includes("cross-encoder")?[`#install from https://github.com/webis-de/lightning-ir

from lightning_ir import CrossEncoderModule
model = CrossEncoderModule("${r.id}")

model.score("query", ["doc1", "doc2", "doc3"])`]:[`#install from https://github.com/webis-de/lightning-ir

from lightning_ir import BiEncoderModule, CrossEncoderModule

# depending on the model type, use either BiEncoderModule or CrossEncoderModule
model = BiEncoderModule("${r.id}") 
# model = CrossEncoderModule("${r.id}")

model.score("query", ["doc1", "doc2", "doc3"])`],Jbe=r=>{const e=[`# !pip install llama-cpp-python

from llama_cpp import Llama

llm = Llama.from_pretrained(
	repo_id="${r.id}",
	filename="{{GGUF_FILE}}",
)
`];if(r.tags.includes("conversational")){const t=ebe(r);e.push(`llm.create_chat_completion(
	messages = ${tbe(t,{attributeKeyQuotes:!0,indent:"	"})}
)`)}else e.push(`output = llm(
	"Once upon a time,",
	max_tokens=512,
	echo=True
)
print(output)`);return e},Xbe=r=>[`# Note: 'keras<3.x' or 'tf_keras' must be installed (legacy)
# See https://github.com/keras-team/tf-keras for more details.
from huggingface_hub import from_pretrained_keras

model = from_pretrained_keras("${r.id}")
`],Zbe=r=>[`from mamba_ssm import MambaLMHeadModel

model = MambaLMHeadModel.from_pretrained("${r.id}")`],Qbe=r=>[`# Install from https://github.com/Camb-ai/MARS5-TTS

from inference import Mars5TTS
mars5 = Mars5TTS.from_pretrained("${r.id}")`],Ybe=r=>[`# Install from https://github.com/pq-yang/MatAnyone.git

from matanyone.model.matanyone import MatAnyone
model = MatAnyone.from_pretrained("${r.id}")`,`
from matanyone import InferenceCore
processor = InferenceCore("${r.id}")`],eye=()=>[`# Install from https://github.com/buaacyw/MeshAnything.git

from MeshAnything.models.meshanything import MeshAnything

# refer to https://github.com/buaacyw/MeshAnything/blob/main/main.py#L91 on how to define args
# and https://github.com/buaacyw/MeshAnything/blob/main/app.py regarding usage
model = MeshAnything(args)`],tye=r=>[`import open_clip

model, preprocess_train, preprocess_val = open_clip.create_model_and_transforms('hf-hub:${r.id}')
tokenizer = open_clip.get_tokenizer('hf-hub:${r.id}')`],rye=r=>{var e,t;if((t=(e=r.config)==null?void 0:e.architectures)!=null&&t[0]){const n=r.config.architectures[0];return[[`from paddlenlp.transformers import AutoTokenizer, ${n}`,"",`tokenizer = AutoTokenizer.from_pretrained("${r.id}", from_hf_hub=True)`,`model = ${n}.from_pretrained("${r.id}", from_hf_hub=True)`].join(`
`)]}else return[["# ⚠️ Type of model unknown","from paddlenlp.transformers import AutoTokenizer, AutoModel","",`tokenizer = AutoTokenizer.from_pretrained("${r.id}", from_hf_hub=True)`,`model = AutoModel.from_pretrained("${r.id}", from_hf_hub=True)`].join(`
`)]},nye=r=>{const e=`# Use PE-Core models as CLIP models
import core.vision_encoder.pe as pe

model = pe.CLIP.from_config("${r.id}", pretrained=True)`,t=`# Use any PE model as a vision encoder
import core.vision_encoder.pe as pe

model = pe.VisionTransformer.from_config("${r.id}", pretrained=True)`;return r.id.includes("Core")?[e,t]:[t]},iye=r=>[`from huggingface_hub import snapshot_download
from phantom_wan import WANI2V, configs

checkpoint_dir = snapshot_download("${r.id}")
wan_i2v = WanI2V(
            config=configs.WAN_CONFIGS['i2v-14B'],
            checkpoint_dir=checkpoint_dir,
        )
 video = wan_i2v.generate(text_prompt, image_prompt)`],aye=r=>[`from pyannote.audio import Pipeline
  
pipeline = Pipeline.from_pretrained("${r.id}")

# inference on the whole file
pipeline("file.wav")

# inference on an excerpt
from pyannote.core import Segment
excerpt = Segment(start=2.0, end=5.0)

from pyannote.audio import Audio
waveform, sample_rate = Audio().crop("file.wav", excerpt)
pipeline({"waveform": waveform, "sample_rate": sample_rate})`],oye=r=>[`from pyannote.audio import Model, Inference

model = Model.from_pretrained("${r.id}")
inference = Inference(model)

# inference on the whole file
inference("file.wav")

# inference on an excerpt
from pyannote.core import Segment
excerpt = Segment(start=2.0, end=5.0)
inference.crop("file.wav", excerpt)`],sye=r=>r.tags.includes("pyannote-audio-pipeline")?aye(r):oye(r),uye=r=>[`from relik import Relik
 
relik = Relik.from_pretrained("${r.id}")`],lye=r=>[`from tensorflow_tts.inference import AutoProcessor, TFAutoModel

processor = AutoProcessor.from_pretrained("${r.id}")
model = TFAutoModel.from_pretrained("${r.id}")
`],cye=r=>[`from tensorflow_tts.inference import TFAutoModel

model = TFAutoModel.from_pretrained("${r.id}")
audios = model.inference(mels)
`],dye=r=>[`from tensorflow_tts.inference import TFAutoModel

model = TFAutoModel.from_pretrained("${r.id}")
`],fye=r=>r.tags.includes("text-to-mel")?lye(r):r.tags.includes("mel-to-wav")?cye(r):dye(r),pye=r=>[`import timm

model = timm.create_model("hf_hub:${r.id}", pretrained=True)`],hye=()=>[`# pip install sae-lens
from sae_lens import SAE

sae, cfg_dict, sparsity = SAE.from_pretrained(
    release = "RELEASE_ID", # e.g., "gpt2-small-res-jb". See other options in https://github.com/jbloomAus/SAELens/blob/main/sae_lens/pretrained_saes.yaml
    sae_id = "SAE_ID", # e.g., "blocks.8.hook_resid_pre". Won't always be a hook point
)`],mye=()=>[`# seed_story_cfg_path refers to 'https://github.com/TencentARC/SEED-Story/blob/master/configs/clm_models/agent_7b_sft.yaml'
# llm_cfg_path refers to 'https://github.com/TencentARC/SEED-Story/blob/master/configs/clm_models/llama2chat7b_lora.yaml'
from omegaconf import OmegaConf
import hydra

# load Llama2
llm_cfg = OmegaConf.load(llm_cfg_path)
llm = hydra.utils.instantiate(llm_cfg, torch_dtype="fp16")

# initialize seed_story
seed_story_cfg = OmegaConf.load(seed_story_cfg_path)
seed_story = hydra.utils.instantiate(seed_story_cfg, llm=llm) `],gye=(r,e)=>[`import joblib
from skops.hub_utils import download
download("${r.id}", "path_to_folder")
model = joblib.load(
	"${e}"
)
# only load pickle files from sources you trust
# read more about it here https://skops.readthedocs.io/en/stable/persistence.html`],_ye=(r,e)=>[`from skops.hub_utils import download
from skops.io import load
download("${r.id}", "path_to_folder")
# make sure model file is in skops format
# if model is a pickle file, make sure it's from a source you trust
model = load("path_to_folder/${e}")`],bye=r=>[`from huggingface_hub import hf_hub_download
import joblib
model = joblib.load(
	hf_hub_download("${r.id}", "sklearn_model.joblib")
)
# only load pickle files from sources you trust
# read more about it here https://skops.readthedocs.io/en/stable/persistence.html`],yye=r=>{var e,t,n,i,a;if(r.tags.includes("skops")){const o=(n=(t=(e=r.config)==null?void 0:e.sklearn)==null?void 0:t.model)==null?void 0:n.file,s=(a=(i=r.config)==null?void 0:i.sklearn)==null?void 0:a.model_format;return o?s==="pickle"?gye(r,o):_ye(r,o):["# ⚠️ Model filename not specified in config.json"]}else return bye(r)},vye=r=>[`import torch
import torchaudio
from einops import rearrange
from stable_audio_tools import get_pretrained_model
from stable_audio_tools.inference.generation import generate_diffusion_cond

device = "cuda" if torch.cuda.is_available() else "cpu"

# Download model
model, model_config = get_pretrained_model("${r.id}")
sample_rate = model_config["sample_rate"]
sample_size = model_config["sample_size"]

model = model.to(device)

# Set up text and timing conditioning
conditioning = [{
	"prompt": "128 BPM tech house drum loop",
}]

# Generate stereo audio
output = generate_diffusion_cond(
	model,
	conditioning=conditioning,
	sample_size=sample_size,
	device=device
)

# Rearrange audio batch to a single sequence
output = rearrange(output, "b d n -> d (b n)")

# Peak normalize, clip, convert to int16, and save to file
output = output.to(torch.float32).div(torch.max(torch.abs(output))).clamp(-1, 1).mul(32767).to(torch.int16).cpu()
torchaudio.save("output.wav", output, sample_rate)`],wye=r=>[`from huggingface_hub import from_pretrained_fastai

learn = from_pretrained_fastai("${r.id}")`],Sye=r=>{const e=`# Use SAM2 with images
import torch
from sam2.sam2_image_predictor import SAM2ImagePredictor

predictor = SAM2ImagePredictor.from_pretrained(${r.id})

with torch.inference_mode(), torch.autocast("cuda", dtype=torch.bfloat16):
    predictor.set_image(<your_image>)
    masks, _, _ = predictor.predict(<input_prompts>)`,t=`# Use SAM2 with videos
import torch
from sam2.sam2_video_predictor import SAM2VideoPredictor
	
predictor = SAM2VideoPredictor.from_pretrained(${r.id})

with torch.inference_mode(), torch.autocast("cuda", dtype=torch.bfloat16):
    state = predictor.init_state(<your_video>)

    # add new prompts and instantly get the output on the same frame
    frame_idx, object_ids, masks = predictor.add_new_points(state, <your_prompts>):

    # propagate the prompts to get masklets throughout the video
    for frame_idx, object_ids, masks in predictor.propagate_in_video(state):
        ...`;return[e,t]},Oye=r=>[`python -m sample_factory.huggingface.load_from_hub -r ${r.id} -d ./train_dir`];function Eye(r){var t,n;const e=(t=r.widgetData)==null?void 0:t[0];if(e!=null&&e.source_sentence&&((n=e==null?void 0:e.sentences)!=null&&n.length))return[e.source_sentence,...e.sentences]}const Rye=r=>{const e=r.tags.includes(fW)?", trust_remote_code=True":"";if(r.tags.includes("cross-encoder")||r.pipeline_tag=="text-ranking")return[`from sentence_transformers import CrossEncoder

model = CrossEncoder("${r.id}"${e})

query = "Which planet is known as the Red Planet?"
passages = [
	"Venus is often called Earth's twin because of its similar size and proximity.",
	"Mars, known for its reddish appearance, is often referred to as the Red Planet.",
	"Jupiter, the largest planet in our solar system, has a prominent red spot.",
	"Saturn, famous for its rings, is sometimes mistaken for the Red Planet."
]

scores = model.predict([(query, passage) for passage in passages])
print(scores)`];const t=Eye(r)??["The weather is lovely today.","It's so sunny outside!","He drove to the stadium."];return[`from sentence_transformers import SentenceTransformer

model = SentenceTransformer("${r.id}"${e})

sentences = ${JSON.stringify(t,null,4)}
embeddings = model.encode(sentences)

similarities = model.similarity(embeddings, embeddings)
print(similarities.shape)
# [${t.length}, ${t.length}]`]},Cye=r=>[`from setfit import SetFitModel

model = SetFitModel.from_pretrained("${r.id}")`],Pye=r=>[`!pip install https://huggingface.co/${r.id}/resolve/main/${El(r.id)}-any-py3-none-any.whl

# Using spacy.load().
import spacy
nlp = spacy.load("${El(r.id)}")

# Importing as module.
import ${El(r.id)}
nlp = ${El(r.id)}.load()`],jye=r=>[`from span_marker import SpanMarkerModel

model = SpanMarkerModel.from_pretrained("${r.id}")`],Tye=r=>[`import stanza

stanza.download("${El(r.id).replace("stanza-","")}")
nlp = stanza.Pipeline("${El(r.id).replace("stanza-","")}")`],Aye=r=>{switch(r){case"EncoderClassifier":return"classify_file";case"EncoderDecoderASR":case"EncoderASR":return"transcribe_file";case"SpectralMaskEnhancement":return"enhance_file";case"SepformerSeparation":return"separate_file";default:return}},Mye=r=>{var n,i;const e=(i=(n=r.config)==null?void 0:n.speechbrain)==null?void 0:i.speechbrain_interface;if(e===void 0)return["# interface not specified in config.json"];const t=Aye(e);return t===void 0?["# interface in config.json invalid"]:[`from speechbrain.pretrained import ${e}
model = ${e}.from_hparams(
  "${r.id}"
)
model.${t}("file.wav")`]},Iye=r=>[`from terratorch.registry import BACKBONE_REGISTRY

model = BACKBONE_REGISTRY.build("${r.id}")`],xye=r=>{var i;const e=r.transformersInfo;if(!e)return["# ⚠️ Type of model unknown"];const t=r.tags.includes(fW)?", trust_remote_code=True":"";let n;if(e.processor){const a=e.processor==="AutoTokenizer"?"tokenizer":e.processor==="AutoFeatureExtractor"?"extractor":"processor";n=["# Load model directly",`from transformers import ${e.processor}, ${e.auto_model}`,"",`${a} = ${e.processor}.from_pretrained("${r.id}"`+t+")",`model = ${e.auto_model}.from_pretrained("${r.id}"`+t+")"].join(`
`)}else n=["# Load model directly",`from transformers import ${e.auto_model}`,`model = ${e.auto_model}.from_pretrained("${r.id}"`+t+")"].join(`
`);if(r.pipeline_tag&&((i=$ge.transformers)!=null&&i.includes(r.pipeline_tag))){const a=["# Use a pipeline as a high-level helper","from transformers import pipeline","",`pipe = pipeline("${r.pipeline_tag}", model="${r.id}"`+t+")"];return r.tags.includes("conversational")&&(r.tags.includes("image-text-to-text")?(a.push("messages = [",["    {",'        "role": "user",','        "content": [','            {"type": "image", "url": "https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/p-blog/candy.JPG"},','            {"type": "text", "text": "What animal is on the candy?"}',"        ]","    },"].join(`
`),"]"),a.push("pipe(text=messages)")):(a.push("messages = [",'    {"role": "user", "content": "Who are you?"},',"]"),a.push("pipe(messages)"))),[a.join(`
`),n]}return[n]},Dye=r=>{if(!r.pipeline_tag)return["// ⚠️ Unknown pipeline tag"];const e="@huggingface/transformers";return[`// npm i ${e}
import { pipeline } from '${e}';

// Allocate pipeline
const pipe = await pipeline('${r.pipeline_tag}', '${r.id}');`]},$ye=r=>{switch(r){case"CAUSAL_LM":return"CausalLM";case"SEQ_2_SEQ_LM":return"Seq2SeqLM";case"TOKEN_CLS":return"TokenClassification";case"SEQ_CLS":return"SequenceClassification";default:return}},Nye=r=>{var i;const{base_model_name_or_path:e,task_type:t}=((i=r.config)==null?void 0:i.peft)??{},n=$ye(t);return n?e?[`from peft import PeftModel
from transformers import AutoModelFor${n}

base_model = AutoModelFor${n}.from_pretrained("${e}")
model = PeftModel.from_pretrained(base_model, "${r.id}")`]:["Base model is not found."]:["Task type is invalid."]},qye=r=>[`from huggingface_hub import hf_hub_download
import fasttext

model = fasttext.load_model(hf_hub_download("${r.id}", "model.bin"))`],Bye=r=>[`from huggingface_sb3 import load_from_hub
checkpoint = load_from_hub(
	repo_id="${r.id}",
	filename="{MODEL FILENAME}.zip",
)`],Uye=(r,e)=>{switch(r){case"ASR":return[`import nemo.collections.asr as nemo_asr
asr_model = nemo_asr.models.ASRModel.from_pretrained("${e.id}")

transcriptions = asr_model.transcribe(["file.wav"])`];default:return}},zye=r=>[`mlagents-load-from-hf --repo-id="${r.id}" --local-dir="./download: string[]s"`],Lye=()=>[`string modelName = "[Your model name here].sentis";
Model model = ModelLoader.Load(Application.streamingAssetsPath + "/" + modelName);
IWorker engine = WorkerFactory.CreateWorker(BackendType.GPUCompute, model);
// Please see provided C# file for more details
`],Fye=r=>[`
# Load the model and infer image from text
import torch
from app.sana_pipeline import SanaPipeline
from torchvision.utils import save_image

sana = SanaPipeline("configs/sana_config/1024ms/Sana_1600M_img1024.yaml")
sana.from_pretrained("hf://${r.id}")

image = sana(
    prompt='a cyberpunk cat with a neon sign that says "Sana"',
    height=1024,
    width=1024,
    guidance_scale=5.0,
    pag_guidance_scale=2.0,
    num_inference_steps=18,
) `],kye=r=>[`from Trainer_finetune import Model

model = Model.from_pretrained("${r.id}")`],Vye=r=>[`from voicecraft import VoiceCraft

model = VoiceCraft.from_pretrained("${r.id}")`],Hye=()=>[`# !pip install git+https://github.com/fluxions-ai/vui

import torchaudio

from vui.inference import render
from vui.model import Vui,

model = Vui.from_pretrained().cuda()
waveform = render(
    model,
    "Hey, here is some random stuff, usually something quite long as the shorter the text the less likely the model can cope!",
)
print(waveform.shape)
torchaudio.save("out.opus", waveform[0], 22050)
`],Kye=()=>[`import ChatTTS
import torchaudio

chat = ChatTTS.Chat()
chat.load_models(compile=False) # Set to True for better performance

texts = ["PUT YOUR TEXT HERE",]

wavs = chat.infer(texts, )

torchaudio.save("output1.wav", torch.from_numpy(wavs[0]), 24000)`],BV=r=>{const e=r.tags.find(i=>i.match(/^yolov\d+$/)),t=e?`YOLOv${e.slice(4)}`:"YOLOvXX";return[(e?"":`# Couldn't find a valid YOLO version tag.
# Replace XX with the correct version.
`)+`from ultralytics import ${t}

model = ${t}.from_pretrained("${r.id}")
source = 'http://images.cocodataset.org/val2017/000000039769.jpg'
model.predict(source=source, save=True)`]},Wye=r=>[`# Option 1: use with transformers

from transformers import AutoModelForImageSegmentation
birefnet = AutoModelForImageSegmentation.from_pretrained("${r.id}", trust_remote_code=True)
`,`# Option 2: use with BiRefNet

# Install from https://github.com/ZhengPeng7/BiRefNet

from models.birefnet import BiRefNet
model = BiRefNet.from_pretrained("${r.id}")`],Gye=r=>[`from swarmformer import SwarmFormerModel

model = SwarmFormerModel.from_pretrained("${r.id}")
`],Jye=r=>[`# Download the model from the Hub
pip install huggingface_hub[hf_xet]

huggingface-cli download --local-dir ${El(r.id)} ${r.id}`],Xye=r=>[`# Make sure mlx-lm is installed
# pip install --upgrade mlx-lm

# Generate text with mlx-lm
from mlx_lm import load, generate

model, tokenizer = load("${r.id}")

prompt = "Once upon a time in"
text = generate(model, tokenizer, prompt=prompt, verbose=True)`],Zye=r=>[`# Make sure mlx-lm is installed
# pip install --upgrade mlx-lm

# Generate text with mlx-lm
from mlx_lm import load, generate

model, tokenizer = load("${r.id}")

prompt = "Write a story about Einstein"
messages = [{"role": "user", "content": prompt}]
prompt = tokenizer.apply_chat_template(
    messages, add_generation_prompt=True
)

text = generate(model, tokenizer, prompt=prompt, verbose=True)`],Qye=r=>[`# Make sure mlx-vlm is installed
# pip install --upgrade mlx-vlm

from mlx_vlm import load, generate
from mlx_vlm.prompt_utils import apply_chat_template
from mlx_vlm.utils import load_config

# Load the model
model, processor = load("${r.id}")
config = load_config("${r.id}")

# Prepare input
image = ["http://images.cocodataset.org/val2017/000000039769.jpg"]
prompt = "Describe this image."

# Apply chat template
formatted_prompt = apply_chat_template(
    processor, config, prompt, num_images=1
)

# Generate output
output = generate(model, processor, formatted_prompt, image)
print(output)`],Yye=r=>[`from mlxim.model import create_model

model = create_model(${r.id})`],eve=r=>r.pipeline_tag==="image-text-to-text"?Qye(r):r.pipeline_tag==="text-generation"?r.tags.includes("conversational")?Zye(r):Xye(r):Jye(r),tve=r=>[`from model2vec import StaticModel

model = StaticModel.from_pretrained("${r.id}")`],rve=r=>{let e;return r.tags.includes("automatic-speech-recognition")&&(e=Uye("ASR",r)),e??["# tag did not correspond to a valid NeMo domain."]},nve=r=>{const e=r.tags??[];return e.includes("gguf")||e.includes("onnx")?[]:[`
  import outetts
  
  enum = outetts.Models("${r.id}".split("/", 1)[1])       # VERSION_1_0_SIZE_1B
  cfg  = outetts.ModelConfig.auto_config(enum, outetts.Backend.HF)
  tts  = outetts.Interface(cfg)
  
  speaker = tts.load_default_speaker("EN-FEMALE-1-NEUTRAL")
  tts.generate(
	  outetts.GenerationConfig(
		  text="Hello there, how are you doing?",
		  speaker=speaker,
	  )
  ).save("output.wav")
  `]},ive=r=>[`from pxia import AutoModel

model = AutoModel.from_pretrained("${r.id}")`],ave=r=>[`from pythae.models import AutoModel

model = AutoModel.load_from_hf_hub("${r.id}")`],ove=r=>[`from audiocraft.models import MusicGen

model = MusicGen.get_pretrained("${r.id}")

descriptions = ['happy rock', 'energetic EDM', 'sad jazz']
wav = model.generate(descriptions)  # generates 3 samples.`],sve=r=>[`from audiocraft.models import MAGNeT
	
model = MAGNeT.get_pretrained("${r.id}")

descriptions = ['disco beat', 'energetic EDM', 'funky groove']
wav = model.generate(descriptions)  # generates 3 samples.`],uve=r=>[`from audiocraft.models import AudioGen
	
model = AudioGen.get_pretrained("${r.id}")
model.set_generation_params(duration=5)  # generate 5 seconds.
descriptions = ['dog barking', 'sirene of an emergency vehicle', 'footsteps in a corridor']
wav = model.generate(descriptions)  # generates 3 samples.`],lve=r=>[`from anemoi.inference.runners.default import DefaultRunner
from anemoi.inference.config import Configuration
# Create Configuration
config = Configuration(checkpoint = {"huggingface":{"repo_id":"${r.id}"}})
# Load Runner
runner = DefaultRunner(config)`],cve=r=>r.tags.includes("musicgen")?ove(r):r.tags.includes("audiogen")?uve(r):r.tags.includes("magnet")?sve(r):["# Type of model unknown."],dve=()=>[`# Install CLI with Homebrew on macOS device
brew install whisperkit-cli

# View all available inference options
whisperkit-cli transcribe --help
	
# Download and run inference using whisper base model
whisperkit-cli transcribe --audio-path /path/to/audio.mp3

# Or use your preferred model variant
whisperkit-cli transcribe --model "large-v3" --model-prefix "distil" --audio-path /path/to/audio.mp3 --verbose`],fve=r=>[`from threedtopia_xl.models import threedtopia_xl

model = threedtopia_xl.from_pretrained("${r.id}")
model.generate(cond="path/to/image.png")`],pve=r=>[`# pip install git+https://github.com/Zyphra/Zonos.git
import torchaudio
from zonos.model import Zonos
from zonos.conditioning import make_cond_dict

model = Zonos.from_pretrained("${r.id}", device="cuda")

wav, sr = torchaudio.load("speaker.wav")           # 5-10s reference clip
speaker = model.make_speaker_embedding(wav, sr)

cond  = make_cond_dict(text="Hello, world!", speaker=speaker, language="en-us")
codes = model.generate(model.prepare_conditioning(cond))

audio = model.autoencoder.decode(codes)[0].cpu()
torchaudio.save("sample.wav", audio, model.autoencoder.sampling_rate)
`],hve={acestep:{prettyLabel:"ACE-Step",repoName:"ACE-Step",repoUrl:"https://github.com/ace-step/ACE-Step",filter:!1,countDownloads:'path:"ace_step_transformer/config.json"'},"adapter-transformers":{prettyLabel:"Adapters",repoName:"adapters",repoUrl:"https://github.com/Adapter-Hub/adapters",docsUrl:"https://huggingface.co/docs/hub/adapters",snippets:nbe,filter:!0,countDownloads:'path:"adapter_config.json"'},allennlp:{prettyLabel:"AllenNLP",repoName:"AllenNLP",repoUrl:"https://github.com/allenai/allennlp",docsUrl:"https://huggingface.co/docs/hub/allennlp",snippets:obe,filter:!0},anemoi:{prettyLabel:"AnemoI",repoName:"AnemoI",repoUrl:"https://github.com/ecmwf/anemoi-inference",docsUrl:"https://anemoi-docs.readthedocs.io/en/latest/",filter:!1,countDownloads:'path_extension:"ckpt"',snippets:lve},araclip:{prettyLabel:"AraClip",repoName:"AraClip",repoUrl:"https://huggingface.co/Arabic-Clip/araclip",filter:!1,snippets:sbe},asteroid:{prettyLabel:"Asteroid",repoName:"Asteroid",repoUrl:"https://github.com/asteroid-team/asteroid",docsUrl:"https://huggingface.co/docs/hub/asteroid",snippets:ube,filter:!0,countDownloads:'path:"pytorch_model.bin"'},audiocraft:{prettyLabel:"Audiocraft",repoName:"audiocraft",repoUrl:"https://github.com/facebookresearch/audiocraft",snippets:cve,filter:!1,countDownloads:'path:"state_dict.bin"'},audioseal:{prettyLabel:"AudioSeal",repoName:"audioseal",repoUrl:"https://github.com/facebookresearch/audioseal",filter:!1,countDownloads:'path_extension:"pth"',snippets:lbe},"bagel-mot":{prettyLabel:"Bagel",repoName:"Bagel",repoUrl:"https://github.com/ByteDance-Seed/Bagel/",filter:!1,countDownloads:'path:"llm_config.json"'},ben2:{prettyLabel:"BEN2",repoName:"BEN2",repoUrl:"https://github.com/PramaLLC/BEN2",snippets:cbe,filter:!1},bertopic:{prettyLabel:"BERTopic",repoName:"BERTopic",repoUrl:"https://github.com/MaartenGr/BERTopic",snippets:dbe,filter:!0},big_vision:{prettyLabel:"Big Vision",repoName:"big_vision",repoUrl:"https://github.com/google-research/big_vision",filter:!1,countDownloads:'path_extension:"npz"'},birder:{prettyLabel:"Birder",repoName:"Birder",repoUrl:"https://gitlab.com/birder/birder",filter:!1,countDownloads:'path_extension:"pt"'},birefnet:{prettyLabel:"BiRefNet",repoName:"BiRefNet",repoUrl:"https://github.com/ZhengPeng7/BiRefNet",snippets:Wye,filter:!1},bm25s:{prettyLabel:"BM25S",repoName:"bm25s",repoUrl:"https://github.com/xhluca/bm25s",snippets:fbe,filter:!1,countDownloads:'path:"params.index.json"'},champ:{prettyLabel:"Champ",repoName:"Champ",repoUrl:"https://github.com/fudan-generative-vision/champ",countDownloads:'path:"champ/motion_module.pth"'},chatterbox:{prettyLabel:"Chatterbox",repoName:"Chatterbox",repoUrl:"https://github.com/resemble-ai/chatterbox",snippets:pbe,countDownloads:'path:"tokenizer.json"',filter:!1},chat_tts:{prettyLabel:"ChatTTS",repoName:"ChatTTS",repoUrl:"https://github.com/2noise/ChatTTS.git",snippets:Kye,filter:!1,countDownloads:'path:"asset/GPT.pt"'},colpali:{prettyLabel:"ColPali",repoName:"ColPali",repoUrl:"https://github.com/ManuelFay/colpali",filter:!1,countDownloads:'path:"adapter_config.json"'},comet:{prettyLabel:"COMET",repoName:"COMET",repoUrl:"https://github.com/Unbabel/COMET/",countDownloads:'path:"hparams.yaml"'},contexttab:{prettyLabel:"ConTextTab",repoName:"ConTextTab",repoUrl:"https://github.com/SAP-samples/contexttab",countDownloads:'path_extension:"pt"',snippets:hbe},cosmos:{prettyLabel:"Cosmos",repoName:"Cosmos",repoUrl:"https://github.com/NVIDIA/Cosmos",countDownloads:'path:"config.json" OR path_extension:"pt"'},"cxr-foundation":{prettyLabel:"CXR Foundation",repoName:"cxr-foundation",repoUrl:"https://github.com/google-health/cxr-foundation",snippets:mbe,filter:!1,countDownloads:'path:"precomputed_embeddings/embeddings.npz" OR path:"pax-elixr-b-text/saved_model.pb"'},deepforest:{prettyLabel:"DeepForest",repoName:"deepforest",docsUrl:"https://deepforest.readthedocs.io/en/latest/",repoUrl:"https://github.com/weecology/DeepForest"},"depth-anything-v2":{prettyLabel:"DepthAnythingV2",repoName:"Depth Anything V2",repoUrl:"https://github.com/DepthAnything/Depth-Anything-V2",snippets:gbe,filter:!1,countDownloads:'path_extension:"pth"'},"depth-pro":{prettyLabel:"Depth Pro",repoName:"Depth Pro",repoUrl:"https://github.com/apple/ml-depth-pro",countDownloads:'path_extension:"pt"',snippets:_be,filter:!1},"derm-foundation":{prettyLabel:"Derm Foundation",repoName:"derm-foundation",repoUrl:"https://github.com/google-health/derm-foundation",snippets:bbe,filter:!1,countDownloads:'path:"scin_dataset_precomputed_embeddings.npz" OR path:"saved_model.pb"'},"describe-anything":{prettyLabel:"Describe Anything",repoName:"Describe Anything",repoUrl:"https://github.com/NVlabs/describe-anything",snippets:vbe,filter:!1},"dia-tts":{prettyLabel:"Dia",repoName:"Dia",repoUrl:"https://github.com/nari-labs/dia",snippets:ybe,filter:!1},diffree:{prettyLabel:"Diffree",repoName:"Diffree",repoUrl:"https://github.com/OpenGVLab/Diffree",filter:!1,countDownloads:'path:"diffree-step=000010999.ckpt"'},diffusers:{prettyLabel:"Diffusers",repoName:"🤗/diffusers",repoUrl:"https://github.com/huggingface/diffusers",docsUrl:"https://huggingface.co/docs/hub/diffusers",snippets:Rbe,filter:!0},diffusionkit:{prettyLabel:"DiffusionKit",repoName:"DiffusionKit",repoUrl:"https://github.com/argmaxinc/DiffusionKit",snippets:Cbe},doctr:{prettyLabel:"docTR",repoName:"doctr",repoUrl:"https://github.com/mindee/doctr"},cartesia_pytorch:{prettyLabel:"Cartesia Pytorch",repoName:"Cartesia Pytorch",repoUrl:"https://github.com/cartesia-ai/cartesia_pytorch",snippets:Pbe},cartesia_mlx:{prettyLabel:"Cartesia MLX",repoName:"Cartesia MLX",repoUrl:"https://github.com/cartesia-ai/cartesia_mlx",snippets:jbe},clipscope:{prettyLabel:"clipscope",repoName:"clipscope",repoUrl:"https://github.com/Lewington-pitsos/clipscope",filter:!1,countDownloads:'path_extension:"pt"'},cosyvoice:{prettyLabel:"CosyVoice",repoName:"CosyVoice",repoUrl:"https://github.com/FunAudioLLM/CosyVoice",filter:!1,countDownloads:'path_extension:"onnx" OR path_extension:"pt"'},cotracker:{prettyLabel:"CoTracker",repoName:"CoTracker",repoUrl:"https://github.com/facebookresearch/co-tracker",filter:!1,countDownloads:'path_extension:"pth"'},edsnlp:{prettyLabel:"EDS-NLP",repoName:"edsnlp",repoUrl:"https://github.com/aphp/edsnlp",docsUrl:"https://aphp.github.io/edsnlp/latest/",filter:!1,snippets:Tbe,countDownloads:'path_filename:"config" AND path_extension:"cfg"'},elm:{prettyLabel:"ELM",repoName:"elm",repoUrl:"https://github.com/slicex-ai/elm",filter:!1,countDownloads:'path_filename:"slicex_elm_config" AND path_extension:"json"'},espnet:{prettyLabel:"ESPnet",repoName:"ESPnet",repoUrl:"https://github.com/espnet/espnet",docsUrl:"https://huggingface.co/docs/hub/espnet",snippets:xbe,filter:!0},fairseq:{prettyLabel:"Fairseq",repoName:"fairseq",repoUrl:"https://github.com/pytorch/fairseq",snippets:Dbe,filter:!0},fastai:{prettyLabel:"fastai",repoName:"fastai",repoUrl:"https://github.com/fastai/fastai",docsUrl:"https://huggingface.co/docs/hub/fastai",snippets:wye,filter:!0},fasttext:{prettyLabel:"fastText",repoName:"fastText",repoUrl:"https://fasttext.cc/",snippets:qye,filter:!0,countDownloads:'path_extension:"bin"'},flair:{prettyLabel:"Flair",repoName:"Flair",repoUrl:"https://github.com/flairNLP/flair",docsUrl:"https://huggingface.co/docs/hub/flair",snippets:$be,filter:!0,countDownloads:'path:"pytorch_model.bin"'},"gemma.cpp":{prettyLabel:"gemma.cpp",repoName:"gemma.cpp",repoUrl:"https://github.com/google/gemma.cpp",filter:!1,countDownloads:'path_extension:"sbs"'},"geometry-crafter":{prettyLabel:"GeometryCrafter",repoName:"GeometryCrafter",repoUrl:"https://github.com/TencentARC/GeometryCrafter",countDownloads:'path:"point_map_vae/diffusion_pytorch_model.safetensors"'},gliner:{prettyLabel:"GLiNER",repoName:"GLiNER",repoUrl:"https://github.com/urchade/GLiNER",snippets:Nbe,filter:!1,countDownloads:'path:"gliner_config.json"'},"glyph-byt5":{prettyLabel:"Glyph-ByT5",repoName:"Glyph-ByT5",repoUrl:"https://github.com/AIGText/Glyph-ByT5",filter:!1,countDownloads:'path:"checkpoints/byt5_model.pt"'},grok:{prettyLabel:"Grok",repoName:"Grok",repoUrl:"https://github.com/xai-org/grok-1",filter:!1,countDownloads:'path:"ckpt/tensor00000_000" OR path:"ckpt-0/tensor00000_000"'},hallo:{prettyLabel:"Hallo",repoName:"Hallo",repoUrl:"https://github.com/fudan-generative-vision/hallo",countDownloads:'path:"hallo/net.pth"'},hezar:{prettyLabel:"Hezar",repoName:"Hezar",repoUrl:"https://github.com/hezarai/hezar",docsUrl:"https://hezarai.github.io/hezar",countDownloads:'path:"model_config.yaml" OR path:"embedding/embedding_config.yaml"'},htrflow:{prettyLabel:"HTRflow",repoName:"HTRflow",repoUrl:"https://github.com/AI-Riksarkivet/htrflow",docsUrl:"https://ai-riksarkivet.github.io/htrflow",snippets:Bbe},"hunyuan-dit":{prettyLabel:"HunyuanDiT",repoName:"HunyuanDiT",repoUrl:"https://github.com/Tencent/HunyuanDiT",countDownloads:'path:"pytorch_model_ema.pt" OR path:"pytorch_model_distill.pt"'},"hunyuan3d-2":{prettyLabel:"Hunyuan3D-2",repoName:"Hunyuan3D-2",repoUrl:"https://github.com/Tencent/Hunyuan3D-2",countDownloads:'path_filename:"model_index" OR path_filename:"config"'},imstoucan:{prettyLabel:"IMS Toucan",repoName:"IMS-Toucan",repoUrl:"https://github.com/DigitalPhonetics/IMS-Toucan",countDownloads:'path:"embedding_gan.pt" OR path:"Vocoder.pt" OR path:"ToucanTTS.pt"'},"index-tts":{prettyLabel:"IndexTTS",repoName:"IndexTTS",repoUrl:"https://github.com/index-tts/index-tts",snippets:qbe,filter:!1},"infinite-you":{prettyLabel:"InfiniteYou",repoName:"InfiniteYou",repoUrl:"https://github.com/bytedance/InfiniteYou",filter:!1,countDownloads:'path:"infu_flux_v1.0/sim_stage1/image_proj_model.bin" OR path:"infu_flux_v1.0/aes_stage2/image_proj_model.bin"'},keras:{prettyLabel:"Keras",repoName:"Keras",repoUrl:"https://github.com/keras-team/keras",docsUrl:"https://huggingface.co/docs/hub/keras",snippets:Ube,filter:!0,countDownloads:'path:"config.json" OR path_extension:"keras"'},"tf-keras":{prettyLabel:"TF-Keras",repoName:"TF-Keras",repoUrl:"https://github.com/keras-team/tf-keras",docsUrl:"https://huggingface.co/docs/hub/tf-keras",snippets:Xbe,countDownloads:'path:"saved_model.pb"'},"keras-hub":{prettyLabel:"KerasHub",repoName:"KerasHub",repoUrl:"https://github.com/keras-team/keras-hub",docsUrl:"https://keras.io/keras_hub/",snippets:Kbe,filter:!0},"kimi-audio":{prettyLabel:"KimiAudio",repoName:"KimiAudio",repoUrl:"https://github.com/MoonshotAI/Kimi-Audio",snippets:Wbe,filter:!1},k2:{prettyLabel:"K2",repoName:"k2",repoUrl:"https://github.com/k2-fsa/k2"},"lightning-ir":{prettyLabel:"Lightning IR",repoName:"Lightning IR",repoUrl:"https://github.com/webis-de/lightning-ir",snippets:Gbe},"litert-lm":{prettyLabel:"LiteRT-LM",repoName:"LiteRT-LM",repoUrl:"https://github.com/google-ai-edge/LiteRT-LM",filter:!1,countDownloads:'path_extension:"litertlm"'},liveportrait:{prettyLabel:"LivePortrait",repoName:"LivePortrait",repoUrl:"https://github.com/KwaiVGI/LivePortrait",filter:!1,countDownloads:'path:"liveportrait/landmark.onnx"'},"llama-cpp-python":{prettyLabel:"llama-cpp-python",repoName:"llama-cpp-python",repoUrl:"https://github.com/abetlen/llama-cpp-python",snippets:Jbe},"mini-omni2":{prettyLabel:"Mini-Omni2",repoName:"Mini-Omni2",repoUrl:"https://github.com/gpt-omni/mini-omni2",countDownloads:'path:"model_config.yaml"'},mindspore:{prettyLabel:"MindSpore",repoName:"mindspore",repoUrl:"https://github.com/mindspore-ai/mindspore"},"magi-1":{prettyLabel:"MAGI-1",repoName:"MAGI-1",repoUrl:"https://github.com/SandAI-org/MAGI-1",countDownloads:'path:"ckpt/vae/config.json"'},"mamba-ssm":{prettyLabel:"MambaSSM",repoName:"MambaSSM",repoUrl:"https://github.com/state-spaces/mamba",filter:!1,snippets:Zbe},"mars5-tts":{prettyLabel:"MARS5-TTS",repoName:"MARS5-TTS",repoUrl:"https://github.com/Camb-ai/MARS5-TTS",filter:!1,countDownloads:'path:"mars5_ar.safetensors"',snippets:Qbe},matanyone:{prettyLabel:"MatAnyone",repoName:"MatAnyone",repoUrl:"https://github.com/pq-yang/MatAnyone",snippets:Ybe,filter:!1},"mesh-anything":{prettyLabel:"MeshAnything",repoName:"MeshAnything",repoUrl:"https://github.com/buaacyw/MeshAnything",filter:!1,countDownloads:'path:"MeshAnything_350m.pth"',snippets:eye},merlin:{prettyLabel:"Merlin",repoName:"Merlin",repoUrl:"https://github.com/StanfordMIMI/Merlin",filter:!1,countDownloads:'path_extension:"pt"'},medvae:{prettyLabel:"MedVAE",repoName:"MedVAE",repoUrl:"https://github.com/StanfordMIMI/MedVAE",filter:!1,countDownloads:'path_extension:"ckpt"'},mitie:{prettyLabel:"MITIE",repoName:"MITIE",repoUrl:"https://github.com/mit-nlp/MITIE",countDownloads:'path_filename:"total_word_feature_extractor"'},"ml-agents":{prettyLabel:"ml-agents",repoName:"ml-agents",repoUrl:"https://github.com/Unity-Technologies/ml-agents",docsUrl:"https://huggingface.co/docs/hub/ml-agents",snippets:zye,filter:!0,countDownloads:'path_extension:"onnx"'},mlx:{prettyLabel:"MLX",repoName:"MLX",repoUrl:"https://github.com/ml-explore/mlx-examples/tree/main",snippets:eve,filter:!0},"mlx-image":{prettyLabel:"mlx-image",repoName:"mlx-image",repoUrl:"https://github.com/riccardomusmeci/mlx-image",docsUrl:"https://huggingface.co/docs/hub/mlx-image",snippets:Yye,filter:!1,countDownloads:'path:"model.safetensors"'},"mlc-llm":{prettyLabel:"MLC-LLM",repoName:"MLC-LLM",repoUrl:"https://github.com/mlc-ai/mlc-llm",docsUrl:"https://llm.mlc.ai/docs/",filter:!1,countDownloads:'path:"mlc-chat-config.json"'},model2vec:{prettyLabel:"Model2Vec",repoName:"model2vec",repoUrl:"https://github.com/MinishLab/model2vec",snippets:tve,filter:!1},moshi:{prettyLabel:"Moshi",repoName:"Moshi",repoUrl:"https://github.com/kyutai-labs/moshi",filter:!1,countDownloads:'path:"tokenizer-e351c8d8-checkpoint125.safetensors"'},nemo:{prettyLabel:"NeMo",repoName:"NeMo",repoUrl:"https://github.com/NVIDIA/NeMo",snippets:rve,filter:!0,countDownloads:'path_extension:"nemo" OR path:"model_config.yaml"'},"open-oasis":{prettyLabel:"open-oasis",repoName:"open-oasis",repoUrl:"https://github.com/etched-ai/open-oasis",countDownloads:'path:"oasis500m.safetensors"'},open_clip:{prettyLabel:"OpenCLIP",repoName:"OpenCLIP",repoUrl:"https://github.com/mlfoundations/open_clip",snippets:tye,filter:!0,countDownloads:`path:"open_clip_model.safetensors"
			OR path:"model.safetensors"
			OR path:"open_clip_pytorch_model.bin"
			OR path:"pytorch_model.bin"`},"open-sora":{prettyLabel:"Open-Sora",repoName:"Open-Sora",repoUrl:"https://github.com/hpcaitech/Open-Sora",filter:!1,countDownloads:'path:"Open_Sora_v2.safetensors"'},outetts:{prettyLabel:"OuteTTS",repoName:"OuteTTS",repoUrl:"https://github.com/edwko/OuteTTS",snippets:nve,filter:!1},paddlenlp:{prettyLabel:"paddlenlp",repoName:"PaddleNLP",repoUrl:"https://github.com/PaddlePaddle/PaddleNLP",docsUrl:"https://huggingface.co/docs/hub/paddlenlp",snippets:rye,filter:!0,countDownloads:'path:"model_config.json"'},peft:{prettyLabel:"PEFT",repoName:"PEFT",repoUrl:"https://github.com/huggingface/peft",snippets:Nye,filter:!0,countDownloads:'path:"adapter_config.json"'},"perception-encoder":{prettyLabel:"PerceptionEncoder",repoName:"PerceptionModels",repoUrl:"https://github.com/facebookresearch/perception_models",filter:!1,snippets:nye,countDownloads:'path_extension:"pt"'},"phantom-wan":{prettyLabel:"Phantom",repoName:"Phantom",repoUrl:"https://github.com/Phantom-video/Phantom",snippets:iye,filter:!1,countDownloads:'path_extension:"pth"'},pxia:{prettyLabel:"pxia",repoName:"pxia",repoUrl:"https://github.com/not-lain/pxia",snippets:ive,filter:!1},"pyannote-audio":{prettyLabel:"pyannote.audio",repoName:"pyannote-audio",repoUrl:"https://github.com/pyannote/pyannote-audio",snippets:sye,filter:!0},"py-feat":{prettyLabel:"Py-Feat",repoName:"Py-Feat",repoUrl:"https://github.com/cosanlab/py-feat",docsUrl:"https://py-feat.org/",filter:!1},pythae:{prettyLabel:"pythae",repoName:"pythae",repoUrl:"https://github.com/clementchadebec/benchmark_VAE",snippets:ave,filter:!1},recurrentgemma:{prettyLabel:"RecurrentGemma",repoName:"recurrentgemma",repoUrl:"https://github.com/google-deepmind/recurrentgemma",filter:!1,countDownloads:'path:"tokenizer.model"'},relik:{prettyLabel:"Relik",repoName:"Relik",repoUrl:"https://github.com/SapienzaNLP/relik",snippets:uye,filter:!1},refiners:{prettyLabel:"Refiners",repoName:"Refiners",repoUrl:"https://github.com/finegrain-ai/refiners",docsUrl:"https://refine.rs/",filter:!1,countDownloads:'path:"model.safetensors"'},reverb:{prettyLabel:"Reverb",repoName:"Reverb",repoUrl:"https://github.com/revdotcom/reverb",filter:!1},saelens:{prettyLabel:"SAELens",repoName:"SAELens",repoUrl:"https://github.com/jbloomAus/SAELens",snippets:hye,filter:!1},sam2:{prettyLabel:"sam2",repoName:"sam2",repoUrl:"https://github.com/facebookresearch/segment-anything-2",filter:!1,snippets:Sye,countDownloads:'path_extension:"pt"'},"sample-factory":{prettyLabel:"sample-factory",repoName:"sample-factory",repoUrl:"https://github.com/alex-petrenko/sample-factory",docsUrl:"https://huggingface.co/docs/hub/sample-factory",snippets:Oye,filter:!0,countDownloads:'path:"cfg.json"'},sapiens:{prettyLabel:"sapiens",repoName:"sapiens",repoUrl:"https://github.com/facebookresearch/sapiens",filter:!1,countDownloads:'path_extension:"pt2" OR path_extension:"pth" OR path_extension:"onnx"'},seedvr:{prettyLabel:"SeedVR",repoName:"SeedVR",repoUrl:"https://github.com/ByteDance-Seed/SeedVR",filter:!1,countDownloads:'path_extension:"pth"'},"sentence-transformers":{prettyLabel:"sentence-transformers",repoName:"sentence-transformers",repoUrl:"https://github.com/UKPLab/sentence-transformers",docsUrl:"https://huggingface.co/docs/hub/sentence-transformers",snippets:Rye,filter:!0},setfit:{prettyLabel:"setfit",repoName:"setfit",repoUrl:"https://github.com/huggingface/setfit",docsUrl:"https://huggingface.co/docs/hub/setfit",snippets:Cye,filter:!0},sklearn:{prettyLabel:"Scikit-learn",repoName:"Scikit-learn",repoUrl:"https://github.com/scikit-learn/scikit-learn",snippets:yye,filter:!0,countDownloads:'path:"sklearn_model.joblib"'},spacy:{prettyLabel:"spaCy",repoName:"spaCy",repoUrl:"https://github.com/explosion/spaCy",docsUrl:"https://huggingface.co/docs/hub/spacy",snippets:Pye,filter:!0,countDownloads:'path_extension:"whl"'},"span-marker":{prettyLabel:"SpanMarker",repoName:"SpanMarkerNER",repoUrl:"https://github.com/tomaarsen/SpanMarkerNER",docsUrl:"https://huggingface.co/docs/hub/span_marker",snippets:jye,filter:!0},speechbrain:{prettyLabel:"speechbrain",repoName:"speechbrain",repoUrl:"https://github.com/speechbrain/speechbrain",docsUrl:"https://huggingface.co/docs/hub/speechbrain",snippets:Mye,filter:!0,countDownloads:'path:"hyperparams.yaml"'},"ssr-speech":{prettyLabel:"SSR-Speech",repoName:"SSR-Speech",repoUrl:"https://github.com/WangHelin1997/SSR-Speech",filter:!1,countDownloads:'path_extension:".pth"'},"stable-audio-tools":{prettyLabel:"Stable Audio Tools",repoName:"stable-audio-tools",repoUrl:"https://github.com/Stability-AI/stable-audio-tools.git",filter:!1,countDownloads:'path:"model.safetensors"',snippets:vye},"diffusion-single-file":{prettyLabel:"Diffusion Single File",repoName:"diffusion-single-file",repoUrl:"https://github.com/comfyanonymous/ComfyUI",filter:!1,countDownloads:'path_extension:"safetensors"'},"seed-story":{prettyLabel:"SEED-Story",repoName:"SEED-Story",repoUrl:"https://github.com/TencentARC/SEED-Story",filter:!1,countDownloads:'path:"cvlm_llama2_tokenizer/tokenizer.model"',snippets:mye},soloaudio:{prettyLabel:"SoloAudio",repoName:"SoloAudio",repoUrl:"https://github.com/WangHelin1997/SoloAudio",filter:!1,countDownloads:'path:"soloaudio_v2.pt"'},"stable-baselines3":{prettyLabel:"stable-baselines3",repoName:"stable-baselines3",repoUrl:"https://github.com/huggingface/huggingface_sb3",docsUrl:"https://huggingface.co/docs/hub/stable-baselines3",snippets:Bye,filter:!0,countDownloads:'path_extension:"zip"'},stanza:{prettyLabel:"Stanza",repoName:"stanza",repoUrl:"https://github.com/stanfordnlp/stanza",docsUrl:"https://huggingface.co/docs/hub/stanza",snippets:Tye,filter:!0,countDownloads:'path:"models/default.zip"'},swarmformer:{prettyLabel:"SwarmFormer",repoName:"SwarmFormer",repoUrl:"https://github.com/takara-ai/SwarmFormer",snippets:Gye,filter:!1},"f5-tts":{prettyLabel:"F5-TTS",repoName:"F5-TTS",repoUrl:"https://github.com/SWivid/F5-TTS",filter:!1,countDownloads:'path_extension:"safetensors" OR path_extension:"pt"'},genmo:{prettyLabel:"Genmo",repoName:"Genmo",repoUrl:"https://github.com/genmoai/models",filter:!1,countDownloads:'path:"vae_stats.json"'},tensorflowtts:{prettyLabel:"TensorFlowTTS",repoName:"TensorFlowTTS",repoUrl:"https://github.com/TensorSpeech/TensorFlowTTS",snippets:fye},tabpfn:{prettyLabel:"TabPFN",repoName:"TabPFN",repoUrl:"https://github.com/PriorLabs/TabPFN"},terratorch:{prettyLabel:"TerraTorch",repoName:"TerraTorch",repoUrl:"https://github.com/IBM/terratorch",docsUrl:"https://ibm.github.io/terratorch/",filter:!1,countDownloads:'path_extension:"pt"',snippets:Iye},"tic-clip":{prettyLabel:"TiC-CLIP",repoName:"TiC-CLIP",repoUrl:"https://github.com/apple/ml-tic-clip",filter:!1,countDownloads:'path_extension:"pt" AND path_prefix:"checkpoints/"'},timesfm:{prettyLabel:"TimesFM",repoName:"timesfm",repoUrl:"https://github.com/google-research/timesfm",filter:!1,countDownloads:'path:"checkpoints/checkpoint_1100000/state/checkpoint" OR path:"checkpoints/checkpoint_2150000/state/checkpoint" OR path_extension:"ckpt"'},timm:{prettyLabel:"timm",repoName:"pytorch-image-models",repoUrl:"https://github.com/rwightman/pytorch-image-models",docsUrl:"https://huggingface.co/docs/hub/timm",snippets:pye,filter:!0,countDownloads:'path:"pytorch_model.bin" OR path:"model.safetensors"'},tirex:{prettyLabel:"TiRex",repoName:"TiRex",repoUrl:"https://github.com/NX-AI/tirex",countDownloads:'path_extension:"ckpt"'},torchgeo:{prettyLabel:"TorchGeo",repoName:"TorchGeo",repoUrl:"https://github.com/microsoft/torchgeo",docsUrl:"https://torchgeo.readthedocs.io/",filter:!1,countDownloads:'path_extension:"pt" OR path_extension:"pth"'},transformers:{prettyLabel:"Transformers",repoName:"🤗/transformers",repoUrl:"https://github.com/huggingface/transformers",docsUrl:"https://huggingface.co/docs/hub/transformers",snippets:xye,filter:!0},"transformers.js":{prettyLabel:"Transformers.js",repoName:"transformers.js",repoUrl:"https://github.com/huggingface/transformers.js",docsUrl:"https://huggingface.co/docs/hub/transformers-js",snippets:Dye,filter:!0},trellis:{prettyLabel:"Trellis",repoName:"Trellis",repoUrl:"https://github.com/microsoft/TRELLIS",countDownloads:'path_extension:"safetensors"'},ultralytics:{prettyLabel:"ultralytics",repoName:"ultralytics",repoUrl:"https://github.com/ultralytics/ultralytics",docsUrl:"https://github.com/ultralytics/ultralytics",filter:!1,countDownloads:'path_extension:"pt"',snippets:BV},"uni-3dar":{prettyLabel:"Uni-3DAR",repoName:"Uni-3DAR",repoUrl:"https://github.com/dptech-corp/Uni-3DAR",docsUrl:"https://github.com/dptech-corp/Uni-3DAR",countDownloads:'path_extension:"pt"'},"unity-sentis":{prettyLabel:"unity-sentis",repoName:"unity-sentis",repoUrl:"https://github.com/Unity-Technologies/sentis-samples",snippets:Lye,filter:!0,countDownloads:'path_extension:"sentis"'},sana:{prettyLabel:"Sana",repoName:"Sana",repoUrl:"https://github.com/NVlabs/Sana",countDownloads:'path_extension:"pth"',snippets:Fye},"vfi-mamba":{prettyLabel:"VFIMamba",repoName:"VFIMamba",repoUrl:"https://github.com/MCG-NJU/VFIMamba",countDownloads:'path_extension:"pkl"',snippets:kye},voicecraft:{prettyLabel:"VoiceCraft",repoName:"VoiceCraft",repoUrl:"https://github.com/jasonppy/VoiceCraft",docsUrl:"https://github.com/jasonppy/VoiceCraft",snippets:Vye},vui:{prettyLabel:"Vui",repoName:"Vui",repoUrl:"https://github.com/vui-ai/vui",countDownloads:'path_extension:"pt"',snippets:Hye},wham:{prettyLabel:"WHAM",repoName:"wham",repoUrl:"https://huggingface.co/microsoft/wham",docsUrl:"https://huggingface.co/microsoft/wham/blob/main/README.md",countDownloads:'path_extension:"ckpt"'},whisperkit:{prettyLabel:"WhisperKit",repoName:"WhisperKit",repoUrl:"https://github.com/argmaxinc/WhisperKit",docsUrl:"https://github.com/argmaxinc/WhisperKit?tab=readme-ov-file#homebrew",snippets:dve,countDownloads:'path_filename:"model" AND path_extension:"mil" AND _exists_:"path_prefix"'},yolov10:{prettyLabel:"YOLOv10",repoName:"YOLOv10",repoUrl:"https://github.com/THU-MIG/yolov10",docsUrl:"https://github.com/THU-MIG/yolov10",countDownloads:'path_extension:"pt" OR path_extension:"safetensors"',snippets:BV},zonos:{prettyLabel:"Zonos",repoName:"Zonos",repoUrl:"https://github.com/Zyphra/Zonos",docsUrl:"https://github.com/Zyphra/Zonos",snippets:pve,filter:!1},"3dtopia-xl":{prettyLabel:"3DTopia-XL",repoName:"3DTopia-XL",repoUrl:"https://github.com/3DTopia/3DTopia-XL",filter:!1,countDownloads:'path:"model_vae_fp16.pt"',snippets:fve}};Object.entries(hve).filter(([r,e])=>e.filter).map(([r])=>r);var $e;(function(r){r[r.F32=0]="F32",r[r.F16=1]="F16",r[r.Q4_0=2]="Q4_0",r[r.Q4_1=3]="Q4_1",r[r.Q4_1_SOME_F16=4]="Q4_1_SOME_F16",r[r.Q4_2=5]="Q4_2",r[r.Q4_3=6]="Q4_3",r[r.Q8_0=7]="Q8_0",r[r.Q5_0=8]="Q5_0",r[r.Q5_1=9]="Q5_1",r[r.Q2_K=10]="Q2_K",r[r.Q3_K_S=11]="Q3_K_S",r[r.Q3_K_M=12]="Q3_K_M",r[r.Q3_K_L=13]="Q3_K_L",r[r.Q4_K_S=14]="Q4_K_S",r[r.Q4_K_M=15]="Q4_K_M",r[r.Q5_K_S=16]="Q5_K_S",r[r.Q5_K_M=17]="Q5_K_M",r[r.Q6_K=18]="Q6_K",r[r.IQ2_XXS=19]="IQ2_XXS",r[r.IQ2_XS=20]="IQ2_XS",r[r.Q2_K_S=21]="Q2_K_S",r[r.IQ3_XS=22]="IQ3_XS",r[r.IQ3_XXS=23]="IQ3_XXS",r[r.IQ1_S=24]="IQ1_S",r[r.IQ4_NL=25]="IQ4_NL",r[r.IQ3_S=26]="IQ3_S",r[r.IQ3_M=27]="IQ3_M",r[r.IQ2_S=28]="IQ2_S",r[r.IQ2_M=29]="IQ2_M",r[r.IQ4_XS=30]="IQ4_XS",r[r.IQ1_M=31]="IQ1_M",r[r.BF16=32]="BF16",r[r.Q4_0_4_4=33]="Q4_0_4_4",r[r.Q4_0_4_8=34]="Q4_0_4_8",r[r.Q4_0_8_8=35]="Q4_0_8_8",r[r.TQ1_0=36]="TQ1_0",r[r.TQ2_0=37]="TQ2_0",r[r.Q2_K_XL=1e3]="Q2_K_XL",r[r.Q3_K_XL=1001]="Q3_K_XL",r[r.Q4_K_XL=1002]="Q4_K_XL",r[r.Q5_K_XL=1003]="Q5_K_XL",r[r.Q6_K_XL=1004]="Q6_K_XL",r[r.Q8_K_XL=1005]="Q8_K_XL"})($e||($e={}));const mve=Object.values($e).filter(r=>typeof r=="string");new RegExp(`(?<quant>${mve.join("|")})(_(?<sizeVariation>[A-Z]+))?`);$e.F32,$e.BF16,$e.F16,$e.Q8_K_XL,$e.Q8_0,$e.Q6_K_XL,$e.Q6_K,$e.Q5_K_XL,$e.Q5_K_M,$e.Q5_K_S,$e.Q5_0,$e.Q5_1,$e.Q4_K_XL,$e.Q4_K_M,$e.Q4_K_S,$e.IQ4_NL,$e.IQ4_XS,$e.Q4_0_4_4,$e.Q4_0_4_8,$e.Q4_0_8_8,$e.Q4_1_SOME_F16,$e.Q4_0,$e.Q4_1,$e.Q4_2,$e.Q4_3,$e.Q3_K_XL,$e.Q3_K_L,$e.Q3_K_M,$e.Q3_K_S,$e.IQ3_M,$e.IQ3_S,$e.IQ3_XS,$e.IQ3_XXS,$e.Q2_K_XL,$e.Q2_K,$e.Q2_K_S,$e.IQ2_M,$e.IQ2_S,$e.IQ2_XS,$e.IQ2_XXS,$e.IQ1_S,$e.IQ1_M,$e.TQ1_0,$e.TQ2_0;var UV;(function(r){r[r.F32=0]="F32",r[r.F16=1]="F16",r[r.Q4_0=2]="Q4_0",r[r.Q4_1=3]="Q4_1",r[r.Q5_0=6]="Q5_0",r[r.Q5_1=7]="Q5_1",r[r.Q8_0=8]="Q8_0",r[r.Q8_1=9]="Q8_1",r[r.Q2_K=10]="Q2_K",r[r.Q3_K=11]="Q3_K",r[r.Q4_K=12]="Q4_K",r[r.Q5_K=13]="Q5_K",r[r.Q6_K=14]="Q6_K",r[r.Q8_K=15]="Q8_K",r[r.IQ2_XXS=16]="IQ2_XXS",r[r.IQ2_XS=17]="IQ2_XS",r[r.IQ3_XXS=18]="IQ3_XXS",r[r.IQ1_S=19]="IQ1_S",r[r.IQ4_NL=20]="IQ4_NL",r[r.IQ3_S=21]="IQ3_S",r[r.IQ2_S=22]="IQ2_S",r[r.IQ4_XS=23]="IQ4_XS",r[r.I8=24]="I8",r[r.I16=25]="I16",r[r.I32=26]="I32",r[r.I64=27]="I64",r[r.F64=28]="F64",r[r.IQ1_M=29]="IQ1_M",r[r.BF16=30]="BF16",r[r.TQ1_0=34]="TQ1_0",r[r.TQ2_0=35]="TQ2_0"})(UV||(UV={}));const gve={js:{fetch:{basic:`async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "application/json",
{% if billTo %}
				"X-HF-Bill-To": "{{ billTo }}",
{% endif %}			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
	const result = await response.json();
	return result;
}

query({ inputs: {{ providerInputs.asObj.inputs }} }).then((response) => {
    console.log(JSON.stringify(response));
});`,basicAudio:`async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "audio/flac",
{% if billTo %}
				"X-HF-Bill-To": "{{ billTo }}",
{% endif %}			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
	const result = await response.json();
	return result;
}

query({ inputs: {{ providerInputs.asObj.inputs }} }).then((response) => {
    console.log(JSON.stringify(response));
});`,basicImage:`async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "image/jpeg",
{% if billTo %}
				"X-HF-Bill-To": "{{ billTo }}",
{% endif %}			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
	const result = await response.json();
	return result;
}

query({ inputs: {{ providerInputs.asObj.inputs }} }).then((response) => {
    console.log(JSON.stringify(response));
});`,textToAudio:`{% if model.library_name == "transformers" %}
async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "application/json",
{% if billTo %}
				"X-HF-Bill-To": "{{ billTo }}",
{% endif %}			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
	const result = await response.blob();
    return result;
}

query({ inputs: {{ providerInputs.asObj.inputs }} }).then((response) => {
    // Returns a byte object of the Audio wavform. Use it directly!
});
{% else %}
async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "application/json",
			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
    const result = await response.json();
    return result;
}

query({ inputs: {{ providerInputs.asObj.inputs }} }).then((response) => {
    console.log(JSON.stringify(response));
});
{% endif %} `,textToImage:`async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "application/json",
{% if billTo %}
				"X-HF-Bill-To": "{{ billTo }}",
{% endif %}			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
	const result = await response.blob();
	return result;
}


query({ {{ providerInputs.asTsString }} }).then((response) => {
    // Use image
});`,textToSpeech:`{% if model.library_name == "transformers" %}
async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "application/json",
{% if billTo %}
				"X-HF-Bill-To": "{{ billTo }}",
{% endif %}			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
	const result = await response.blob();
    return result;
}

query({ text: {{ inputs.asObj.inputs }} }).then((response) => {
    // Returns a byte object of the Audio wavform. Use it directly!
});
{% else %}
async function query(data) {
	const response = await fetch(
		"{{ fullUrl }}",
		{
			headers: {
				Authorization: "{{ authorizationHeader }}",
				"Content-Type": "application/json",
			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
    const result = await response.json();
    return result;
}

query({ text: {{ inputs.asObj.inputs }} }).then((response) => {
    console.log(JSON.stringify(response));
});
{% endif %} `,zeroShotClassification:`async function query(data) {
    const response = await fetch(
		"{{ fullUrl }}",
        {
            headers: {
				Authorization: "{{ authorizationHeader }}",
                "Content-Type": "application/json",
{% if billTo %}
                "X-HF-Bill-To": "{{ billTo }}",
{% endif %}         },
            method: "POST",
            body: JSON.stringify(data),
        }
    );
    const result = await response.json();
    return result;
}

query({
    inputs: {{ providerInputs.asObj.inputs }},
    parameters: { candidate_labels: ["refund", "legal", "faq"] }
}).then((response) => {
    console.log(JSON.stringify(response));
});`},"huggingface.js":{basic:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

const output = await client.{{ methodName }}({
{% if endpointUrl %}
    endpointUrl: "{{ endpointUrl }}",
{% endif %}
	model: "{{ model.id }}",
	inputs: {{ inputs.asObj.inputs }},
	provider: "{{ provider }}",
}{% if billTo %}, {
	billTo: "{{ billTo }}",
}{% endif %});

console.log(output);`,basicAudio:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

const data = fs.readFileSync({{inputs.asObj.inputs}});

const output = await client.{{ methodName }}({
{% if endpointUrl %}
    endpointUrl: "{{ endpointUrl }}",
{% endif %}
	data,
	model: "{{ model.id }}",
	provider: "{{ provider }}",
}{% if billTo %}, {
	billTo: "{{ billTo }}",
}{% endif %});

console.log(output);`,basicImage:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

const data = fs.readFileSync({{inputs.asObj.inputs}});

const output = await client.{{ methodName }}({
{% if endpointUrl %}
    endpointUrl: "{{ endpointUrl }}",
{% endif %}
	data,
	model: "{{ model.id }}",
	provider: "{{ provider }}",
}{% if billTo %}, {
	billTo: "{{ billTo }}",
}{% endif %});

console.log(output);`,conversational:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

const chatCompletion = await client.chatCompletion({
{% if endpointUrl %}
    endpointUrl: "{{ endpointUrl }}",
{% endif %}
    provider: "{{ provider }}",
    model: "{{ model.id }}",
{{ inputs.asTsString }}
}{% if billTo %}, {
    billTo: "{{ billTo }}",
}{% endif %});

console.log(chatCompletion.choices[0].message);`,conversationalStream:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

let out = "";

const stream = client.chatCompletionStream({
{% if endpointUrl %}
    endpointUrl: "{{ endpointUrl }}",
{% endif %}
    provider: "{{ provider }}",
    model: "{{ model.id }}",
{{ inputs.asTsString }}
}{% if billTo %}, {
    billTo: "{{ billTo }}",
}{% endif %});

for await (const chunk of stream) {
	if (chunk.choices && chunk.choices.length > 0) {
		const newContent = chunk.choices[0].delta.content;
		out += newContent;
		console.log(newContent);
	}
}`,textToImage:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

const image = await client.textToImage({
{% if endpointUrl %}
    endpointUrl: "{{ endpointUrl }}",
{% endif %}
    provider: "{{ provider }}",
    model: "{{ model.id }}",
	inputs: {{ inputs.asObj.inputs }},
	parameters: { num_inference_steps: 5 },
}{% if billTo %}, {
    billTo: "{{ billTo }}",
}{% endif %});
/// Use the generated image (it's a Blob)`,textToSpeech:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

const audio = await client.textToSpeech({
{% if endpointUrl %}
    endpointUrl: "{{ endpointUrl }}",
{% endif %}
    provider: "{{ provider }}",
    model: "{{ model.id }}",
	inputs: {{ inputs.asObj.inputs }},
}{% if billTo %}, {
    billTo: "{{ billTo }}",
}{% endif %});
// Use the generated audio (it's a Blob)`,textToVideo:`import { InferenceClient } from "@huggingface/inference";

const client = new InferenceClient("{{ accessToken }}");

const video = await client.textToVideo({
{% if endpointUrl %}
    endpointUrl: "{{ endpointUrl }}",
{% endif %}
    provider: "{{ provider }}",
    model: "{{ model.id }}",
	inputs: {{ inputs.asObj.inputs }},
}{% if billTo %}, {
    billTo: "{{ billTo }}",
}{% endif %});
// Use the generated video (it's a Blob)`},openai:{conversational:`import { OpenAI } from "openai";

const client = new OpenAI({
	baseURL: "{{ baseUrl }}",
	apiKey: "{{ accessToken }}",
{% if billTo %}
	defaultHeaders: {
		"X-HF-Bill-To": "{{ billTo }}" 
	}
{% endif %}
});

const chatCompletion = await client.chat.completions.create({
	model: "{{ providerModelId }}",
{{ inputs.asTsString }}
});

console.log(chatCompletion.choices[0].message);`,conversationalStream:`import { OpenAI } from "openai";

const client = new OpenAI({
	baseURL: "{{ baseUrl }}",
	apiKey: "{{ accessToken }}",
{% if billTo %}
    defaultHeaders: {
		"X-HF-Bill-To": "{{ billTo }}" 
	}
{% endif %}
});

const stream = await client.chat.completions.create({
    model: "{{ providerModelId }}",
{{ inputs.asTsString }}
    stream: true,
});

for await (const chunk of stream) {
    process.stdout.write(chunk.choices[0]?.delta?.content || "");
}`}},python:{fal_client:{textToImage:`{% if provider == "fal-ai" %}
import fal_client

{% if providerInputs.asObj.loras is defined and providerInputs.asObj.loras != none %}
result = fal_client.subscribe(
    "{{ providerModelId }}",
    arguments={
        "prompt": {{ inputs.asObj.inputs }},
        "loras":{{ providerInputs.asObj.loras | tojson }},
    },
)
{% else %}
result = fal_client.subscribe(
    "{{ providerModelId }}",
    arguments={
        "prompt": {{ inputs.asObj.inputs }},
    },
)
{% endif %} 
print(result)
{% endif %} `},huggingface_hub:{basic:`result = client.{{ methodName }}(
    {{ inputs.asObj.inputs }},
    model="{{ model.id }}",
)`,basicAudio:'output = client.{{ methodName }}({{ inputs.asObj.inputs }}, model="{{ model.id }}")',basicImage:'output = client.{{ methodName }}({{ inputs.asObj.inputs }}, model="{{ model.id }}")',conversational:`completion = client.chat.completions.create(
    model="{{ model.id }}",
{{ inputs.asPythonString }}
)

print(completion.choices[0].message) `,conversationalStream:`stream = client.chat.completions.create(
    model="{{ model.id }}",
{{ inputs.asPythonString }}
    stream=True,
)

for chunk in stream:
    print(chunk.choices[0].delta.content, end="") `,documentQuestionAnswering:`output = client.document_question_answering(
    "{{ inputs.asObj.image }}",
    question="{{ inputs.asObj.question }}",
    model="{{ model.id }}",
) `,imageToImage:`# output is a PIL.Image object
image = client.image_to_image(
    "{{ inputs.asObj.inputs }}",
    prompt="{{ inputs.asObj.parameters.prompt }}",
    model="{{ model.id }}",
) `,importInferenceClient:`from huggingface_hub import InferenceClient

client = InferenceClient(
{% if endpointUrl %}
    base_url="{{ baseUrl }}",
{% endif %}
    provider="{{ provider }}",
    api_key="{{ accessToken }}",
{% if billTo %}
    bill_to="{{ billTo }}",
{% endif %}
)`,questionAnswering:`answer = client.question_answering(
    question="{{ inputs.asObj.question }}",
    context="{{ inputs.asObj.context }}",
    model="{{ model.id }}",
) `,tableQuestionAnswering:`answer = client.table_question_answering(
    query="{{ inputs.asObj.query }}",
    table={{ inputs.asObj.table }},
    model="{{ model.id }}",
) `,textToImage:`# output is a PIL.Image object
image = client.text_to_image(
    {{ inputs.asObj.inputs }},
    model="{{ model.id }}",
) `,textToSpeech:`# audio is returned as bytes
audio = client.text_to_speech(
    {{ inputs.asObj.inputs }},
    model="{{ model.id }}",
) 
`,textToVideo:`video = client.text_to_video(
    {{ inputs.asObj.inputs }},
    model="{{ model.id }}",
) `},openai:{conversational:`from openai import OpenAI

client = OpenAI(
    base_url="{{ baseUrl }}",
    api_key="{{ accessToken }}",
{% if billTo %}
    default_headers={
        "X-HF-Bill-To": "{{ billTo }}"
    }
{% endif %}
)

completion = client.chat.completions.create(
    model="{{ providerModelId }}",
{{ inputs.asPythonString }}
)

print(completion.choices[0].message) `,conversationalStream:`from openai import OpenAI

client = OpenAI(
    base_url="{{ baseUrl }}",
    api_key="{{ accessToken }}",
{% if billTo %}
    default_headers={
        "X-HF-Bill-To": "{{ billTo }}"
    }
{% endif %}
)

stream = client.chat.completions.create(
    model="{{ providerModelId }}",
{{ inputs.asPythonString }}
    stream=True,
)

for chunk in stream:
    print(chunk.choices[0].delta.content, end="")`},requests:{basic:`def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.json()

output = query({
    "inputs": {{ providerInputs.asObj.inputs }},
}) `,basicAudio:`def query(filename):
    with open(filename, "rb") as f:
        data = f.read()
    response = requests.post(API_URL, headers={"Content-Type": "audio/flac", **headers}, data=data)
    return response.json()

output = query({{ providerInputs.asObj.inputs }})`,basicImage:`def query(filename):
    with open(filename, "rb") as f:
        data = f.read()
    response = requests.post(API_URL, headers={"Content-Type": "image/jpeg", **headers}, data=data)
    return response.json()

output = query({{ providerInputs.asObj.inputs }})`,conversational:`def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.json()

response = query({
{{ providerInputs.asJsonString }}
})

print(response["choices"][0]["message"])`,conversationalStream:`def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload, stream=True)
    for line in response.iter_lines():
        if not line.startswith(b"data:"):
            continue
        if line.strip() == b"data: [DONE]":
            return
        yield json.loads(line.decode("utf-8").lstrip("data:").rstrip("/n"))

chunks = query({
{{ providerInputs.asJsonString }},
    "stream": True,
})

for chunk in chunks:
    print(chunk["choices"][0]["delta"]["content"], end="")`,documentQuestionAnswering:`def query(payload):
    with open(payload["image"], "rb") as f:
        img = f.read()
        payload["image"] = base64.b64encode(img).decode("utf-8")
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.json()

output = query({
    "inputs": {
        "image": "{{ inputs.asObj.image }}",
        "question": "{{ inputs.asObj.question }}",
    },
}) `,imageToImage:`def query(payload):
    with open(payload["inputs"], "rb") as f:
        img = f.read()
        payload["inputs"] = base64.b64encode(img).decode("utf-8")
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.content

image_bytes = query({
{{ providerInputs.asJsonString }}
})

# You can access the image with PIL.Image for example
import io
from PIL import Image
image = Image.open(io.BytesIO(image_bytes)) `,importRequests:`{% if importBase64 %}
import base64
{% endif %}
{% if importJson %}
import json
{% endif %}
import requests

API_URL = "{{ fullUrl }}"
headers = {
    "Authorization": "{{ authorizationHeader }}",
{% if billTo %}
    "X-HF-Bill-To": "{{ billTo }}"
{% endif %}
}`,tabular:`def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.content

response = query({
    "inputs": {
        "data": {{ providerInputs.asObj.inputs }}
    },
}) `,textToAudio:`{% if model.library_name == "transformers" %}
def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.content

audio_bytes = query({
    "inputs": {{ inputs.asObj.inputs }},
})
# You can access the audio with IPython.display for example
from IPython.display import Audio
Audio(audio_bytes)
{% else %}
def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.json()

audio, sampling_rate = query({
    "inputs": {{ inputs.asObj.inputs }},
})
# You can access the audio with IPython.display for example
from IPython.display import Audio
Audio(audio, rate=sampling_rate)
{% endif %} `,textToImage:`{% if provider == "hf-inference" %}
def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.content

image_bytes = query({
    "inputs": {{ providerInputs.asObj.inputs }},
})

# You can access the image with PIL.Image for example
import io
from PIL import Image
image = Image.open(io.BytesIO(image_bytes))
{% endif %}`,textToSpeech:`{% if model.library_name == "transformers" %}
def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.content

audio_bytes = query({
    "text": {{ inputs.asObj.inputs }},
})
# You can access the audio with IPython.display for example
from IPython.display import Audio
Audio(audio_bytes)
{% else %}
def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.json()

audio, sampling_rate = query({
    "text": {{ inputs.asObj.inputs }},
})
# You can access the audio with IPython.display for example
from IPython.display import Audio
Audio(audio, rate=sampling_rate)
{% endif %} `,zeroShotClassification:`def query(payload):
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.json()

output = query({
    "inputs": {{ providerInputs.asObj.inputs }},
    "parameters": {"candidate_labels": ["refund", "legal", "faq"]},
}) `,zeroShotImageClassification:`def query(data):
    with open(data["image_path"], "rb") as f:
        img = f.read()
    payload={
        "parameters": data["parameters"],
        "inputs": base64.b64encode(img).decode("utf-8")
    }
    response = requests.post(API_URL, headers=headers, json=payload)
    return response.json()

output = query({
    "image_path": {{ providerInputs.asObj.inputs }},
    "parameters": {"candidate_labels": ["cat", "dog", "llama"]},
}) `}},sh:{curl:{basic:`curl {{ fullUrl }} \\
    -X POST \\
    -H 'Authorization: {{ authorizationHeader }}' \\
    -H 'Content-Type: application/json' \\
{% if billTo %}
    -H 'X-HF-Bill-To: {{ billTo }}' \\
{% endif %}
    -d '{
{{ providerInputs.asCurlString }}
    }'`,basicAudio:`curl {{ fullUrl }} \\
    -X POST \\
    -H 'Authorization: {{ authorizationHeader }}' \\
    -H 'Content-Type: audio/flac' \\
{% if billTo %}
    -H 'X-HF-Bill-To: {{ billTo }}' \\
{% endif %}
    --data-binary @{{ providerInputs.asObj.inputs }}`,basicImage:`curl {{ fullUrl }} \\
    -X POST \\
    -H 'Authorization: {{ authorizationHeader }}' \\
    -H 'Content-Type: image/jpeg' \\
{% if billTo %}
    -H 'X-HF-Bill-To: {{ billTo }}' \\
{% endif %}
    --data-binary @{{ providerInputs.asObj.inputs }}`,conversational:`curl {{ fullUrl }} \\
    -H 'Authorization: {{ authorizationHeader }}' \\
    -H 'Content-Type: application/json' \\
{% if billTo %}
    -H 'X-HF-Bill-To: {{ billTo }}' \\
{% endif %}
    -d '{
{{ providerInputs.asCurlString }},
        "stream": false
    }'`,conversationalStream:`curl {{ fullUrl }} \\
    -H 'Authorization: {{ authorizationHeader }}' \\
    -H 'Content-Type: application/json' \\
{% if billTo %}
    -H 'X-HF-Bill-To: {{ billTo }}' \\
{% endif %}
    -d '{
{{ providerInputs.asCurlString }},
        "stream": true
    }'`,zeroShotClassification:`curl {{ fullUrl }} \\
    -X POST \\
    -d '{"inputs": {{ providerInputs.asObj.inputs }}, "parameters": {"candidate_labels": ["refund", "legal", "faq"]}}' \\
    -H 'Content-Type: application/json' \\
    -H 'Authorization: {{ authorizationHeader }}'
{% if billTo %} \\
    -H 'X-HF-Bill-To: {{ billTo }}'
{% endif %}`}}},mW=(r,e,t)=>{var i,a;const n=(a=(i=gve[r])==null?void 0:i[e])==null?void 0:a[t];if(!n)throw new Error(`Template not found: ${r}/${e}/${t}`);return o=>new Dge(n).render({...o})};mW("python","huggingface_hub","importInferenceClient");mW("python","requests","importRequests");function _ve(){const r=document.getElementById("apiKey").value,e=document.getElementById("aiModel").value;let t,n,i=!1,a=!1;switch(e){case"OpenAI":t=new MP({model:"gpt-4o-mini",temperature:0,apiKey:r}),n=new nC({model:"text-embedding-3-small",apiKey:r});break;case"Anthropic":t=new Ete({model:"claude-3-5-sonnet-20240620",apiKey:r}),i=!0;break;case"Azure":t=new Ree({model:"gpt-4o",temperature:0,azureOpenAIApiKey:r}),n=new Cee({azureOpenAIApiEmbeddingsDeploymentName:"text-embedding-ada-002"});break;case"Google":t=new vre({model:"gemini-1.5-pro",temperature:0,apiKey:r}),i=!0;break;case"Cohere":t=new $pe({model:"command-r-plus",temperature:0,apiKey:r}),n=new Npe({model:"embed-english-v3.0"});break;case"FireworksAI":t=new Rte({model:"accounts/fireworks/models/llama-v3p1-70b-instruct",temperature:0,apiKey:r}),i=!0;break;case"Groq":t=new fhe({model:"mixtral-8x7b-32768",temperature:0,apiKey:r}),i=!0;break;case"MistralAI":t=new mhe({model:"codestral-latest",temperature:0,apiKey:r}),i=!0;break;case"TogetherAI":t=new xte({model:"meta-llama/Meta-Llama-3.1-8B-Instruct-Turbo",maxTokens:256,apiKey:r}),i=!0;break;case"HuggingFace":i=!0,a=!0;break;default:console.log("Invalid LLM model selected")}if(i){const o=document.getElementById("otherApiKey").value;n=new nC({model:"text-embedding-3-small",apiKey:o})}return{llm:t,embeddings:n,huggingface:a}}async function bve(r,e,t){try{const n=t.replace("{context}",r).replace("{query}",e);return(await Ume({accessToken:document.getElementById("apiKey").value,model:document.getElementById("huggingFaceModel").value,inputs:n,parameters:{max_new_tokens:50}})).generated_text}catch(n){return console.error("Error:",n),"Error generating response with HuggingFace"}}let Xu=null;async function yve(){const{llm:r,embeddings:e,huggingface:t}=_ve(),n=new UC(e),a=await new v_({chunkSize:1e3,chunkOverlap:100}).splitDocuments(Xu);console.log("Splitted Documents:",a),await n.addDocuments(a);const o=document.getElementById("userQuery").value,s=await n.similaritySearch(o,3);console.log("Top matches:",s);const u=s.map((c,d)=>`Source ${d+1}: ${c.metadata.source}
${c.pageContent}`).join(`

`);console.log("Context:",u),console.log("Query:",o);let l="";if(t)l=await bve(u,o,T1);else{const c=Fh.fromTemplate(T1);l=(await Nr.from([c,r]).invoke({context:u,query:o})).content}return document.getElementById("response").innerText=l,l}async function vve(){const r=document.getElementById("sourceType").value,e=document.getElementById("githubToken").value,t=document.getElementById("sourceUrl").value;if(r==="feedAPI")console.log("Pulling data from API feed..."),Xu=await rQ(Xu),console.log("Contents:",Xu);else try{Xu=await eQ(t,r,e),console.log("Contents:",Xu)}catch(n){console.log("Error loading documents:",n)}}function E1(r){Xu=r}function wve(){return console.log(Xu),Xu}function Sve(r){const n=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("item"),i=[];for(let a=0;a<n.length;a++){const o=n[a],s=o.querySelector("link")?o.querySelector("link").textContent:"No link",u=o.querySelector("description")?o.querySelector("description").textContent:"No description",l=o.querySelector("pubDate")?o.querySelector("pubDate").textContent:"No date",c=o.querySelector("guid")?o.querySelector("guid").textContent:"No GUID";i.push({link:s,description:u,pubDate:l,guid:c})}console.log("Parsed RSS Items:",i),E1(i)}function Ove(r){console.log("Making CORS request to:",r),fetch("https://cors-anywhere.herokuapp.com/"+r).then(t=>(console.log("CORS Response Status:",t.status),t.text())).then(t=>{if(console.log("CORS Response Data:",t),t.startsWith("<?xml"))console.log("Received XML data, parsing..."),Sve(t);else try{const n=JSON.parse(t);E1(n)}catch(n){console.error("Error parsing JSON:",n)}}).catch(t=>{console.error("CORS request failed:",t)})}function Eve(r){console.log("CORS not needed URL:",r),fetch(r).then(e=>e.json()).then(e=>{console.log("Fetched data:",e),E1(e)}).catch(e=>{console.error("Data fetch failed:",e)})}function Rve(){document.getElementById("corsLink").style.display="block"}function Cve(){document.getElementById("corsLink").style.display="none"}function zV(){const r=document.getElementById("aiModel").value,e=document.getElementById("otherApiKeyContainer"),t=["Anthropic","Google","FireworksAI","Groq","MistralAI","TogetherAI","HuggingFace"].includes(r);e.style.display=t?"block":"none"}function gW(){const r=`https://sheets.googleapis.com/v4/spreadsheets/${LV}/values/${FV}?key=${kV}`;fetch(r).then(e=>e.json()).then(e=>{console.log("Success:",e),Pve(e.values)}).catch(e=>{console.error("Error:",e)})}function Pve(r){const e=document.getElementById("apiFeeds");e.innerHTML="";const t=document.createElement("option");t.value="none",t.textContent="Select a feed.......",e.appendChild(t),r.forEach(i=>{const a=document.createElement("option");a.value=i[0],a.textContent=i[1],e.appendChild(a)});const n=localStorage.getItem("selectedFeed");n&&(e.value=n,R1(n))}function jve(r){return new Promise((e,t)=>{const n=`https://sheets.googleapis.com/v4/spreadsheets/${LV}/values/${FV}?key=${kV}`;fetch(n).then(i=>i.json()).then(i=>{const a=i.values.find(o=>o[0]===r);a?e({url:a[9],cors:a[8]}):t("Feed not found")}).catch(i=>t(i))})}function R1(r){console.log(`Selected feed: ${r}`),document.getElementById("resultJson").innerHTML="",document.getElementById("resultFull").innerHTML="",localStorage.setItem("selectedFeed",r),jve(r).then(e=>{if(e){const{url:t,cors:n}=e;console.log(`Feed URL: ${t}, CORS Needed: ${n}`),n==="TRUE"?(console.log("CORS Needed"),Rve(),Ove(t)):(console.log("No CORS Needed"),Cve(),Eve(t))}}).catch(e=>{console.error("Error fetching feed details:",e)})}document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("submitButton"),e=document.getElementById("aiModel"),t=document.getElementById("contextBtn"),n=document.getElementById("apiFeeds");t.addEventListener("click",wve),e.addEventListener("change",zV),n.addEventListener("change",i=>R1(i.target.value)),zV(),r.addEventListener("click",async()=>{await yve()}),gW()});document.addEventListener("click",function(r){r.target.id==="corsLink"&&r.target.tagName==="A"&&alert("CORS passthrough enabled. Please refresh the page.")});const C1=document.getElementById("sourceUrl");function P1(r){try{const e=new URL(r);return e.hostname==="github.com"||e.hostname.endsWith(".github.com")}catch{return!1}}function _W(r){console.log(`Processing GitHub URL: ${r}`),vve()}C1.addEventListener("input",function(){const r=this.value.trim();if(r===""){this.classList.remove("border-red-500","border-green-500");return}P1(r)?(this.classList.remove("border-red-500"),this.classList.add("border-green-500")):(this.classList.remove("border-green-500"),this.classList.add("border-red-500"))});C1.addEventListener("blur",function(){const r=this.value.trim();P1(r)&&_W(r)});C1.addEventListener("keydown",function(r){if(r.key==="Enter"){const e=this.value.trim();P1(e)&&_W(e)}});console.log("Application initialized");window.updateFeed=R1;document.addEventListener("DOMContentLoaded",async()=>{gW()});export{hN as A,xR as B,pN as E,UP as F,en as P,Cse as S,Ywe as a,dC as b,q3 as c,iue as d,e0e as e,Hse as f,a0e as g,aue as h,Qwe as i,dO as j,$8 as k,Rse as l,P8 as m,Mue as n,phe as o,n0e as p,t0e as q,Ol as r,Gse as s,Wse as t,r0e as u};
